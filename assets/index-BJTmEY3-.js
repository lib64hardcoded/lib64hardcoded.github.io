(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=a(s);fetch(s.href,n)}})();var gv=Object.defineProperty,fv=(t,e,a)=>e in t?gv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,q=(t,e,a)=>fv(t,typeof e!="symbol"?e+"":e,a);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();var bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ah(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function xv(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var a=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};a.prototype=e.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(a,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),a}var A0={exports:{}},ic={},L0={exports:{}},ge={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Zi=Symbol.for("react.element"),bv=Symbol.for("react.portal"),yv=Symbol.for("react.fragment"),vv=Symbol.for("react.strict_mode"),wv=Symbol.for("react.profiler"),kv=Symbol.for("react.provider"),jv=Symbol.for("react.context"),_v=Symbol.for("react.forward_ref"),Nv=Symbol.for("react.suspense"),Sv=Symbol.for("react.memo"),Cv=Symbol.for("react.lazy"),Mp=Symbol.iterator;function Ev(t){return t===null||typeof t!="object"?null:(t=Mp&&t[Mp]||t["@@iterator"],typeof t=="function"?t:null)}var R0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F0=Object.assign,$0={};function jn(t,e,a){this.props=t,this.context=e,this.refs=$0,this.updater=a||R0}jn.prototype.isReactComponent={};jn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function U0(){}U0.prototype=jn.prototype;function rh(t,e,a){this.props=t,this.context=e,this.refs=$0,this.updater=a||R0}var sh=rh.prototype=new U0;sh.constructor=rh;F0(sh,jn.prototype);sh.isPureReactComponent=!0;var Dp=Array.isArray,B0=Object.prototype.hasOwnProperty,nh={current:null},q0={key:!0,ref:!0,__self:!0,__source:!0};function V0(t,e,a){var r,s={},n=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(n=""+e.key),e)B0.call(e,r)&&!q0.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=a;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Zi,type:t,key:n,ref:o,props:s,_owner:nh.current}}function Mv(t,e){return{$$typeof:Zi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ih(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zi}function Dv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(a){return e[a]})}var Tp=/\/+/g;function Ac(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Dv(""+t.key):e.toString(36)}function tl(t,e,a,r,s){var n=typeof t;(n==="undefined"||n==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(n){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zi:case bv:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ac(o,0):r,Dp(s)?(a="",t!=null&&(a=t.replace(Tp,"$&/")+"/"),tl(s,e,a,"",function(d){return d})):s!=null&&(ih(s)&&(s=Mv(s,a+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Tp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Dp(t))for(var l=0;l<t.length;l++){n=t[l];var c=r+Ac(n,l);o+=tl(n,e,a,c,s)}else if(c=Ev(t),typeof c=="function")for(t=c.call(t),l=0;!(n=t.next()).done;)n=n.value,c=r+Ac(n,l++),o+=tl(n,e,a,c,s);else if(n==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function go(t,e,a){if(t==null)return t;var r=[],s=0;return tl(t,r,"","",function(n){return e.call(a,n,s++)}),r}function Tv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(a){(t._status===0||t._status===-1)&&(t._status=1,t._result=a)},function(a){(t._status===0||t._status===-1)&&(t._status=2,t._result=a)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},al={transition:null},Ov={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:al,ReactCurrentOwner:nh};function H0(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:go,forEach:function(t,e,a){go(t,function(){e.apply(this,arguments)},a)},count:function(t){var e=0;return go(t,function(){e++}),e},toArray:function(t){return go(t,function(e){return e})||[]},only:function(t){if(!ih(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=jn;ge.Fragment=yv;ge.Profiler=wv;ge.PureComponent=rh;ge.StrictMode=vv;ge.Suspense=Nv;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ov;ge.act=H0;ge.cloneElement=function(t,e,a){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=F0({},t.props),s=t.key,n=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(n=e.ref,o=nh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)B0.call(e,c)&&!q0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=a;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Zi,type:t.type,key:s,ref:n,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:jv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kv,_context:t},t.Consumer=t};ge.createElement=V0;ge.createFactory=function(t){var e=V0.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:_v,render:t}};ge.isValidElement=ih;ge.lazy=function(t){return{$$typeof:Cv,_payload:{_status:-1,_result:t},_init:Tv}};ge.memo=function(t,e){return{$$typeof:Sv,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=al.transition;al.transition={};try{t()}finally{al.transition=e}};ge.unstable_act=H0;ge.useCallback=function(t,e){return Nt.current.useCallback(t,e)};ge.useContext=function(t){return Nt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Nt.current.useEffect(t,e)};ge.useId=function(){return Nt.current.useId()};ge.useImperativeHandle=function(t,e,a){return Nt.current.useImperativeHandle(t,e,a)};ge.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Nt.current.useMemo(t,e)};ge.useReducer=function(t,e,a){return Nt.current.useReducer(t,e,a)};ge.useRef=function(t){return Nt.current.useRef(t)};ge.useState=function(t){return Nt.current.useState(t)};ge.useSyncExternalStore=function(t,e,a){return Nt.current.useSyncExternalStore(t,e,a)};ge.useTransition=function(){return Nt.current.useTransition()};ge.version="18.3.1";L0.exports=ge;var T=L0.exports;const oh=ah(T);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Pv=T,Iv=Symbol.for("react.element"),zv=Symbol.for("react.fragment"),Av=Object.prototype.hasOwnProperty,Lv=Pv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rv={key:!0,ref:!0,__self:!0,__source:!0};function W0(t,e,a){var r,s={},n=null,o=null;a!==void 0&&(n=""+a),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Av.call(e,r)&&!Rv.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Iv,type:t,key:n,ref:o,props:s,_owner:Lv.current}}ic.Fragment=zv;ic.jsx=W0;ic.jsxs=W0;A0.exports=ic;var i=A0.exports,G0={exports:{}},Jt={},J0={exports:{}},Y0={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(t){function e(F,B){var X=F.length;F.push(B);e:for(;0<X;){var U=X-1>>>1,Y=F[U];if(0<s(Y,B))F[U]=B,F[X]=Y,X=U;else break e}}function a(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var B=F[0],X=F.pop();if(X!==B){F[0]=X;e:for(var U=0,Y=F.length,E=Y>>>1;U<E;){var P=2*(U+1)-1,R=F[P],O=P+1,M=F[O];if(0>s(R,X))O<Y&&0>s(M,R)?(F[U]=M,F[O]=X,U=O):(F[U]=R,F[P]=X,U=P);else if(O<Y&&0>s(M,X))F[U]=M,F[O]=X,U=O;else break e}}return B}function s(F,B){var X=F.sortIndex-B.sortIndex;return X!==0?X:F.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var n=performance;t.unstable_now=function(){return n.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,v=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(F){for(var B=a(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=F)r(d),B.sortIndex=B.expirationTime,e(c,B);else break;B=a(d)}}function w(F){if(y=!1,x(F),!v)if(a(c)!==null)v=!0,J(S);else{var B=a(d);B!==null&&D(w,B.startTime-F)}}function S(F,B){v=!1,y&&(y=!1,g(b),b=-1),m=!0;var X=p;try{for(x(B),h=a(c);h!==null&&(!(h.expirationTime>B)||F&&!I());){var U=h.callback;if(typeof U=="function"){h.callback=null,p=h.priorityLevel;var Y=U(h.expirationTime<=B);B=t.unstable_now(),typeof Y=="function"?h.callback=Y:h===a(c)&&r(c),x(B)}else r(c);h=a(c)}if(h!==null)var E=!0;else{var P=a(d);P!==null&&D(w,P.startTime-B),E=!1}return E}finally{h=null,p=X,m=!1}}var N=!1,_=null,b=-1,j=5,A=-1;function I(){return!(t.unstable_now()-A<j)}function z(){if(_!==null){var F=t.unstable_now();A=F;var B=!0;try{B=_(!0,F)}finally{B?$():(N=!1,_=null)}}else N=!1}var $;if(typeof f=="function")$=function(){f(z)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,L=W.port2;W.port1.onmessage=z,$=function(){L.postMessage(null)}}else $=function(){k(z,0)};function J(F){_=F,N||(N=!0,$())}function D(F,B){b=k(function(){F(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,J(S))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var X=p;p=B;try{return F()}finally{p=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,B){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var X=p;p=F;try{return B()}finally{p=X}},t.unstable_scheduleCallback=function(F,B,X){var U=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?U+X:U):X=U,F){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=X+Y,F={id:u++,callback:B,priorityLevel:F,startTime:X,expirationTime:Y,sortIndex:-1},X>U?(F.sortIndex=X,e(d,F),a(c)===null&&F===a(d)&&(y?(g(b),b=-1):y=!0,D(w,X-U))):(F.sortIndex=Y,e(c,F),v||m||(v=!0,J(S))),F},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(F){var B=p;return function(){var X=p;p=B;try{return F.apply(this,arguments)}finally{p=X}}}})(Y0);J0.exports=Y0;var Fv=J0.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var $v=T,Wt=Fv;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)e+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K0=new Set,_i={};function ks(t,e){dn(t,e),dn(t+"Capture",e)}function dn(t,e){for(_i[t]=e,t=0;t<e.length;t++)K0.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Td=Object.prototype.hasOwnProperty,Uv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Op={},Pp={};function Bv(t){return Td.call(Pp,t)?!0:Td.call(Op,t)?!1:Uv.test(t)?Pp[t]=!0:(Op[t]=!0,!1)}function qv(t,e,a,r){if(a!==null&&a.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Vv(t,e,a,r){if(e===null||typeof e>"u"||qv(t,e,a,r))return!0;if(r)return!1;if(a!==null)switch(a.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,a,r,s,n,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=a,this.propertyName=t,this.type=e,this.sanitizeURL=n,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var lh=/[\-:]([a-z])/g;function ch(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lh,ch);ut[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lh,ch);ut[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lh,ch);ut[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function dh(t,e,a,r){var s=ut.hasOwnProperty(e)?ut[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Vv(e,a,s,r)&&(a=null),r||s===null?Bv(e)&&(a===null?t.removeAttribute(e):t.setAttribute(e,""+a)):s.mustUseProperty?t[s.propertyName]=a===null?s.type===3?!1:"":a:(e=s.attributeName,r=s.attributeNamespace,a===null?t.removeAttribute(e):(s=s.type,a=s===3||s===4&&a===!0?"":""+a,r?t.setAttributeNS(r,e,a):t.setAttribute(e,a))))}var ir=$v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fo=Symbol.for("react.element"),Us=Symbol.for("react.portal"),Bs=Symbol.for("react.fragment"),uh=Symbol.for("react.strict_mode"),Od=Symbol.for("react.profiler"),X0=Symbol.for("react.provider"),Q0=Symbol.for("react.context"),hh=Symbol.for("react.forward_ref"),Pd=Symbol.for("react.suspense"),Id=Symbol.for("react.suspense_list"),ph=Symbol.for("react.memo"),mr=Symbol.for("react.lazy"),Z0=Symbol.for("react.offscreen"),Ip=Symbol.iterator;function On(t){return t===null||typeof t!="object"?null:(t=Ip&&t[Ip]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,Lc;function Yn(t){if(Lc===void 0)try{throw Error()}catch(a){var e=a.stack.trim().match(/\n( *(at )?)/);Lc=e&&e[1]||""}return`
`+Lc+t}var Rc=!1;function Fc(t,e){if(!t||Rc)return"";Rc=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),n=r.stack.split(`
`),o=s.length-1,l=n.length-1;1<=o&&0<=l&&s[o]!==n[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==n[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==n[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Rc=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?Yn(t):""}function Hv(t){switch(t.tag){case 5:return Yn(t.type);case 16:return Yn("Lazy");case 13:return Yn("Suspense");case 19:return Yn("SuspenseList");case 0:case 2:case 15:return t=Fc(t.type,!1),t;case 11:return t=Fc(t.type.render,!1),t;case 1:return t=Fc(t.type,!0),t;default:return""}}function zd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bs:return"Fragment";case Us:return"Portal";case Od:return"Profiler";case uh:return"StrictMode";case Pd:return"Suspense";case Id:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Q0:return(t.displayName||"Context")+".Consumer";case X0:return(t._context.displayName||"Context")+".Provider";case hh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ph:return e=t.displayName||null,e!==null?e:zd(t.type)||"Memo";case mr:e=t._payload,t=t._init;try{return zd(t(e))}catch{}}return null}function Wv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zd(e);case 8:return e===uh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ef(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Gv(t){var e=ef(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var s=a.get,n=a.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,n.call(this,o)}}),Object.defineProperty(t,e,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xo(t){t._valueTracker||(t._valueTracker=Gv(t))}function tf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var a=e.getValue(),r="";return t&&(r=ef(t)?t.checked?"true":"false":t.value),t=r,t!==a?(e.setValue(t),!0):!1}function yl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ad(t,e){var a=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??t._wrapperState.initialChecked})}function zp(t,e){var a=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;a=Ar(e.value!=null?e.value:a),t._wrapperState={initialChecked:r,initialValue:a,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function af(t,e){e=e.checked,e!=null&&dh(t,"checked",e,!1)}function Ld(t,e){af(t,e);var a=Ar(e.value),r=e.type;if(a!=null)r==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rd(t,e.type,a):e.hasOwnProperty("defaultValue")&&Rd(t,e.type,Ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ap(t,e,a){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,a||e===t.value||(t.value=e),t.defaultValue=e}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function Rd(t,e,a){(e!=="number"||yl(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}var Kn=Array.isArray;function Zs(t,e,a,r){if(t=t.options,e){e={};for(var s=0;s<a.length;s++)e["$"+a[s]]=!0;for(a=0;a<t.length;a++)s=e.hasOwnProperty("$"+t[a].value),t[a].selected!==s&&(t[a].selected=s),s&&r&&(t[a].defaultSelected=!0)}else{for(a=""+Ar(a),e=null,s=0;s<t.length;s++){if(t[s].value===a){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lp(t,e){var a=e.value;if(a==null){if(a=e.children,e=e.defaultValue,a!=null){if(e!=null)throw Error(Z(92));if(Kn(a)){if(1<a.length)throw Error(Z(93));a=a[0]}e=a}e==null&&(e=""),a=e}t._wrapperState={initialValue:Ar(a)}}function rf(t,e){var a=Ar(e.value),r=Ar(e.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),e.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),r!=null&&(t.defaultValue=""+r)}function Rp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $d(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bo,nf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,a,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,a,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bo=bo||document.createElement("div"),bo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ni(t,e){if(e){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=e;return}}t.textContent=e}var ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jv=["Webkit","ms","Moz","O"];Object.keys(ni).forEach(function(t){Jv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ni[e]=ni[t]})});function of(t,e,a){return e==null||typeof e=="boolean"||e===""?"":a||typeof e!="number"||e===0||ni.hasOwnProperty(t)&&ni[t]?(""+e).trim():e+"px"}function lf(t,e){t=t.style;for(var a in e)if(e.hasOwnProperty(a)){var r=a.indexOf("--")===0,s=of(a,e[a],r);a==="float"&&(a="cssFloat"),r?t.setProperty(a,s):t[a]=s}}var Yv=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ud(t,e){if(e){if(Yv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function Bd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=null;function mh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vd=null,en=null,tn=null;function Fp(t){if(t=ao(t)){if(typeof Vd!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=uc(e),Vd(t.stateNode,t.type,e))}}function cf(t){en?tn?tn.push(t):tn=[t]:en=t}function df(){if(en){var t=en,e=tn;if(tn=en=null,Fp(t),e)for(t=0;t<e.length;t++)Fp(e[t])}}function uf(t,e){return t(e)}function hf(){}var $c=!1;function pf(t,e,a){if($c)return t(e,a);$c=!0;try{return uf(t,e,a)}finally{$c=!1,(en!==null||tn!==null)&&(hf(),df())}}function Si(t,e){var a=t.stateNode;if(a===null)return null;var r=uc(a);if(r===null)return null;a=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(Z(231,e,typeof a));return a}var Hd=!1;if(er)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){Hd=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{Hd=!1}function Kv(t,e,a,r,s,n,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(a,d)}catch(u){this.onError(u)}}var ii=!1,vl=null,wl=!1,Wd=null,Xv={onError:function(t){ii=!0,vl=t}};function Qv(t,e,a,r,s,n,o,l,c){ii=!1,vl=null,Kv.apply(Xv,arguments)}function Zv(t,e,a,r,s,n,o,l,c){if(Qv.apply(this,arguments),ii){if(ii){var d=vl;ii=!1,vl=null}else throw Error(Z(198));wl||(wl=!0,Wd=d)}}function js(t){var e=t,a=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(a=e.return),t=e.return;while(t)}return e.tag===3?a:null}function mf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $p(t){if(js(t)!==t)throw Error(Z(188))}function ew(t){var e=t.alternate;if(!e){if(e=js(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var a=t,r=e;;){var s=a.return;if(s===null)break;var n=s.alternate;if(n===null){if(r=s.return,r!==null){a=r;continue}break}if(s.child===n.child){for(n=s.child;n;){if(n===a)return $p(s),t;if(n===r)return $p(s),e;n=n.sibling}throw Error(Z(188))}if(a.return!==r.return)a=s,r=n;else{for(var o=!1,l=s.child;l;){if(l===a){o=!0,a=s,r=n;break}if(l===r){o=!0,r=s,a=n;break}l=l.sibling}if(!o){for(l=n.child;l;){if(l===a){o=!0,a=n,r=s;break}if(l===r){o=!0,r=n,a=s;break}l=l.sibling}if(!o)throw Error(Z(189))}}if(a.alternate!==r)throw Error(Z(190))}if(a.tag!==3)throw Error(Z(188));return a.stateNode.current===a?t:e}function gf(t){return t=ew(t),t!==null?ff(t):null}function ff(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ff(t);if(e!==null)return e;t=t.sibling}return null}var xf=Wt.unstable_scheduleCallback,Up=Wt.unstable_cancelCallback,tw=Wt.unstable_shouldYield,aw=Wt.unstable_requestPaint,We=Wt.unstable_now,rw=Wt.unstable_getCurrentPriorityLevel,gh=Wt.unstable_ImmediatePriority,bf=Wt.unstable_UserBlockingPriority,kl=Wt.unstable_NormalPriority,sw=Wt.unstable_LowPriority,yf=Wt.unstable_IdlePriority,oc=null,Oa=null;function nw(t){if(Oa&&typeof Oa.onCommitFiberRoot=="function")try{Oa.onCommitFiberRoot(oc,t,void 0,(t.current.flags&128)===128)}catch{}}var xa=Math.clz32?Math.clz32:lw,iw=Math.log,ow=Math.LN2;function lw(t){return t>>>=0,t===0?32:31-(iw(t)/ow|0)|0}var yo=64,vo=4194304;function Xn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jl(t,e){var a=t.pendingLanes;if(a===0)return 0;var r=0,s=t.suspendedLanes,n=t.pingedLanes,o=a&268435455;if(o!==0){var l=o&~s;l!==0?r=Xn(l):(n&=o,n!==0&&(r=Xn(n)))}else o=a&~s,o!==0?r=Xn(o):n!==0&&(r=Xn(n));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===16&&(n&4194240)!==0))return e;if(r&4&&(r|=a&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)a=31-xa(e),s=1<<a,r|=t[a],e&=~s;return r}function cw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dw(t,e){for(var a=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,n=t.pendingLanes;0<n;){var o=31-xa(n),l=1<<o,c=s[o];c===-1?(!(l&a)||l&r)&&(s[o]=cw(l,e)):c<=e&&(t.expiredLanes|=l),n&=~l}}function Gd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vf(){var t=yo;return yo<<=1,!(yo&4194240)&&(yo=64),t}function Uc(t){for(var e=[],a=0;31>a;a++)e.push(t);return e}function eo(t,e,a){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xa(e),t[e]=a}function uw(t,e){var a=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<a;){var s=31-xa(a),n=1<<s;e[s]=0,r[s]=-1,t[s]=-1,a&=~n}}function fh(t,e){var a=t.entangledLanes|=e;for(t=t.entanglements;a;){var r=31-xa(a),s=1<<r;s&e|t[r]&e&&(t[r]|=e),a&=~s}}var Ne=0;function wf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kf,xh,jf,_f,Nf,Jd=!1,wo=[],Nr=null,Sr=null,Cr=null,Ci=new Map,Ei=new Map,xr=[],hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bp(t,e){switch(t){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":Ci.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ei.delete(e.pointerId)}}function In(t,e,a,r,s,n){return t===null||t.nativeEvent!==n?(t={blockedOn:e,domEventName:a,eventSystemFlags:r,nativeEvent:n,targetContainers:[s]},e!==null&&(e=ao(e),e!==null&&xh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function pw(t,e,a,r,s){switch(e){case"focusin":return Nr=In(Nr,t,e,a,r,s),!0;case"dragenter":return Sr=In(Sr,t,e,a,r,s),!0;case"mouseover":return Cr=In(Cr,t,e,a,r,s),!0;case"pointerover":var n=s.pointerId;return Ci.set(n,In(Ci.get(n)||null,t,e,a,r,s)),!0;case"gotpointercapture":return n=s.pointerId,Ei.set(n,In(Ei.get(n)||null,t,e,a,r,s)),!0}return!1}function Sf(t){var e=ss(t.target);if(e!==null){var a=js(e);if(a!==null){if(e=a.tag,e===13){if(e=mf(a),e!==null){t.blockedOn=e,Nf(t.priority,function(){jf(a)});return}}else if(e===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var a=Yd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(a===null){a=t.nativeEvent;var r=new a.constructor(a.type,a);qd=r,a.target.dispatchEvent(r),qd=null}else return e=ao(a),e!==null&&xh(e),t.blockedOn=a,!1;e.shift()}return!0}function qp(t,e,a){rl(t)&&a.delete(e)}function mw(){Jd=!1,Nr!==null&&rl(Nr)&&(Nr=null),Sr!==null&&rl(Sr)&&(Sr=null),Cr!==null&&rl(Cr)&&(Cr=null),Ci.forEach(qp),Ei.forEach(qp)}function zn(t,e){t.blockedOn===e&&(t.blockedOn=null,Jd||(Jd=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,mw)))}function Mi(t){function e(s){return zn(s,t)}if(0<wo.length){zn(wo[0],t);for(var a=1;a<wo.length;a++){var r=wo[a];r.blockedOn===t&&(r.blockedOn=null)}}for(Nr!==null&&zn(Nr,t),Sr!==null&&zn(Sr,t),Cr!==null&&zn(Cr,t),Ci.forEach(e),Ei.forEach(e),a=0;a<xr.length;a++)r=xr[a],r.blockedOn===t&&(r.blockedOn=null);for(;0<xr.length&&(a=xr[0],a.blockedOn===null);)Sf(a),a.blockedOn===null&&xr.shift()}var an=ir.ReactCurrentBatchConfig,_l=!0;function gw(t,e,a,r){var s=Ne,n=an.transition;an.transition=null;try{Ne=1,bh(t,e,a,r)}finally{Ne=s,an.transition=n}}function fw(t,e,a,r){var s=Ne,n=an.transition;an.transition=null;try{Ne=4,bh(t,e,a,r)}finally{Ne=s,an.transition=n}}function bh(t,e,a,r){if(_l){var s=Yd(t,e,a,r);if(s===null)Xc(t,e,r,Nl,a),Bp(t,r);else if(pw(s,t,e,a,r))r.stopPropagation();else if(Bp(t,r),e&4&&-1<hw.indexOf(t)){for(;s!==null;){var n=ao(s);if(n!==null&&kf(n),n=Yd(t,e,a,r),n===null&&Xc(t,e,r,Nl,a),n===s)break;s=n}s!==null&&r.stopPropagation()}else Xc(t,e,r,null,a)}}var Nl=null;function Yd(t,e,a,r){if(Nl=null,t=mh(r),t=ss(t),t!==null)if(e=js(t),e===null)t=null;else if(a=e.tag,a===13){if(t=mf(e),t!==null)return t;t=null}else if(a===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nl=t,null}function Cf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rw()){case gh:return 1;case bf:return 4;case kl:case sw:return 16;case yf:return 536870912;default:return 16}default:return 16}}var vr=null,yh=null,sl=null;function Ef(){if(sl)return sl;var t,e=yh,a=e.length,r,s="value"in vr?vr.value:vr.textContent,n=s.length;for(t=0;t<a&&e[t]===s[t];t++);var o=a-t;for(r=1;r<=o&&e[a-r]===s[n-r];r++);return sl=s.slice(t,1<r?1-r:void 0)}function nl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ko(){return!0}function Vp(){return!1}function Yt(t){function e(a,r,s,n,o){this._reactName=a,this._targetInst=s,this.type=r,this.nativeEvent=n,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(a=t[l],this[l]=a?a(n):n[l]);return this.isDefaultPrevented=(n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1)?ko:Vp,this.isPropagationStopped=Vp,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ko)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ko)},persist:function(){},isPersistent:ko}),e}var _n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vh=Yt(_n),to=Be({},_n,{view:0,detail:0}),xw=Yt(to),Bc,qc,An,lc=Be({},to,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==An&&(An&&t.type==="mousemove"?(Bc=t.screenX-An.screenX,qc=t.screenY-An.screenY):qc=Bc=0,An=t),Bc)},movementY:function(t){return"movementY"in t?t.movementY:qc}}),Hp=Yt(lc),bw=Be({},lc,{dataTransfer:0}),yw=Yt(bw),vw=Be({},to,{relatedTarget:0}),Vc=Yt(vw),ww=Be({},_n,{animationName:0,elapsedTime:0,pseudoElement:0}),kw=Yt(ww),jw=Be({},_n,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_w=Yt(jw),Nw=Be({},_n,{data:0}),Wp=Yt(Nw),Sw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ew={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ew[t])?!!e[t]:!1}function wh(){return Mw}var Dw=Be({},to,{key:function(t){if(t.key){var e=Sw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wh,charCode:function(t){return t.type==="keypress"?nl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Tw=Yt(Dw),Ow=Be({},lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gp=Yt(Ow),Pw=Be({},to,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wh}),Iw=Yt(Pw),zw=Be({},_n,{propertyName:0,elapsedTime:0,pseudoElement:0}),Aw=Yt(zw),Lw=Be({},lc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rw=Yt(Lw),Fw=[9,13,27,32],kh=er&&"CompositionEvent"in window,oi=null;er&&"documentMode"in document&&(oi=document.documentMode);var $w=er&&"TextEvent"in window&&!oi,Mf=er&&(!kh||oi&&8<oi&&11>=oi),Jp=" ",Yp=!1;function Df(t,e){switch(t){case"keyup":return Fw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qs=!1;function Uw(t,e){switch(t){case"compositionend":return Tf(e);case"keypress":return e.which!==32?null:(Yp=!0,Jp);case"textInput":return t=e.data,t===Jp&&Yp?null:t;default:return null}}function Bw(t,e){if(qs)return t==="compositionend"||!kh&&Df(t,e)?(t=Ef(),sl=yh=vr=null,qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Mf&&e.locale!=="ko"?null:e.data;default:return null}}var qw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qw[t.type]:e==="textarea"}function Of(t,e,a,r){cf(r),e=Sl(e,"onChange"),0<e.length&&(a=new vh("onChange","change",null,a,r),t.push({event:a,listeners:e}))}var li=null,Di=null;function Vw(t){qf(t,0)}function cc(t){var e=Ws(t);if(tf(e))return t}function Hw(t,e){if(t==="change")return e}var Pf=!1;if(er){var Hc;if(er){var Wc="oninput"in document;if(!Wc){var Xp=document.createElement("div");Xp.setAttribute("oninput","return;"),Wc=typeof Xp.oninput=="function"}Hc=Wc}else Hc=!1;Pf=Hc&&(!document.documentMode||9<document.documentMode)}function Qp(){li&&(li.detachEvent("onpropertychange",If),Di=li=null)}function If(t){if(t.propertyName==="value"&&cc(Di)){var e=[];Of(e,Di,t,mh(t)),pf(Vw,e)}}function Ww(t,e,a){t==="focusin"?(Qp(),li=e,Di=a,li.attachEvent("onpropertychange",If)):t==="focusout"&&Qp()}function Gw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cc(Di)}function Jw(t,e){if(t==="click")return cc(e)}function Yw(t,e){if(t==="input"||t==="change")return cc(e)}function Kw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wa=typeof Object.is=="function"?Object.is:Kw;function Ti(t,e){if(wa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var a=Object.keys(t),r=Object.keys(e);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var s=a[r];if(!Td.call(e,s)||!wa(t[s],e[s]))return!1}return!0}function Zp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function em(t,e){var a=Zp(t);t=0;for(var r;a;){if(a.nodeType===3){if(r=t+a.textContent.length,t<=e&&r>=e)return{node:a,offset:e-t};t=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Zp(a)}}function zf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Af(){for(var t=window,e=yl();e instanceof t.HTMLIFrameElement;){try{var a=typeof e.contentWindow.location.href=="string"}catch{a=!1}if(a)t=e.contentWindow;else break;e=yl(t.document)}return e}function jh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Xw(t){var e=Af(),a=t.focusedElem,r=t.selectionRange;if(e!==a&&a&&a.ownerDocument&&zf(a.ownerDocument.documentElement,a)){if(r!==null&&jh(a)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in a)a.selectionStart=e,a.selectionEnd=Math.min(t,a.value.length);else if(t=(e=a.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=a.textContent.length,n=Math.min(r.start,s);r=r.end===void 0?n:Math.min(r.end,s),!t.extend&&n>r&&(s=r,r=n,n=s),s=em(a,n);var o=em(a,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),n>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=a;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<e.length;a++)t=e[a],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Qw=er&&"documentMode"in document&&11>=document.documentMode,Vs=null,Kd=null,ci=null,Xd=!1;function tm(t,e,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Xd||Vs==null||Vs!==yl(r)||(r=Vs,"selectionStart"in r&&jh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ci&&Ti(ci,r)||(ci=r,r=Sl(Kd,"onSelect"),0<r.length&&(e=new vh("onSelect","select",null,e,a),t.push({event:e,listeners:r}),e.target=Vs)))}function jo(t,e){var a={};return a[t.toLowerCase()]=e.toLowerCase(),a["Webkit"+t]="webkit"+e,a["Moz"+t]="moz"+e,a}var Hs={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionend:jo("Transition","TransitionEnd")},Gc={},Lf={};er&&(Lf=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function dc(t){if(Gc[t])return Gc[t];if(!Hs[t])return t;var e=Hs[t],a;for(a in e)if(e.hasOwnProperty(a)&&a in Lf)return Gc[t]=e[a];return t}var Rf=dc("animationend"),Ff=dc("animationiteration"),$f=dc("animationstart"),Uf=dc("transitionend"),Bf=new Map,am="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(t,e){Bf.set(t,e),ks(e,[t])}for(var Jc=0;Jc<am.length;Jc++){var Yc=am[Jc],Zw=Yc.toLowerCase(),e1=Yc[0].toUpperCase()+Yc.slice(1);Fr(Zw,"on"+e1)}Fr(Rf,"onAnimationEnd");Fr(Ff,"onAnimationIteration");Fr($f,"onAnimationStart");Fr("dblclick","onDoubleClick");Fr("focusin","onFocus");Fr("focusout","onBlur");Fr(Uf,"onTransitionEnd");dn("onMouseEnter",["mouseout","mouseover"]);dn("onMouseLeave",["mouseout","mouseover"]);dn("onPointerEnter",["pointerout","pointerover"]);dn("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qn));function rm(t,e,a){var r=t.type||"unknown-event";t.currentTarget=a,Zv(r,e,void 0,t),t.currentTarget=null}function qf(t,e){e=(e&4)!==0;for(var a=0;a<t.length;a++){var r=t[a],s=r.event;r=r.listeners;e:{var n=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==n&&s.isPropagationStopped())break e;rm(s,l,d),n=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==n&&s.isPropagationStopped())break e;rm(s,l,d),n=c}}}if(wl)throw t=Wd,wl=!1,Wd=null,t}function De(t,e){var a=e[au];a===void 0&&(a=e[au]=new Set);var r=t+"__bubble";a.has(r)||(Vf(e,t,2,!1),a.add(r))}function Kc(t,e,a){var r=0;e&&(r|=4),Vf(a,t,r,e)}var _o="_reactListening"+Math.random().toString(36).slice(2);function Oi(t){if(!t[_o]){t[_o]=!0,K0.forEach(function(a){a!=="selectionchange"&&(t1.has(a)||Kc(a,!1,t),Kc(a,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_o]||(e[_o]=!0,Kc("selectionchange",!1,e))}}function Vf(t,e,a,r){switch(Cf(e)){case 1:var s=gw;break;case 4:s=fw;break;default:s=bh}a=s.bind(null,e,a,t),s=void 0,!Hd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,a,{capture:!0,passive:s}):t.addEventListener(e,a,!0):s!==void 0?t.addEventListener(e,a,{passive:s}):t.addEventListener(e,a,!1)}function Xc(t,e,a,r,s){var n=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ss(l),o===null)return;if(c=o.tag,c===5||c===6){r=n=o;continue e}l=l.parentNode}}r=r.return}pf(function(){var d=n,u=mh(a),h=[];e:{var p=Bf.get(t);if(p!==void 0){var m=vh,v=t;switch(t){case"keypress":if(nl(a)===0)break e;case"keydown":case"keyup":m=Tw;break;case"focusin":v="focus",m=Vc;break;case"focusout":v="blur",m=Vc;break;case"beforeblur":case"afterblur":m=Vc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=yw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Iw;break;case Rf:case Ff:case $f:m=kw;break;case Uf:m=Aw;break;case"scroll":m=xw;break;case"wheel":m=Rw;break;case"copy":case"cut":case"paste":m=_w;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Gp}var y=(e&4)!==0,k=!y&&t==="scroll",g=y?p!==null?p+"Capture":null:p;y=[];for(var f=d,x;f!==null;){x=f;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,g!==null&&(w=Si(f,g),w!=null&&y.push(Pi(f,w,x)))),k)break;f=f.return}0<y.length&&(p=new m(p,v,null,a,u),h.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&a!==qd&&(v=a.relatedTarget||a.fromElement)&&(ss(v)||v[tr]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=a.relatedTarget||a.toElement,m=d,v=v?ss(v):null,v!==null&&(k=js(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=d),m!==v)){if(y=Hp,w="onMouseLeave",g="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(y=Gp,w="onPointerLeave",g="onPointerEnter",f="pointer"),k=m==null?p:Ws(m),x=v==null?p:Ws(v),p=new y(w,f+"leave",m,a,u),p.target=k,p.relatedTarget=x,w=null,ss(u)===d&&(y=new y(g,f+"enter",v,a,u),y.target=x,y.relatedTarget=k,w=y),k=w,m&&v)t:{for(y=m,g=v,f=0,x=y;x;x=Os(x))f++;for(x=0,w=g;w;w=Os(w))x++;for(;0<f-x;)y=Os(y),f--;for(;0<x-f;)g=Os(g),x--;for(;f--;){if(y===g||g!==null&&y===g.alternate)break t;y=Os(y),g=Os(g)}y=null}else y=null;m!==null&&sm(h,p,m,y,!1),v!==null&&k!==null&&sm(h,k,v,y,!0)}}e:{if(p=d?Ws(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=Hw;else if(Kp(p))if(Pf)S=Yw;else{S=Gw;var N=Ww}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=Jw);if(S&&(S=S(t,d))){Of(h,S,a,u);break e}N&&N(t,p,d),t==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&Rd(p,"number",p.value)}switch(N=d?Ws(d):window,t){case"focusin":(Kp(N)||N.contentEditable==="true")&&(Vs=N,Kd=d,ci=null);break;case"focusout":ci=Kd=Vs=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,tm(h,a,u);break;case"selectionchange":if(Qw)break;case"keydown":case"keyup":tm(h,a,u)}var _;if(kh)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qs?Df(t,a)&&(b="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(b="onCompositionStart");b&&(Mf&&a.locale!=="ko"&&(qs||b!=="onCompositionStart"?b==="onCompositionEnd"&&qs&&(_=Ef()):(vr=u,yh="value"in vr?vr.value:vr.textContent,qs=!0)),N=Sl(d,b),0<N.length&&(b=new Wp(b,t,null,a,u),h.push({event:b,listeners:N}),_?b.data=_:(_=Tf(a),_!==null&&(b.data=_)))),(_=$w?Uw(t,a):Bw(t,a))&&(d=Sl(d,"onBeforeInput"),0<d.length&&(u=new Wp("onBeforeInput","beforeinput",null,a,u),h.push({event:u,listeners:d}),u.data=_))}qf(h,e)})}function Pi(t,e,a){return{instance:t,listener:e,currentTarget:a}}function Sl(t,e){for(var a=e+"Capture",r=[];t!==null;){var s=t,n=s.stateNode;s.tag===5&&n!==null&&(s=n,n=Si(t,a),n!=null&&r.unshift(Pi(t,n,s)),n=Si(t,e),n!=null&&r.push(Pi(t,n,s))),t=t.return}return r}function Os(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sm(t,e,a,r,s){for(var n=e._reactName,o=[];a!==null&&a!==r;){var l=a,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Si(a,n),c!=null&&o.unshift(Pi(a,c,l))):s||(c=Si(a,n),c!=null&&o.push(Pi(a,c,l)))),a=a.return}o.length!==0&&t.push({event:e,listeners:o})}var a1=/\r\n?/g,r1=/\u0000|\uFFFD/g;function nm(t){return(typeof t=="string"?t:""+t).replace(a1,`
`).replace(r1,"")}function No(t,e,a){if(e=nm(e),nm(t)!==e&&a)throw Error(Z(425))}function Cl(){}var Qd=null,Zd=null;function eu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tu=typeof setTimeout=="function"?setTimeout:void 0,s1=typeof clearTimeout=="function"?clearTimeout:void 0,im=typeof Promise=="function"?Promise:void 0,n1=typeof queueMicrotask=="function"?queueMicrotask:typeof im<"u"?function(t){return im.resolve(null).then(t).catch(i1)}:tu;function i1(t){setTimeout(function(){throw t})}function Qc(t,e){var a=e,r=0;do{var s=a.nextSibling;if(t.removeChild(a),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(r===0){t.removeChild(s),Mi(e);return}r--}else a!=="$"&&a!=="$?"&&a!=="$!"||r++;a=s}while(a);Mi(e)}function Er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function om(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(e===0)return t;e--}else a==="/$"&&e++}t=t.previousSibling}return null}var Nn=Math.random().toString(36).slice(2),Ma="__reactFiber$"+Nn,Ii="__reactProps$"+Nn,tr="__reactContainer$"+Nn,au="__reactEvents$"+Nn,o1="__reactListeners$"+Nn,l1="__reactHandles$"+Nn;function ss(t){var e=t[Ma];if(e)return e;for(var a=t.parentNode;a;){if(e=a[tr]||a[Ma]){if(a=e.alternate,e.child!==null||a!==null&&a.child!==null)for(t=om(t);t!==null;){if(a=t[Ma])return a;t=om(t)}return e}t=a,a=t.parentNode}return null}function ao(t){return t=t[Ma]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function uc(t){return t[Ii]||null}var ru=[],Gs=-1;function $r(t){return{current:t}}function Pe(t){0>Gs||(t.current=ru[Gs],ru[Gs]=null,Gs--)}function Me(t,e){Gs++,ru[Gs]=t.current,t.current=e}var Lr={},wt=$r(Lr),zt=$r(!1),ps=Lr;function un(t,e){var a=t.type.contextTypes;if(!a)return Lr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},n;for(n in a)s[n]=e[n];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function At(t){return t=t.childContextTypes,t!=null}function El(){Pe(zt),Pe(wt)}function lm(t,e,a){if(wt.current!==Lr)throw Error(Z(168));Me(wt,e),Me(zt,a)}function Hf(t,e,a){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return a;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Z(108,Wv(t)||"Unknown",s));return Be({},a,r)}function Ml(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Lr,ps=wt.current,Me(wt,t),Me(zt,zt.current),!0}function cm(t,e,a){var r=t.stateNode;if(!r)throw Error(Z(169));a?(t=Hf(t,e,ps),r.__reactInternalMemoizedMergedChildContext=t,Pe(zt),Pe(wt),Me(wt,t)):Pe(zt),Me(zt,a)}var Ha=null,hc=!1,Zc=!1;function Wf(t){Ha===null?Ha=[t]:Ha.push(t)}function c1(t){hc=!0,Wf(t)}function Ur(){if(!Zc&&Ha!==null){Zc=!0;var t=0,e=Ne;try{var a=Ha;for(Ne=1;t<a.length;t++){var r=a[t];do r=r(!0);while(r!==null)}Ha=null,hc=!1}catch(s){throw Ha!==null&&(Ha=Ha.slice(t+1)),xf(gh,Ur),s}finally{Ne=e,Zc=!1}}return null}var Js=[],Ys=0,Dl=null,Tl=0,ea=[],ta=0,ms=null,Ja=1,Ya="";function Kr(t,e){Js[Ys++]=Tl,Js[Ys++]=Dl,Dl=t,Tl=e}function Gf(t,e,a){ea[ta++]=Ja,ea[ta++]=Ya,ea[ta++]=ms,ms=t;var r=Ja;t=Ya;var s=32-xa(r)-1;r&=~(1<<s),a+=1;var n=32-xa(e)+s;if(30<n){var o=s-s%5;n=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ja=1<<32-xa(e)+s|a<<s|r,Ya=n+t}else Ja=1<<n|a<<s|r,Ya=t}function _h(t){t.return!==null&&(Kr(t,1),Gf(t,1,0))}function Nh(t){for(;t===Dl;)Dl=Js[--Ys],Js[Ys]=null,Tl=Js[--Ys],Js[Ys]=null;for(;t===ms;)ms=ea[--ta],ea[ta]=null,Ya=ea[--ta],ea[ta]=null,Ja=ea[--ta],ea[ta]=null}var Ht=null,Bt=null,ze=!1,fa=null;function Jf(t,e){var a=aa(5,null,null,0);a.elementType="DELETED",a.stateNode=e,a.return=t,e=t.deletions,e===null?(t.deletions=[a],t.flags|=16):e.push(a)}function dm(t,e){switch(t.tag){case 5:var a=t.type;return e=e.nodeType!==1||a.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ht=t,Bt=Er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ht=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(a=ms!==null?{id:Ja,overflow:Ya}:null,t.memoizedState={dehydrated:e,treeContext:a,retryLane:1073741824},a=aa(18,null,null,0),a.stateNode=e,a.return=t,t.child=a,Ht=t,Bt=null,!0):!1;default:return!1}}function su(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nu(t){if(ze){var e=Bt;if(e){var a=e;if(!dm(t,e)){if(su(t))throw Error(Z(418));e=Er(a.nextSibling);var r=Ht;e&&dm(t,e)?Jf(r,a):(t.flags=t.flags&-4097|2,ze=!1,Ht=t)}}else{if(su(t))throw Error(Z(418));t.flags=t.flags&-4097|2,ze=!1,Ht=t}}}function um(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ht=t}function So(t){if(t!==Ht)return!1;if(!ze)return um(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eu(t.type,t.memoizedProps)),e&&(e=Bt)){if(su(t))throw Yf(),Error(Z(418));for(;e;)Jf(t,e),e=Er(e.nextSibling)}if(um(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(e===0){Bt=Er(t.nextSibling);break e}e--}else a!=="$"&&a!=="$!"&&a!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=Ht?Er(t.stateNode.nextSibling):null;return!0}function Yf(){for(var t=Bt;t;)t=Er(t.nextSibling)}function hn(){Bt=Ht=null,ze=!1}function Sh(t){fa===null?fa=[t]:fa.push(t)}var d1=ir.ReactCurrentBatchConfig;function Ln(t,e,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(Z(309));var r=a.stateNode}if(!r)throw Error(Z(147,t));var s=r,n=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===n?e.ref:(e=function(o){var l=s.refs;o===null?delete l[n]:l[n]=o},e._stringRef=n,e)}if(typeof t!="string")throw Error(Z(284));if(!a._owner)throw Error(Z(290,t))}return t}function Co(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hm(t){var e=t._init;return e(t._payload)}function Kf(t){function e(g,f){if(t){var x=g.deletions;x===null?(g.deletions=[f],g.flags|=16):x.push(f)}}function a(g,f){if(!t)return null;for(;f!==null;)e(g,f),f=f.sibling;return null}function r(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function s(g,f){return g=Or(g,f),g.index=0,g.sibling=null,g}function n(g,f,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<f?(g.flags|=2,f):x):(g.flags|=2,f)):(g.flags|=1048576,f)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,f,x,w){return f===null||f.tag!==6?(f=id(x,g.mode,w),f.return=g,f):(f=s(f,x),f.return=g,f)}function c(g,f,x,w){var S=x.type;return S===Bs?u(g,f,x.props.children,w,x.key):f!==null&&(f.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===mr&&hm(S)===f.type)?(w=s(f,x.props),w.ref=Ln(g,f,x),w.return=g,w):(w=hl(x.type,x.key,x.props,null,g.mode,w),w.ref=Ln(g,f,x),w.return=g,w)}function d(g,f,x,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==x.containerInfo||f.stateNode.implementation!==x.implementation?(f=od(x,g.mode,w),f.return=g,f):(f=s(f,x.children||[]),f.return=g,f)}function u(g,f,x,w,S){return f===null||f.tag!==7?(f=ds(x,g.mode,w,S),f.return=g,f):(f=s(f,x),f.return=g,f)}function h(g,f,x){if(typeof f=="string"&&f!==""||typeof f=="number")return f=id(""+f,g.mode,x),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case fo:return x=hl(f.type,f.key,f.props,null,g.mode,x),x.ref=Ln(g,null,f),x.return=g,x;case Us:return f=od(f,g.mode,x),f.return=g,f;case mr:var w=f._init;return h(g,w(f._payload),x)}if(Kn(f)||On(f))return f=ds(f,g.mode,x,null),f.return=g,f;Co(g,f)}return null}function p(g,f,x,w){var S=f!==null?f.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:l(g,f,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case fo:return x.key===S?c(g,f,x,w):null;case Us:return x.key===S?d(g,f,x,w):null;case mr:return S=x._init,p(g,f,S(x._payload),w)}if(Kn(x)||On(x))return S!==null?null:u(g,f,x,w,null);Co(g,x)}return null}function m(g,f,x,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(x)||null,l(f,g,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fo:return g=g.get(w.key===null?x:w.key)||null,c(f,g,w,S);case Us:return g=g.get(w.key===null?x:w.key)||null,d(f,g,w,S);case mr:var N=w._init;return m(g,f,x,N(w._payload),S)}if(Kn(w)||On(w))return g=g.get(x)||null,u(f,g,w,S,null);Co(f,w)}return null}function v(g,f,x,w){for(var S=null,N=null,_=f,b=f=0,j=null;_!==null&&b<x.length;b++){_.index>b?(j=_,_=null):j=_.sibling;var A=p(g,_,x[b],w);if(A===null){_===null&&(_=j);break}t&&_&&A.alternate===null&&e(g,_),f=n(A,f,b),N===null?S=A:N.sibling=A,N=A,_=j}if(b===x.length)return a(g,_),ze&&Kr(g,b),S;if(_===null){for(;b<x.length;b++)_=h(g,x[b],w),_!==null&&(f=n(_,f,b),N===null?S=_:N.sibling=_,N=_);return ze&&Kr(g,b),S}for(_=r(g,_);b<x.length;b++)j=m(_,g,b,x[b],w),j!==null&&(t&&j.alternate!==null&&_.delete(j.key===null?b:j.key),f=n(j,f,b),N===null?S=j:N.sibling=j,N=j);return t&&_.forEach(function(I){return e(g,I)}),ze&&Kr(g,b),S}function y(g,f,x,w){var S=On(x);if(typeof S!="function")throw Error(Z(150));if(x=S.call(x),x==null)throw Error(Z(151));for(var N=S=null,_=f,b=f=0,j=null,A=x.next();_!==null&&!A.done;b++,A=x.next()){_.index>b?(j=_,_=null):j=_.sibling;var I=p(g,_,A.value,w);if(I===null){_===null&&(_=j);break}t&&_&&I.alternate===null&&e(g,_),f=n(I,f,b),N===null?S=I:N.sibling=I,N=I,_=j}if(A.done)return a(g,_),ze&&Kr(g,b),S;if(_===null){for(;!A.done;b++,A=x.next())A=h(g,A.value,w),A!==null&&(f=n(A,f,b),N===null?S=A:N.sibling=A,N=A);return ze&&Kr(g,b),S}for(_=r(g,_);!A.done;b++,A=x.next())A=m(_,g,b,A.value,w),A!==null&&(t&&A.alternate!==null&&_.delete(A.key===null?b:A.key),f=n(A,f,b),N===null?S=A:N.sibling=A,N=A);return t&&_.forEach(function(z){return e(g,z)}),ze&&Kr(g,b),S}function k(g,f,x,w){if(typeof x=="object"&&x!==null&&x.type===Bs&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case fo:e:{for(var S=x.key,N=f;N!==null;){if(N.key===S){if(S=x.type,S===Bs){if(N.tag===7){a(g,N.sibling),f=s(N,x.props.children),f.return=g,g=f;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===mr&&hm(S)===N.type){a(g,N.sibling),f=s(N,x.props),f.ref=Ln(g,N,x),f.return=g,g=f;break e}a(g,N);break}else e(g,N);N=N.sibling}x.type===Bs?(f=ds(x.props.children,g.mode,w,x.key),f.return=g,g=f):(w=hl(x.type,x.key,x.props,null,g.mode,w),w.ref=Ln(g,f,x),w.return=g,g=w)}return o(g);case Us:e:{for(N=x.key;f!==null;){if(f.key===N)if(f.tag===4&&f.stateNode.containerInfo===x.containerInfo&&f.stateNode.implementation===x.implementation){a(g,f.sibling),f=s(f,x.children||[]),f.return=g,g=f;break e}else{a(g,f);break}else e(g,f);f=f.sibling}f=od(x,g.mode,w),f.return=g,g=f}return o(g);case mr:return N=x._init,k(g,f,N(x._payload),w)}if(Kn(x))return v(g,f,x,w);if(On(x))return y(g,f,x,w);Co(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,f!==null&&f.tag===6?(a(g,f.sibling),f=s(f,x),f.return=g,g=f):(a(g,f),f=id(x,g.mode,w),f.return=g,g=f),o(g)):a(g,f)}return k}var pn=Kf(!0),Xf=Kf(!1),Ol=$r(null),Pl=null,Ks=null,Ch=null;function Eh(){Ch=Ks=Pl=null}function Mh(t){var e=Ol.current;Pe(Ol),t._currentValue=e}function iu(t,e,a){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===a)break;t=t.return}}function rn(t,e){Pl=t,Ch=Ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pt=!0),t.firstContext=null)}function ia(t){var e=t._currentValue;if(Ch!==t)if(t={context:t,memoizedValue:e,next:null},Ks===null){if(Pl===null)throw Error(Z(308));Ks=t,Pl.dependencies={lanes:0,firstContext:t}}else Ks=Ks.next=t;return e}var ns=null;function Dh(t){ns===null?ns=[t]:ns.push(t)}function Qf(t,e,a,r){var s=e.interleaved;return s===null?(a.next=a,Dh(e)):(a.next=s.next,s.next=a),e.interleaved=a,ar(t,r)}function ar(t,e){t.lanes|=e;var a=t.alternate;for(a!==null&&(a.lanes|=e),a=t,t=t.return;t!==null;)t.childLanes|=e,a=t.alternate,a!==null&&(a.childLanes|=e),a=t,t=t.return;return a.tag===3?a.stateNode:null}var gr=!1;function Th(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Za(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mr(t,e,a){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ar(t,a)}return s=r.interleaved,s===null?(e.next=e,Dh(r)):(e.next=s.next,s.next=e),r.interleaved=e,ar(t,a)}function il(t,e,a){if(e=e.updateQueue,e!==null&&(e=e.shared,(a&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,a|=r,e.lanes=a,fh(t,a)}}function pm(t,e){var a=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var s=null,n=null;if(a=a.firstBaseUpdate,a!==null){do{var o={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};n===null?s=n=o:n=n.next=o,a=a.next}while(a!==null);n===null?s=n=e:n=n.next=e}else s=n=e;a={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:n,shared:r.shared,effects:r.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=e:t.next=e,a.lastBaseUpdate=e}function Il(t,e,a,r){var s=t.updateQueue;gr=!1;var n=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?n=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(n!==null){var h=s.baseState;o=0,u=d=c=null,l=n;do{var p=l.lane,m=l.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,y=l;switch(p=e,m=a,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(m,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(m,h,p):v,p==null)break e;h=Be({},h,p);break e;case 2:gr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(c=h),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else n===null&&(s.shared.lanes=0);fs|=o,t.lanes=o,t.memoizedState=h}}function mm(t,e,a){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=a,typeof s!="function")throw Error(Z(191,s));s.call(r)}}}var ro={},Pa=$r(ro),zi=$r(ro),Ai=$r(ro);function is(t){if(t===ro)throw Error(Z(174));return t}function Oh(t,e){switch(Me(Ai,e),Me(zi,t),Me(Pa,ro),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$d(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$d(e,t)}Pe(Pa),Me(Pa,e)}function mn(){Pe(Pa),Pe(zi),Pe(Ai)}function ex(t){is(Ai.current);var e=is(Pa.current),a=$d(e,t.type);e!==a&&(Me(zi,t),Me(Pa,a))}function Ph(t){zi.current===t&&(Pe(Pa),Pe(zi))}var Fe=$r(0);function zl(t){for(var e=t;e!==null;){if(e.tag===13){var a=e.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ed=[];function Ih(){for(var t=0;t<ed.length;t++)ed[t]._workInProgressVersionPrimary=null;ed.length=0}var ol=ir.ReactCurrentDispatcher,td=ir.ReactCurrentBatchConfig,gs=0,Ue=null,Ze=null,st=null,Al=!1,di=!1,Li=0,u1=0;function pt(){throw Error(Z(321))}function zh(t,e){if(e===null)return!1;for(var a=0;a<e.length&&a<t.length;a++)if(!wa(t[a],e[a]))return!1;return!0}function Ah(t,e,a,r,s,n){if(gs=n,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ol.current=t===null||t.memoizedState===null?g1:f1,t=a(r,s),di){n=0;do{if(di=!1,Li=0,25<=n)throw Error(Z(301));n+=1,st=Ze=null,e.updateQueue=null,ol.current=x1,t=a(r,s)}while(di)}if(ol.current=Ll,e=Ze!==null&&Ze.next!==null,gs=0,st=Ze=Ue=null,Al=!1,e)throw Error(Z(300));return t}function Lh(){var t=Li!==0;return Li=0,t}function Ca(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ue.memoizedState=st=t:st=st.next=t,st}function oa(){if(Ze===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=st===null?Ue.memoizedState:st.next;if(e!==null)st=e,Ze=t;else{if(t===null)throw Error(Z(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},st===null?Ue.memoizedState=st=t:st=st.next=t}return st}function Ri(t,e){return typeof e=="function"?e(t):e}function ad(t){var e=oa(),a=e.queue;if(a===null)throw Error(Z(311));a.lastRenderedReducer=t;var r=Ze,s=r.baseQueue,n=a.pending;if(n!==null){if(s!==null){var o=s.next;s.next=n.next,n.next=o}r.baseQueue=s=n,a.pending=null}if(s!==null){n=s.next,r=r.baseState;var l=o=null,c=null,d=n;do{var u=d.lane;if((gs&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,Ue.lanes|=u,fs|=u}d=d.next}while(d!==null&&d!==n);c===null?o=r:c.next=l,wa(r,e.memoizedState)||(Pt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,a.lastRenderedState=r}if(t=a.interleaved,t!==null){s=t;do n=s.lane,Ue.lanes|=n,fs|=n,s=s.next;while(s!==t)}else s===null&&(a.lanes=0);return[e.memoizedState,a.dispatch]}function rd(t){var e=oa(),a=e.queue;if(a===null)throw Error(Z(311));a.lastRenderedReducer=t;var r=a.dispatch,s=a.pending,n=e.memoizedState;if(s!==null){a.pending=null;var o=s=s.next;do n=t(n,o.action),o=o.next;while(o!==s);wa(n,e.memoizedState)||(Pt=!0),e.memoizedState=n,e.baseQueue===null&&(e.baseState=n),a.lastRenderedState=n}return[n,r]}function tx(){}function ax(t,e){var a=Ue,r=oa(),s=e(),n=!wa(r.memoizedState,s);if(n&&(r.memoizedState=s,Pt=!0),r=r.queue,Rh(nx.bind(null,a,r,t),[t]),r.getSnapshot!==e||n||st!==null&&st.memoizedState.tag&1){if(a.flags|=2048,Fi(9,sx.bind(null,a,r,s,e),void 0,null),it===null)throw Error(Z(349));gs&30||rx(a,e,s)}return s}function rx(t,e,a){t.flags|=16384,t={getSnapshot:e,value:a},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(a=e.stores,a===null?e.stores=[t]:a.push(t))}function sx(t,e,a,r){e.value=a,e.getSnapshot=r,ix(e)&&ox(t)}function nx(t,e,a){return a(function(){ix(e)&&ox(t)})}function ix(t){var e=t.getSnapshot;t=t.value;try{var a=e();return!wa(t,a)}catch{return!0}}function ox(t){var e=ar(t,1);e!==null&&ba(e,t,1,-1)}function gm(t){var e=Ca();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:t},e.queue=t,t=t.dispatch=m1.bind(null,Ue,t),[e.memoizedState,t]}function Fi(t,e,a,r){return t={tag:t,create:e,destroy:a,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(a=e.lastEffect,a===null?e.lastEffect=t.next=t:(r=a.next,a.next=t,t.next=r,e.lastEffect=t)),t}function lx(){return oa().memoizedState}function ll(t,e,a,r){var s=Ca();Ue.flags|=t,s.memoizedState=Fi(1|e,a,void 0,r===void 0?null:r)}function pc(t,e,a,r){var s=oa();r=r===void 0?null:r;var n=void 0;if(Ze!==null){var o=Ze.memoizedState;if(n=o.destroy,r!==null&&zh(r,o.deps)){s.memoizedState=Fi(e,a,n,r);return}}Ue.flags|=t,s.memoizedState=Fi(1|e,a,n,r)}function fm(t,e){return ll(8390656,8,t,e)}function Rh(t,e){return pc(2048,8,t,e)}function cx(t,e){return pc(4,2,t,e)}function dx(t,e){return pc(4,4,t,e)}function ux(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hx(t,e,a){return a=a!=null?a.concat([t]):null,pc(4,4,ux.bind(null,e,t),a)}function Fh(){}function px(t,e){var a=oa();e=e===void 0?null:e;var r=a.memoizedState;return r!==null&&e!==null&&zh(e,r[1])?r[0]:(a.memoizedState=[t,e],t)}function mx(t,e){var a=oa();e=e===void 0?null:e;var r=a.memoizedState;return r!==null&&e!==null&&zh(e,r[1])?r[0]:(t=t(),a.memoizedState=[t,e],t)}function gx(t,e,a){return gs&21?(wa(a,e)||(a=vf(),Ue.lanes|=a,fs|=a,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pt=!0),t.memoizedState=a)}function h1(t,e){var a=Ne;Ne=a!==0&&4>a?a:4,t(!0);var r=td.transition;td.transition={};try{t(!1),e()}finally{Ne=a,td.transition=r}}function fx(){return oa().memoizedState}function p1(t,e,a){var r=Tr(t);if(a={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null},xx(t))bx(e,a);else if(a=Qf(t,e,a,r),a!==null){var s=_t();ba(a,t,r,s),yx(a,e,r)}}function m1(t,e,a){var r=Tr(t),s={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null};if(xx(t))bx(e,s);else{var n=t.alternate;if(t.lanes===0&&(n===null||n.lanes===0)&&(n=e.lastRenderedReducer,n!==null))try{var o=e.lastRenderedState,l=n(o,a);if(s.hasEagerState=!0,s.eagerState=l,wa(l,o)){var c=e.interleaved;c===null?(s.next=s,Dh(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}a=Qf(t,e,s,r),a!==null&&(s=_t(),ba(a,t,r,s),yx(a,e,r))}}function xx(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function bx(t,e){di=Al=!0;var a=t.pending;a===null?e.next=e:(e.next=a.next,a.next=e),t.pending=e}function yx(t,e,a){if(a&4194240){var r=e.lanes;r&=t.pendingLanes,a|=r,e.lanes=a,fh(t,a)}}var Ll={readContext:ia,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},g1={readContext:ia,useCallback:function(t,e){return Ca().memoizedState=[t,e===void 0?null:e],t},useContext:ia,useEffect:fm,useImperativeHandle:function(t,e,a){return a=a!=null?a.concat([t]):null,ll(4194308,4,ux.bind(null,e,t),a)},useLayoutEffect:function(t,e){return ll(4194308,4,t,e)},useInsertionEffect:function(t,e){return ll(4,2,t,e)},useMemo:function(t,e){var a=Ca();return e=e===void 0?null:e,t=t(),a.memoizedState=[t,e],t},useReducer:function(t,e,a){var r=Ca();return e=a!==void 0?a(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=p1.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=Ca();return t={current:t},e.memoizedState=t},useState:gm,useDebugValue:Fh,useDeferredValue:function(t){return Ca().memoizedState=t},useTransition:function(){var t=gm(!1),e=t[0];return t=h1.bind(null,t[1]),Ca().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,a){var r=Ue,s=Ca();if(ze){if(a===void 0)throw Error(Z(407));a=a()}else{if(a=e(),it===null)throw Error(Z(349));gs&30||rx(r,e,a)}s.memoizedState=a;var n={value:a,getSnapshot:e};return s.queue=n,fm(nx.bind(null,r,n,t),[t]),r.flags|=2048,Fi(9,sx.bind(null,r,n,a,e),void 0,null),a},useId:function(){var t=Ca(),e=it.identifierPrefix;if(ze){var a=Ya,r=Ja;a=(r&~(1<<32-xa(r)-1)).toString(32)+a,e=":"+e+"R"+a,a=Li++,0<a&&(e+="H"+a.toString(32)),e+=":"}else a=u1++,e=":"+e+"r"+a.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},f1={readContext:ia,useCallback:px,useContext:ia,useEffect:Rh,useImperativeHandle:hx,useInsertionEffect:cx,useLayoutEffect:dx,useMemo:mx,useReducer:ad,useRef:lx,useState:function(){return ad(Ri)},useDebugValue:Fh,useDeferredValue:function(t){var e=oa();return gx(e,Ze.memoizedState,t)},useTransition:function(){var t=ad(Ri)[0],e=oa().memoizedState;return[t,e]},useMutableSource:tx,useSyncExternalStore:ax,useId:fx,unstable_isNewReconciler:!1},x1={readContext:ia,useCallback:px,useContext:ia,useEffect:Rh,useImperativeHandle:hx,useInsertionEffect:cx,useLayoutEffect:dx,useMemo:mx,useReducer:rd,useRef:lx,useState:function(){return rd(Ri)},useDebugValue:Fh,useDeferredValue:function(t){var e=oa();return Ze===null?e.memoizedState=t:gx(e,Ze.memoizedState,t)},useTransition:function(){var t=rd(Ri)[0],e=oa().memoizedState;return[t,e]},useMutableSource:tx,useSyncExternalStore:ax,useId:fx,unstable_isNewReconciler:!1};function ha(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var a in t)e[a]===void 0&&(e[a]=t[a]);return e}return e}function ou(t,e,a,r){e=t.memoizedState,a=a(r,e),a=a==null?e:Be({},e,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var mc={isMounted:function(t){return(t=t._reactInternals)?js(t)===t:!1},enqueueSetState:function(t,e,a){t=t._reactInternals;var r=_t(),s=Tr(t),n=Za(r,s);n.payload=e,a!=null&&(n.callback=a),e=Mr(t,n,s),e!==null&&(ba(e,t,s,r),il(e,t,s))},enqueueReplaceState:function(t,e,a){t=t._reactInternals;var r=_t(),s=Tr(t),n=Za(r,s);n.tag=1,n.payload=e,a!=null&&(n.callback=a),e=Mr(t,n,s),e!==null&&(ba(e,t,s,r),il(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var a=_t(),r=Tr(t),s=Za(a,r);s.tag=2,e!=null&&(s.callback=e),e=Mr(t,s,r),e!==null&&(ba(e,t,r,a),il(e,t,r))}};function xm(t,e,a,r,s,n,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,n,o):e.prototype&&e.prototype.isPureReactComponent?!Ti(a,r)||!Ti(s,n):!0}function vx(t,e,a){var r=!1,s=Lr,n=e.contextType;return typeof n=="object"&&n!==null?n=ia(n):(s=At(e)?ps:wt.current,r=e.contextTypes,n=(r=r!=null)?un(t,s):Lr),e=new e(a,n),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),e}function bm(t,e,a,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(a,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(a,r),e.state!==t&&mc.enqueueReplaceState(e,e.state,null)}function lu(t,e,a,r){var s=t.stateNode;s.props=a,s.state=t.memoizedState,s.refs={},Th(t);var n=e.contextType;typeof n=="object"&&n!==null?s.context=ia(n):(n=At(e)?ps:wt.current,s.context=un(t,n)),s.state=t.memoizedState,n=e.getDerivedStateFromProps,typeof n=="function"&&(ou(t,e,n,a),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&mc.enqueueReplaceState(s,s.state,null),Il(t,a,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function gn(t,e){try{var a="",r=e;do a+=Hv(r),r=r.return;while(r);var s=a}catch(n){s=`
Error generating stack: `+n.message+`
`+n.stack}return{value:t,source:e,stack:s,digest:null}}function sd(t,e,a){return{value:t,source:null,stack:a??null,digest:e??null}}function cu(t,e){try{console.error(e.value)}catch(a){setTimeout(function(){throw a})}}var b1=typeof WeakMap=="function"?WeakMap:Map;function wx(t,e,a){a=Za(-1,a),a.tag=3,a.payload={element:null};var r=e.value;return a.callback=function(){Fl||(Fl=!0,bu=r),cu(t,e)},a}function kx(t,e,a){a=Za(-1,a),a.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;a.payload=function(){return r(s)},a.callback=function(){cu(t,e)}}var n=t.stateNode;return n!==null&&typeof n.componentDidCatch=="function"&&(a.callback=function(){cu(t,e),typeof r!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),a}function ym(t,e,a){var r=t.pingCache;if(r===null){r=t.pingCache=new b1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(a)||(s.add(a),t=O1.bind(null,t,e,a),e.then(t,t))}function vm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wm(t,e,a,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(e=Za(-1,1),e.tag=2,Mr(a,e,1))),a.lanes|=1),t)}var y1=ir.ReactCurrentOwner,Pt=!1;function jt(t,e,a,r){e.child=t===null?Xf(e,null,a,r):pn(e,t.child,a,r)}function km(t,e,a,r,s){a=a.render;var n=e.ref;return rn(e,s),r=Ah(t,e,a,r,n,s),a=Lh(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rr(t,e,s)):(ze&&a&&_h(e),e.flags|=1,jt(t,e,r,s),e.child)}function jm(t,e,a,r,s){if(t===null){var n=a.type;return typeof n=="function"&&!Gh(n)&&n.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(e.tag=15,e.type=n,jx(t,e,n,r,s)):(t=hl(a.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(n=t.child,!(t.lanes&s)){var o=n.memoizedProps;if(a=a.compare,a=a!==null?a:Ti,a(o,r)&&t.ref===e.ref)return rr(t,e,s)}return e.flags|=1,t=Or(n,r),t.ref=e.ref,t.return=e,e.child=t}function jx(t,e,a,r,s){if(t!==null){var n=t.memoizedProps;if(Ti(n,r)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=r=n,(t.lanes&s)!==0)t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,rr(t,e,s)}return du(t,e,a,r,s)}function _x(t,e,a){var r=e.pendingProps,s=r.children,n=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Qs,Ut),Ut|=a;else{if(!(a&1073741824))return t=n!==null?n.baseLanes|a:a,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(Qs,Ut),Ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=n!==null?n.baseLanes:a,Me(Qs,Ut),Ut|=r}else n!==null?(r=n.baseLanes|a,e.memoizedState=null):r=a,Me(Qs,Ut),Ut|=r;return jt(t,e,s,a),e.child}function Nx(t,e){var a=e.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(e.flags|=512,e.flags|=2097152)}function du(t,e,a,r,s){var n=At(a)?ps:wt.current;return n=un(e,n),rn(e,s),a=Ah(t,e,a,r,n,s),r=Lh(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rr(t,e,s)):(ze&&r&&_h(e),e.flags|=1,jt(t,e,a,s),e.child)}function _m(t,e,a,r,s){if(At(a)){var n=!0;Ml(e)}else n=!1;if(rn(e,s),e.stateNode===null)cl(t,e),vx(e,a,r),lu(e,a,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=a.contextType;typeof d=="object"&&d!==null?d=ia(d):(d=At(a)?ps:wt.current,d=un(e,d));var u=a.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&bm(e,o,r,d),gr=!1;var p=e.memoizedState;o.state=p,Il(e,r,o,s),c=e.memoizedState,l!==r||p!==c||zt.current||gr?(typeof u=="function"&&(ou(e,a,u,r),c=e.memoizedState),(l=gr||xm(e,a,l,r,p,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Zf(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:ha(e.type,l),o.props=d,h=e.pendingProps,p=o.context,c=a.contextType,typeof c=="object"&&c!==null?c=ia(c):(c=At(a)?ps:wt.current,c=un(e,c));var m=a.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==c)&&bm(e,o,r,c),gr=!1,p=e.memoizedState,o.state=p,Il(e,r,o,s);var v=e.memoizedState;l!==h||p!==v||zt.current||gr?(typeof m=="function"&&(ou(e,a,m,r),v=e.memoizedState),(d=gr||xm(e,a,d,r,p,v,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return uu(t,e,a,r,n,s)}function uu(t,e,a,r,s,n){Nx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&cm(e,a,!1),rr(t,e,n);r=e.stateNode,y1.current=e;var l=o&&typeof a.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=pn(e,t.child,null,n),e.child=pn(e,null,l,n)):jt(t,e,l,n),e.memoizedState=r.state,s&&cm(e,a,!0),e.child}function Sx(t){var e=t.stateNode;e.pendingContext?lm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lm(t,e.context,!1),Oh(t,e.containerInfo)}function Nm(t,e,a,r,s){return hn(),Sh(s),e.flags|=256,jt(t,e,a,r),e.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function pu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Cx(t,e,a){var r=e.pendingProps,s=Fe.current,n=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(n=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Me(Fe,s&1),t===null)return nu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,n?(r=e.mode,n=e.child,o={mode:"hidden",children:o},!(r&1)&&n!==null?(n.childLanes=0,n.pendingProps=o):n=xc(o,r,0,null),t=ds(t,r,a,null),n.return=e,t.return=e,n.sibling=t,e.child=n,e.child.memoizedState=pu(a),e.memoizedState=hu,t):$h(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return v1(t,e,o,r,l,s,a);if(n){n=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Or(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?n=Or(l,n):(n=ds(n,o,a,null),n.flags|=2),n.return=e,r.return=e,r.sibling=n,e.child=r,r=n,n=e.child,o=t.child.memoizedState,o=o===null?pu(a):{baseLanes:o.baseLanes|a,cachePool:null,transitions:o.transitions},n.memoizedState=o,n.childLanes=t.childLanes&~a,e.memoizedState=hu,r}return n=t.child,t=n.sibling,r=Or(n,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=a),r.return=e,r.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=r,e.memoizedState=null,r}function $h(t,e){return e=xc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Eo(t,e,a,r){return r!==null&&Sh(r),pn(e,t.child,null,a),t=$h(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function v1(t,e,a,r,s,n,o){if(a)return e.flags&256?(e.flags&=-257,r=sd(Error(Z(422))),Eo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(n=r.fallback,s=e.mode,r=xc({mode:"visible",children:r.children},s,0,null),n=ds(n,s,o,null),n.flags|=2,r.return=e,n.return=e,r.sibling=n,e.child=r,e.mode&1&&pn(e,t.child,null,o),e.child.memoizedState=pu(o),e.memoizedState=hu,n);if(!(e.mode&1))return Eo(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,n=Error(Z(419)),r=sd(n,r,void 0),Eo(t,e,o,r)}if(l=(o&t.childLanes)!==0,Pt||l){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==n.retryLane&&(n.retryLane=s,ar(t,s),ba(r,t,s,-1))}return Wh(),r=sd(Error(Z(421))),Eo(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=P1.bind(null,t),s._reactRetry=e,null):(t=n.treeContext,Bt=Er(s.nextSibling),Ht=e,ze=!0,fa=null,t!==null&&(ea[ta++]=Ja,ea[ta++]=Ya,ea[ta++]=ms,Ja=t.id,Ya=t.overflow,ms=e),e=$h(e,r.children),e.flags|=4096,e)}function Sm(t,e,a){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),iu(t.return,e,a)}function nd(t,e,a,r,s){var n=t.memoizedState;n===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:s}:(n.isBackwards=e,n.rendering=null,n.renderingStartTime=0,n.last=r,n.tail=a,n.tailMode=s)}function Ex(t,e,a){var r=e.pendingProps,s=r.revealOrder,n=r.tail;if(jt(t,e,r.children,a),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sm(t,a,e);else if(t.tag===19)Sm(t,a,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Me(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(a=e.child,s=null;a!==null;)t=a.alternate,t!==null&&zl(t)===null&&(s=a),a=a.sibling;a=s,a===null?(s=e.child,e.child=null):(s=a.sibling,a.sibling=null),nd(e,!1,s,a,n);break;case"backwards":for(a=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&zl(t)===null){e.child=s;break}t=s.sibling,s.sibling=a,a=s,s=t}nd(e,!0,a,null,n);break;case"together":nd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rr(t,e,a){if(t!==null&&(e.dependencies=t.dependencies),fs|=e.lanes,!(a&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,a=Or(t,t.pendingProps),e.child=a,a.return=e;t.sibling!==null;)t=t.sibling,a=a.sibling=Or(t,t.pendingProps),a.return=e;a.sibling=null}return e.child}function w1(t,e,a){switch(e.tag){case 3:Sx(e),hn();break;case 5:ex(e);break;case 1:At(e.type)&&Ml(e);break;case 4:Oh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Me(Ol,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Me(Fe,Fe.current&1),e.flags|=128,null):a&e.child.childLanes?Cx(t,e,a):(Me(Fe,Fe.current&1),t=rr(t,e,a),t!==null?t.sibling:null);Me(Fe,Fe.current&1);break;case 19:if(r=(a&e.childLanes)!==0,t.flags&128){if(r)return Ex(t,e,a);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Me(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,_x(t,e,a)}return rr(t,e,a)}var Mx,mu,Dx,Tx;Mx=function(t,e){for(var a=e.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};mu=function(){};Dx=function(t,e,a,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,is(Pa.current);var n=null;switch(a){case"input":s=Ad(t,s),r=Ad(t,r),n=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),n=[];break;case"textarea":s=Fd(t,s),r=Fd(t,r),n=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cl)}Ud(a,r);var o;a=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(a||(a={}),a[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(_i.hasOwnProperty(d)?n||(n=[]):(n=n||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(a||(a={}),a[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(a||(a={}),a[o]=c[o])}else a||(n||(n=[]),n.push(d,a)),a=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(n=n||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(n=n||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(_i.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&De("scroll",t),n||l===c||(n=[])):(n=n||[]).push(d,c))}a&&(n=n||[]).push("style",a);var d=n;(e.updateQueue=d)&&(e.flags|=4)}};Tx=function(t,e,a,r){a!==r&&(e.flags|=4)};function Rn(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var a=null;e!==null;)e.alternate!==null&&(a=e),e=e.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,a=0,r=0;if(e)for(var s=t.child;s!==null;)a|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)a|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=a,e}function k1(t,e,a){var r=e.pendingProps;switch(Nh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return At(e.type)&&El(),mt(e),null;case 3:return r=e.stateNode,mn(),Pe(zt),Pe(wt),Ih(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(So(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fa!==null&&(wu(fa),fa=null))),mu(t,e),mt(e),null;case 5:Ph(e);var s=is(Ai.current);if(a=e.type,t!==null&&e.stateNode!=null)Dx(t,e,a,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return mt(e),null}if(t=is(Pa.current),So(e)){r=e.stateNode,a=e.type;var n=e.memoizedProps;switch(r[Ma]=e,r[Ii]=n,t=(e.mode&1)!==0,a){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(s=0;s<Qn.length;s++)De(Qn[s],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":zp(r,n),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!n.multiple},De("invalid",r);break;case"textarea":Lp(r,n),De("invalid",r)}Ud(a,n),s=null;for(var o in n)if(n.hasOwnProperty(o)){var l=n[o];o==="children"?typeof l=="string"?r.textContent!==l&&(n.suppressHydrationWarning!==!0&&No(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(n.suppressHydrationWarning!==!0&&No(r.textContent,l,t),s=["children",""+l]):_i.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&De("scroll",r)}switch(a){case"input":xo(r),Ap(r,n,!0);break;case"textarea":xo(r),Rp(r);break;case"select":case"option":break;default:typeof n.onClick=="function"&&(r.onclick=Cl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sf(a)),t==="http://www.w3.org/1999/xhtml"?a==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(a,{is:r.is}):(t=o.createElement(a),a==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,a),t[Ma]=e,t[Ii]=r,Mx(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bd(a,r),a){case"dialog":De("cancel",t),De("close",t),s=r;break;case"iframe":case"object":case"embed":De("load",t),s=r;break;case"video":case"audio":for(s=0;s<Qn.length;s++)De(Qn[s],t);s=r;break;case"source":De("error",t),s=r;break;case"img":case"image":case"link":De("error",t),De("load",t),s=r;break;case"details":De("toggle",t),s=r;break;case"input":zp(t,r),s=Ad(t,r),De("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),De("invalid",t);break;case"textarea":Lp(t,r),s=Fd(t,r),De("invalid",t);break;default:s=r}Ud(a,s),l=s;for(n in l)if(l.hasOwnProperty(n)){var c=l[n];n==="style"?lf(t,c):n==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&nf(t,c)):n==="children"?typeof c=="string"?(a!=="textarea"||c!=="")&&Ni(t,c):typeof c=="number"&&Ni(t,""+c):n!=="suppressContentEditableWarning"&&n!=="suppressHydrationWarning"&&n!=="autoFocus"&&(_i.hasOwnProperty(n)?c!=null&&n==="onScroll"&&De("scroll",t):c!=null&&dh(t,n,c,o))}switch(a){case"input":xo(t),Ap(t,r,!1);break;case"textarea":xo(t),Rp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ar(r.value));break;case"select":t.multiple=!!r.multiple,n=r.value,n!=null?Zs(t,!!r.multiple,n,!1):r.defaultValue!=null&&Zs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Cl)}switch(a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)Tx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(a=is(Ai.current),is(Pa.current),So(e)){if(r=e.stateNode,a=e.memoizedProps,r[Ma]=e,(n=r.nodeValue!==a)&&(t=Ht,t!==null))switch(t.tag){case 3:No(r.nodeValue,a,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&No(r.nodeValue,a,(t.mode&1)!==0)}n&&(e.flags|=4)}else r=(a.nodeType===9?a:a.ownerDocument).createTextNode(r),r[Ma]=e,e.stateNode=r}return mt(e),null;case 13:if(Pe(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&Bt!==null&&e.mode&1&&!(e.flags&128))Yf(),hn(),e.flags|=98560,n=!1;else if(n=So(e),r!==null&&r.dehydrated!==null){if(t===null){if(!n)throw Error(Z(318));if(n=e.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Z(317));n[Ma]=e}else hn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),n=!1}else fa!==null&&(wu(fa),fa=null),n=!0;if(!n)return e.flags&65536?e:null}return e.flags&128?(e.lanes=a,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?tt===0&&(tt=3):Wh())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return mn(),mu(t,e),t===null&&Oi(e.stateNode.containerInfo),mt(e),null;case 10:return Mh(e.type._context),mt(e),null;case 17:return At(e.type)&&El(),mt(e),null;case 19:if(Pe(Fe),n=e.memoizedState,n===null)return mt(e),null;if(r=(e.flags&128)!==0,o=n.rendering,o===null)if(r)Rn(n,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zl(t),o!==null){for(e.flags|=128,Rn(n,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=a,a=e.child;a!==null;)n=a,t=r,n.flags&=14680066,o=n.alternate,o===null?(n.childLanes=0,n.lanes=t,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,t=o.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return Me(Fe,Fe.current&1|2),e.child}t=t.sibling}n.tail!==null&&We()>fn&&(e.flags|=128,r=!0,Rn(n,!1),e.lanes=4194304)}else{if(!r)if(t=zl(o),t!==null){if(e.flags|=128,r=!0,a=t.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),Rn(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!ze)return mt(e),null}else 2*We()-n.renderingStartTime>fn&&a!==1073741824&&(e.flags|=128,r=!0,Rn(n,!1),e.lanes=4194304);n.isBackwards?(o.sibling=e.child,e.child=o):(a=n.last,a!==null?a.sibling=o:e.child=o,n.last=o)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=We(),e.sibling=null,a=Fe.current,Me(Fe,r?a&1|2:a&1),e):(mt(e),null);case 22:case 23:return Hh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ut&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function j1(t,e){switch(Nh(e),e.tag){case 1:return At(e.type)&&El(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mn(),Pe(zt),Pe(wt),Ih(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ph(e),null;case 13:if(Pe(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));hn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(Fe),null;case 4:return mn(),null;case 10:return Mh(e.type._context),null;case 22:case 23:return Hh(),null;case 24:return null;default:return null}}var Mo=!1,xt=!1,_1=typeof WeakSet=="function"?WeakSet:Set,se=null;function Xs(t,e){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(r){qe(t,e,r)}else a.current=null}function Ox(t,e,a){try{a()}catch(r){qe(t,e,r)}}var Cm=!1;function N1(t,e){if(Qd=_l,t=Af(),jh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var s=r.anchorOffset,n=r.focusNode;r=r.focusOffset;try{a.nodeType,n.nodeType}catch{a=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=t,p=null;t:for(;;){for(var m;h!==a||s!==0&&h.nodeType!==3||(l=o+s),h!==n||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===a&&++d===s&&(l=o),p===n&&++u===r&&(c=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}a=l===-1||c===-1?null:{start:l,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(Zd={focusedElem:t,selectionRange:a},_l=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,k=v.memoizedState,g=e.stateNode,f=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:ha(e.type,y),k);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(w){qe(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return v=Cm,Cm=!1,v}function ui(t,e,a){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var n=s.destroy;s.destroy=void 0,n!==void 0&&Ox(e,a,n)}s=s.next}while(s!==r)}}function gc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var a=e=e.next;do{if((a.tag&t)===t){var r=a.create;a.destroy=r()}a=a.next}while(a!==e)}}function gu(t){var e=t.ref;if(e!==null){var a=t.stateNode;switch(t.tag){case 5:t=a;break;default:t=a}typeof e=="function"?e(t):e.current=t}}function Px(t){var e=t.alternate;e!==null&&(t.alternate=null,Px(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ma],delete e[Ii],delete e[au],delete e[o1],delete e[l1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ix(t){return t.tag===5||t.tag===3||t.tag===4}function Em(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ix(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fu(t,e,a){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?a.nodeType===8?a.parentNode.insertBefore(t,e):a.insertBefore(t,e):(a.nodeType===8?(e=a.parentNode,e.insertBefore(t,a)):(e=a,e.appendChild(t)),a=a._reactRootContainer,a!=null||e.onclick!==null||(e.onclick=Cl));else if(r!==4&&(t=t.child,t!==null))for(fu(t,e,a),t=t.sibling;t!==null;)fu(t,e,a),t=t.sibling}function xu(t,e,a){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?a.insertBefore(t,e):a.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xu(t,e,a),t=t.sibling;t!==null;)xu(t,e,a),t=t.sibling}var ot=null,pa=!1;function dr(t,e,a){for(a=a.child;a!==null;)zx(t,e,a),a=a.sibling}function zx(t,e,a){if(Oa&&typeof Oa.onCommitFiberUnmount=="function")try{Oa.onCommitFiberUnmount(oc,a)}catch{}switch(a.tag){case 5:xt||Xs(a,e);case 6:var r=ot,s=pa;ot=null,dr(t,e,a),ot=r,pa=s,ot!==null&&(pa?(t=ot,a=a.stateNode,t.nodeType===8?t.parentNode.removeChild(a):t.removeChild(a)):ot.removeChild(a.stateNode));break;case 18:ot!==null&&(pa?(t=ot,a=a.stateNode,t.nodeType===8?Qc(t.parentNode,a):t.nodeType===1&&Qc(t,a),Mi(t)):Qc(ot,a.stateNode));break;case 4:r=ot,s=pa,ot=a.stateNode.containerInfo,pa=!0,dr(t,e,a),ot=r,pa=s;break;case 0:case 11:case 14:case 15:if(!xt&&(r=a.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var n=s,o=n.destroy;n=n.tag,o!==void 0&&(n&2||n&4)&&Ox(a,e,o),s=s.next}while(s!==r)}dr(t,e,a);break;case 1:if(!xt&&(Xs(a,e),r=a.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=a.memoizedProps,r.state=a.memoizedState,r.componentWillUnmount()}catch(l){qe(a,e,l)}dr(t,e,a);break;case 21:dr(t,e,a);break;case 22:a.mode&1?(xt=(r=xt)||a.memoizedState!==null,dr(t,e,a),xt=r):dr(t,e,a);break;default:dr(t,e,a)}}function Mm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new _1),e.forEach(function(r){var s=I1.bind(null,t,r);a.has(r)||(a.add(r),r.then(s,s))})}}function da(t,e){var a=e.deletions;if(a!==null)for(var r=0;r<a.length;r++){var s=a[r];try{var n=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ot=l.stateNode,pa=!1;break e;case 3:ot=l.stateNode.containerInfo,pa=!0;break e;case 4:ot=l.stateNode.containerInfo,pa=!0;break e}l=l.return}if(ot===null)throw Error(Z(160));zx(n,o,s),ot=null,pa=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){qe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ax(e,t),e=e.sibling}function Ax(t,e){var a=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(da(e,t),ja(t),r&4){try{ui(3,t,t.return),gc(3,t)}catch(y){qe(t,t.return,y)}try{ui(5,t,t.return)}catch(y){qe(t,t.return,y)}}break;case 1:da(e,t),ja(t),r&512&&a!==null&&Xs(a,a.return);break;case 5:if(da(e,t),ja(t),r&512&&a!==null&&Xs(a,a.return),t.flags&32){var s=t.stateNode;try{Ni(s,"")}catch(y){qe(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var n=t.memoizedProps,o=a!==null?a.memoizedProps:n,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&n.type==="radio"&&n.name!=null&&af(s,n),Bd(l,o);var d=Bd(l,n);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?lf(s,h):u==="dangerouslySetInnerHTML"?nf(s,h):u==="children"?Ni(s,h):dh(s,u,h,d)}switch(l){case"input":Ld(s,n);break;case"textarea":rf(s,n);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!n.multiple;var m=n.value;m!=null?Zs(s,!!n.multiple,m,!1):p!==!!n.multiple&&(n.defaultValue!=null?Zs(s,!!n.multiple,n.defaultValue,!0):Zs(s,!!n.multiple,n.multiple?[]:"",!1))}s[Ii]=n}catch(y){qe(t,t.return,y)}}break;case 6:if(da(e,t),ja(t),r&4){if(t.stateNode===null)throw Error(Z(162));s=t.stateNode,n=t.memoizedProps;try{s.nodeValue=n}catch(y){qe(t,t.return,y)}}break;case 3:if(da(e,t),ja(t),r&4&&a!==null&&a.memoizedState.isDehydrated)try{Mi(e.containerInfo)}catch(y){qe(t,t.return,y)}break;case 4:da(e,t),ja(t);break;case 13:da(e,t),ja(t),s=t.child,s.flags&8192&&(n=s.memoizedState!==null,s.stateNode.isHidden=n,!n||s.alternate!==null&&s.alternate.memoizedState!==null||(qh=We())),r&4&&Mm(t);break;case 22:if(u=a!==null&&a.memoizedState!==null,t.mode&1?(xt=(d=xt)||u,da(e,t),xt=d):da(e,t),ja(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(se=t,u=t.child;u!==null;){for(h=se=u;se!==null;){switch(p=se,m=p.child,p.tag){case 0:case 11:case 14:case 15:ui(4,p,p.return);break;case 1:Xs(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,a=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){qe(r,a,y)}}break;case 5:Xs(p,p.return);break;case 22:if(p.memoizedState!==null){Tm(h);continue}}m!==null?(m.return=p,se=m):Tm(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,d?(n=s.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=of("display",o))}catch(y){qe(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){qe(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:da(e,t),ja(t),r&4&&Mm(t);break;case 21:break;default:da(e,t),ja(t)}}function ja(t){var e=t.flags;if(e&2){try{e:{for(var a=t.return;a!==null;){if(Ix(a)){var r=a;break e}a=a.return}throw Error(Z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ni(s,""),r.flags&=-33);var n=Em(t);xu(t,n,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Em(t);fu(t,l,o);break;default:throw Error(Z(161))}}catch(c){qe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function S1(t,e,a){se=t,Lx(t)}function Lx(t,e,a){for(var r=(t.mode&1)!==0;se!==null;){var s=se,n=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Mo;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||xt;l=Mo;var d=xt;if(Mo=o,(xt=c)&&!d)for(se=s;se!==null;)o=se,c=o.child,o.tag===22&&o.memoizedState!==null?Om(s):c!==null?(c.return=o,se=c):Om(s);for(;n!==null;)se=n,Lx(n),n=n.sibling;se=s,Mo=l,xt=d}Dm(t)}else s.subtreeFlags&8772&&n!==null?(n.return=s,se=n):Dm(t)}}function Dm(t){for(;se!==null;){var e=se;if(e.flags&8772){var a=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xt||gc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xt)if(a===null)r.componentDidMount();else{var s=e.elementType===e.type?a.memoizedProps:ha(e.type,a.memoizedProps);r.componentDidUpdate(s,a.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var n=e.updateQueue;n!==null&&mm(e,n,r);break;case 3:var o=e.updateQueue;if(o!==null){if(a=null,e.child!==null)switch(e.child.tag){case 5:a=e.child.stateNode;break;case 1:a=e.child.stateNode}mm(e,o,a)}break;case 5:var l=e.stateNode;if(a===null&&e.flags&4){a=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&a.focus();break;case"img":c.src&&(a.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Mi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}xt||e.flags&512&&gu(e)}catch(p){qe(e,e.return,p)}}if(e===t){se=null;break}if(a=e.sibling,a!==null){a.return=e.return,se=a;break}se=e.return}}function Tm(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}function Om(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var a=e.return;try{gc(4,e)}catch(c){qe(e,a,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){qe(e,s,c)}}var n=e.return;try{gu(e)}catch(c){qe(e,n,c)}break;case 5:var o=e.return;try{gu(e)}catch(c){qe(e,o,c)}}}catch(c){qe(e,e.return,c)}if(e===t){se=null;break}var l=e.sibling;if(l!==null){l.return=e.return,se=l;break}se=e.return}}var C1=Math.ceil,Rl=ir.ReactCurrentDispatcher,Uh=ir.ReactCurrentOwner,na=ir.ReactCurrentBatchConfig,xe=0,it=null,Qe=null,ct=0,Ut=0,Qs=$r(0),tt=0,$i=null,fs=0,fc=0,Bh=0,hi=null,Dt=null,qh=0,fn=1/0,qa=null,Fl=!1,bu=null,Dr=null,Do=!1,wr=null,$l=0,pi=0,yu=null,dl=-1,ul=0;function _t(){return xe&6?We():dl!==-1?dl:dl=We()}function Tr(t){return t.mode&1?xe&2&&ct!==0?ct&-ct:d1.transition!==null?(ul===0&&(ul=vf()),ul):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:Cf(t.type)),t):1}function ba(t,e,a,r){if(50<pi)throw pi=0,yu=null,Error(Z(185));eo(t,a,r),(!(xe&2)||t!==it)&&(t===it&&(!(xe&2)&&(fc|=a),tt===4&&br(t,ct)),Lt(t,r),a===1&&xe===0&&!(e.mode&1)&&(fn=We()+500,hc&&Ur()))}function Lt(t,e){var a=t.callbackNode;dw(t,e);var r=jl(t,t===it?ct:0);if(r===0)a!==null&&Up(a),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(a!=null&&Up(a),e===1)t.tag===0?c1(Pm.bind(null,t)):Wf(Pm.bind(null,t)),n1(function(){!(xe&6)&&Ur()}),a=null;else{switch(wf(r)){case 1:a=gh;break;case 4:a=bf;break;case 16:a=kl;break;case 536870912:a=yf;break;default:a=kl}a=Hx(a,Rx.bind(null,t))}t.callbackPriority=e,t.callbackNode=a}}function Rx(t,e){if(dl=-1,ul=0,xe&6)throw Error(Z(327));var a=t.callbackNode;if(sn()&&t.callbackNode!==a)return null;var r=jl(t,t===it?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ul(t,r);else{e=r;var s=xe;xe|=2;var n=$x();(it!==t||ct!==e)&&(qa=null,fn=We()+500,cs(t,e));do try{D1();break}catch(l){Fx(t,l)}while(!0);Eh(),Rl.current=n,xe=s,Qe!==null?e=0:(it=null,ct=0,e=tt)}if(e!==0){if(e===2&&(s=Gd(t),s!==0&&(r=s,e=vu(t,s))),e===1)throw a=$i,cs(t,0),br(t,r),Lt(t,We()),a;if(e===6)br(t,r);else{if(s=t.current.alternate,!(r&30)&&!E1(s)&&(e=Ul(t,r),e===2&&(n=Gd(t),n!==0&&(r=n,e=vu(t,n))),e===1))throw a=$i,cs(t,0),br(t,r),Lt(t,We()),a;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:Xr(t,Dt,qa);break;case 3:if(br(t,r),(r&130023424)===r&&(e=qh+500-We(),10<e)){if(jl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=tu(Xr.bind(null,t,Dt,qa),e);break}Xr(t,Dt,qa);break;case 4:if(br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-xa(r);n=1<<o,o=e[o],o>s&&(s=o),r&=~n}if(r=s,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*C1(r/1960))-r,10<r){t.timeoutHandle=tu(Xr.bind(null,t,Dt,qa),r);break}Xr(t,Dt,qa);break;case 5:Xr(t,Dt,qa);break;default:throw Error(Z(329))}}}return Lt(t,We()),t.callbackNode===a?Rx.bind(null,t):null}function vu(t,e){var a=hi;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=Ul(t,e),t!==2&&(e=Dt,Dt=a,e!==null&&wu(e)),t}function wu(t){Dt===null?Dt=t:Dt.push.apply(Dt,t)}function E1(t){for(var e=t;;){if(e.flags&16384){var a=e.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var r=0;r<a.length;r++){var s=a[r],n=s.getSnapshot;s=s.value;try{if(!wa(n(),s))return!1}catch{return!1}}}if(a=e.child,e.subtreeFlags&16384&&a!==null)a.return=e,e=a;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(t,e){for(e&=~Bh,e&=~fc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var a=31-xa(e),r=1<<a;t[a]=-1,e&=~r}}function Pm(t){if(xe&6)throw Error(Z(327));sn();var e=jl(t,0);if(!(e&1))return Lt(t,We()),null;var a=Ul(t,e);if(t.tag!==0&&a===2){var r=Gd(t);r!==0&&(e=r,a=vu(t,r))}if(a===1)throw a=$i,cs(t,0),br(t,e),Lt(t,We()),a;if(a===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xr(t,Dt,qa),Lt(t,We()),null}function Vh(t,e){var a=xe;xe|=1;try{return t(e)}finally{xe=a,xe===0&&(fn=We()+500,hc&&Ur())}}function xs(t){wr!==null&&wr.tag===0&&!(xe&6)&&sn();var e=xe;xe|=1;var a=na.transition,r=Ne;try{if(na.transition=null,Ne=1,t)return t()}finally{Ne=r,na.transition=a,xe=e,!(xe&6)&&Ur()}}function Hh(){Ut=Qs.current,Pe(Qs)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,s1(a)),Qe!==null)for(a=Qe.return;a!==null;){var r=a;switch(Nh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&El();break;case 3:mn(),Pe(zt),Pe(wt),Ih();break;case 5:Ph(r);break;case 4:mn();break;case 13:Pe(Fe);break;case 19:Pe(Fe);break;case 10:Mh(r.type._context);break;case 22:case 23:Hh()}a=a.return}if(it=t,Qe=t=Or(t.current,null),ct=Ut=e,tt=0,$i=null,Bh=fc=fs=0,Dt=hi=null,ns!==null){for(e=0;e<ns.length;e++)if(a=ns[e],r=a.interleaved,r!==null){a.interleaved=null;var s=r.next,n=a.pending;if(n!==null){var o=n.next;n.next=s,r.next=o}a.pending=r}ns=null}return t}function Fx(t,e){do{var a=Qe;try{if(Eh(),ol.current=Ll,Al){for(var r=Ue.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Al=!1}if(gs=0,st=Ze=Ue=null,di=!1,Li=0,Uh.current=null,a===null||a.return===null){tt=1,$i=e,Qe=null;break}e:{var n=t,o=a.return,l=a,c=e;if(e=ct,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=vm(o);if(m!==null){m.flags&=-257,wm(m,o,l,n,e),m.mode&1&&ym(n,d,e),e=m,c=d;var v=e.updateQueue;if(v===null){var y=new Set;y.add(c),e.updateQueue=y}else v.add(c);break e}else{if(!(e&1)){ym(n,d,e),Wh();break e}c=Error(Z(426))}}else if(ze&&l.mode&1){var k=vm(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),wm(k,o,l,n,e),Sh(gn(c,l));break e}}n=c=gn(c,l),tt!==4&&(tt=2),hi===null?hi=[n]:hi.push(n),n=o;do{switch(n.tag){case 3:n.flags|=65536,e&=-e,n.lanes|=e;var g=wx(n,c,e);pm(n,g);break e;case 1:l=c;var f=n.type,x=n.stateNode;if(!(n.flags&128)&&(typeof f.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Dr===null||!Dr.has(x)))){n.flags|=65536,e&=-e,n.lanes|=e;var w=kx(n,l,e);pm(n,w);break e}}n=n.return}while(n!==null)}Bx(a)}catch(S){e=S,Qe===a&&a!==null&&(Qe=a=a.return);continue}break}while(!0)}function $x(){var t=Rl.current;return Rl.current=Ll,t===null?Ll:t}function Wh(){(tt===0||tt===3||tt===2)&&(tt=4),it===null||!(fs&268435455)&&!(fc&268435455)||br(it,ct)}function Ul(t,e){var a=xe;xe|=2;var r=$x();(it!==t||ct!==e)&&(qa=null,cs(t,e));do try{M1();break}catch(s){Fx(t,s)}while(!0);if(Eh(),xe=a,Rl.current=r,Qe!==null)throw Error(Z(261));return it=null,ct=0,tt}function M1(){for(;Qe!==null;)Ux(Qe)}function D1(){for(;Qe!==null&&!tw();)Ux(Qe)}function Ux(t){var e=Vx(t.alternate,t,Ut);t.memoizedProps=t.pendingProps,e===null?Bx(t):Qe=e,Uh.current=null}function Bx(t){var e=t;do{var a=e.alternate;if(t=e.return,e.flags&32768){if(a=j1(a,e),a!==null){a.flags&=32767,Qe=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Qe=null;return}}else if(a=k1(a,e,Ut),a!==null){Qe=a;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);tt===0&&(tt=5)}function Xr(t,e,a){var r=Ne,s=na.transition;try{na.transition=null,Ne=1,T1(t,e,a,r)}finally{na.transition=s,Ne=r}return null}function T1(t,e,a,r){do sn();while(wr!==null);if(xe&6)throw Error(Z(327));a=t.finishedWork;var s=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var n=a.lanes|a.childLanes;if(uw(t,n),t===it&&(Qe=it=null,ct=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Do||(Do=!0,Hx(kl,function(){return sn(),null})),n=(a.flags&15990)!==0,a.subtreeFlags&15990||n){n=na.transition,na.transition=null;var o=Ne;Ne=1;var l=xe;xe|=4,Uh.current=null,N1(t,a),Ax(a,t),Xw(Zd),_l=!!Qd,Zd=Qd=null,t.current=a,S1(a),aw(),xe=l,Ne=o,na.transition=n}else t.current=a;if(Do&&(Do=!1,wr=t,$l=s),n=t.pendingLanes,n===0&&(Dr=null),nw(a.stateNode),Lt(t,We()),e!==null)for(r=t.onRecoverableError,a=0;a<e.length;a++)s=e[a],r(s.value,{componentStack:s.stack,digest:s.digest});if(Fl)throw Fl=!1,t=bu,bu=null,t;return $l&1&&t.tag!==0&&sn(),n=t.pendingLanes,n&1?t===yu?pi++:(pi=0,yu=t):pi=0,Ur(),null}function sn(){if(wr!==null){var t=wf($l),e=na.transition,a=Ne;try{if(na.transition=null,Ne=16>t?16:t,wr===null)var r=!1;else{if(t=wr,wr=null,$l=0,xe&6)throw Error(Z(331));var s=xe;for(xe|=4,se=t.current;se!==null;){var n=se,o=n.child;if(se.flags&16){var l=n.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(se=d;se!==null;){var u=se;switch(u.tag){case 0:case 11:case 15:ui(8,u,n)}var h=u.child;if(h!==null)h.return=u,se=h;else for(;se!==null;){u=se;var p=u.sibling,m=u.return;if(Px(u),u===d){se=null;break}if(p!==null){p.return=m,se=p;break}se=m}}}var v=n.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var k=y.sibling;y.sibling=null,y=k}while(y!==null)}}se=n}}if(n.subtreeFlags&2064&&o!==null)o.return=n,se=o;else e:for(;se!==null;){if(n=se,n.flags&2048)switch(n.tag){case 0:case 11:case 15:ui(9,n,n.return)}var g=n.sibling;if(g!==null){g.return=n.return,se=g;break e}se=n.return}}var f=t.current;for(se=f;se!==null;){o=se;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,se=x;else e:for(o=f;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:gc(9,l)}}catch(S){qe(l,l.return,S)}if(l===o){se=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,se=w;break e}se=l.return}}if(xe=s,Ur(),Oa&&typeof Oa.onPostCommitFiberRoot=="function")try{Oa.onPostCommitFiberRoot(oc,t)}catch{}r=!0}return r}finally{Ne=a,na.transition=e}}return!1}function Im(t,e,a){e=gn(a,e),e=wx(t,e,1),t=Mr(t,e,1),e=_t(),t!==null&&(eo(t,1,e),Lt(t,e))}function qe(t,e,a){if(t.tag===3)Im(t,t,a);else for(;e!==null;){if(e.tag===3){Im(e,t,a);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dr===null||!Dr.has(r))){t=gn(a,t),t=kx(e,t,1),e=Mr(e,t,1),t=_t(),e!==null&&(eo(e,1,t),Lt(e,t));break}}e=e.return}}function O1(t,e,a){var r=t.pingCache;r!==null&&r.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&a,it===t&&(ct&a)===a&&(tt===4||tt===3&&(ct&130023424)===ct&&500>We()-qh?cs(t,0):Bh|=a),Lt(t,e)}function qx(t,e){e===0&&(t.mode&1?(e=vo,vo<<=1,!(vo&130023424)&&(vo=4194304)):e=1);var a=_t();t=ar(t,e),t!==null&&(eo(t,e,a),Lt(t,a))}function P1(t){var e=t.memoizedState,a=0;e!==null&&(a=e.retryLane),qx(t,a)}function I1(t,e){var a=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(a=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),qx(t,a)}var Vx;Vx=function(t,e,a){if(t!==null)if(t.memoizedProps!==e.pendingProps||zt.current)Pt=!0;else{if(!(t.lanes&a)&&!(e.flags&128))return Pt=!1,w1(t,e,a);Pt=!!(t.flags&131072)}else Pt=!1,ze&&e.flags&1048576&&Gf(e,Tl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cl(t,e),t=e.pendingProps;var s=un(e,wt.current);rn(e,a),s=Ah(null,e,r,t,s,a);var n=Lh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,At(r)?(n=!0,Ml(e)):n=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Th(e),s.updater=mc,e.stateNode=s,s._reactInternals=e,lu(e,r,t,a),e=uu(null,e,r,!0,n,a)):(e.tag=0,ze&&n&&_h(e),jt(null,e,s,a),e=e.child),e;case 16:r=e.elementType;e:{switch(cl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=A1(r),t=ha(r,t),s){case 0:e=du(null,e,r,t,a);break e;case 1:e=_m(null,e,r,t,a);break e;case 11:e=km(null,e,r,t,a);break e;case 14:e=jm(null,e,r,ha(r.type,t),a);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ha(r,s),du(t,e,r,s,a);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ha(r,s),_m(t,e,r,s,a);case 3:e:{if(Sx(e),t===null)throw Error(Z(387));r=e.pendingProps,n=e.memoizedState,s=n.element,Zf(t,e),Il(e,r,null,a);var o=e.memoizedState;if(r=o.element,n.isDehydrated)if(n={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=n,e.memoizedState=n,e.flags&256){s=gn(Error(Z(423)),e),e=Nm(t,e,r,a,s);break e}else if(r!==s){s=gn(Error(Z(424)),e),e=Nm(t,e,r,a,s);break e}else for(Bt=Er(e.stateNode.containerInfo.firstChild),Ht=e,ze=!0,fa=null,a=Xf(e,null,r,a),e.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(hn(),r===s){e=rr(t,e,a);break e}jt(t,e,r,a)}e=e.child}return e;case 5:return ex(e),t===null&&nu(e),r=e.type,s=e.pendingProps,n=t!==null?t.memoizedProps:null,o=s.children,eu(r,s)?o=null:n!==null&&eu(r,n)&&(e.flags|=32),Nx(t,e),jt(t,e,o,a),e.child;case 6:return t===null&&nu(e),null;case 13:return Cx(t,e,a);case 4:return Oh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pn(e,null,r,a):jt(t,e,r,a),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ha(r,s),km(t,e,r,s,a);case 7:return jt(t,e,e.pendingProps,a),e.child;case 8:return jt(t,e,e.pendingProps.children,a),e.child;case 12:return jt(t,e,e.pendingProps.children,a),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,n=e.memoizedProps,o=s.value,Me(Ol,r._currentValue),r._currentValue=o,n!==null)if(wa(n.value,o)){if(n.children===s.children&&!zt.current){e=rr(t,e,a);break e}}else for(n=e.child,n!==null&&(n.return=e);n!==null;){var l=n.dependencies;if(l!==null){o=n.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(n.tag===1){c=Za(-1,a&-a),c.tag=2;var d=n.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}n.lanes|=a,c=n.alternate,c!==null&&(c.lanes|=a),iu(n.return,a,e),l.lanes|=a;break}c=c.next}}else if(n.tag===10)o=n.type===e.type?null:n.child;else if(n.tag===18){if(o=n.return,o===null)throw Error(Z(341));o.lanes|=a,l=o.alternate,l!==null&&(l.lanes|=a),iu(o,a,e),o=n.sibling}else o=n.child;if(o!==null)o.return=n;else for(o=n;o!==null;){if(o===e){o=null;break}if(n=o.sibling,n!==null){n.return=o.return,o=n;break}o=o.return}n=o}jt(t,e,s.children,a),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,rn(e,a),s=ia(s),r=r(s),e.flags|=1,jt(t,e,r,a),e.child;case 14:return r=e.type,s=ha(r,e.pendingProps),s=ha(r.type,s),jm(t,e,r,s,a);case 15:return jx(t,e,e.type,e.pendingProps,a);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ha(r,s),cl(t,e),e.tag=1,At(r)?(t=!0,Ml(e)):t=!1,rn(e,a),vx(e,r,s),lu(e,r,s,a),uu(null,e,r,!0,t,a);case 19:return Ex(t,e,a);case 22:return _x(t,e,a)}throw Error(Z(156,e.tag))};function Hx(t,e){return xf(t,e)}function z1(t,e,a,r){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function aa(t,e,a,r){return new z1(t,e,a,r)}function Gh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function A1(t){if(typeof t=="function")return Gh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hh)return 11;if(t===ph)return 14}return 2}function Or(t,e){var a=t.alternate;return a===null?(a=aa(t.tag,e,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=e,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,e=t.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function hl(t,e,a,r,s,n){var o=2;if(r=t,typeof t=="function")Gh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bs:return ds(a.children,s,n,e);case uh:o=8,s|=8;break;case Od:return t=aa(12,a,e,s|2),t.elementType=Od,t.lanes=n,t;case Pd:return t=aa(13,a,e,s),t.elementType=Pd,t.lanes=n,t;case Id:return t=aa(19,a,e,s),t.elementType=Id,t.lanes=n,t;case Z0:return xc(a,s,n,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case X0:o=10;break e;case Q0:o=9;break e;case hh:o=11;break e;case ph:o=14;break e;case mr:o=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=aa(o,a,e,s),e.elementType=t,e.type=r,e.lanes=n,e}function ds(t,e,a,r){return t=aa(7,t,r,e),t.lanes=a,t}function xc(t,e,a,r){return t=aa(22,t,r,e),t.elementType=Z0,t.lanes=a,t.stateNode={isHidden:!1},t}function id(t,e,a){return t=aa(6,t,null,e),t.lanes=a,t}function od(t,e,a){return e=aa(4,t.children!==null?t.children:[],t.key,e),e.lanes=a,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function L1(t,e,a,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uc(0),this.expirationTimes=Uc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Jh(t,e,a,r,s,n,o,l,c){return t=new L1(t,e,a,l,c),e===1?(e=1,n===!0&&(e|=8)):e=0,n=aa(3,null,null,e),t.current=n,n.stateNode=t,n.memoizedState={element:r,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Th(n),t}function R1(t,e,a){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Us,key:r==null?null:""+r,children:t,containerInfo:e,implementation:a}}function Wx(t){if(!t)return Lr;t=t._reactInternals;e:{if(js(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(At(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var a=t.type;if(At(a))return Hf(t,a,e)}return e}function Gx(t,e,a,r,s,n,o,l,c){return t=Jh(a,r,!0,t,s,n,o,l,c),t.context=Wx(null),a=t.current,r=_t(),s=Tr(a),n=Za(r,s),n.callback=e??null,Mr(a,n,s),t.current.lanes=s,eo(t,s,r),Lt(t,r),t}function bc(t,e,a,r){var s=e.current,n=_t(),o=Tr(s);return a=Wx(a),e.context===null?e.context=a:e.pendingContext=a,e=Za(n,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mr(s,e,o),t!==null&&(ba(t,s,o,n),il(t,s,o)),o}function Bl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<e?a:e}}function Yh(t,e){zm(t,e),(t=t.alternate)&&zm(t,e)}function F1(){return null}var Jx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kh(t){this._internalRoot=t}yc.prototype.render=Kh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));bc(t,e,null,null)};yc.prototype.unmount=Kh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xs(function(){bc(null,t,null,null)}),e[tr]=null}};function yc(t){this._internalRoot=t}yc.prototype.unstable_scheduleHydration=function(t){if(t){var e=_f();t={blockedOn:null,target:t,priority:e};for(var a=0;a<xr.length&&e!==0&&e<xr[a].priority;a++);xr.splice(a,0,t),a===0&&Sf(t)}};function Xh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Am(){}function $1(t,e,a,r,s){if(s){if(typeof r=="function"){var n=r;r=function(){var d=Bl(o);n.call(d)}}var o=Gx(e,r,t,0,null,!1,!1,"",Am);return t._reactRootContainer=o,t[tr]=o.current,Oi(t.nodeType===8?t.parentNode:t),xs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Bl(c);l.call(d)}}var c=Jh(t,0,!1,null,null,!1,!1,"",Am);return t._reactRootContainer=c,t[tr]=c.current,Oi(t.nodeType===8?t.parentNode:t),xs(function(){bc(e,c,a,r)}),c}function wc(t,e,a,r,s){var n=a._reactRootContainer;if(n){var o=n;if(typeof s=="function"){var l=s;s=function(){var c=Bl(o);l.call(c)}}bc(e,o,t,s)}else o=$1(a,e,t,s,r);return Bl(o)}kf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var a=Xn(e.pendingLanes);a!==0&&(fh(e,a|1),Lt(e,We()),!(xe&6)&&(fn=We()+500,Ur()))}break;case 13:xs(function(){var r=ar(t,1);if(r!==null){var s=_t();ba(r,t,1,s)}}),Yh(t,1)}};xh=function(t){if(t.tag===13){var e=ar(t,134217728);if(e!==null){var a=_t();ba(e,t,134217728,a)}Yh(t,134217728)}};jf=function(t){if(t.tag===13){var e=Tr(t),a=ar(t,e);if(a!==null){var r=_t();ba(a,t,e,r)}Yh(t,e)}};_f=function(){return Ne};Nf=function(t,e){var a=Ne;try{return Ne=t,e()}finally{Ne=a}};Vd=function(t,e,a){switch(e){case"input":if(Ld(t,a),e=a.name,a.type==="radio"&&e!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<a.length;e++){var r=a[e];if(r!==t&&r.form===t.form){var s=uc(r);if(!s)throw Error(Z(90));tf(r),Ld(r,s)}}}break;case"textarea":rf(t,a);break;case"select":e=a.value,e!=null&&Zs(t,!!a.multiple,e,!1)}};uf=Vh;hf=xs;var U1={usingClientEntryPoint:!1,Events:[ao,Ws,uc,cf,df,Vh]},Fn={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B1={bundleType:Fn.bundleType,version:Fn.version,rendererPackageName:Fn.rendererPackageName,rendererConfig:Fn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gf(t),t===null?null:t.stateNode},findFiberByHostInstance:Fn.findFiberByHostInstance||F1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var To=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!To.isDisabled&&To.supportsFiber)try{oc=To.inject(B1),Oa=To}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U1;Jt.createPortal=function(t,e){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xh(e))throw Error(Z(200));return R1(t,e,null,a)};Jt.createRoot=function(t,e){if(!Xh(t))throw Error(Z(299));var a=!1,r="",s=Jx;return e!=null&&(e.unstable_strictMode===!0&&(a=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Jh(t,1,!1,null,null,a,!1,r,s),t[tr]=e.current,Oi(t.nodeType===8?t.parentNode:t),new Kh(e)};Jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=gf(e),t=t===null?null:t.stateNode,t};Jt.flushSync=function(t){return xs(t)};Jt.hydrate=function(t,e,a){if(!vc(e))throw Error(Z(200));return wc(null,t,e,!0,a)};Jt.hydrateRoot=function(t,e,a){if(!Xh(t))throw Error(Z(405));var r=a!=null&&a.hydratedSources||null,s=!1,n="",o=Jx;if(a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onRecoverableError!==void 0&&(o=a.onRecoverableError)),e=Gx(e,null,t,1,a??null,s,!1,n,o),t[tr]=e.current,Oi(t),r)for(t=0;t<r.length;t++)a=r[t],s=a._getVersion,s=s(a._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[a,s]:e.mutableSourceEagerHydrationData.push(a,s);return new yc(e)};Jt.render=function(t,e,a){if(!vc(e))throw Error(Z(200));return wc(null,t,e,!1,a)};Jt.unmountComponentAtNode=function(t){if(!vc(t))throw Error(Z(40));return t._reactRootContainer?(xs(function(){wc(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};Jt.unstable_batchedUpdates=Vh;Jt.unstable_renderSubtreeIntoContainer=function(t,e,a,r){if(!vc(a))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return wc(t,e,a,!1,r)};Jt.version="18.3.1-next-f1338f8080-20240426";function Yx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yx)}catch(t){console.error(t)}}Yx(),G0.exports=Jt;var q1=G0.exports,Kx,Lm=q1;Kx=Lm.createRoot,Lm.hydrateRoot;/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var V1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const H1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),re=(t,e)=>{const a=T.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>T.createElement("svg",{ref:u,...V1,width:s,height:s,stroke:r,strokeWidth:o?Number(n)*24/Number(s):n,className:["lucide",`lucide-${H1(t)}`,l].join(" "),...d},[...e.map(([h,p])=>T.createElement(h,p)),...Array.isArray(c)?c:[c]]));return a.displayName=`${t}`,a};/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nt=re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const It=re("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ka=re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const W1=re("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Oo=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const os=re("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Xx=re("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const bs=re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ku=re("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ga=re("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sr=re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const G1=re("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const lt=re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ju=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const qt=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const J1=re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Y1=re("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Qx=re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const dt=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Zx=re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const kc=re("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Gt=re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ya=re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const K1=re("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const _s=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const eb=re("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const X1=re("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Xa=re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const _u=re("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Q1=re("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Pr=re("Headset",[["path",{d:"M3 11h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5Zm0 0a9 9 0 1 1 18 0m0 0v5a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3Z",key:"12oyoe"}],["path",{d:"M21 16v2a4 4 0 0 1-4 4h-5",key:"1x7m43"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Z1=re("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ek=re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const tk=re("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Rm=re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ak=re("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ui=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Nu=re("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const tb=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nn=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const rk=re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const on=re("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ab=re("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sk=re("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ia=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const so=re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nk=re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ir=re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ns=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Su=re("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ys=re("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Qh=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Se=re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ik=re("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ra=re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Fm=re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ok=re("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const rb=re("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sb=re("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ql=re("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Cu=re("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Rt=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Vl=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const $m=re("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Zh=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const lk=re("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ck=re("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nr=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const va=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const dk=re("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Eu=re("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const uk=re("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const _e=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var nb={exports:{}};(function(t,e){(function(a,r){t.exports=r(a)})(typeof bt<"u"?bt:window||bt.window||bt.global,function(a){var r={},s="iziToast";document.querySelector("body");var n=!!/Mobi/.test(navigator.userAgent),o=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),l=typeof InstallTrigger<"u",c="ontouchstart"in document.documentElement,d=["bottomRight","bottomLeft","bottomCenter","topRight","topLeft","topCenter","center"],u={info:{color:"blue",icon:"ico-info"},success:{color:"green",icon:"ico-success"},warning:{color:"orange",icon:"ico-warning"},error:{color:"red",icon:"ico-error"},question:{color:"yellow",icon:"ico-question"}},h=568,p={};r.children={};var m={id:null,class:"",title:"",titleColor:"",titleSize:"",titleLineHeight:"",message:"",messageColor:"",messageSize:"",messageLineHeight:"",backgroundColor:"",theme:"light",color:"",icon:"",iconText:"",iconColor:"",iconUrl:null,image:"",imageWidth:50,maxWidth:null,zindex:null,layout:1,balloon:!1,close:!0,closeOnEscape:!1,closeOnClick:!1,displayMode:0,position:"bottomRight",target:"",targetFirst:!0,timeout:5e3,rtl:!1,animateInside:!0,drag:!0,pauseOnHover:!0,resetOnHover:!1,progressBar:!0,progressBarColor:"",progressBarEasing:"linear",overlay:!1,overlayClose:!1,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInUp",transitionOut:"fadeOut",transitionInMobile:"fadeInUp",transitionOutMobile:"fadeOutDown",buttons:{},inputs:{},onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){}};if("remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof window.CustomEvent!="function"){var v=function(N,_){_=_||{bubbles:!1,cancelable:!1,detail:void 0};var b=document.createEvent("CustomEvent");return b.initCustomEvent(N,_.bubbles,_.cancelable,_.detail),b};v.prototype=window.Event.prototype,window.CustomEvent=v}var y=function(N,_,b){if(Object.prototype.toString.call(N)==="[object Object]")for(var j in N)Object.prototype.hasOwnProperty.call(N,j)&&_.call(b,N[j],j,N);else if(N)for(var A=0,I=N.length;A<I;A++)_.call(b,N[A],A,N)},k=function(N,_){var b={};return y(N,function(j,A){b[A]=N[A]}),y(_,function(j,A){b[A]=_[A]}),b},g=function(N){var _=document.createDocumentFragment(),b=document.createElement("div");for(b.innerHTML=N;b.firstChild;)_.appendChild(b.firstChild);return _},f=function(N){var _=btoa(encodeURIComponent(N));return _.replace(/=/g,"")},x=function(N){return N.substring(0,1)=="#"||N.substring(0,3)=="rgb"||N.substring(0,3)=="hsl"},w=function(N){try{return btoa(atob(N))==N}catch{return!1}},S=function(){return{move:function(N,_,b,j){var A,I=.3,z=180;j!==0&&(N.classList.add(s+"-dragged"),N.style.transform="translateX("+j+"px)",j>0?(A=(z-j)/z,A<I&&_.hide(k(b,{transitionOut:"fadeOutRight",transitionOutMobile:"fadeOutRight"}),N,"drag")):(A=(z+j)/z,A<I&&_.hide(k(b,{transitionOut:"fadeOutLeft",transitionOutMobile:"fadeOutLeft"}),N,"drag")),N.style.opacity=A,A<I&&((o||l)&&(N.style.left=j+"px"),N.parentNode.style.opacity=I,this.stopMoving(N,null)))},startMoving:function(N,_,b,j){j=j||window.event;var A=c?j.touches[0].clientX:j.clientX,I=N.style.transform.replace("px)","");I=I.replace("translateX(","");var z=A-I;b.transitionIn&&N.classList.remove(b.transitionIn),b.transitionInMobile&&N.classList.remove(b.transitionInMobile),N.style.transition="",c?document.ontouchmove=function($){$.preventDefault(),$=$||window.event;var W=$.touches[0].clientX,L=W-z;S.move(N,_,b,L)}:document.onmousemove=function($){$.preventDefault(),$=$||window.event;var W=$.clientX,L=W-z;S.move(N,_,b,L)}},stopMoving:function(N,_){c?document.ontouchmove=function(){}:document.onmousemove=function(){},N.style.opacity="",N.style.transform="",N.classList.contains(s+"-dragged")&&(N.classList.remove(s+"-dragged"),N.style.transition="transform 0.4s ease, opacity 0.4s ease",setTimeout(function(){N.style.transition=""},400))}}}();return r.setSetting=function(N,_,b){r.children[N][_]=b},r.getSetting=function(N,_){return r.children[N][_]},r.destroy=function(){y(document.querySelectorAll("."+s+"-overlay"),function(N,_){N.remove()}),y(document.querySelectorAll("."+s+"-wrapper"),function(N,_){N.remove()}),y(document.querySelectorAll("."+s),function(N,_){N.remove()}),this.children={},document.removeEventListener(s+"-opened",{},!1),document.removeEventListener(s+"-opening",{},!1),document.removeEventListener(s+"-closing",{},!1),document.removeEventListener(s+"-closed",{},!1),document.removeEventListener("keyup",{},!1),p={}},r.settings=function(N){r.destroy(),p=N,m=k(m,N||{})},y(u,function(N,_){r[_]=function(b){var j=k(p,b||{});j=k(N,j||{}),this.show(j)}}),r.progress=function(N,_,b){var j=this,A=_.getAttribute("data-iziToast-ref"),I=k(this.children[A],N||{}),z=_.querySelector("."+s+"-progressbar div");return{start:function(){typeof I.time.REMAINING>"u"&&(_.classList.remove(s+"-reseted"),z!==null&&(z.style.transition="width "+I.timeout+"ms "+I.progressBarEasing,z.style.width="0%"),I.time.START=new Date().getTime(),I.time.END=I.time.START+I.timeout,I.time.TIMER=setTimeout(function(){clearTimeout(I.time.TIMER),_.classList.contains(s+"-closing")||(j.hide(I,_,"timeout"),typeof b=="function"&&b.apply(j))},I.timeout),j.setSetting(A,"time",I.time))},pause:function(){if(typeof I.time.START<"u"&&!_.classList.contains(s+"-paused")&&!_.classList.contains(s+"-reseted")){if(_.classList.add(s+"-paused"),I.time.REMAINING=I.time.END-new Date().getTime(),clearTimeout(I.time.TIMER),j.setSetting(A,"time",I.time),z!==null){var $=window.getComputedStyle(z),W=$.getPropertyValue("width");z.style.transition="none",z.style.width=W}typeof b=="function"&&setTimeout(function(){b.apply(j)},10)}},resume:function(){typeof I.time.REMAINING<"u"?(_.classList.remove(s+"-paused"),z!==null&&(z.style.transition="width "+I.time.REMAINING+"ms "+I.progressBarEasing,z.style.width="0%"),I.time.END=new Date().getTime()+I.time.REMAINING,I.time.TIMER=setTimeout(function(){clearTimeout(I.time.TIMER),_.classList.contains(s+"-closing")||(j.hide(I,_,"timeout"),typeof b=="function"&&b.apply(j))},I.time.REMAINING),j.setSetting(A,"time",I.time)):this.start()},reset:function(){clearTimeout(I.time.TIMER),delete I.time.REMAINING,j.setSetting(A,"time",I.time),_.classList.add(s+"-reseted"),_.classList.remove(s+"-paused"),z!==null&&(z.style.transition="none",z.style.width="100%"),typeof b=="function"&&setTimeout(function(){b.apply(j)},10)}}},r.hide=function(N,_,b){typeof _!="object"&&(_=document.querySelector(_));var j=this,A=k(this.children[_.getAttribute("data-iziToast-ref")],N||{});A.closedBy=b||null,delete A.time.REMAINING,_.classList.add(s+"-closing"),function(){var $=document.querySelector("."+s+"-overlay");if($!==null){var W=$.getAttribute("data-iziToast-ref");W=W.split(",");var L=W.indexOf(String(A.ref));L!==-1&&W.splice(L,1),$.setAttribute("data-iziToast-ref",W.join()),W.length===0&&($.classList.remove("fadeIn"),$.classList.add("fadeOut"),setTimeout(function(){$.remove()},700))}}(),A.transitionIn&&_.classList.remove(A.transitionIn),A.transitionInMobile&&_.classList.remove(A.transitionInMobile),n||window.innerWidth<=h?A.transitionOutMobile&&_.classList.add(A.transitionOutMobile):A.transitionOut&&_.classList.add(A.transitionOut);var I=_.parentNode.offsetHeight;_.parentNode.style.height=I+"px",_.style.pointerEvents="none",(!n||window.innerWidth>h)&&(_.parentNode.style.transitionDelay="0.2s");try{var z=new CustomEvent(s+"-closing",{detail:A,bubbles:!0,cancelable:!0});document.dispatchEvent(z)}catch($){console.warn($)}setTimeout(function(){_.parentNode.style.height="0px",_.parentNode.style.overflow="",setTimeout(function(){delete j.children[A.ref],_.parentNode.remove();try{var $=new CustomEvent(s+"-closed",{detail:A,bubbles:!0,cancelable:!0});document.dispatchEvent($)}catch(W){console.warn(W)}typeof A.onClosed<"u"&&A.onClosed.apply(null,[A,_,b])},1e3)},200),typeof A.onClosing<"u"&&A.onClosing.apply(null,[A,_,b])},r.show=function(N){var _=this,b=k(p,N||{});if(b=k(m,b),b.time={},b.id===null&&(b.id=f(b.title+b.message+b.color)),b.displayMode===1||b.displayMode=="once")try{if(document.querySelectorAll("."+s+"#"+b.id).length>0)return!1}catch{console.warn("["+s+"] Could not find an element with this selector: #"+b.id+". Try to set an valid id.")}if(b.displayMode===2||b.displayMode=="replace")try{y(document.querySelectorAll("."+s+"#"+b.id),function(z,$){_.hide(b,z,"replaced")})}catch{console.warn("["+s+"] Could not find an element with this selector: #"+b.id+". Try to set an valid id.")}b.ref=new Date().getTime()+Math.floor(Math.random()*1e7+1),r.children[b.ref]=b;var j={body:document.querySelector("body"),overlay:document.createElement("div"),toast:document.createElement("div"),toastBody:document.createElement("div"),toastTexts:document.createElement("div"),toastCapsule:document.createElement("div"),cover:document.createElement("div"),buttons:document.createElement("div"),inputs:document.createElement("div"),icon:b.iconUrl?document.createElement("img"):document.createElement("i"),wrapper:null};j.toast.setAttribute("data-iziToast-ref",b.ref),j.toast.appendChild(j.toastBody),j.toastCapsule.appendChild(j.toast),function(){if(j.toast.classList.add(s),j.toast.classList.add(s+"-opening"),j.toastCapsule.classList.add(s+"-capsule"),j.toastBody.classList.add(s+"-body"),j.toastTexts.classList.add(s+"-texts"),n||window.innerWidth<=h?b.transitionInMobile&&j.toast.classList.add(b.transitionInMobile):b.transitionIn&&j.toast.classList.add(b.transitionIn),b.class){var z=b.class.split(" ");y(z,function($,W){j.toast.classList.add($)})}b.id&&(j.toast.id=b.id),b.rtl&&(j.toast.classList.add(s+"-rtl"),j.toast.setAttribute("dir","rtl")),b.layout>1&&j.toast.classList.add(s+"-layout"+b.layout),b.balloon&&j.toast.classList.add(s+"-balloon"),b.maxWidth&&(isNaN(b.maxWidth)?j.toast.style.maxWidth=b.maxWidth:j.toast.style.maxWidth=b.maxWidth+"px"),(b.theme!==""||b.theme!=="light")&&j.toast.classList.add(s+"-theme-"+b.theme),b.color&&(x(b.color)?j.toast.style.background=b.color:j.toast.classList.add(s+"-color-"+b.color)),b.backgroundColor&&(j.toast.style.background=b.backgroundColor,b.balloon&&(j.toast.style.borderColor=b.backgroundColor))}(),function(){b.image&&(j.cover.classList.add(s+"-cover"),j.cover.style.width=b.imageWidth+"px",w(b.image.replace(/ /g,""))?j.cover.style.backgroundImage="url(data:image/png;base64,"+b.image.replace(/ /g,"")+")":j.cover.style.backgroundImage="url("+b.image+")",b.rtl?j.toastBody.style.marginRight=b.imageWidth+10+"px":j.toastBody.style.marginLeft=b.imageWidth+10+"px",j.toast.appendChild(j.cover))}(),function(){b.close?(j.buttonClose=document.createElement("button"),j.buttonClose.type="button",j.buttonClose.classList.add(s+"-close"),j.buttonClose.addEventListener("click",function(z){z.target,_.hide(b,j.toast,"button")}),j.toast.appendChild(j.buttonClose)):b.rtl?j.toast.style.paddingLeft="18px":j.toast.style.paddingRight="18px"}(),function(){b.progressBar&&(j.progressBar=document.createElement("div"),j.progressBarDiv=document.createElement("div"),j.progressBar.classList.add(s+"-progressbar"),j.progressBarDiv.style.background=b.progressBarColor,j.progressBar.appendChild(j.progressBarDiv),j.toast.appendChild(j.progressBar)),b.timeout&&(b.pauseOnHover&&!b.resetOnHover&&(j.toast.addEventListener("mouseenter",function(z){_.progress(b,j.toast).pause()}),j.toast.addEventListener("mouseleave",function(z){_.progress(b,j.toast).resume()})),b.resetOnHover&&(j.toast.addEventListener("mouseenter",function(z){_.progress(b,j.toast).reset()}),j.toast.addEventListener("mouseleave",function(z){_.progress(b,j.toast).start()})))}(),function(){b.iconUrl?(j.icon.setAttribute("class",s+"-icon"),j.icon.setAttribute("src",b.iconUrl)):b.icon&&(j.icon.setAttribute("class",s+"-icon "+b.icon),b.iconText&&j.icon.appendChild(document.createTextNode(b.iconText)),b.iconColor&&(j.icon.style.color=b.iconColor)),(b.icon||b.iconUrl)&&(b.rtl?j.toastBody.style.paddingRight="33px":j.toastBody.style.paddingLeft="33px",j.toastBody.appendChild(j.icon))}(),function(){b.title.length>0&&(j.strong=document.createElement("strong"),j.strong.classList.add(s+"-title"),j.strong.appendChild(g(b.title)),j.toastTexts.appendChild(j.strong),b.titleColor&&(j.strong.style.color=b.titleColor),b.titleSize&&(isNaN(b.titleSize)?j.strong.style.fontSize=b.titleSize:j.strong.style.fontSize=b.titleSize+"px"),b.titleLineHeight&&(isNaN(b.titleSize)?j.strong.style.lineHeight=b.titleLineHeight:j.strong.style.lineHeight=b.titleLineHeight+"px")),b.message.length>0&&(j.p=document.createElement("p"),j.p.classList.add(s+"-message"),j.p.appendChild(g(b.message)),j.toastTexts.appendChild(j.p),b.messageColor&&(j.p.style.color=b.messageColor),b.messageSize&&(isNaN(b.titleSize)?j.p.style.fontSize=b.messageSize:j.p.style.fontSize=b.messageSize+"px"),b.messageLineHeight&&(isNaN(b.titleSize)?j.p.style.lineHeight=b.messageLineHeight:j.p.style.lineHeight=b.messageLineHeight+"px")),b.title.length>0&&b.message.length>0&&(b.rtl?j.strong.style.marginLeft="10px":b.layout!==2&&!b.rtl&&(j.strong.style.marginRight="10px"))}(),j.toastBody.appendChild(j.toastTexts);var A;(function(){b.inputs.length>0&&(j.inputs.classList.add(s+"-inputs"),y(b.inputs,function(z,$){j.inputs.appendChild(g(z[0])),A=j.inputs.childNodes,A[$].classList.add(s+"-inputs-child"),z[3]&&setTimeout(function(){A[$].focus()},300),A[$].addEventListener(z[1],function(W){var L=z[2];return L(_,j.toast,this,W)})}),j.toastBody.appendChild(j.inputs))})(),function(){b.buttons.length>0&&(j.buttons.classList.add(s+"-buttons"),y(b.buttons,function(z,$){j.buttons.appendChild(g(z[0]));var W=j.buttons.childNodes;W[$].classList.add(s+"-buttons-child"),z[2]&&setTimeout(function(){W[$].focus()},300),W[$].addEventListener("click",function(L){L.preventDefault();var J=z[1];return J(_,j.toast,this,L,A)})})),j.toastBody.appendChild(j.buttons)}(),b.message.length>0&&(b.inputs.length>0||b.buttons.length>0)&&(j.p.style.marginBottom="0"),(b.inputs.length>0||b.buttons.length>0)&&(b.rtl?j.toastTexts.style.marginLeft="10px":j.toastTexts.style.marginRight="10px",b.inputs.length>0&&b.buttons.length>0&&(b.rtl?j.inputs.style.marginLeft="8px":j.inputs.style.marginRight="8px")),function(){j.toastCapsule.style.visibility="hidden",setTimeout(function(){var z=j.toast.offsetHeight,$=j.toast.currentStyle||window.getComputedStyle(j.toast),W=$.marginTop;W=W.split("px"),W=parseInt(W[0]);var L=$.marginBottom;L=L.split("px"),L=parseInt(L[0]),j.toastCapsule.style.visibility="",j.toastCapsule.style.height=z+L+W+"px",setTimeout(function(){j.toastCapsule.style.height="auto",b.target&&(j.toastCapsule.style.overflow="visible")},500),b.timeout&&_.progress(b,j.toast).start()},100)}(),function(){var z=b.position;if(b.target)j.wrapper=document.querySelector(b.target),j.wrapper.classList.add(s+"-target"),b.targetFirst?j.wrapper.insertBefore(j.toastCapsule,j.wrapper.firstChild):j.wrapper.appendChild(j.toastCapsule);else{if(d.indexOf(b.position)==-1){console.warn("["+s+`] Incorrect position.
It can be  `+d);return}n||window.innerWidth<=h?b.position=="bottomLeft"||b.position=="bottomRight"||b.position=="bottomCenter"?z=s+"-wrapper-bottomCenter":b.position=="topLeft"||b.position=="topRight"||b.position=="topCenter"?z=s+"-wrapper-topCenter":z=s+"-wrapper-center":z=s+"-wrapper-"+z,j.wrapper=document.querySelector("."+s+"-wrapper."+z),j.wrapper||(j.wrapper=document.createElement("div"),j.wrapper.classList.add(s+"-wrapper"),j.wrapper.classList.add(z),document.body.appendChild(j.wrapper)),b.position=="topLeft"||b.position=="topCenter"||b.position=="topRight"?j.wrapper.insertBefore(j.toastCapsule,j.wrapper.firstChild):j.wrapper.appendChild(j.toastCapsule)}isNaN(b.zindex)?console.warn("["+s+"] Invalid zIndex."):j.wrapper.style.zIndex=b.zindex}(),function(){b.overlay&&(document.querySelector("."+s+"-overlay.fadeIn")!==null?(j.overlay=document.querySelector("."+s+"-overlay"),j.overlay.setAttribute("data-iziToast-ref",j.overlay.getAttribute("data-iziToast-ref")+","+b.ref),!isNaN(b.zindex)&&b.zindex!==null&&(j.overlay.style.zIndex=b.zindex-1)):(j.overlay.classList.add(s+"-overlay"),j.overlay.classList.add("fadeIn"),j.overlay.style.background=b.overlayColor,j.overlay.setAttribute("data-iziToast-ref",b.ref),!isNaN(b.zindex)&&b.zindex!==null&&(j.overlay.style.zIndex=b.zindex-1),document.querySelector("body").appendChild(j.overlay)),b.overlayClose?(j.overlay.removeEventListener("click",{}),j.overlay.addEventListener("click",function(z){_.hide(b,j.toast,"overlay")})):j.overlay.removeEventListener("click",{}))}(),function(){if(b.animateInside){j.toast.classList.add(s+"-animateInside");var z=[200,100,300];(b.transitionIn=="bounceInLeft"||b.transitionIn=="bounceInRight")&&(z=[400,200,400]),b.title.length>0&&setTimeout(function(){j.strong.classList.add("slideIn")},z[0]),b.message.length>0&&setTimeout(function(){j.p.classList.add("slideIn")},z[1]),(b.icon||b.iconUrl)&&setTimeout(function(){j.icon.classList.add("revealIn")},z[2]);var $=150;b.buttons.length>0&&j.buttons&&setTimeout(function(){y(j.buttons.childNodes,function(W,L){setTimeout(function(){W.classList.add("revealIn")},$),$=$+150})},b.inputs.length>0?150:0),b.inputs.length>0&&j.inputs&&($=150,y(j.inputs.childNodes,function(W,L){setTimeout(function(){W.classList.add("revealIn")},$),$=$+150}))}}(),b.onOpening.apply(null,[b,j.toast]);try{var I=new CustomEvent(s+"-opening",{detail:b,bubbles:!0,cancelable:!0});document.dispatchEvent(I)}catch(z){console.warn(z)}setTimeout(function(){j.toast.classList.remove(s+"-opening"),j.toast.classList.add(s+"-opened");try{var z=new CustomEvent(s+"-opened",{detail:b,bubbles:!0,cancelable:!0});document.dispatchEvent(z)}catch($){console.warn($)}b.onOpened.apply(null,[b,j.toast])},1e3),b.drag&&(c?(j.toast.addEventListener("touchstart",function(z){S.startMoving(this,_,b,z)},!1),j.toast.addEventListener("touchend",function(z){S.stopMoving(this,z)},!1)):(j.toast.addEventListener("mousedown",function(z){z.preventDefault(),S.startMoving(this,_,b,z)},!1),j.toast.addEventListener("mouseup",function(z){z.preventDefault(),S.stopMoving(this,z)},!1))),b.closeOnEscape&&document.addEventListener("keyup",function(z){z=z||window.event,z.keyCode==27&&_.hide(b,j.toast,"esc")}),b.closeOnClick&&j.toast.addEventListener("click",function(z){_.hide(b,j.toast,"toast")}),_.toast=j.toast},r})})(nb);var hk=nb.exports;const Xe=ah(hk);Xe.settings({timeout:4e3,resetOnHover:!0,transitionIn:"flipInX",transitionOut:"flipOutX",position:"topRight"});const te={success:(t,e)=>{Xe.success({title:e||"Success",message:t,color:"green",icon:"ico-success"})},error:(t,e)=>{Xe.error({title:e||"Error",message:t,color:"red",icon:"ico-error"})},warning:(t,e)=>{Xe.warning({title:e||"Warning",message:t,color:"yellow",icon:"ico-warning"})},info:(t,e)=>{Xe.info({title:e||"Info",message:t,color:"blue",icon:"ico-info"})},download:t=>{Xe.success({title:"Download Started",message:`${t} download has begun`,color:"green",icon:"ico-success",timeout:3e3})},upload:t=>{Xe.success({title:"Upload Complete",message:`${t} has been uploaded successfully`,color:"green",icon:"ico-success"})},login:t=>{Xe.success({title:"Welcome Back",message:`Hello ${t}! You've successfully signed in.`,color:"green",icon:"ico-success",timeout:3e3})},logout:()=>{Xe.info({title:"Goodbye",message:"You have been signed out successfully",color:"blue",icon:"ico-info",timeout:2e3})},userCreated:(t,e)=>{Xe.success({title:"User Created",message:`${t} has been created and credentials sent to ${e}`,color:"green",icon:"ico-success",timeout:5e3})},themeChanged:t=>{Xe.info({title:"Theme Changed",message:`Switched to ${t} mode`,color:"blue",icon:"ico-info",timeout:2e3})},fileDeleted:t=>{Xe.warning({title:"File Deleted",message:`${t} has been removed`,color:"yellow",icon:"ico-warning",timeout:3e3})},userBlocked:t=>{Xe.warning({title:"User Blocked",message:`${t} has been temporarily blocked`,color:"yellow",icon:"ico-warning"})},userUnblocked:t=>{Xe.success({title:"User Unblocked",message:`${t} has been unblocked`,color:"green",icon:"ico-success"})},gradeUpdated:(t,e)=>{Xe.info({title:"Grade Updated",message:`${t} is now ${e}`,color:"blue",icon:"ico-info"})},patchNotePublished:t=>{Xe.success({title:"Patch Note Published",message:`Version ${t} patch notes are now live`,color:"green",icon:"ico-success"})},guestSession:t=>{Xe.info({title:"Guest Session",message:`Welcome! Your session expires in ${t}`,color:"blue",icon:"ico-info",timeout:5e3})},sessionExpiring:()=>{Xe.warning({title:"Session Expiring",message:"Your guest session will expire in 1 minute",color:"yellow",icon:"ico-warning",timeout:1e4})},ipBlocked:t=>{Xe.warning({title:"IP Protection Active",message:`Your IP has been blocked for ${t} to prevent guest session abuse`,color:"yellow",icon:"ico-warning",timeout:8e3})},ipUnblocked:t=>{Xe.success({title:"IP Unblocked",message:`IP address ${t} has been manually unblocked`,color:"green",icon:"ico-success"})}},ib=T.createContext(void 0),ob=()=>{const t=T.useContext(ib);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},pk=({children:t})=>{const[e,a]=T.useState(()=>{const s=localStorage.getItem("prodomo_theme");return s!==null?JSON.parse(s):window.matchMedia("(prefers-color-scheme: dark)").matches});T.useEffect(()=>{localStorage.setItem("prodomo_theme",JSON.stringify(e));const s=document.documentElement;e?s.classList.add("dark"):s.classList.remove("dark"),console.log("ThemeContext: Theme applied:",e?"dark":"light")},[e]),T.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: dark)"),n=o=>{localStorage.getItem("prodomo_theme")===null&&a(o.matches)};return s.addEventListener?s.addEventListener("change",n):s.addListener(n),()=>{s.removeEventListener?s.removeEventListener("change",n):s.removeListener(n)}},[]);const r=()=>{console.log("ThemeContext: Toggling theme from",e?"dark":"light","to",e?"light":"dark"),a(!e),setTimeout(()=>{te.themeChanged(e?"light":"dark")},100)};return i.jsx(ib.Provider,{value:{isDark:e,toggleTheme:r},children:t})},lb="prodomo_ip_records",cb="prodomo_guest_sessions",db="prodomo_ip_protection_enabled",mk=3*24*60*60*1e3,Um=3,Vt=()=>{try{const t=localStorage.getItem(db);return t===null?!0:t==="true"}catch(t){return console.error("Failed to check IP protection status:",t),!0}},gk=t=>{try{localStorage.setItem(db,t.toString()),console.log(`IP Protection ${t?"enabled":"disabled"}`)}catch(e){console.error("Failed to set IP protection status:",e)}},ep=async()=>{try{const t=document.createElement("canvas"),e=t.getContext("2d");if(e){e.textBaseline="top",e.font="14px Arial",e.fillText("IP fingerprint",2,2);const a=t.toDataURL();let r=0;for(let c=0;c<a.length;c++){const d=a.charCodeAt(c);r=(r<<5)-r+d,r=r&r}const s=Math.abs(r)%256,n=Math.abs(r>>8)%256,o=Math.abs(r>>16)%256,l=Math.abs(r>>24)%256;return`${s}.${n}.${o}.${l}`}return"192.168.1."+(Math.floor(Math.random()*254)+1)}catch(t){return console.error("Failed to get IP:",t),"192.168.1."+(Math.floor(Math.random()*254)+1)}},Ss=()=>{try{const t=localStorage.getItem(lb);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to load IP records:",t),[]}},no=t=>{try{localStorage.setItem(lb,JSON.stringify(t))}catch(e){console.error("Failed to save IP records:",e)}},xn=()=>{try{const t=localStorage.getItem(cb);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to load guest sessions:",t),[]}},Hl=t=>{try{localStorage.setItem(cb,JSON.stringify(t))}catch(e){console.error("Failed to save guest sessions:",e)}},Wl=t=>{if(!Vt())return{blocked:!1};const e=Ss(),a=e.find(s=>s.ip===t);if(!a)return{blocked:!1};if(a.blockedUntil){const s=new Date(a.blockedUntil),n=new Date;if(n<s)return{blocked:!0,reason:`IP blocked due to guest session abuse. ${Math.ceil((s.getTime()-n.getTime())/36e5)} hours remaining.`,unblockTime:a.blockedUntil};a.blockedUntil=void 0,a.attemptCount=0,no(e)}const r=new Date(Date.now()-24*60*60*1e3);return xn().filter(s=>s.ip===t&&new Date(s.startTime)>r).length>=Um?{blocked:!0,reason:`Maximum ${Um} guest sessions per day exceeded. Try again tomorrow.`}:{blocked:!1}},fk=async t=>{try{const e=await ep(),a=navigator.userAgent,r=Wl(e);if(r.blocked)return{success:!1,error:r.reason};const s={id:`guest_session_${Date.now()}`,ip:e,userAgent:a,startTime:new Date().toISOString(),expired:!1,userId:t},n=xn();n.push(s),Hl(n);const o=Ss();let l=o.find(c=>c.ip===e);return l?(l.lastGuestSession=new Date().toISOString(),l.attemptCount+=1,l.userAgent=a):(l={ip:e,lastGuestSession:new Date().toISOString(),attemptCount:1,firstAttempt:new Date().toISOString(),userAgent:a,location:"Unknown"},o.push(l)),no(o),console.log(" Guest session registered for IP:",e),{success:!0}}catch(e){return console.error("Failed to register guest session:",e),{success:!1,error:"Failed to register guest session"}}},Bm=async t=>{try{if(!Vt()){const o=xn(),l=o.find(c=>c.userId===t&&!c.expired);l&&(l.expired=!0,l.endTime=new Date().toISOString(),Hl(o));return}const e=await ep(),a=xn(),r=a.find(o=>o.userId===t&&!o.expired);r&&(r.expired=!0,r.endTime=new Date().toISOString(),Hl(a));const s=Ss();let n=s.find(o=>o.ip===e);if(n){const o=new Date(Date.now()+mk);n.blockedUntil=o.toISOString(),n.lastGuestSession=new Date().toISOString(),no(s),console.log(" IP blocked for 3 days:",e,"until:",o.toLocaleString())}}catch(e){console.error("Failed to expire guest session:",e)}},xk=()=>{const t=Ss(),e=xn(),a=new Date,r=t.filter(o=>o.blockedUntil?new Date(o.blockedUntil)>a:!1),s=e.filter(o=>{const l=new Date(o.startTime),c=new Date(a.getTime()-24*60*60*1e3);return l>c}),n=new Set(s.map(o=>o.ip)).size;return{totalTrackedIPs:t.length,blockedIPs:r.length,guestSessionsToday:s.length,uniqueIPsToday:n,records:t.slice(0,10),recentSessions:e.slice(-10),protectionEnabled:Vt()}},ub=()=>{try{const t=new Date(Date.now()-2592e6),e=Ss(),a=e.filter(n=>new Date(n.lastGuestSession)>t||n.blockedUntil&&new Date(n.blockedUntil)>new Date);a.length!==e.length&&(no(a),console.log(" Cleaned up",e.length-a.length,"old IP records"));const r=xn(),s=r.filter(n=>new Date(n.startTime)>t);s.length!==r.length&&(Hl(s),console.log(" Cleaned up",r.length-s.length,"old guest sessions"))}catch(t){console.error("Failed to cleanup old records:",t)}},bk=t=>{try{const e=Ss(),a=e.find(r=>r.ip===t);return a?(a.blockedUntil=void 0,a.attemptCount=0,no(e),console.log(" Force unblocked IP:",t),!0):!1}catch(e){return console.error("Failed to force unblock IP:",e),!1}},yk=t=>Ss().find(e=>e.ip===t)||null;class vk{constructor(){this.rateLimits=new Map,this.securityEvents=[],this.ddosMetrics={requestsPerSecond:0,uniqueIPs:0,suspiciousPatterns:0,blockedRequests:0,totalRequests:0},this.configs={login:{windowMs:15*60*1e3,maxRequests:5,blockDuration:30*1e3,enabled:!1},api:{windowMs:60*1e3,maxRequests:100,blockDuration:5*60*1e3,enabled:!0},download:{windowMs:60*1e3,maxRequests:10,blockDuration:10*60*1e3,enabled:!0},guest:{windowMs:24*60*60*1e3,maxRequests:3,blockDuration:24*60*60*1e3,enabled:!0},upload:{windowMs:60*1e3,maxRequests:5,blockDuration:15*60*1e3,enabled:!0},bruteforce:{windowMs:5*60*1e3,maxRequests:10,blockDuration:60*60*1e3,enabled:!0}},this.loadFromStorage(),this.startCleanupInterval(),this.startMetricsCollection()}async getUserIP(){try{const e=[()=>this.getIPFromWebRTC(),()=>this.getIPFromFingerprint(),()=>this.getIPFromHeaders()];for(const a of e)try{const r=await a();if(r&&this.isValidIP(r))return r}catch(r){console.warn("IP detection method failed:",r)}return this.generateConsistentIP()}catch(e){return console.error("Failed to get IP:",e),this.generateConsistentIP()}}async getIPFromWebRTC(){return new Promise((e,a)=>{const r=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});r.createDataChannel(""),r.onicecandidate=s=>{if(s.candidate){const n=s.candidate.candidate.match(/(\d+\.\d+\.\d+\.\d+)/);n&&(r.close(),e(n[1]))}},r.createOffer().then(s=>r.setLocalDescription(s)),setTimeout(()=>{r.close(),a(new Error("WebRTC IP detection timeout"))},3e3)})}async getIPFromFingerprint(){const e=document.createElement("canvas"),a=e.getContext("2d");if(!a)throw new Error("Canvas not supported");a.textBaseline="top",a.font="14px Arial",a.fillText("Security fingerprint",2,2);const r=e.toDataURL(),s=navigator.userAgent,n=`${window.screen.width}x${window.screen.height}`,o=Intl.DateTimeFormat().resolvedOptions().timeZone,l=r+s+n+o;let c=0;for(let m=0;m<l.length;m++){const v=l.charCodeAt(m);c=(c<<5)-c+v,c=c&c}const d=Math.abs(c)%256,u=Math.abs(c>>8)%256,h=Math.abs(c>>16)%256,p=Math.abs(c>>24)%256;return`${d}.${u}.${h}.${p}`}async getIPFromHeaders(){const e={"X-Forwarded-For":"203.0.113."+(Math.floor(Math.random()*254)+1),"X-Real-IP":"198.51.100."+(Math.floor(Math.random()*254)+1)};return e["X-Forwarded-For"]||e["X-Real-IP"]}generateConsistentIP(){const e=localStorage.getItem("security_consistent_ip");if(e)return e;const a=`192.168.1.${Math.floor(Math.random()*254)+1}`;return localStorage.setItem("security_consistent_ip",a),a}isValidIP(e){return/^(\d{1,3}\.){3}\d{1,3}$/.test(e)?e.split(".").map(Number).every(a=>a>=0&&a<=255):!1}toggleRateLimit(e,a){return this.configs[e]?(this.configs[e].enabled=a,this.saveToStorage(),!0):!1}getRateLimitStatus(e){var a;return((a=this.configs[e])==null?void 0:a.enabled)||!1}async checkRateLimit(e,a){const r=a||await this.getUserIP(),s=this.configs[e]||this.configs.api;if(!s.enabled)return{allowed:!0};const n=`${r}:${e}`,o=Date.now();let l=this.rateLimits.get(n);if(l||(l={count:0,firstRequest:o,blocked:!1},this.rateLimits.set(n,l)),l.blocked&&l.blockedUntil&&o<l.blockedUntil){const c=Math.ceil((l.blockedUntil-o)/1e3);return this.logSecurityEvent("rate_limit",r,`Rate limit exceeded for ${e}`,"medium",!0),{allowed:!1,reason:"Rate limit exceeded",retryAfter:c}}return o-l.firstRequest>s.windowMs&&(l.count=0,l.firstRequest=o,l.blocked=!1,l.blockedUntil=void 0),l.count++,l.count>s.maxRequests?(l.blocked=!0,l.blockedUntil=o+s.blockDuration,this.logSecurityEvent("rate_limit",r,`Rate limit exceeded for ${e} (${l.count} requests)`,"high",!0),{allowed:!1,reason:"Rate limit exceeded",retryAfter:Math.ceil(s.blockDuration/1e3)}):(this.rateLimits.set(n,l),this.saveToStorage(),{allowed:!0})}async detectDDoS(){const e=Date.now(),a=e-1e3,r=e-6e4,s=this.securityEvents.filter(p=>new Date(p.timestamp).getTime()>a),n=this.securityEvents.filter(p=>new Date(p.timestamp).getTime()>r),o=s.length,l=new Set(n.map(p=>p.ip)).size,c=this.detectSuspiciousPatterns(n),d=n.filter(p=>p.blocked).length;this.ddosMetrics={requestsPerSecond:o,uniqueIPs:l,suspiciousPatterns:c,blockedRequests:d,totalRequests:n.length};const u=o>50||l<5&&n.length>100||c>10;let h="low";return o>100||c>20?h="critical":o>75||c>15?h="high":(o>50||c>10)&&(h="medium"),u&&(this.logSecurityEvent("ddos_attempt","multiple",`DDoS detected: ${o} req/s`,h,!0),this.activateEmergencyMode()),{isDDoS:u,severity:h,metrics:this.ddosMetrics}}detectSuspiciousPatterns(e){let a=0;const r=e.reduce((n,o)=>(n[o.ip]=(n[o.ip]||0)+1,n),{});Object.values(r).forEach(n=>{n>20&&a++});const s=e.sort((n,o)=>new Date(n.timestamp).getTime()-new Date(o.timestamp).getTime());for(let n=1;n<s.length;n++)new Date(s[n].timestamp).getTime()-new Date(s[n-1].timestamp).getTime()<100&&s[n].ip===s[n-1].ip&&a++;return a}activateEmergencyMode(){console.warn(" EMERGENCY MODE ACTIVATED - DDoS DETECTED"),Object.keys(this.configs).forEach(e=>{this.configs[e].maxRequests=Math.floor(this.configs[e].maxRequests*.1),this.configs[e].blockDuration*=2}),te.error("DDoS attack detected! Emergency protection activated.","Security Alert"),setTimeout(()=>{this.deactivateEmergencyMode()},10*60*1e3)}deactivateEmergencyMode(){console.log(" Emergency mode deactivated"),this.configs={login:{windowMs:15*60*1e3,maxRequests:5,blockDuration:30*1e3,enabled:!1},api:{windowMs:60*1e3,maxRequests:100,blockDuration:5*60*1e3,enabled:!0},download:{windowMs:60*1e3,maxRequests:10,blockDuration:10*60*1e3,enabled:!0},guest:{windowMs:24*60*60*1e3,maxRequests:3,blockDuration:24*60*60*1e3,enabled:!0},upload:{windowMs:60*1e3,maxRequests:5,blockDuration:15*60*1e3,enabled:!0},bruteforce:{windowMs:5*60*1e3,maxRequests:10,blockDuration:60*60*1e3,enabled:!0}},te.success("Emergency protection deactivated. Normal operation resumed.","Security Status")}async checkBruteForce(e,a){const r=`bruteforce:${e}:${a}`;return this.checkRateLimit("bruteforce",r)}logSecurityEvent(e,a,r,s,n=!1){const o={id:`sec_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:e,ip:a,timestamp:new Date().toISOString(),details:r,severity:s,blocked:n};this.securityEvents.unshift(o),this.securityEvents.length>1e3&&(this.securityEvents=this.securityEvents.slice(0,1e3)),this.saveToStorage(),console.log(` Security Event [${s.toUpperCase()}]: ${r}`)}getSecurityStats(){const e=Date.now(),a=e-60*60*1e3,r=e-24*60*60*1e3,s=this.securityEvents.filter(o=>new Date(o.timestamp).getTime()>a),n=this.securityEvents.filter(o=>new Date(o.timestamp).getTime()>r);return{totalEvents:this.securityEvents.length,recentEvents:s.length,dailyEvents:n.length,blockedRequests:this.securityEvents.filter(o=>o.blocked).length,criticalEvents:this.securityEvents.filter(o=>o.severity==="critical").length,ddosMetrics:this.ddosMetrics,rateLimitedIPs:Array.from(this.rateLimits.entries()).filter(([o,l])=>l.blocked).map(([o,l])=>({key:o,blockedUntil:l.blockedUntil,count:l.count})),rateLimitConfigs:this.configs}}getSecurityEvents(e=50){return this.securityEvents.slice(0,e)}clearSecurityEvents(){this.securityEvents=[],this.saveToStorage()}unblockIP(e){let a=!1;for(const[r,s]of this.rateLimits.entries())r.startsWith(e+":")&&(s.blocked=!1,s.blockedUntil=void 0,s.count=0,a=!0);return a&&(this.saveToStorage(),this.logSecurityEvent("rate_limit",e,"IP manually unblocked by admin","low",!1)),a}blockIP(e,a=60*60*1e3){const r=Date.now();let s=!1;return Object.keys(this.configs).forEach(n=>{const o=`${e}:${n}`;this.rateLimits.set(o,{count:999,firstRequest:r,blocked:!0,blockedUntil:r+a}),s=!0}),s&&(this.saveToStorage(),this.logSecurityEvent("rate_limit",e,`IP manually blocked by admin for ${a/1e3}s`,"high",!0)),s}saveToStorage(){try{const e={rateLimits:Array.from(this.rateLimits.entries()),securityEvents:this.securityEvents.slice(0,500),ddosMetrics:this.ddosMetrics,configs:this.configs};localStorage.setItem("security_manager_data",JSON.stringify(e))}catch(e){console.error("Failed to save security data:",e)}}loadFromStorage(){try{const e=localStorage.getItem("security_manager_data");if(e){const a=JSON.parse(e);this.rateLimits=new Map(a.rateLimits||[]),this.securityEvents=a.securityEvents||[],this.ddosMetrics=a.ddosMetrics||this.ddosMetrics,a.configs&&Object.keys(a.configs).forEach(r=>{this.configs[r]&&(this.configs[r]={...this.configs[r],...a.configs[r],enabled:a.configs[r].hasOwnProperty("enabled")?a.configs[r].enabled:this.configs[r].enabled})})}}catch(e){console.error("Failed to load security data:",e)}}startCleanupInterval(){setInterval(()=>{const e=Date.now();for(const[r,s]of this.rateLimits.entries())s.blockedUntil&&e>s.blockedUntil&&(s.blocked=!1,s.blockedUntil=void 0),e-s.firstRequest>24*60*60*1e3&&this.rateLimits.delete(r);const a=e-24*60*60*1e3;this.securityEvents=this.securityEvents.filter(r=>new Date(r.timestamp).getTime()>a),this.saveToStorage()},5*60*1e3)}startMetricsCollection(){setInterval(()=>{this.detectDDoS()},1e3)}}const Zt=new vk,ld=t=>t?t.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim().substring(0,1e3):"",io=function(t,e,a){let r=Promise.resolve();function s(n){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n}return r.then(n=>{for(const o of n||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},wk=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...a)=>io(async()=>{const{default:r}=await Promise.resolve().then(()=>Sn);return{default:r}}).then(({default:r})=>r(...a)):e=fetch,(...a)=>e(...a)};class tp extends Error{constructor(e,a="FunctionsError",r){super(e),this.name=a,this.context=r}}class kk extends tp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class jk extends tp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class _k extends tp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Mu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Mu||(Mu={}));var Nk=function(t,e,a,r){function s(n){return n instanceof a?n:new a(function(o){o(n)})}return new(a||(a=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):s(u.value).then(l,c)}d((r=r.apply(t,[])).next())})};class Sk{constructor(e,{headers:a={},customFetch:r,region:s=Mu.Any}={}){this.url=e,this.headers=a,this.region=s,this.fetch=wk(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,a={}){var r;return Nk(this,void 0,void 0,function*(){try{const{headers:s,method:n,body:o}=a;let l={},{region:c}=a;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(v=>{throw new kk(v)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new jk(u);if(!u.ok)throw new _k(u);let p=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield u.json():p==="application/octet-stream"?m=yield u.blob():p==="text/event-stream"?m=u:p==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(s){return{data:null,error:s}}})}}var Tt={},ap={},jc={},oo={},_c={},Nc={},Ck=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bn=Ck();const Ek=bn.fetch,hb=bn.fetch.bind(bn),pb=bn.Headers,Mk=bn.Request,Dk=bn.Response,Sn=Object.freeze(Object.defineProperty({__proto__:null,Headers:pb,Request:Mk,Response:Dk,default:hb,fetch:Ek},Symbol.toStringTag,{value:"Module"})),Tk=xv(Sn);var Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});let Ok=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Sc.default=Ok;var mb=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nc,"__esModule",{value:!0});const Pk=mb(Tk),Ik=mb(Sc);let zk=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Pk.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let r=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var n,o,l;let c=null,d=null,u=null,h=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=y:d=JSON.parse(y))}const m=(n=this.headers.Prefer)===null||n===void 0?void 0:n.match(/count=(exact|planned|estimated)/),v=(o=s.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");m&&v&&v.length>1&&(u=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,u=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const m=await s.text();try{c=JSON.parse(m),Array.isArray(c)&&s.status===404&&(d=[],c=null,h=200,p="OK")}catch{s.status===404&&m===""?(h=204,p="No Content"):c={message:m}}if(c&&this.isMaybeSingle&&!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows")&&(c=null,h=200,p="OK"),c&&this.shouldThrowOnError)throw new Ik.default(c)}return{error:c,data:d,count:u,status:h,statusText:p}});return this.shouldThrowOnError||(r=r.catch(s=>{var n,o,l;return{error:{message:`${(n=s==null?void 0:s.name)!==null&&n!==void 0?n:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(t,e)}returns(){return this}overrideTypes(){return this}};Nc.default=zk;var Ak=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_c,"__esModule",{value:!0});const Lk=Ak(Nc);let Rk=class extends Lk.default{select(t){let e=!1;const a=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:a,foreignTable:r,referencedTable:s=r}={}){const n=s?`${s}.order`:"order",o=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:a=e}={}){const r=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:a,referencedTable:r=a}={}){const s=typeof r>"u"?"offset":`${r}.offset`,n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(n,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:a=!1,buffers:r=!1,wal:s=!1,format:n="text"}={}){var o;const l=[t?"analyze":null,e?"verbose":null,a?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${n}; for="${c}"; options=${l};`,n==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};_c.default=Rk;var Fk=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oo,"__esModule",{value:!0});const $k=Fk(_c);let Uk=class extends $k.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){const a=Array.from(new Set(e)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${a})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:a,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const n=a===void 0?"":`(${a})`;return this.url.searchParams.append(t,`${s}fts${n}.${e}`),this}match(t){return Object.entries(t).forEach(([e,a])=>{this.url.searchParams.append(e,`eq.${a}`)}),this}not(t,e,a){return this.url.searchParams.append(t,`not.${e}.${a}`),this}or(t,{foreignTable:e,referencedTable:a=e}={}){const r=a?`${a}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,a){return this.url.searchParams.append(t,`${e}.${a}`),this}};oo.default=Uk;var Bk=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jc,"__esModule",{value:!0});const $n=Bk(oo);let qk=class{constructor(t,{headers:e={},schema:a,fetch:r}){this.url=t,this.headers=e,this.schema=a,this.fetch=r}select(t,{head:e=!1,count:a}={}){const r=e?"HEAD":"GET";let s=!1;const n=(t??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",n),a&&(this.headers.Prefer=`count=${a}`),new $n.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:a=!0}={}){const r="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),e&&s.push(`count=${e}`),a||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const n=t.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(n.length>0){const o=[...new Set(n)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new $n.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:a=!1,count:r,defaultToNull:s=!0}={}){const n="POST",o=[`resolution=${a?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const l=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new $n.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){const a="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),e&&r.push(`count=${e}`),this.headers.Prefer=r.join(","),new $n.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const e="DELETE",a=[];return t&&a.push(`count=${t}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new $n.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};jc.default=qk;var Cc={},Ec={};Object.defineProperty(Ec,"__esModule",{value:!0});Ec.version=void 0;Ec.version="0.0.0-automated";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.DEFAULT_HEADERS=void 0;const Vk=Ec;Cc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Vk.version}`};var gb=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ap,"__esModule",{value:!0});const Hk=gb(jc),Wk=gb(oo),Gk=Cc;let Jk=class fb{constructor(e,{headers:a={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Gk.DEFAULT_HEADERS),a),this.schemaName=r,this.fetch=s}from(e){const a=new URL(`${this.url}/${e}`);return new Hk.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new fb(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,a={},{head:r=!1,get:s=!1,count:n}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(a).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=a);const d=Object.assign({},this.headers);return n&&(d.Prefer=`count=${n}`),new Wk.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};ap.default=Jk;var Cn=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.PostgrestError=Tt.PostgrestBuilder=Tt.PostgrestTransformBuilder=Tt.PostgrestFilterBuilder=Tt.PostgrestQueryBuilder=Tt.PostgrestClient=void 0;const xb=Cn(ap);Tt.PostgrestClient=xb.default;const bb=Cn(jc);Tt.PostgrestQueryBuilder=bb.default;const yb=Cn(oo);Tt.PostgrestFilterBuilder=yb.default;const vb=Cn(_c);Tt.PostgrestTransformBuilder=vb.default;const wb=Cn(Nc);Tt.PostgrestBuilder=wb.default;const kb=Cn(Sc);Tt.PostgrestError=kb.default;var Yk=Tt.default={PostgrestClient:xb.default,PostgrestQueryBuilder:bb.default,PostgrestFilterBuilder:yb.default,PostgrestTransformBuilder:vb.default,PostgrestBuilder:wb.default,PostgrestError:kb.default};const{PostgrestClient:Kk,PostgrestQueryBuilder:sE,PostgrestFilterBuilder:nE,PostgrestTransformBuilder:iE,PostgrestBuilder:oE,PostgrestError:lE}=Yk;function Xk(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Qk=Xk(),Zk="2.11.15",e2=`realtime-js/${Zk}`,t2="1.0.0",jb=1e4,a2=1e3;var mi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(mi||(mi={}));var gt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(gt||(gt={}));var ma;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ma||(ma={}));var Du;(function(t){t.websocket="websocket"})(Du||(Du={}));var as;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(as||(as={}));class r2{constructor(){this.HEADER_LENGTH=1}decode(e,a){return e.constructor===ArrayBuffer?a(this._binaryDecode(e)):a(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const a=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,a,r)}_decodeBroadcast(e,a,r){const s=a.getUint8(1),n=a.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+n));o=o+n;const d=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class _b{constructor(e,a){this.callback=e,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ee;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ee||(Ee={}));const qm=(t,e,a={})=>{var r;const s=(r=a.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((n,o)=>(n[o]=s2(o,t,e,s),n),{})},s2=(t,e,a,r)=>{const s=e.find(l=>l.name===t),n=s==null?void 0:s.type,o=a[t];return n&&!r.includes(n)?Nb(n,o):Tu(o)},Nb=(t,e)=>{if(t.charAt(0)==="_"){const a=t.slice(1,t.length);return l2(e,a)}switch(t){case Ee.bool:return n2(e);case Ee.float4:case Ee.float8:case Ee.int2:case Ee.int4:case Ee.int8:case Ee.numeric:case Ee.oid:return i2(e);case Ee.json:case Ee.jsonb:return o2(e);case Ee.timestamp:return c2(e);case Ee.abstime:case Ee.date:case Ee.daterange:case Ee.int4range:case Ee.int8range:case Ee.money:case Ee.reltime:case Ee.text:case Ee.time:case Ee.timestamptz:case Ee.timetz:case Ee.tsrange:case Ee.tstzrange:return Tu(e);default:return Tu(e)}},Tu=t=>t,n2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},i2=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},o2=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},l2=(t,e)=>{if(typeof t!="string")return t;const a=t.length-1,r=t[a];if(t[0]==="{"&&r==="}"){let s;const n=t.slice(1,a);try{s=JSON.parse("["+n+"]")}catch{s=n?n.split(","):[]}return s.map(o=>Nb(e,o))}return t},c2=t=>typeof t=="string"?t.replace(" ","T"):t,Sb=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class cd{constructor(e,a,r={},s=jb){this.channel=e,this.event=a,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,a){var r;return this._hasReceived(e)&&a((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:a}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(a))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Vm;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Vm||(Vm={}));class gi{constructor(e,a){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:n,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gi.syncState(this.state,s,n,o),this.pendingDiffs.forEach(c=>{this.state=gi.syncDiff(this.state,c,n,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:n,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=gi.syncDiff(this.state,s,n,o),l())}),this.onJoin((s,n,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:n,newPresences:o})}),this.onLeave((s,n,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:n,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,a,r,s){const n=this.cloneDeep(e),o=this.transformState(a),l={},c={};return this.map(n,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=n[d];if(h){const p=u.map(k=>k.presence_ref),m=h.map(k=>k.presence_ref),v=u.filter(k=>m.indexOf(k.presence_ref)<0),y=h.filter(k=>p.indexOf(k.presence_ref)<0);v.length>0&&(l[d]=v),y.length>0&&(c[d]=y)}else l[d]=u}),this.syncDiff(n,{joins:l,leaves:c},r,s)}static syncDiff(e,a,r,s){const{joins:n,leaves:o}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(n,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),p=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...p)}r(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,s(l,d,c),d.length===0&&delete e[l]}),e}static map(e,a){return Object.getOwnPropertyNames(e).map(r=>a(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((a,r)=>{const s=e[r];return"metas"in s?a[r]=s.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):a[r]=s,a},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hm;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Hm||(Hm={}));var Wm;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Wm||(Wm={}));var Va;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Va||(Va={}));class rp{constructor(e,a={config:{}},r){this.topic=e,this.params=a,this.socket=r,this.bindings={},this.state=gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new cd(this,ma.join,this.params,this.timeout),this.rejoinTimer=new _b(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ma.reply,{},(s,n)=>{this._trigger(this._replyEventName(n),s)}),this.presence=new gi(this),this.broadcastEndpointURL=Sb(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,a=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==gt.closed){const{config:{broadcast:n,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(Va.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Va.CLOSED));const c={},d={broadcast:n,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(Va.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(h=p==null?void 0:p.length)!==null&&h!==void 0?h:0,v=[];for(let y=0;y<m;y++){const k=p[y],{filter:{event:g,schema:f,table:x,filter:w}}=k,S=u&&u[y];if(S&&S.event===g&&S.schema===f&&S.table===x&&S.filter===w)v.push(Object.assign(Object.assign({},k),{id:S.id}));else{this.unsubscribe(),this.state=gt.errored,e==null||e(Va.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Va.SUBSCRIBED);return}}).receive("error",u=>{this.state=gt.errored,e==null||e(Va.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Va.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,a={}){return await this.send({type:"presence",event:"track",payload:e},a.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,a,r){return this._on(e,a,r)}async send(e,a={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:n,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=a.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var o,l,c;const d=this._push(e.type,e,a.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&n("ok"),d.receive("ok",()=>n("ok")),d.receive("error",()=>n("error")),d.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=gt.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ma.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new cd(this,ma.leave,{},e),r.receive("ok",()=>{a(),s("ok")}).receive("timeout",()=>{a(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,a,r){const s=new AbortController,n=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},a),{signal:s.signal}));return clearTimeout(n),o}_push(e,a,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new cd(this,e,a,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,a,r){return a}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,a,r){var s,n;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=ma;if(r&&[l,c,d,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,a,r);if(a&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,v,y;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((y=(v=p.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(p=>p.callback(h,r)):(n=this.bindings[o])===null||n===void 0||n.filter(p=>{var m,v,y,k,g,f;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const x=p.id,w=(m=p.filter)===null||m===void 0?void 0:m.event;return x&&((v=a.ids)===null||v===void 0?void 0:v.includes(x))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((y=a.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const x=(g=(k=p==null?void 0:p.filter)===null||k===void 0?void 0:k.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return x==="*"||x===((f=a==null?void 0:a.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:v,table:y,commit_timestamp:k,type:g,errors:f}=m;h=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:k,eventType:g,new:{},old:{},errors:f}),this._getPayloadRecords(m))}p.callback(h,r)})}_isClosed(){return this.state===gt.closed}_isJoined(){return this.state===gt.joined}_isJoining(){return this.state===gt.joining}_isLeaving(){return this.state===gt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,a,r){const s=e.toLocaleLowerCase(),n={type:s,filter:a,callback:r};return this.bindings[s]?this.bindings[s].push(n):this.bindings[s]=[n],this}_off(e,a){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var n;return!(((n=s.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===r&&rp.isEqual(s.filter,a))}),this}static isEqual(e,a){if(Object.keys(e).length!==Object.keys(a).length)return!1;for(const r in e)if(e[r]!==a[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ma.close,{},e)}_onError(e){this._on(ma.error,{},a=>e(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const a={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(a.new=qm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(a.old=qm(e.columns,e.old_record)),a}}const Gm=()=>{},d2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class u2{constructor(e,a){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jb,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gm,this.ref=0,this.logger=Gm,this.conn=null,this.sendBuffer=[],this.serializer=new r2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...l)=>io(async()=>{const{default:c}=await Promise.resolve().then(()=>Sn);return{default:c}}).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Du.websocket}`,this.httpEndpoint=Sb(e),a!=null&&a.transport?this.transport=a.transport:this.transport=null,a!=null&&a.params&&(this.params=a.params),a!=null&&a.timeout&&(this.timeout=a.timeout),a!=null&&a.logger&&(this.logger=a.logger),(a!=null&&a.logLevel||a!=null&&a.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),a!=null&&a.heartbeatIntervalMs&&(this.heartbeatIntervalMs=a.heartbeatIntervalMs);const s=(r=a==null?void 0:a.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=a!=null&&a.reconnectAfterMs?a.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=a!=null&&a.encode?a.encode:(n,o)=>o(JSON.stringify(n)),this.decode=a!=null&&a.decode?a.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new _b(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(a==null?void 0:a.fetch),a!=null&&a.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(a==null?void 0:a.worker)||!1,this.workerUrl=a==null?void 0:a.workerUrl}this.accessToken=(a==null?void 0:a.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Qk),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:t2}))}disconnect(e,a){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,a??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const a=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const e=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,a,r){this.logger(e,a,r)}connectionState(){switch(this.conn&&this.conn.readyState){case mi.connecting:return as.Connecting;case mi.open:return as.Open;case mi.closing:return as.Closing;default:return as.Closed}}isConnected(){return this.connectionState()===as.Open}channel(e,a={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(n=>n.topic===r);if(s)return s;{const n=new rp(`realtime:${e}`,a,this);return this.channels.push(n),n}}push(e){const{topic:a,event:r,payload:s,ref:n}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${a} ${r} (${n})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let a=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(r=>{const s={access_token:a,version:e2};a&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(ma.access_token,{access_token:a})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(a2,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let a=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${e}"`),a.unsubscribe())}_remove(e){this.channels=this.channels.filter(a=>a.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,a=>{let{topic:r,event:s,payload:n,ref:o}=a;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(a.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,n),Array.from(this.channels).filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,n,o)),this.stateChangeCallbacks.message.forEach(l=>l(a))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(a=>a(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(a=>a(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ma.error))}_appendParams(e,a){if(Object.keys(a).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(a);return`${e}${r}${s}`}_workerObjectUrl(e){let a;if(e)a=e;else{const r=new Blob([d2],{type:"application/javascript"});a=URL.createObjectURL(r)}return a}}class sp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function rt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class h2 extends sp{constructor(e,a){super(e),this.name="StorageApiError",this.status=a}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ou extends sp{constructor(e,a){super(e),this.name="StorageUnknownError",this.originalError=a}}var p2=function(t,e,a,r){function s(n){return n instanceof a?n:new a(function(o){o(n)})}return new(a||(a=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):s(u.value).then(l,c)}d((r=r.apply(t,[])).next())})};const Cb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...a)=>io(async()=>{const{default:r}=await Promise.resolve().then(()=>Sn);return{default:r}}).then(({default:r})=>r(...a)):e=fetch,(...a)=>e(...a)},m2=()=>p2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield io(()=>Promise.resolve().then(()=>Sn))).Response:Response}),Pu=t=>{if(Array.isArray(t))return t.map(a=>Pu(a));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([a,r])=>{const s=a.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));e[s]=Pu(r)}),e};var Cs=function(t,e,a,r){function s(n){return n instanceof a?n:new a(function(o){o(n)})}return new(a||(a=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):s(u.value).then(l,c)}d((r=r.apply(t,[])).next())})};const dd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),g2=(t,e,a)=>Cs(void 0,void 0,void 0,function*(){const r=yield m2();t instanceof r&&!(a!=null&&a.noResolveJson)?t.json().then(s=>{e(new h2(dd(s),t.status||500))}).catch(s=>{e(new Ou(dd(s),s))}):e(new Ou(dd(t),t))}),f2=(t,e,a,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),a))};function lo(t,e,a,r,s,n){return Cs(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(a,f2(e,r,s,n)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>g2(c,l,r))})})}function Gl(t,e,a,r){return Cs(this,void 0,void 0,function*(){return lo(t,"GET",e,a,r)})}function fr(t,e,a,r,s){return Cs(this,void 0,void 0,function*(){return lo(t,"POST",e,r,s,a)})}function x2(t,e,a,r,s){return Cs(this,void 0,void 0,function*(){return lo(t,"PUT",e,r,s,a)})}function b2(t,e,a,r){return Cs(this,void 0,void 0,function*(){return lo(t,"HEAD",e,Object.assign(Object.assign({},a),{noResolveJson:!0}),r)})}function Eb(t,e,a,r,s){return Cs(this,void 0,void 0,function*(){return lo(t,"DELETE",e,r,s,a)})}var Et=function(t,e,a,r){function s(n){return n instanceof a?n:new a(function(o){o(n)})}return new(a||(a=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):s(u.value).then(l,c)}d((r=r.apply(t,[])).next())})};const y2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Jm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class v2{constructor(e,a={},r,s){this.url=e,this.headers=a,this.bucketId=r,this.fetch=Cb(s)}uploadOrUpdate(e,a,r,s){return Et(this,void 0,void 0,function*(){try{let n;const o=Object.assign(Object.assign({},Jm),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(n=new FormData,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c)),n.append("",r)):typeof FormData<"u"&&r instanceof FormData?(n=r,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c))):(n=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const d=this._removeEmptyFolders(a),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:n,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),p=yield h.json();return h.ok?{data:{path:d,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}upload(e,a,r){return Et(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,a,r)})}uploadToSignedUrl(e,a,r,s){return Et(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),o=this._getFinalPath(n),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",a);try{let c;const d=Object.assign({upsert:Jm.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),p=yield h.json();return h.ok?{data:{path:n,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if(rt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,a){return Et(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);a!=null&&a.upsert&&(s["x-upsert"]="true");const n=yield fr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+n.url),l=o.searchParams.get("token");if(!l)throw new sp("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}update(e,a,r){return Et(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,a,r)})}move(e,a,r){return Et(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:a,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}copy(e,a,r){return Et(this,void 0,void 0,function*(){try{return{data:{path:(yield fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:a,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,a,r){return Et(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),n=yield fr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:a},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${o}`)},{data:n,error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,a,r){return Et(this,void 0,void 0,function*(){try{const s=yield fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:e},{headers:this.headers}),n=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${n}`):null})),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}download(e,a){return Et(this,void 0,void 0,function*(){const r=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),n=s?`?${s}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Gl(this.fetch,`${this.url}/${r}/${o}${n}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(rt(o))return{data:null,error:o};throw o}})}info(e){return Et(this,void 0,void 0,function*(){const a=this._getFinalPath(e);try{const r=yield Gl(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:Pu(r),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}exists(e){return Et(this,void 0,void 0,function*(){const a=this._getFinalPath(e);try{return yield b2(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(rt(r)&&r instanceof Ou){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,a){const r=this._getFinalPath(e),s=[],n=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";n!==""&&s.push(n);const o=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${c}`)}}}remove(e){return Et(this,void 0,void 0,function*(){try{return{data:yield Eb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(a){if(rt(a))return{data:null,error:a};throw a}})}list(e,a,r){return Et(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},y2),a),{prefix:e||""});return{data:yield fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const a=[];return e.width&&a.push(`width=${e.width}`),e.height&&a.push(`height=${e.height}`),e.resize&&a.push(`resize=${e.resize}`),e.format&&a.push(`format=${e.format}`),e.quality&&a.push(`quality=${e.quality}`),a.join("&")}}const w2="2.7.1",k2={"X-Client-Info":`storage-js/${w2}`};var Ps=function(t,e,a,r){function s(n){return n instanceof a?n:new a(function(o){o(n)})}return new(a||(a=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):s(u.value).then(l,c)}d((r=r.apply(t,[])).next())})};class j2{constructor(e,a={},r){this.url=e,this.headers=Object.assign(Object.assign({},k2),a),this.fetch=Cb(r)}listBuckets(){return Ps(this,void 0,void 0,function*(){try{return{data:yield Gl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(rt(e))return{data:null,error:e};throw e}})}getBucket(e){return Ps(this,void 0,void 0,function*(){try{return{data:yield Gl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(a){if(rt(a))return{data:null,error:a};throw a}})}createBucket(e,a={public:!1}){return Ps(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}updateBucket(e,a){return Ps(this,void 0,void 0,function*(){try{return{data:yield x2(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ps(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(rt(a))return{data:null,error:a};throw a}})}deleteBucket(e){return Ps(this,void 0,void 0,function*(){try{return{data:yield Eb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(a){if(rt(a))return{data:null,error:a};throw a}})}}class _2 extends j2{constructor(e,a={},r){super(e,a,r)}from(e){return new v2(this.url,this.headers,e,this.fetch)}}const N2="2.50.2";let Zn="";typeof Deno<"u"?Zn="deno":typeof document<"u"?Zn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zn="react-native":Zn="node";const S2={"X-Client-Info":`supabase-js-${Zn}/${N2}`},C2={headers:S2},E2={schema:"public"},M2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},D2={};var T2=function(t,e,a,r){function s(n){return n instanceof a?n:new a(function(o){o(n)})}return new(a||(a=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):s(u.value).then(l,c)}d((r=r.apply(t,[])).next())})};const O2=t=>{let e;return t?e=t:typeof fetch>"u"?e=hb:e=fetch,(...a)=>e(...a)},P2=()=>typeof Headers>"u"?pb:Headers,I2=(t,e,a)=>{const r=O2(a),s=P2();return(n,o)=>T2(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new s(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(n,Object.assign(Object.assign({},o),{headers:d}))})};var z2=function(t,e,a,r){function s(n){return n instanceof a?n:new a(function(o){o(n)})}return new(a||(a=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):s(u.value).then(l,c)}d((r=r.apply(t,[])).next())})};function A2(t){return t.endsWith("/")?t:t+"/"}function L2(t,e){var a,r;const{db:s,auth:n,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,p={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},d),n),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(a=h==null?void 0:h.headers)!==null&&a!==void 0?a:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>z2(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}const Mb="2.70.0",$s=30*1e3,Iu=3,ud=Iu*$s,R2="http://localhost:9999",F2="supabase.auth.token",$2={"X-Client-Info":`gotrue-js/${Mb}`},zu="X-Supabase-Api-Version",Db={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},U2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,B2=6e5;class np extends Error{constructor(e,a,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=r}}function le(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class q2 extends np{constructor(e,a,r){super(e,a,r),this.name="AuthApiError",this.status=a,this.code=r}}function V2(t){return le(t)&&t.name==="AuthApiError"}class Tb extends np{constructor(e,a){super(e),this.name="AuthUnknownError",this.originalError=a}}class Br extends np{constructor(e,a,r,s){super(e,r,s),this.name=a,this.status=r}}class pr extends Br{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function H2(t){return le(t)&&t.name==="AuthSessionMissingError"}class Po extends Br{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Io extends Br{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class zo extends Br{constructor(e,a=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function W2(t){return le(t)&&t.name==="AuthImplicitGrantRedirectError"}class Ym extends Br{constructor(e,a=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Au extends Br{constructor(e,a){super(e,"AuthRetryableFetchError",a,void 0)}}function hd(t){return le(t)&&t.name==="AuthRetryableFetchError"}class Km extends Br{constructor(e,a,r){super(e,"AuthWeakPasswordError",a,"weak_password"),this.reasons=r}}class fi extends Br{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xm=` 	
\r=`.split(""),G2=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Xm.length;e+=1)t[Xm[e].charCodeAt(0)]=-2;for(let e=0;e<Jl.length;e+=1)t[Jl[e].charCodeAt(0)]=e;return t})();function Qm(t,e,a){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;a(Jl[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;a(Jl[r]),e.queuedBits-=6}}function Ob(t,e,a){const r=G2[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)a(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Zm(t){const e=[],a=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},n=o=>{K2(o,r,a)};for(let o=0;o<t.length;o+=1)Ob(t.charCodeAt(o),s,n);return e.join("")}function J2(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Y2(t,e){for(let a=0;a<t.length;a+=1){let r=t.charCodeAt(a);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(a+1)-56320&65535|s)+65536,a+=1}J2(r,e)}}function K2(t,e,a){if(e.utf8seq===0){if(t<=127){a(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&a(e.codepoint)}}function X2(t){const e=[],a={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Ob(t.charCodeAt(s),a,r);return new Uint8Array(e)}function Q2(t){const e=[];return Y2(t,a=>e.push(a)),new Uint8Array(e)}function Z2(t){const e=[],a={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Qm(s,a,r)),Qm(null,a,r),e.join("")}function ej(t){return Math.round(Date.now()/1e3)+t}function tj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ua=()=>typeof window<"u"&&typeof document<"u",Wr={tested:!1,writable:!1},xi=()=>{if(!ua())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wr.tested)return Wr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Wr.tested=!0,Wr.writable=!0}catch{Wr.tested=!0,Wr.writable=!1}return Wr.writable};function aj(t){const e={},a=new URL(t);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((r,s)=>{e[s]=r})}catch{}return a.searchParams.forEach((r,s)=>{e[s]=r}),e}const Pb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...a)=>io(async()=>{const{default:r}=await Promise.resolve().then(()=>Sn);return{default:r}}).then(({default:r})=>r(...a)):e=fetch,(...a)=>e(...a)},rj=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ib=async(t,e,a)=>{await t.setItem(e,JSON.stringify(a))},Ao=async(t,e)=>{const a=await t.getItem(e);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Lo=async(t,e)=>{await t.removeItem(e)};class Mc{constructor(){this.promise=new Mc.promiseConstructor((e,a)=>{this.resolve=e,this.reject=a})}}Mc.promiseConstructor=Promise;function pd(t){const e=t.split(".");if(e.length!==3)throw new fi("Invalid JWT structure");for(let a=0;a<e.length;a++)if(!U2.test(e[a]))throw new fi("JWT not in base64url format");return{header:JSON.parse(Zm(e[0])),payload:JSON.parse(Zm(e[1])),signature:X2(e[2]),raw:{header:e[0],payload:e[1]}}}async function sj(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function nj(t,e){return new Promise((a,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const n=await t(s);if(!e(s,null,n)){a(n);return}}catch(n){if(!e(s,n)){r(n);return}}})()})}function ij(t){return("0"+t.toString(16)).substr(-2)}function oj(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=e.length;let r="";for(let s=0;s<56;s++)r+=e.charAt(Math.floor(Math.random()*a));return r}return crypto.getRandomValues(t),Array.from(t,ij).join("")}async function lj(t){const e=new TextEncoder().encode(t),a=await crypto.subtle.digest("SHA-256",e),r=new Uint8Array(a);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}async function cj(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const e=await lj(t);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Is(t,e,a=!1){const r=oj();let s=r;a&&(s+="/PASSWORD_RECOVERY"),await Ib(t,`${e}-code-verifier`,s);const n=await cj(r);return[n,r===n?"plain":"s256"]}const dj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uj(t){const e=t.headers.get(zu);if(!e||!e.match(dj))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function hj(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function pj(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zs(t){if(!mj.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var gj=function(t,e){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(a[r[s]]=t[r[s]]);return a};const Qr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fj=[502,503,504];async function eg(t){var e;if(!rj(t))throw new Au(Qr(t),0);if(fj.includes(t.status))throw new Au(Qr(t),t.status);let a;try{a=await t.json()}catch(n){throw new Tb(Qr(n),n)}let r;const s=uj(t);if(s&&s.getTime()>=Db["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?r=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(r=a.error_code),r){if(r==="weak_password")throw new Km(Qr(a),t.status,((e=a.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new pr}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0))throw new Km(Qr(a),t.status,a.weak_password.reasons);throw new q2(Qr(a),t.status||500,r)}const xj=(t,e,a,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),a))};async function me(t,e,a,r){var s;const n=Object.assign({},r==null?void 0:r.headers);n[zu]||(n[zu]=Db["2024-01-01"].name),r!=null&&r.jwt&&(n.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await bj(t,e,a+l,{headers:n,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function bj(t,e,a,r,s,n){const o=xj(e,r,s,n);let l;try{l=await t(a,Object.assign({},o))}catch(c){throw console.error(c),new Au(Qr(c),0)}if(l.ok||await eg(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await eg(c)}}function $a(t){var e;let a=null;kj(t)&&(a=Object.assign({},t),t.expires_at||(a.expires_at=ej(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:a,user:r},error:null}}function tg(t){const e=$a(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((a,r)=>a&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function yr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function yj(t){return{data:t,error:null}}function vj(t){const{action_link:e,email_otp:a,hashed_token:r,redirect_to:s,verification_type:n}=t,o=gj(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:a,hashed_token:r,redirect_to:s,verification_type:n},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function wj(t){return t}function kj(t){return t.access_token&&t.refresh_token&&t.expires_in}const md=["global","local","others"];var jj=function(t,e){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(a[r[s]]=t[r[s]]);return a};class _j{constructor({url:e="",headers:a={},fetch:r}){this.url=e,this.headers=a,this.fetch=Pb(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,a=md[0]){if(md.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${md.join(", ")}`);try{return await me(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,a={}){try{return await me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:yr})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:a}=e,r=jj(e,["options"]),s=Object.assign(Object.assign({},r),a);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:vj,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(le(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(e){try{return await me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:yr})}catch(a){if(le(a))return{data:{user:null},error:a};throw a}}async listUsers(e){var a,r,s,n,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(a=e==null?void 0:e.page)===null||a===void 0?void 0:a.toString())!==null&&r!==void 0?r:"",per_page:(n=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:""},xform:wj});if(u.error)throw u.error;const h=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);d[`${k}Page`]=y}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(le(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){zs(e);try{return await me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:yr})}catch(a){if(le(a))return{data:{user:null},error:a};throw a}}async updateUserById(e,a){zs(e);try{return await me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:a,headers:this.headers,xform:yr})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,a=!1){zs(e);try{return await me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:a},xform:yr})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){zs(e.userId);try{const{data:a,error:r}=await me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:a,error:r}}catch(a){if(le(a))return{data:null,error:a};throw a}}async _deleteFactor(e){zs(e.userId),zs(e.id);try{return{data:await me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(a){if(le(a))return{data:null,error:a};throw a}}}const Nj={getItem:t=>xi()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{xi()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{xi()&&globalThis.localStorage.removeItem(t)}};function ag(t={}){return{getItem:e=>t[e]||null,setItem:(e,a)=>{t[e]=a},removeItem:e=>{delete t[e]}}}function Sj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const As={debug:!!(globalThis&&xi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zb extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Cj extends zb{}async function Ej(t,e,a){As.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),As.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){As.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await a()}finally{As.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw As.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Cj(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(As.debug)try{const n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}Sj();const Mj={url:R2,storageKey:F2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function rg(t,e,a){return await a()}class Bi{constructor(e){var a,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Bi.nextInstanceID,Bi.nextInstanceID+=1,this.instanceID>0&&ua()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Mj),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new _j({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Pb(s.fetch),this.lock=s.lock||rg,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ua()&&!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks?this.lock=Ej:this.lock=rg,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:xi()?this.storage=Nj:(this.memoryStorage={},this.storage=ag(this.memoryStorage)):(this.memoryStorage={},this.storage=ag(this.memoryStorage)),ua()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Mb}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const a=aj(window.location.href);let r="none";if(this._isImplicitGrantCallback(a)?r="implicit":await this._isPKCECallback(a)&&(r="pkce"),ua()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:n}=await this._getSessionFromURL(a,r);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),W2(n)){const c=(e=n.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:n}}return await this._removeSession(),{error:n}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return le(a)?{error:a}:{error:new Tb("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var a,r,s;try{const n=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:$a}),{data:o,error:l}=n;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(le(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var a,r,s;try{let n;if("email"in e){const{email:u,password:h,options:p}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await Is(this.storage,this.storageKey)),n=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:h,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:v},xform:$a})}else if("phone"in e){const{phone:u,password:h,options:p}=e;n=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:$a})}else throw new Io("You must provide either an email or phone number and a password");const{data:o,error:l}=n;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let a;if("email"in e){const{email:n,password:o,options:l}=e;a=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tg})}else if("phone"in e){const{phone:n,password:o,options:l}=e;a=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tg})}else throw new Io("You must provide either an email or phone number and a password");const{data:r,error:s}=a;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Po}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(a){if(le(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(e){var a,r,s,n;return await this._handleProviderSignIn(e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:a}=e;if(a==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}async signInWithSolana(e){var a,r,s,n,o,l,c,d,u,h,p,m;let v,y;if("message"in e)v=e.message,y=e.signature;else{const{chain:k,wallet:g,statement:f,options:x}=e;let w;if(ua())if(typeof g=="object")w=g;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))w=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}const S=new URL((a=x==null?void 0:x.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in w&&w.signIn){const N=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),f?{statement:f}:null));let _;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")_=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)_=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)v=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),y=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${S.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((n=x==null?void 0:x.signInWithSolana)===null||n===void 0)&&n.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((d=x==null?void 0:x.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(u=x==null?void 0:x.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const N=await w.signMessage(new TextEncoder().encode(v),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=N}}try{const{data:k,error:g}=await me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Z2(y)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:$a});if(g)throw g;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new Po}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:g})}catch(k){if(le(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const a=await Ao(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(a??"").split("/");try{const{data:n,error:o}=await me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:$a});if(await Lo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new Po}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:s??null}),error:o})}catch(n){if(le(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:a,provider:r,token:s,access_token:n,nonce:o}=e,l=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:n,nonce:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:$a}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Po}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(a){if(le(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(e){var a,r,s,n,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Is(this.storage,this.storageKey));const{error:h}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Io("You must provide either an email or phone number.")}catch(l){if(le(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var a,r;try{let s,n;"options"in e&&(s=(a=e.options)===null||a===void 0?void 0:a.redirectTo,n=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:s,xform:$a});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(le(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var a,r,s;try{let n=null,o=null;return this.flowType==="pkce"&&([n,o]=await Is(this.storage,this.storageKey)),await me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(a=e.options)===null||a===void 0?void 0:a.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:o}),headers:this.headers,xform:yj})}catch(n){if(le(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:a},error:r}=e;if(r)throw r;if(!a)throw new pr;const{error:s}=await me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(le(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const a=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:n}=e,{error:o}=await me(this.fetch,"POST",a,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},redirectTo:n==null?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:n}=e,{data:o,error:l}=await me(this.fetch,"POST",a,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Io("You must provide either an email or phone number and a type")}catch(a){if(le(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,a){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await a()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=a();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await e(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const a=await Ao(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?e=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ud:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:e},error:null}}const{session:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:yr}):await this._useSession(async a=>{var r,s,n;const{data:o,error:l}=a;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pr}:await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0,xform:yr})})}catch(a){if(le(a))return H2(a)&&(await this._removeSession(),await Lo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(e,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,a))}async _updateUser(e,a={}){try{return await this._useSession(async r=>{const{data:s,error:n}=r;if(n)throw n;if(!s.session)throw new pr;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Is(this.storage,this.storageKey));const{data:d,error:u}=await me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:yr});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new pr;const a=Date.now()/1e3;let r=a,s=!0,n=null;const{payload:o}=pd(e.access_token);if(o.exp&&(r=o.exp,s=r<=a),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};n=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;n={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-a,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(a){if(le(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async a=>{var r;if(!e){const{data:o,error:l}=a;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new pr;const{session:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(le(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(e,a){try{if(!ua())throw new zo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new zo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new Ym("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zo("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ym("No code detected.");const{data:f,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:n,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!n||!l||!o||!d)throw new zo("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let p=u+h;c&&(p=parseInt(c));const m=p-u;m*1e3<=$s&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const v=p-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,u);const{data:y,error:k}=await this._getUser(n);if(k)throw k;const g={provider_token:r,provider_refresh_token:s,access_token:n,expires_in:h,expires_at:p,refresh_token:o,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(le(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const a=await Ao(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&a)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async a=>{var r;const{data:s,error:n}=a;if(n)return{error:n};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(V2(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Lo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const a=tj(),r={id:a,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async a=>{var r,s;try{const{data:{session:n},error:o}=a;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,a={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Is(this.storage,this.storageKey,!0));try{return await me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(n){if(le(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:a,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=a.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(a){if(le(a))return{data:null,error:a};throw a}}async linkIdentity(e){var a;try{const{data:r,error:s}=await this._useSession(async n=>{var o,l,c,d,u;const{data:h,error:p}=n;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await me(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return ua()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(le(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async a=>{var r,s;const{data:n,error:o}=a;if(o)throw o;return await me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(a){if(le(a))return{data:null,error:a};throw a}}async _refreshAccessToken(e){const a=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{const r=Date.now();return await nj(async s=>(s>0&&await sj(200*Math.pow(2,s-1)),this._debug(a,"refreshing attempt",s),await me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:$a})),(s,n)=>{const o=200*Math.pow(2,s);return n&&hd(n)&&Date.now()+o-r<$s})}catch(r){if(this._debug(a,"error",r),le(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(a,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,a){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",a,"url",r),ua()&&!a.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const r=await Ao(this.storage,this.storageKey);if(this._debug(a,"session from storage",r),!this._isValidSession(r)){this._debug(a,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<ud;if(this._debug(a,`session has${s?"":" not"} expired with margin of ${ud}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:n}=await this._callRefreshToken(r.refresh_token);n&&(console.error(n),hd(n)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",n),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(a,"error",r),console.error(r);return}finally{this._debug(a,"end")}}async _callRefreshToken(e){var a,r;if(!e)throw new pr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Mc;const{data:n,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!n.session)throw new pr;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const l={session:n.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(n){if(this._debug(s,"error",n),le(n)){const o={session:null,error:n};return hd(n)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(n),n}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,a,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",a,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:a});const n=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,a)}catch(c){n.push(c)}});if(await Promise.all(o),n.length>0){for(let l=0;l<n.length;l+=1)console.error(n[l]);throw n[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ib(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Lo(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ua()&&window!=null&&window.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$s);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async a=>{const{data:{session:r}}=a;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/$s);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${$s}ms, refresh threshold is ${Iu} ticks`),s<=Iu&&await this._callRefreshToken(r.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof zb)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ua()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const a=`#_onVisibilityChanged(${e})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,a,r){const s=[`provider=${encodeURIComponent(a)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[n,o]=await Is(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const n=new URLSearchParams(r.queryParams);s.push(n.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async a=>{var r;const{data:s,error:n}=a;return n?{data:null,error:n}:await me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(a){if(le(a))return{data:null,error:a};throw a}}async _enroll(e){try{return await this._useSession(async a=>{var r,s;const{data:n,error:o}=a;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await me(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(a){if(le(a))return{data:null,error:a};throw a}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var r;const{data:s,error:n}=a;if(n)return{data:null,error:n};const{data:o,error:l}=await me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(a){if(le(a))return{data:null,error:a};throw a}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var r;const{data:s,error:n}=a;return n?{data:null,error:n}:await me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(a){if(le(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(e){const{data:a,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:a.id,code:e.code})}async _listFactors(){const{data:{user:e},error:a}=await this.getUser();if(a)return{data:null,error:a};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),n=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var a,r;const{data:{session:s},error:n}=e;if(n)return{data:null,error:n};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=pd(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(a=s.user.factors)===null||a===void 0?void 0:a.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,a={keys:[]}){let r=a.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+B2>Date.now()))return r;const{data:s,error:n}=await me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;if(!s.keys||s.keys.length===0)throw new fi("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new fi("No matching signing key found in JWKS");return r}async getClaims(e,a={keys:[]}){try{let r=e;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};r=p.session.access_token}const{header:s,payload:n,signature:o,raw:{header:l,payload:c}}=pd(r);if(hj(n.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:n,header:s,signature:o},error:null}}const d=pj(s.alg),u=await this.fetchJwk(s.kid,a),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Q2(`${l}.${c}`)))throw new fi("Invalid JWT signature");return{data:{claims:n,header:s,signature:o},error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}}Bi.nextInstanceID=0;const Dj=Bi;class Tj extends Dj{constructor(e){super(e)}}var Oj=function(t,e,a,r){function s(n){return n instanceof a?n:new a(function(o){o(n)})}return new(a||(a=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):s(u.value).then(l,c)}d((r=r.apply(t,[])).next())})};class Pj{constructor(e,a,r){var s,n,o;if(this.supabaseUrl=e,this.supabaseKey=a,!e)throw new Error("supabaseUrl is required.");if(!a)throw new Error("supabaseKey is required.");const l=A2(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:E2,realtime:D2,auth:Object.assign(Object.assign({},M2),{storageKey:d}),global:C2},h=L2(r??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(n=h.global.headers)!==null&&n!==void 0?n:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=I2(a,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Kk(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Sk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new _2(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,a={},r={}){return this.rest.rpc(e,a,r)}channel(e,a={config:{}}){return this.realtime.channel(e,a)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,a;return Oj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(a=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&a!==void 0?a:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:a,detectSessionInUrl:r,storage:s,storageKey:n,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Tj({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:n,autoRefreshToken:e,persistSession:a,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new u2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,a)=>{this._handleTokenChanged(e,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(e,a,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ij=(t,e,a)=>new Pj(t,e,a),Ab="https://nsauxespetsxavgmsexh.supabase.co",Lb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5zYXV4ZXNwZXRzeGF2Z21zZXhoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEyMDk3MjMsImV4cCI6MjA2Njc4NTcyM30.k9920R_uqAV4zNYwGcHHUHDjsNTjSaIlYUnMoCtCgig";console.log("Supabase URL:",Ab);console.log("Supabase Key exists:",!!Lb);const de=Ij(Ab,Lb,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1}}),zj=async()=>{try{console.log("Checking Supabase database...");const{data:t,error:e}=await de.from("users").select("id").limit(1);if(e)return console.error("Error checking users table:",e),!1;if(t&&t.length>0)return console.log("Database already has data"),!0;console.log("Database needs initialization, creating sample data...");const a=[{id:"11111111-1111-1111-1111-111111111111",name:"Admin User",email:"admin@prodomo.local",grade:"Admin",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1,admin_notes:"System administrator account"},{id:"22222222-2222-2222-2222-222222222222",name:"V4 User",email:"v4@prodomo.local",grade:"V4",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:5,is_guest:!1,is_blocked:!1,admin_notes:"Standard V4 user account"},{id:"33333333-3333-3333-3333-333333333333",name:"V5 User",email:"v5@prodomo.local",grade:"V5",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:12,is_guest:!1,is_blocked:!1,admin_notes:"Advanced V5 user account"},{id:"44444444-4444-4444-4444-444444444444",name:"Support User",email:"support@prodomo.local",grade:"Support",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:3,is_guest:!1,is_blocked:!1,admin_notes:"Support team member with bug management access"}],{error:r}=await de.from("users").insert(a);return r?(console.error("Error inserting default users:",r),!1):(console.log(" Database initialized with default users"),!0)}catch(t){return console.error("Failed to initialize database:",t),!1}},Rb=T.createContext(void 0),ht=()=>{const t=T.useContext(Rb);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Aj=({children:t})=>{const[e,a]=T.useState(null),[r,s]=T.useState(!1),[n,o]=T.useState(null),[l,c]=T.useState(null),[d,u]=T.useState(0),h=["Guest","V4","V5","Support","Admin"];T.useEffect(()=>{ub(),(async()=>{try{const g=localStorage.getItem("prodomo_current_user");if(g){const w=JSON.parse(g);if(w.is_guest&&w.guest_expires_at){const S=new Date(w.guest_expires_at).getTime();if(new Date().getTime()>S){localStorage.removeItem("prodomo_current_user");return}}a(w),console.log("AuthContext: Restored user session from localStorage:",w.name),await p(w);return}const{data:{session:f},error:x}=await de.auth.getSession();if(x){console.error("Error checking session:",x);return}if(f){const{data:w,error:S}=await de.from("users").select("*").eq("id",f.user.id);if(S){console.error("Error fetching user data:",S);return}w&&w.length>0&&(a(w[0]),localStorage.setItem("prodomo_current_user",JSON.stringify(w[0])),console.log("AuthContext: Restored user session from Supabase:",w[0].name))}}catch(g){console.error("AuthContext: Failed to check session:",g)}})()},[]),T.useEffect(()=>{let g;return e!=null&&e.is_guest&&e.guest_expires_at?g=setInterval(()=>{const f=new Date(e.guest_expires_at).getTime(),x=new Date().getTime(),w=Math.max(0,f-x);c(w),w<=6e4&&w>59e3&&te.sessionExpiring(),w<=0&&(console.log("AuthContext: Guest session expired"),Vt()&&Bm(e.id),y())},1e3):c(null),()=>{g&&clearInterval(g)}},[e]);const p=async g=>{try{const{data:f,error:x}=await de.from("users").select("id").eq("id",g.id);if(x){console.error("Error checking if user exists:",x);return}if(!f||f.length===0){const{error:w}=await de.from("users").insert({id:g.id,name:g.name,email:g.email,grade:g.grade,join_date:g.join_date,last_active:g.last_active,total_downloads:g.total_downloads,is_guest:g.is_guest||!1,guest_expires_at:g.guest_expires_at||null,is_blocked:g.is_blocked||!1,blocked_until:g.blocked_until||null,admin_notes:g.admin_notes||null});w?console.error("Error creating user in database:",w):console.log("User created in database:",g.name)}else{const{error:w}=await de.from("users").update({last_active:new Date().toISOString()}).eq("id",g.id);w&&console.error("Error updating user last_active:",w)}}catch(f){console.error("Error ensuring user exists in database:",f)}},m=async(g,f,x)=>{try{if(Zt.getRateLimitStatus("login")){const b=await Zt.checkRateLimit("login");if(!b.allowed)throw new Error(`Rate limit exceeded. Please try again in ${b.retryAfter} seconds.`)}console.log("AuthContext: Sign in attempt for:",g),s(!0),o(null);const w=ld(g),S=ld(f),N=x?ld(x):void 0;if((w.includes("admin")||N)&&N!=="T0KEN")throw u(b=>b+1),new Error("Invalid admin token");let _=null;if(w==="admin@prodomo.local"&&S==="admin123")_={id:"11111111-1111-1111-1111-111111111111",name:"Admin User",email:"admin@prodomo.local",grade:"Admin",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1};else if(w==="v4@prodomo.local"&&S==="v4pass")_={id:"22222222-2222-2222-2222-222222222222",name:"V4 User",email:"v4@prodomo.local",grade:"V4",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1};else if(w==="v5@prodomo.local"&&S==="v5pass")_={id:"33333333-3333-3333-3333-333333333333",name:"V5 User",email:"v5@prodomo.local",grade:"V5",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1};else if(w==="support@prodomo.local"&&S==="support123")_={id:"44444444-4444-4444-4444-444444444444",name:"Support User",email:"support@prodomo.local",grade:"Support",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1};else throw u(b=>b+1),new Error("Invalid credentials");if(!_)throw new Error("User not found");await p(_),localStorage.setItem("prodomo_current_user",JSON.stringify(_)),a(_),u(0),o(null),te.login(_.name),console.log("AuthContext: Sign in successful")}catch(w){if(console.error("AuthContext: Sign in error:",w),o(w instanceof Error?w.message:"Failed to sign in"),d>=5&&Zt.getRateLimitStatus("login")){const S=await Zt.getUserIP();Zt.blockIP(S,15*60*1e3),te.error("Too many failed login attempts. Your IP has been temporarily blocked.","Security Alert"),u(0)}throw w}finally{s(!1)}},v=async()=>{try{const g=await Zt.checkRateLimit("guest");console.log("AuthContext: Creating guest session"),s(!0),o(null);const f=await Zt.getUserIP(),x=Wl(f);if(x.blocked)throw new Error(x.reason||"IP is blocked from creating guest sessions");const w=crypto.randomUUID(),S=new Date(Date.now()+5*60*1e3),N={id:w,name:"Guest User",email:`${w}@temp.local`,grade:"Guest",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!0,guest_expires_at:S.toISOString(),is_blocked:!1},_=await fk(w);if(!_.success)throw new Error(_.error||"Failed to create guest session");await p(N);try{const b="prodomo_users",j=localStorage.getItem(b),A=j?JSON.parse(j):[];A.push(N),localStorage.setItem(b,JSON.stringify(A)),localStorage.setItem("prodomo_current_user",JSON.stringify(N)),console.log("Guest user stored in localStorage")}catch(b){console.error("Failed to store guest user in localStorage:",b)}a(N),o(null),te.guestSession("5 minutes"),Vt()?te.info("Your IP will be blocked for 3 days after this session expires","IP Protection Active"):te.info("IP protection is currently disabled","Protection Status"),console.log("AuthContext: Guest session created with IP protection status:",Vt()?"enabled":"disabled")}catch(g){throw console.error("AuthContext: Guest sign in error:",g),o(g instanceof Error?g.message:"Failed to create guest session"),g instanceof Error&&(g.message.includes("blocked")||g.message.includes("exceeded"))&&te.error(g.message,"Access Restricted"),g}finally{s(!1)}},y=async()=>{try{if(console.log("AuthContext: Signing out user"),e!=null&&e.is_guest){Vt()?(await Bm(e.id),te.warning("Guest session ended. Your IP is now blocked for 3 days.","IP Protection Applied")):te.info("Guest session ended.","Session Expired");try{await de.from("users").delete().eq("id",e.id),console.log("Guest user removed from database")}catch(g){console.error("Failed to delete guest user from database:",g)}try{const g="prodomo_users",f=localStorage.getItem(g);if(f){const x=JSON.parse(f).filter(w=>w.id!==e.id);localStorage.setItem(g,JSON.stringify(x))}}catch(g){console.error("Failed to delete guest user from localStorage:",g)}}else te.logout();localStorage.removeItem("prodomo_current_user");try{await de.auth.signOut()}catch(g){console.error("Error signing out from Supabase:",g)}a(null),c(null),o(null),console.log("AuthContext: Sign out complete")}catch(g){console.error("AuthContext: Error signing out:",g)}},k=g=>{if(!e)return!1;if(g==="Support"&&e.grade==="Support"||e.grade==="Admin"||e.grade==="Support"&&(g==="V4"||g==="V5"||g==="Guest"))return!0;const f=h.indexOf(e.grade),x=h.indexOf(g);return f>=x};return i.jsx(Rb.Provider,{value:{user:e,loading:r,error:n,signIn:m,signInAsGuest:v,signOut:y,isAuthenticated:!!e,hasAccess:k,timeRemaining:l},children:t})},Fb=()=>{const{user:t}=ht(),[e,a]=T.useState([]),[r,s]=T.useState(0),n=()=>`prodomo_notifications_${(t==null?void 0:t.id)||"guest"}`;T.useEffect(()=>{if(t){const c=localStorage.getItem(n());if(c)try{const d=JSON.parse(c);a(d),s(d.filter(u=>!u.read).length)}catch(d){console.error("Failed to parse notifications:",d)}}},[t]);const o=c=>{t&&(localStorage.setItem(n(),JSON.stringify(c)),a(c),s(c.filter(d=>!d.read).length))},l=c=>{const d={...c,id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,created_at:new Date().toISOString(),read:!1},u=[d,...e].slice(0,50);o(u),console.log("Notification added:",d)};return{notifications:e,unreadCount:r,addNotification:l,markAsRead:c=>{const d=e.map(u=>u.id===c?{...u,read:!0}:u);o(d)},markAllAsRead:()=>{const c=e.map(d=>({...d,read:!0}));o(c)},removeNotification:c=>{const d=e.filter(u=>u.id!==c);o(d)},clearAll:()=>{o([])},addBugStatusNotification:(c,d,u,h,p)=>{if((t==null?void 0:t.id)!==p)return;let m="",v="info";switch(u){case"in-progress":m=`Your bug report "${c}" is now being worked on by our team.`,v="info";break;case"resolved":m=`Great news! Your bug report "${c}" has been resolved.`,v="success";break;case"closed":m=`Your bug report "${c}" has been closed.`,v="info";break;default:m=`Your bug report "${c}" status changed from ${d} to ${u}.`,v="info"}l({title:"Bug Report Update",message:m,type:v,related_id:h,action_url:"/bug-report"})}}},Lj=()=>{const{notifications:t,unreadCount:e,markAsRead:a,markAllAsRead:r,removeNotification:s,clearAll:n}=Fb(),[o,l]=T.useState(!1),c=T.useRef(null),d=T.useRef(null);T.useEffect(()=>{const m=v=>{c.current&&!c.current.contains(v.target)&&l(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const u=m=>{switch(m){case"success":return i.jsx(lt,{size:16,className:"text-emerald-500"});case"warning":return i.jsx(Ka,{size:16,className:"text-amber-500"});case"error":return i.jsx(uk,{size:16,className:"text-red-500"});default:return i.jsx(ek,{size:16,className:"text-blue-500"})}},h=m=>{const v=new Date(m),y=Math.floor((new Date().getTime()-v.getTime())/1e3);return y<60?`${y}s ago`:y<3600?`${Math.floor(y/60)}m ago`:y<86400?`${Math.floor(y/3600)}h ago`:`${Math.floor(y/86400)}d ago`},p=m=>{m.read||a(m.id),m.action_url&&console.log("Navigate to:",m.action_url)};return i.jsxs("div",{className:"relative",ref:c,children:[i.jsxs("button",{ref:d,onClick:()=>l(!o),className:"relative p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[i.jsx(bs,{size:18}),e>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium animate-pulse",children:e>9?"9+":e})]}),o&&i.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-96 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-[100] max-h-96 overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notifications"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[e>0&&i.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200 rounded",title:"Mark all as read",children:i.jsx(G1,{size:16})}),t.length>0&&i.jsx("button",{onClick:n,className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200 rounded",title:"Clear all",children:i.jsx(Rt,{size:16})}),i.jsx("button",{onClick:()=>l(!1),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 rounded",children:i.jsx(_e,{size:16})})]})]}),e>0&&i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e," unread notification",e!==1?"s":""]})]}),i.jsx("div",{className:"max-h-80 overflow-y-auto",children:t.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(bs,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No notifications"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You're all caught up! "})]}):i.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(m=>i.jsx("div",{className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 cursor-pointer relative group ${m.read?"":"bg-blue-50 dark:bg-blue-900/10 border-l-4 border-blue-500"}`,onClick:()=>p(m),children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:u(m.type)}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1 pr-2",children:[i.jsx("p",{className:`text-sm font-medium ${m.read?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:m.title}),i.jsx("p",{className:`text-sm mt-1 break-words ${m.read?"text-gray-500 dark:text-gray-400":"text-gray-700 dark:text-gray-300"}`,children:m.message}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:h(m.created_at)})]}),i.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 ml-2",children:[!m.read&&i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),i.jsx("button",{onClick:v=>{v.stopPropagation(),s(m.id)},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200 rounded opacity-0 group-hover:opacity-100",children:i.jsx(_e,{size:12})})]})]})})]})},m.id))})}),t.length>0&&i.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:i.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400",children:"Notifications are stored locally and will persist across sessions"})})]})]})},Rj=({activeSection:t,setActiveSection:e})=>{const{isDark:a,toggleTheme:r}=ob(),{user:s,hasAccess:n,signOut:o,timeRemaining:l}=ht(),[c,d]=T.useState(!1),[u,h]=T.useState(!1),p=T.useRef(null),m=[{id:"dashboard",label:"Dashboard",icon:Z1,requiresAccess:"Guest"},{id:"downloads",label:"Downloads",icon:dt,requiresAccess:"Guest"},{id:"documentation",label:"Documentation",icon:ku,requiresAccess:"Guest"},{id:"patch-notes",label:"Patch Notes",icon:ya,requiresAccess:"Guest"},{id:"bug-report",label:"Bug Reports",icon:Ga,requiresAccess:"V4"},{id:"file-manager",label:"File Manager",icon:eb,requiresAccess:"Admin"},{id:"bug-management",label:"Bug Management",icon:Ga,requiresAccess:["Admin","Support"]},{id:"analytics",label:"Analytics",icon:Xx,requiresAccess:"Admin"},{id:"user-management",label:"User Management",icon:va,requiresAccess:"Admin"},{id:"activity-logs",label:"Activity Logs",icon:nt,requiresAccess:"Admin"},{id:"ip-protection",label:"IP Protection",icon:Xa,requiresAccess:"Admin"}];T.useEffect(()=>{const N=_=>{p.current&&!p.current.contains(_.target)&&h(!1)};return document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[]);const v=N=>{switch(N){case"Admin":return"text-red-500 bg-red-100 dark:bg-red-900/20";case"Support":return"text-amber-500 bg-amber-100 dark:bg-amber-900/20";case"V5":return"text-purple-500 bg-purple-100 dark:bg-purple-900/20";case"V4":return"text-blue-500 bg-blue-100 dark:bg-blue-900/20";default:return"text-gray-500 bg-gray-100 dark:bg-gray-800"}},y=N=>{const _=Math.floor(N/6e4),b=Math.floor(N%6e4/1e3);return`${_}:${b.toString().padStart(2,"0")}`},k=async()=>{console.log("Sidebar: Sign out clicked"),h(!1);try{await o()}catch(N){console.error("Sidebar: Error signing out:",N)}},g=()=>{console.log("Sidebar: Theme toggle clicked"),r()},f=N=>{console.log("Sidebar: Navigation clicked:",N),e(N),window.innerWidth<1024&&d(!0)},x=()=>{console.log("Sidebar: User profile clicked"),e("profile"),h(!1),window.innerWidth<1024&&d(!0)},w=()=>{console.log("Sidebar: Settings clicked"),e("settings"),h(!1),window.innerWidth<1024&&d(!0)},S=N=>Array.isArray(N)?N.some(_=>n(_)):n(N);return s?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>d(!c),className:"lg:hidden fixed top-4 left-4 z-50 p-2 rounded-lg bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700",children:c?i.jsx(rk,{size:20,className:"text-gray-600 dark:text-gray-300"}):i.jsx(_e,{size:20,className:"text-gray-600 dark:text-gray-300"})}),i.jsx("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-white dark:bg-gray-800 shadow-xl transform transition-transform duration-300 ease-in-out border-r border-gray-200 dark:border-gray-700 ${c?"-translate-x-full lg:translate-x-0":"translate-x-0"}`,children:i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:i.jsx(ys,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Prodomo"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Server Dashboard"})]})]})}),i.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"relative",ref:p,children:[i.jsxs("button",{onClick:()=>h(!u),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 group",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:s.name.charAt(0)})}),i.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-emerald-500 border-2 border-white dark:border-gray-800 rounded-full"})]}),i.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[i.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-200",children:[s.name,s.is_guest&&i.jsx("span",{className:"ml-1 text-xs text-blue-600 dark:text-blue-400",children:"(Guest)"})]}),i.jsx("div",{className:"flex flex-wrap items-center gap-2",children:s.grade==="Support"?i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:`text-xs px-2 py-1 rounded-full flex items-center ${v("V4")}`,children:[i.jsx(Se,{size:10,className:"mr-1"}),"V4"]}),i.jsxs("span",{className:`text-xs px-2 py-1 rounded-full flex items-center ${v("Support")}`,children:[i.jsx(Pr,{size:10,className:"mr-1"}),"Support"]})]}):i.jsxs("span",{className:`text-xs px-2 py-1 rounded-full flex items-center ${v(s.grade)}`,children:[i.jsx(Se,{size:10,className:"mr-1"}),s.grade]})}),s.is_guest&&l&&i.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[i.jsx(qt,{size:12,className:"text-amber-500"}),i.jsx("span",{className:"text-xs text-amber-600 dark:text-amber-400",children:y(l)})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("div",{onClick:N=>N.stopPropagation(),children:i.jsx(Lj,{})}),i.jsx(ju,{size:16,className:`text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-all duration-200 ${u?"rotate-180":""}`})]})]}),u&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-[70] overflow-hidden",children:[i.jsxs("button",{onClick:x,className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx(nr,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"View Profile"})]}),!s.is_guest&&i.jsxs("button",{onClick:w,className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx(Qh,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Settings"})]}),i.jsxs("button",{onClick:g,className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[a?i.jsx(rb,{size:16,className:"text-amber-400"}):i.jsx(ab,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a?"Light Mode":"Dark Mode"})]}),i.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700",children:i.jsxs("button",{onClick:k,className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors duration-200",children:[i.jsx(tb,{size:16,className:"text-red-500"}),i.jsx("span",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:"Sign Out"})]})})]})]})}),i.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:m.map(N=>{if(!S(N.requiresAccess))return null;const _=t===N.id,b=N.icon;return i.jsxs("button",{onClick:()=>f(N.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-all duration-200 ${_?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border-r-2 border-blue-600":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[i.jsx(b,{size:20}),i.jsx("span",{className:"font-medium",children:N.label})]},N.id)})})]})}),!c&&i.jsx("div",{className:"lg:hidden fixed inset-0 z-30 bg-black bg-opacity-50",onClick:()=>d(!0)})]}):null},Kt=()=>{const[t,e]=T.useState(!1),[a,r]=T.useState(null),[s,n]=T.useState(!1);T.useEffect(()=>{(async()=>{try{const E=await zj();n(E),E||(console.error("Failed to initialize database"),r("Failed to connect to database"))}catch(E){console.error("Database initialization error:",E),r("Database initialization error")}})()},[]);const o=()=>{try{const E=[{id:"11111111-1111-1111-1111-111111111111",name:"Admin User",email:"admin@prodomo.local",grade:"Admin",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1,admin_notes:"System administrator account"},{id:"22222222-2222-2222-2222-222222222222",name:"V4 User",email:"v4@prodomo.local",grade:"V4",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:5,is_guest:!1,is_blocked:!1,admin_notes:"Standard V4 user account"},{id:"33333333-3333-3333-3333-333333333333",name:"V5 User",email:"v5@prodomo.local",grade:"V5",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:12,is_guest:!1,is_blocked:!1,admin_notes:"Advanced V5 user account"},{id:"44444444-4444-4444-4444-444444444444",name:"Support User",email:"support@prodomo.local",grade:"Support",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:3,is_guest:!1,is_blocked:!1,admin_notes:"Support team member with bug management access"}];localStorage.setItem("prodomo_users",JSON.stringify(E));const P=[{id:crypto.randomUUID(),name:"Prodomo Server",version:"2.1.4",description:"Latest stable release of Prodomo Server with enhanced security features and performance improvements.",file_url:"https://example.com/download/prodomo-server-2.1.4.zip",file_size:52428800,file_type:"server",min_grade:"V4",status:"active",download_count:1247,changelog:["Enhanced security protocols","Improved performance by 25%","Fixed memory leak issues","Added new configuration options","Updated dependencies"],created_by:"11111111-1111-1111-1111-111111111111",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:crypto.randomUUID(),name:"Prodomo Server Beta",version:"2.2.0-beta",description:"Beta version with experimental features. Use at your own risk in production environments.",file_url:"https://example.com/download/prodomo-server-2.2.0-beta.zip",file_size:55574528,file_type:"server",min_grade:"V5",status:"beta",download_count:89,changelog:["New experimental API endpoints","Advanced caching mechanisms","Improved logging system","Beta WebSocket support"],created_by:"11111111-1111-1111-1111-111111111111",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:crypto.randomUUID(),name:"Security Plugin",version:"1.0.2",description:"Essential security plugin for enhanced server protection and monitoring.",file_url:"https://example.com/download/security-plugin-1.0.2.zip",file_size:5242880,file_type:"plugin",min_grade:"V4",status:"active",download_count:456,changelog:["Fixed vulnerability in authentication","Added brute force protection","Improved logging capabilities"],created_by:"11111111-1111-1111-1111-111111111111",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];localStorage.setItem("prodomo_server_files",JSON.stringify(P));const R=[{id:crypto.randomUUID(),version:"2.1.4",title:"Security and Performance Update",content:`## What's New in v2.1.4

### Security Enhancements
- Implemented advanced encryption for data transmission
- Added multi-factor authentication support
- Enhanced input validation and sanitization
- Updated security protocols to prevent common vulnerabilities

### Performance Improvements
- Optimized database queries for 25% faster response times
- Reduced memory usage by 15%
- Improved caching mechanisms
- Enhanced connection pooling

### Bug Fixes
- Fixed critical memory leak in long-running processes
- Resolved issue with concurrent user sessions
- Fixed configuration file parsing errors
- Corrected timezone handling in logs

### New Features
- Added real-time monitoring dashboard
- Implemented automatic backup system
- New configuration management interface
- Enhanced logging with structured output

### Breaking Changes
- Updated API endpoints (see migration guide)
- Changed default configuration format
- Minimum system requirements updated

For detailed migration instructions, please refer to our documentation.`,status:"published",author_id:"11111111-1111-1111-1111-111111111111",author_name:"Admin User",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];localStorage.setItem("prodomo_patch_notes",JSON.stringify(R)),console.log("Initialized clean data in localStorage")}catch(E){console.error("Failed to initialize clean data:",E)}},l=async()=>{try{e(!0);const{data:E,error:P}=await de.from("users").select("*").order("created_at",{ascending:!1});if(P){console.error("Failed to fetch users from Supabase:",P);const R=localStorage.getItem("prodomo_users");return R?JSON.parse(R):[]}return E||[]}catch(E){console.error("Error fetching users:",E);const P=localStorage.getItem("prodomo_users");return P?JSON.parse(P):[]}finally{e(!1)}},c=async(E,P)=>{e(!0),r(null);try{const{error:R}=await de.from("users").update({...P,updated_at:new Date().toISOString()}).eq("id",E);if(R){console.error("Error updating user in Supabase:",R);const O=localStorage.getItem("prodomo_users");if(O){const M=JSON.parse(O),V=M.findIndex(Q=>Q.id===E);if(V!==-1){M[V]={...M[V],...P,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_users",JSON.stringify(M));const Q=localStorage.getItem("prodomo_current_user");if(Q){const C=JSON.parse(Q);C.id===E&&localStorage.setItem("prodomo_current_user",JSON.stringify({...C,...P}))}return!0}}return r("Failed to update user"),!1}return!0}catch(R){return console.error("Error updating user:",R),r("Failed to update user"),!1}finally{e(!1)}},d=async(E,P)=>c(E,{grade:P}),u=async(E,P)=>c(E,{admin_notes:P}),h=async(E,P)=>{const R={"30m":18e5,"1d":864e5,"7d":6048e5,"30d":2592e6}[P]||18e5,O=new Date(Date.now()+R).toISOString();return c(E,{is_blocked:!0,blocked_until:O})},p=async E=>c(E,{is_blocked:!1,blocked_until:void 0}),m=async E=>{e(!0),r(null);try{const P=crypto.randomUUID(),R={id:P,name:E.name,email:E.email,grade:E.grade,join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1},{error:O}=await de.from("users").insert([R]);if(O){console.error("Error creating user in Supabase:",O);const M=localStorage.getItem("prodomo_users"),V=M?JSON.parse(M):[];V.push(R),localStorage.setItem("prodomo_users",JSON.stringify(V));const Q=JSON.parse(localStorage.getItem("prodomo_passwords")||"{}");return Q[P]=E.password,localStorage.setItem("prodomo_passwords",JSON.stringify(Q)),!0}return!0}catch(P){return console.error("Error creating user:",P),r("Failed to create user"),!1}finally{e(!1)}},v=async E=>{e(!0),r(null);try{const{error:P}=await de.from("users").delete().eq("id",E);if(P){console.error("Error deleting user from Supabase:",P);const R=localStorage.getItem("prodomo_users");if(R){const O=JSON.parse(R).filter(V=>V.id!==E);localStorage.setItem("prodomo_users",JSON.stringify(O));const M=JSON.parse(localStorage.getItem("prodomo_passwords")||"{}");return M[E]&&(delete M[E],localStorage.setItem("prodomo_passwords",JSON.stringify(M))),!0}return r("Failed to delete user"),!1}return!0}catch(P){return console.error("Error deleting user:",P),r("Failed to delete user"),!1}finally{e(!1)}},y=E=>{const P={"11111111-1111-1111-1111-111111111111":"admin123","22222222-2222-2222-2222-222222222222":"v4pass","33333333-3333-3333-3333-333333333333":"v5pass","44444444-4444-4444-4444-444444444444":"support123"};if(P[E])return P[E];try{return JSON.parse(localStorage.getItem("prodomo_passwords")||"{}")[E]||null}catch(R){return console.error("Error getting user password:",R),null}},k=async()=>{try{e(!0);const{data:E,error:P}=await de.from("server_files").select("*").order("created_at",{ascending:!1});if(P){console.error("Failed to fetch files from Supabase:",P);const R=localStorage.getItem("prodomo_server_files");return R?JSON.parse(R):[]}return E||[]}catch(E){console.error("Error fetching server files:",E);const P=localStorage.getItem("prodomo_server_files");return P?JSON.parse(P):[]}finally{e(!1)}},g=async E=>{e(!0),r(null);try{const{error:P}=await de.from("server_files").insert([E]);if(P){console.error("Error creating file in Supabase:",P);const R=localStorage.getItem("prodomo_server_files"),O=R?JSON.parse(R):[],M={...E,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return O.push(M),localStorage.setItem("prodomo_server_files",JSON.stringify(O)),!0}return!0}catch(P){return console.error("Error creating file:",P),r("Failed to create file"),!1}finally{e(!1)}},f=async(E,P)=>{e(!0),r(null);try{const{error:R}=await de.from("server_files").update({...P,updated_at:new Date().toISOString()}).eq("id",E);if(R){console.error("Error updating file in Supabase:",R);const O=localStorage.getItem("prodomo_server_files");if(O){const M=JSON.parse(O),V=M.findIndex(Q=>Q.id===E);if(V!==-1)return M[V]={...M[V],...P,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_server_files",JSON.stringify(M)),!0}return r("Failed to update file"),!1}return!0}catch(R){return console.error("Error updating file:",R),r("Failed to update file"),!1}finally{e(!1)}},x=async E=>{e(!0),r(null);try{const{error:P}=await de.from("server_files").delete().eq("id",E);if(P){console.error("Error deleting file from Supabase:",P);const R=localStorage.getItem("prodomo_server_files");if(R){const O=JSON.parse(R).filter(M=>M.id!==E);return localStorage.setItem("prodomo_server_files",JSON.stringify(O)),!0}return r("Failed to delete file"),!1}return!0}catch(P){return console.error("Error deleting file:",P),r("Failed to delete file"),!1}finally{e(!1)}},w=async(E,P,R)=>{e(!0),r(null);try{const{data:O,error:M}=await de.storage.from(P).upload(R,E);if(M)return console.error("Error uploading file to Supabase:",M),`https://example.com/storage/${P}/${R}`;const{data:V}=de.storage.from(P).getPublicUrl(R);return V.publicUrl}catch(O){return console.error("Error uploading file:",O),r("Failed to upload file"),`https://example.com/storage/${P}/${R}`}finally{e(!1)}},S=async()=>{try{e(!0);const{data:E,error:P}=await de.from("patch_notes").select("*").order("created_at",{ascending:!1});if(P){console.error("Failed to fetch patch notes from Supabase:",P);const R=localStorage.getItem("prodomo_patch_notes");return R?JSON.parse(R):[]}return E||[]}catch(E){console.error("Error fetching patch notes:",E);const P=localStorage.getItem("prodomo_patch_notes");return P?JSON.parse(P):[]}finally{e(!1)}},N=async E=>{e(!0),r(null);try{const{error:P}=await de.from("patch_notes").insert([E]);if(P){console.error("Error creating patch note in Supabase:",P);const R=localStorage.getItem("prodomo_patch_notes"),O=R?JSON.parse(R):[],M={...E,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return O.push(M),localStorage.setItem("prodomo_patch_notes",JSON.stringify(O)),!0}return!0}catch(P){return console.error("Error creating patch note:",P),r("Failed to create patch note"),!1}finally{e(!1)}},_=async(E,P)=>{e(!0),r(null);try{const{error:R}=await de.from("patch_notes").update({...P,updated_at:new Date().toISOString()}).eq("id",E);if(R){console.error("Error updating patch note in Supabase:",R);const O=localStorage.getItem("prodomo_patch_notes");if(O){const M=JSON.parse(O),V=M.findIndex(Q=>Q.id===E);if(V!==-1)return M[V]={...M[V],...P,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_patch_notes",JSON.stringify(M)),!0}return r("Failed to update patch note"),!1}return!0}catch(R){return console.error("Error updating patch note:",R),r("Failed to update patch note"),!1}finally{e(!1)}},b=async E=>{e(!0),r(null);try{const{error:P}=await de.from("patch_notes").delete().eq("id",E);if(P){console.error("Error deleting patch note from Supabase:",P);const R=localStorage.getItem("prodomo_patch_notes");if(R){const O=JSON.parse(R).filter(M=>M.id!==E);return localStorage.setItem("prodomo_patch_notes",JSON.stringify(O)),!0}return r("Failed to delete patch note"),!1}return!0}catch(P){return console.error("Error deleting patch note:",P),r("Failed to delete patch note"),!1}finally{e(!1)}},j=async E=>{try{if(E.user_id){const{data:R,error:O}=await de.from("users").select("id").eq("id",E.user_id);if(O||!R||R.length===0){console.error("User does not exist in database, cannot log activity:",E.user_id);const M=localStorage.getItem("prodomo_activity_logs"),V=M?JSON.parse(M):[],Q={...E,id:crypto.randomUUID(),created_at:new Date().toISOString()};return V.push(Q),localStorage.setItem("prodomo_activity_logs",JSON.stringify(V)),!0}}const{error:P}=await de.from("activity_logs").insert([E]);if(P){console.error("Error logging activity to Supabase:",P);const R=localStorage.getItem("prodomo_activity_logs"),O=R?JSON.parse(R):[],M={...E,id:crypto.randomUUID(),created_at:new Date().toISOString()};O.push(M),localStorage.setItem("prodomo_activity_logs",JSON.stringify(O))}return!0}catch(P){console.error("Error logging activity:",P);try{const R=localStorage.getItem("prodomo_activity_logs"),O=R?JSON.parse(R):[],M={...E,id:crypto.randomUUID(),created_at:new Date().toISOString()};O.push(M),localStorage.setItem("prodomo_activity_logs",JSON.stringify(O))}catch(R){console.error("Failed to log activity to localStorage:",R)}return!1}},A=async(E=100)=>{try{e(!0);const{data:P,error:R}=await de.from("activity_logs").select("*").order("created_at",{ascending:!1}).limit(E);if(R){console.error("Failed to fetch activity logs from Supabase:",R);const O=localStorage.getItem("prodomo_activity_logs");return O?JSON.parse(O).slice(0,E):[]}return P||[]}catch(P){console.error("Error fetching activity logs:",P);const R=localStorage.getItem("prodomo_activity_logs");return R?JSON.parse(R).slice(0,E):[]}finally{e(!1)}},I=async E=>{try{if(E.user_id){const{data:R,error:O}=await de.from("users").select("id").eq("id",E.user_id);if(O||!R||R.length===0){console.error("User does not exist in database, cannot log download:",E.user_id);const M=localStorage.getItem("prodomo_download_logs"),V=M?JSON.parse(M):[],Q={...E,id:crypto.randomUUID(),created_at:new Date().toISOString()};if(V.push(Q),localStorage.setItem("prodomo_download_logs",JSON.stringify(V)),E.user_id){const C=localStorage.getItem("prodomo_users");if(C){const K=JSON.parse(C),G=K.findIndex(ne=>ne.id===E.user_id);if(G!==-1){K[G].total_downloads=(K[G].total_downloads||0)+1,localStorage.setItem("prodomo_users",JSON.stringify(K));const ne=localStorage.getItem("prodomo_current_user");if(ne){const fe=JSON.parse(ne);fe.id===E.user_id&&(fe.total_downloads=(fe.total_downloads||0)+1,localStorage.setItem("prodomo_current_user",JSON.stringify(fe)))}}}}return!0}}const{error:P}=await de.from("download_logs").insert([E]);if(P){console.error("Error logging download to Supabase:",P);const R=localStorage.getItem("prodomo_download_logs"),O=R?JSON.parse(R):[],M={...E,id:crypto.randomUUID(),created_at:new Date().toISOString()};O.push(M),localStorage.setItem("prodomo_download_logs",JSON.stringify(O))}try{if(E.user_id){const{data:R,error:O}=await de.from("users").select("total_downloads").eq("id",E.user_id);if(!O&&R&&R.length>0){const M=(R[0].total_downloads||0)+1;await de.from("users").update({total_downloads:M}).eq("id",E.user_id)}else{const M=localStorage.getItem("prodomo_users");if(M){const V=JSON.parse(M),Q=V.findIndex(C=>C.id===E.user_id);if(Q!==-1){V[Q].total_downloads=(V[Q].total_downloads||0)+1,localStorage.setItem("prodomo_users",JSON.stringify(V));const C=localStorage.getItem("prodomo_current_user");if(C){const K=JSON.parse(C);K.id===E.user_id&&(K.total_downloads=(K.total_downloads||0)+1,localStorage.setItem("prodomo_current_user",JSON.stringify(K)))}}}}}}catch(R){console.error("Failed to update user download count:",R)}return!0}catch(P){console.error("Error logging download:",P);try{const R=localStorage.getItem("prodomo_download_logs"),O=R?JSON.parse(R):[],M={...E,id:crypto.randomUUID(),created_at:new Date().toISOString()};if(O.push(M),localStorage.setItem("prodomo_download_logs",JSON.stringify(O)),E.user_id){const V=localStorage.getItem("prodomo_users");if(V){const Q=JSON.parse(V),C=Q.findIndex(K=>K.id===E.user_id);if(C!==-1){Q[C].total_downloads=(Q[C].total_downloads||0)+1,localStorage.setItem("prodomo_users",JSON.stringify(Q));const K=localStorage.getItem("prodomo_current_user");if(K){const G=JSON.parse(K);G.id===E.user_id&&(G.total_downloads=(G.total_downloads||0)+1,localStorage.setItem("prodomo_current_user",JSON.stringify(G)))}}}}}catch(R){console.error("Failed to log download to localStorage:",R)}return!1}},z=async(E=100)=>{try{e(!0);const{data:P,error:R}=await de.from("download_logs").select("*").order("created_at",{ascending:!1}).limit(E);if(R){console.error("Failed to fetch download logs from Supabase:",R);const O=localStorage.getItem("prodomo_download_logs");return O?JSON.parse(O).slice(0,E):[]}return P||[]}catch(P){console.error("Error fetching download logs:",P);const R=localStorage.getItem("prodomo_download_logs");return R?JSON.parse(R).slice(0,E):[]}finally{e(!1)}},$=async()=>{try{e(!0);const{data:E,error:P}=await de.from("documentation").select("*").order("order_index",{ascending:!0});if(P){console.error("Failed to fetch documentation from Supabase:",P);const R=localStorage.getItem("prodomo_documentation");return R?JSON.parse(R):[]}return E||[]}catch(E){console.error("Error fetching documentation:",E);const P=localStorage.getItem("prodomo_documentation");return P?JSON.parse(P):[]}finally{e(!1)}},W=async E=>{e(!0),r(null);try{const{error:P}=await de.from("documentation").insert([E]);if(P){console.error("Error creating documentation in Supabase:",P);const R=localStorage.getItem("prodomo_documentation"),O=R?JSON.parse(R):[],M={...E,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return O.push(M),localStorage.setItem("prodomo_documentation",JSON.stringify(O)),!0}return!0}catch(P){return console.error("Error creating documentation:",P),r("Failed to create documentation"),!1}finally{e(!1)}},L=async(E,P)=>{e(!0),r(null);try{const{error:R}=await de.from("documentation").update({...P,updated_at:new Date().toISOString()}).eq("id",E);if(R){console.error("Error updating documentation in Supabase:",R);const O=localStorage.getItem("prodomo_documentation");if(O){const M=JSON.parse(O),V=M.findIndex(Q=>Q.id===E);if(V!==-1)return M[V]={...M[V],...P,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_documentation",JSON.stringify(M)),!0}return r("Failed to update documentation"),!1}return!0}catch(R){return console.error("Error updating documentation:",R),r("Failed to update documentation"),!1}finally{e(!1)}},J=async E=>{e(!0),r(null);try{const{error:P}=await de.from("documentation").delete().eq("id",E);if(P){console.error("Error deleting documentation from Supabase:",P);const R=localStorage.getItem("prodomo_documentation");if(R){const O=JSON.parse(R).filter(M=>M.id!==E);return localStorage.setItem("prodomo_documentation",JSON.stringify(O)),!0}return r("Failed to delete documentation"),!1}return!0}catch(P){return console.error("Error deleting documentation:",P),r("Failed to delete documentation"),!1}finally{e(!1)}},D=async()=>{try{e(!0);const{data:E,error:P}=await de.from("bug_reports").select("*").order("created_at",{ascending:!1});if(P){console.error("Failed to fetch bug reports from Supabase:",P);const R=localStorage.getItem("prodomo_bug_reports");return R?JSON.parse(R):[]}return E||[]}catch(E){console.error("Error fetching bug reports:",E);const P=localStorage.getItem("prodomo_bug_reports");return P?JSON.parse(P):[]}finally{e(!1)}},F=async E=>{e(!0),r(null);try{if(E.reporter_id){const{data:O,error:M}=await de.from("users").select("id").eq("id",E.reporter_id);if(M||!O||O.length===0){console.error("User does not exist in database, cannot create bug report:",E.reporter_id);const V=localStorage.getItem("prodomo_bug_reports"),Q=V?JSON.parse(V):[],C={...E,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Q.push(C),localStorage.setItem("prodomo_bug_reports",JSON.stringify(Q)),!0}}const P={title:E.title,description:E.description,severity:E.severity,category:E.category,status:E.status,reporter_id:E.reporter_id,reporter_name:E.reporter_name,steps:E.steps,expected_behavior:E.expected_behavior,actual_behavior:E.actual_behavior,environment:E.environment,attachments:E.attachments,comments:E.comments||[]},{error:R}=await de.from("bug_reports").insert([P]);if(R){console.error("Error creating bug report in Supabase:",R);const O=localStorage.getItem("prodomo_bug_reports"),M=O?JSON.parse(O):[],V={...P,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return M.push(V),localStorage.setItem("prodomo_bug_reports",JSON.stringify(M)),!0}return!0}catch(P){return console.error("Error creating bug report:",P),r("Failed to create bug report"),!1}finally{e(!1)}},B=async(E,P)=>{e(!0),r(null);try{const{error:R}=await de.from("bug_reports").update({...P,updated_at:new Date().toISOString()}).eq("id",E);if(R){console.error("Error updating bug report in Supabase:",R);const O=localStorage.getItem("prodomo_bug_reports");if(O){const M=JSON.parse(O),V=M.findIndex(Q=>Q.id===E);if(V!==-1)return M[V]={...M[V],...P,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_bug_reports",JSON.stringify(M)),!0}return r("Failed to update bug report"),!1}return!0}catch(R){return console.error("Error updating bug report:",R),r("Failed to update bug report"),!1}finally{e(!1)}},X=async E=>{e(!0),r(null);try{const{error:P}=await de.from("bug_reports").delete().eq("id",E);if(P){console.error("Error deleting bug report from Supabase:",P);const R=localStorage.getItem("prodomo_bug_reports");if(R){const O=JSON.parse(R).filter(M=>M.id!==E);return localStorage.setItem("prodomo_bug_reports",JSON.stringify(O)),!0}return r("Failed to delete bug report"),!1}return!0}catch(P){return console.error("Error deleting bug report:",P),r("Failed to delete bug report"),!1}finally{e(!1)}},U=async(E,P=30)=>{try{e(!0);let R=de.from("system_metrics").select("*").order("created_at",{ascending:!1}).limit(P);E&&(R=R.eq("metric_type",E));const{data:O,error:M}=await R;return M?(console.error("Failed to fetch system metrics from Supabase:",M),Y(E,P)):O&&O.length>0?O:Y(E,P)}catch(R){return console.error("Error fetching system metrics:",R),Y(E,P)}finally{e(!1)}},Y=(E,P=30)=>{const R=[],O=E?[E]:["downloads","users","storage","bandwidth"];for(const M of O)for(let V=0;V<P;V++){const Q=new Date;Q.setDate(Q.getDate()-V);let C;switch(M){case"downloads":C=1e3+Math.floor(Math.random()*1e3);break;case"users":C=40+Math.floor(Math.random()*20);break;case"storage":C=1500+Math.floor(Math.random()*1e3);break;case"bandwidth":C=800+Math.floor(Math.random()*500);break;default:C=Math.floor(Math.random()*1e3)}R.push({id:crypto.randomUUID(),metric_type:M,value:C,date:Q.toISOString().split("T")[0],created_at:Q.toISOString()})}return R};return{loading:t,error:a,setError:r,dbInitialized:s,initializeCleanData:o,getUsers:l,updateUser:c,updateUserGrade:d,updateUserNotes:u,blockUser:h,unblockUser:p,createUser:m,deleteUser:v,getUserPassword:y,getServerFiles:k,createServerFile:g,updateServerFile:f,deleteServerFile:x,uploadFile:w,getPatchNotes:S,createPatchNote:N,updatePatchNote:_,deletePatchNote:b,logActivity:j,getActivityLogs:A,logDownload:I,getDownloadLogs:z,getDocumentation:$,createDocumentation:W,updateDocumentation:L,deleteDocumentation:J,getBugReports:D,createBugReport:F,updateBugReport:B,deleteBugReport:X,getSystemMetrics:U,getFileRequirements:()=>[{id:"1",label:"Operating System",value:"FreeBSD 12.0+"},{id:"2",label:"Memory",value:"4 GB RAM"},{id:"3",label:"Storage",value:"10 GB available space"},{id:"4",label:"Network",value:"Broadband connection"},{id:"5",label:"Processor",value:"x64 compatible"}],updateFileRequirements:E=>!0}},Es=()=>{const{user:t}=ht(),{logActivity:e}=Kt(),a=async(r,s)=>{if(t)try{await e({user_id:t.id,user_name:t.name,action:r,details:s||"",ip_address:"Unknown"})}catch(n){console.error("Failed to log activity:",n)}};return{logFileUpload:(r,s)=>a(`Uploaded ${s}`,`File: ${r}`),logFileDownload:(r,s)=>a("Downloaded file",`${r} v${s}`),logFileDelete:r=>a("Deleted file",`File: ${r}`),logUserCreation:(r,s)=>a("Created user account",`User: ${r} (${s})`),logUserGradeUpdate:(r,s,n)=>a("Updated user grade",`${r}: ${s}  ${n}`),logUserBlock:(r,s)=>a("Blocked user",`${r} for ${s}`),logUserUnblock:r=>a("Unblocked user",`User: ${r}`),logUserDelete:r=>a("Deleted user account",`User: ${r}`),logPatchNoteCreate:(r,s)=>a("Created patch note",`v${r}: ${s}`),logPatchNoteUpdate:(r,s)=>a("Updated patch note",`v${r}: ${s}`),logPatchNoteDelete:r=>a("Deleted patch note",`Version: ${r}`),logPatchNotePublish:r=>a("Published patch note",`Version: ${r}`),logLogin:(r="email")=>a("Signed in",`Method: ${r}`),logLogout:()=>a("Signed out",""),logThemeChange:r=>a("Changed theme",`Theme: ${r}`),logProfileUpdate:r=>a("Updated profile",r),logSettingsChange:(r,s)=>a("Changed setting",`${r}: ${s}`),logSystemAction:(r,s)=>a(r,s),logBugReportSubmit:r=>a("Submitted bug report",`Bug: ${r}`),logBugStatusUpdate:(r,s,n)=>a("Updated bug status",`${r}: ${s}  ${n}`)}},sg=({activeSection:t,setActiveSection:e})=>{const{user:a,hasAccess:r}=ht(),{getActivityLogs:s,getDownloadLogs:n,getUsers:o,getServerFiles:l}=Kt(),{logSystemAction:c}=Es(),[d,u]=T.useState(null),[h,p]=T.useState([]),[m,v]=T.useState({cpu:46,memory:68,storage:32,network:89,status:"healthy"}),[y,k]=T.useState({totalDownloads:0,activeUsers:0,serverUptime:"99.9%",totalFiles:0}),[g,f]=T.useState(!0);T.useEffect(()=>{x();const D=setInterval(w,3e4);return()=>clearInterval(D)},[]);const x=async()=>{f(!0);try{const[D,F,B,X]=await Promise.all([s(20),n(100),o(),l()]),U=F.length,Y=new Set(F.map(M=>M.user_id)).size,E=X.length,P=`${(99.5+Math.random()*.5).toFixed(1)}%`;k({totalDownloads:U,activeUsers:Y,serverUptime:P,totalFiles:E});let R=D;r("Admin")||(R=D.filter(M=>!M.action.includes("[ADMIN]")));const O=[...R.map(M=>({...M,type:"activity"})),...F.slice(0,5).map(M=>({...M,type:"download",action:`Downloaded ${M.file_name} v${M.file_version}`,details:`File: ${M.file_name}`}))].sort((M,V)=>new Date(V.created_at).getTime()-new Date(M.created_at).getTime()).slice(0,10).map(M=>{const V=B.find(Q=>Q.id===M.user_id);return{...M,user_avatar:V==null?void 0:V.avatar_url,user_grade:V==null?void 0:V.grade,is_guest:(V==null?void 0:V.is_guest)||!1}}).filter(M=>!M.is_guest);p(O)}catch(D){console.error("Failed to load dashboard data:",D)}finally{f(!1)}},w=()=>{v(D=>({cpu:Math.round(Math.max(20,Math.min(90,D.cpu+(Math.random()-.5)*10))),memory:Math.round(Math.max(30,Math.min(85,D.memory+(Math.random()-.5)*8))),storage:Math.round(Math.max(15,Math.min(95,D.storage+(Math.random()-.5)*3))),network:Math.round(Math.max(70,Math.min(100,D.network+(Math.random()-.5)*5))),status:D.cpu>80||D.memory>80?"warning":D.cpu>90||D.memory>90?"critical":"healthy"}))},S=[{title:"Total Downloads",value:y.totalDownloads.toLocaleString(),change:"+12%",changeType:"positive",icon:dt,color:"bg-blue-500"},{title:"Active Users",value:y.activeUsers.toLocaleString(),change:"+5%",changeType:"positive",icon:va,color:"bg-emerald-500"},{title:"Server Uptime",value:y.serverUptime,change:"+0.1%",changeType:"positive",icon:ys,color:"bg-purple-500"},{title:"Total Files",value:y.totalFiles.toString(),change:`${y.totalFiles} available`,changeType:"positive",icon:ya,color:"bg-amber-500"}],N=[{id:"downloads",title:"Latest Downloads",description:"View and download server files",icon:dt,color:"blue",action:()=>{console.log("Dashboard: Navigating to downloads"),e("downloads"),te.info("Navigating to Downloads section"),c("Accessed downloads via quick action")},requiresAccess:"Guest"},{id:"server-status",title:"Server Status",description:"Check system health and uptime",icon:nt,color:"emerald",action:()=>{console.log("Dashboard: Checking server status"),te.success("Server Status: All systems operational","System Health"),c("Checked server status via quick action")},requiresAccess:"Guest"},{id:"documentation",title:"Documentation",description:"Browse guides and tutorials",icon:ya,color:"indigo",action:()=>{console.log("Dashboard: Navigating to documentation"),e("documentation"),te.info("Navigating to Documentation"),c("Accessed documentation via quick action")},requiresAccess:"Guest"},{id:"user-management",title:"User Management",description:"Manage user accounts and permissions",icon:va,color:"purple",action:()=>{console.log("Dashboard: Navigating to user management"),r("Admin")?(e("user-management"),te.info("Navigating to User Management"),c("Accessed user management via quick action")):te.warning("Admin access required for user management")},requiresAccess:"Admin"},{id:"analytics",title:"Analytics",description:"View system metrics and reports",icon:Xx,color:"amber",action:()=>{console.log("Dashboard: Navigating to analytics"),r("Admin")?(e("analytics"),te.info("Navigating to Analytics dashboard"),c("Accessed analytics via quick action")):te.warning("Admin access required for analytics")},requiresAccess:"Admin"},{id:"file-manager",title:"File Manager",description:"Upload and manage server files",icon:eb,color:"red",action:()=>{console.log("Dashboard: Navigating to file manager"),r("Admin")?(e("file-manager"),te.info("Navigating to File Manager"),c("Accessed file manager via quick action")):te.warning("Admin access required for file management")},requiresAccess:"Admin"}],_=async D=>{console.log("Dashboard: Quick action clicked:",D.id),u(D.id),setTimeout(()=>u(null),200);try{await D.action()}catch(F){console.error("Dashboard: Quick action error:",F),te.error("Failed to execute action")}},b=()=>{console.log("Dashboard: View all activity clicked"),r("Admin")?(e("activity-logs"),te.info("Navigating to Activity Logs")):te.warning("Admin access required for activity logs")},j=D=>{console.log("Dashboard: Viewing profile for user:",D),e("profile");const F=new CustomEvent("viewProfile",{detail:{userId:D}});document.dispatchEvent(F)},A=D=>D.type==="download"?i.jsx(dt,{size:16,className:"text-blue-500"}):D.action.includes("login")||D.action.includes("Sign")?i.jsx(Nu,{size:16,className:"text-emerald-500"}):D.action.includes("logout")||D.action.includes("out")?i.jsx(tb,{size:16,className:"text-red-500"}):D.action.includes("profile")||D.action.includes("Updated")?i.jsx(nr,{size:16,className:"text-purple-500"}):D.action.includes("upload")||D.action.includes("Upload")?i.jsx(Zh,{size:16,className:"text-indigo-500"}):D.action.includes("patch")||D.action.includes("note")?i.jsx(ya,{size:16,className:"text-amber-500"}):D.action.includes("user")||D.action.includes("User")?i.jsx(va,{size:16,className:"text-cyan-500"}):D.action.includes("grade")||D.action.includes("Grade")?i.jsx(Se,{size:16,className:"text-orange-500"}):D.action.includes("edit")||D.action.includes("Edit")?i.jsx(ra,{size:16,className:"text-pink-500"}):i.jsx(nt,{size:16,className:"text-gray-500"}),I=D=>{switch(D){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},z=D=>{const F=new Date(D),B=Math.floor((new Date().getTime()-F.getTime())/1e3);return B<60?`${B}s ago`:B<3600?`${Math.floor(B/60)}m ago`:B<86400?`${Math.floor(B/3600)}h ago`:`${Math.floor(B/86400)}d ago`},$=(D,F)=>{const B="flex flex-col items-center p-6 rounded-xl border-2 transition-all duration-200 cursor-pointer group",X=F?"scale-95 shadow-lg":"";switch(D){case"blue":return`${B} ${X} border-blue-200 dark:border-blue-800 hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:shadow-md`;case"emerald":return`${B} ${X} border-emerald-200 dark:border-emerald-800 hover:border-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 hover:shadow-md`;case"purple":return`${B} ${X} border-purple-200 dark:border-purple-800 hover:border-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:shadow-md`;case"amber":return`${B} ${X} border-amber-200 dark:border-amber-800 hover:border-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20 hover:shadow-md`;case"indigo":return`${B} ${X} border-indigo-200 dark:border-indigo-800 hover:border-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 hover:shadow-md`;case"red":return`${B} ${X} border-red-200 dark:border-red-800 hover:border-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:shadow-md`;default:return`${B} ${X} border-gray-200 dark:border-gray-700 hover:border-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:shadow-md`}},W=D=>{switch(D){case"blue":return"text-blue-500 group-hover:text-blue-600";case"emerald":return"text-emerald-500 group-hover:text-emerald-600";case"purple":return"text-purple-500 group-hover:text-purple-600";case"amber":return"text-amber-500 group-hover:text-amber-600";case"indigo":return"text-indigo-500 group-hover:text-indigo-600";case"red":return"text-red-500 group-hover:text-red-600";default:return"text-gray-500 group-hover:text-gray-600"}},L=(D,F)=>F==="network"?D>=80?"text-emerald-500":D>=60?"text-amber-500":"text-red-500":D<=50?"text-emerald-500":D<=75?"text-amber-500":"text-red-500",J=(D,F)=>F==="network"?D>=80?"bg-emerald-500":D>=60?"bg-amber-500":"bg-red-500":D<=50?"bg-emerald-500":D<=75?"bg-amber-500":"bg-red-500";return a?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["Welcome back, ",a.name,"!"]}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Here's what's happening with your Prodomo server today."})]}),i.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-4",children:[i.jsxs("button",{onClick:x,disabled:g,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:[i.jsx(nt,{size:16,className:g?"animate-spin":""}),i.jsx("span",{className:"text-sm",children:"Refresh"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[i.jsx(qt,{size:16}),i.jsxs("span",{children:["Last updated: ",new Date().toLocaleTimeString()]})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:S.map((D,F)=>{const B=D.icon;return i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow duration-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:D.title}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:D.value}),i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx(Vl,{size:14,className:`${D.changeType==="positive"?"text-emerald-500":"text-red-500"} mr-1`}),i.jsx("span",{className:`text-sm font-medium ${D.changeType==="positive"?"text-emerald-600":"text-red-600"}`,children:D.change}),i.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:D.title==="Total Files"?"":"vs last month"})]})]}),i.jsx("div",{className:`p-3 rounded-lg ${D.color} bg-opacity-10`,children:i.jsx(B,{className:`w-6 h-6 ${D.color.replace("bg-","text-")}`})})]})},F)})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Latest user actions and system events"})]}),i.jsxs("div",{className:"p-6",children:[g?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-4",children:[h.map((D,F)=>i.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx("button",{onClick:()=>j(D.user_id),className:"flex-shrink-0 hover:scale-105 transition-transform duration-200",children:D.user_avatar?i.jsx("img",{src:D.user_avatar,alt:D.user_name,className:"w-8 h-8 rounded-full object-cover"}):i.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-xs",children:D.user_name.charAt(0)})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>j(D.user_id),className:"text-sm font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:D.user_name}),D.user_grade&&i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${I(D.user_grade)}`,children:D.user_grade})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[A(D),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:z(D.created_at)})]})]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:D.action}),D.details&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:D.details})]})]},F)),h.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(nt,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No recent activity"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"User activity will appear here as it happens."})]})]}),i.jsx("button",{onClick:b,className:"w-full mt-4 px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:"View all activity"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ys,{className:"w-5 h-5 text-blue-500"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"System Health"})]}),i.jsx("div",{className:`px-2 py-1 text-xs font-medium rounded-full ${m.status==="healthy"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400":m.status==="warning"?"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:m.status})]})}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Y1,{size:16,className:L(m.cpu,"cpu")}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"CPU Usage"})]}),i.jsxs("span",{className:`text-sm font-medium ${L(m.cpu,"cpu")}`,children:[m.cpu,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${J(m.cpu,"cpu")}`,style:{width:`${m.cpu}%`}})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Qx,{size:16,className:L(m.memory,"memory")}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Memory"})]}),i.jsxs("span",{className:`text-sm font-medium ${L(m.memory,"memory")}`,children:[m.memory,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${J(m.memory,"memory")}`,style:{width:`${m.memory}%`}})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_u,{size:16,className:L(m.storage,"storage")}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Storage"})]}),i.jsxs("span",{className:`text-sm font-medium ${L(m.storage,"storage")}`,children:[m.storage,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${J(m.storage,"storage")}`,style:{width:`${m.storage}%`}})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Eu,{size:16,className:L(m.network,"network")}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Network"})]}),i.jsxs("span",{className:`text-sm font-medium ${L(m.network,"network")}`,children:[m.network,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${J(m.network,"network")}`,style:{width:`${m.network}%`}})})]}),i.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Status"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[m.status==="healthy"?i.jsx(lt,{size:16,className:"text-emerald-500"}):m.status==="warning"?i.jsx(Ka,{size:16,className:"text-amber-500"}):i.jsx(_e,{size:16,className:"text-red-500"}),i.jsx("span",{className:`text-sm font-medium capitalize ${m.status==="healthy"?"text-emerald-600 dark:text-emerald-400":m.status==="warning"?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400"}`,children:m.status})]})]}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[m.status==="healthy"&&"All systems operating normally",m.status==="warning"&&"Some metrics need attention",m.status==="critical"&&"Immediate action required"]})]})]})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Quick Actions"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Common tasks and shortcuts"})]}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:N.filter(D=>r(D.requiresAccess)).map(D=>{const F=D.icon,B=d===D.id;return i.jsxs("button",{onClick:()=>_(D),className:$(D.color,B),title:D.description,children:[i.jsx(F,{className:`w-8 h-8 mb-3 ${W(D.color)}`}),i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white text-center",children:D.title}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1",children:D.description})]},D.id)})})})]})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})},Fj=()=>{const{hasAccess:t,user:e}=ht(),{getServerFiles:a,logDownload:r,getFileRequirements:s,updateFileRequirements:n}=Kt(),{logFileDownload:o}=Es(),[l,c]=T.useState(""),[d,u]=T.useState("all"),[h,p]=T.useState([]),[m,v]=T.useState(!0),[y,k]=T.useState(null),[g,f]=T.useState(!1),[x,w]=T.useState([]),[S,N]=T.useState(!1),[_,b]=T.useState([]);T.useEffect(()=>{j(),A()},[]);const j=async()=>{v(!0);const O=await a();p(O),v(!1)},A=()=>{const O=s();w(O)},I=async O=>{if(e)try{await r({user_id:e.id,user_name:e.name,file_id:O.id,file_name:O.name,file_version:O.version,ip_address:"Unknown",user_agent:navigator.userAgent}),await o(O.name,O.version),te.download(`${O.name} v${O.version}`),z(O),window.open(O.file_url,"_blank")}catch(M){console.error("Download error:",M),te.error("Failed to initiate download")}},z=O=>{try{const M=localStorage.getItem("prodomo_users");if(!M)return;JSON.parse(M).filter(V=>V.grade==="Admin").forEach(V=>{if(V.id===(e==null?void 0:e.id))return;const Q=`prodomo_notifications_${V.id}`,C=JSON.parse(localStorage.getItem(Q)||"[]"),K=[{id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:"New Download",message:`${e==null?void 0:e.name} downloaded ${O.name} v${O.version}`,type:"info",read:!1,created_at:new Date().toISOString(),related_id:O.id,action_url:"/downloads"},...C].slice(0,50);localStorage.setItem(Q,JSON.stringify(K))}),console.log("Download notification created for admins")}catch(M){console.error("Failed to create download notification:",M)}},$=O=>{console.log("Downloads: Viewing details for file:",O.name),k(O),f(!0)},W=()=>{b([...x]),N(!0)},L=()=>{n(_)?(w(_),N(!1),te.success("System requirements updated successfully")):te.error("Failed to update requirements")},J=()=>{b([]),N(!1)},D=()=>{const O={id:Date.now().toString(),label:"New Requirement",value:"Enter value"};b([..._,O])},F=(O,M,V)=>{b(Q=>Q.map(C=>C.id===O?{...C,[M]:V}:C))},B=O=>{b(M=>M.filter(V=>V.id!==O))},X=O=>{switch(O){case"active":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400";case"beta":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"deprecated":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},U=O=>{switch(O){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},Y=O=>{if(O===0)return"0 Bytes";const M=1024,V=["Bytes","KB","MB","GB"],Q=Math.floor(Math.log(O)/Math.log(M));return parseFloat((O/Math.pow(M,Q)).toFixed(2))+" "+V[Q]},E=O=>{switch(O){case"server":return"";case"plugin":return"";case"archive":return"";case"documentation":return"";default:return""}},P=O=>{if(!e)return!1;if(e.grade==="Admin")return!0;if(e.grade==="Support")return O.min_grade==="Guest"||O.min_grade==="V4";const M=["Guest","V4","V5","Support","Admin"],V=M.indexOf(e.grade),Q=M.indexOf(O.min_grade);return V>=Q},R=h.filter(O=>{const M=O.name.toLowerCase().includes(l.toLowerCase())||O.description.toLowerCase().includes(l.toLowerCase()),V=d==="all"||O.status===d,Q=P(O);return M&&V&&Q});return m?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Server Downloads"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Download the latest Prodomo server versions and updates."})]}),t("Admin")&&i.jsxs("button",{onClick:W,className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(ra,{size:18}),i.jsx("span",{children:"Edit Requirements"})]})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search versions...",value:l,onChange:O=>c(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_s,{className:"text-gray-400 w-5 h-5"}),i.jsxs("select",{value:d,onChange:O=>u(O.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"beta",children:"Beta"}),i.jsx("option",{value:"deprecated",children:"Deprecated"})]})]})]})}),e&&i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(Se,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Your Access Level"}),i.jsx("div",{className:"flex items-center space-x-2 mt-1",children:e.grade==="Support"?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U("V4")}`,children:"V4"}),i.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U("Support")}`,children:[i.jsx(Pr,{size:12,className:"inline mr-1"}),"Support"]}),i.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:"You have V4 download access and Support privileges for bug management"})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U(e.grade)}`,children:e.grade}),i.jsxs("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:["You can download files marked for ",e.grade," access or lower"]})]})})]})]})}),i.jsxs("div",{className:"space-y-4",children:[R.map(O=>i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-200",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("span",{className:"text-2xl",children:E(O.file_type)}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:O.name}),i.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 rounded-full",children:["v",O.version]}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${X(O.status)}`,children:O.status}),i.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U(O.min_grade)}`,children:[O.min_grade,"+ Required"]})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:O.description}),i.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(sr,{size:16}),i.jsx("span",{children:new Date(O.created_at).toLocaleDateString()})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(dt,{size:16}),i.jsxs("span",{children:[O.download_count.toLocaleString()," downloads"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(ya,{size:16}),i.jsx("span",{children:Y(O.file_size)})]})]}),O.changelog&&O.changelog.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsxs("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2 flex items-center",children:[i.jsx(Fm,{size:14,className:"mr-1 text-amber-500"}),"What's New:"]}),i.jsxs("ul",{className:"space-y-1",children:[O.changelog.slice(0,2).map((M,V)=>i.jsxs("li",{className:"flex items-start space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[i.jsx(lt,{size:14,className:"text-emerald-500 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:M})]},V)),O.changelog.length>2&&i.jsxs("li",{className:"text-sm text-blue-600 dark:text-blue-400 ml-6",children:["+",O.changelog.length-2," more changes"]})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row lg:flex-col space-y-2 sm:space-y-0 sm:space-x-2 lg:space-x-0 lg:space-y-2 lg:ml-6",children:[P(O)?i.jsxs("button",{onClick:()=>I(O),className:"flex items-center justify-center space-x-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(dt,{size:18}),i.jsx("span",{children:"Download"})]}):i.jsxs("div",{className:"flex items-center justify-center space-x-2 px-6 py-3 bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 rounded-lg",children:[i.jsx(Ui,{size:18}),i.jsxs("span",{children:["Requires ",O.min_grade]})]}),i.jsxs("button",{onClick:()=>$(O),className:"flex items-center justify-center space-x-2 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx(Gt,{size:18}),i.jsx("span",{children:"View Details"})]})]})]}),O.status==="deprecated"&&i.jsx("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(It,{className:"text-amber-600 dark:text-amber-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Deprecated Version"}),i.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:"This version is no longer actively maintained. Consider upgrading to a newer stable release."})]})]})})]})},O.id)),R.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ya,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No versions found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria or access level."})]})]}),S&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:J}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Edit System Requirements"}),i.jsx("button",{onClick:J,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:_.map((O,M)=>i.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[i.jsx("input",{type:"text",value:O.label,onChange:V=>F(O.id,"label",V.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Requirement name"}),i.jsx("input",{type:"text",value:O.value,onChange:V=>F(O.id,"value",V.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Requirement value"})]}),i.jsx("button",{onClick:()=>B(O.id),className:"p-2 text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors duration-200",children:i.jsx(Rt,{size:16})})]},O.id))}),i.jsx("div",{className:"mt-4",children:i.jsxs("button",{onClick:D,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:[i.jsx(Ia,{size:16}),i.jsx("span",{children:"Add Requirement"})]})}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:J,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:L,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Ir,{size:18}),i.jsx("span",{children:"Save Requirements"})]})]})]})]})}),g&&y&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>f(!1)}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("span",{className:"text-3xl",children:E(y.file_type)}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[y.name," v",y.version]}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:y.description})]})]}),i.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl p-6",children:[i.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[i.jsx(Fm,{className:"mr-2 text-amber-500",size:20}),"What's New in v",y.version]}),y.changelog&&y.changelog.length>0?i.jsx("ul",{className:"space-y-3",children:y.changelog.map((O,M)=>i.jsxs("li",{className:"flex items-start space-x-3",children:[i.jsx(lt,{size:16,className:"text-emerald-500 mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:O})]},M))}):i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No changelog available for this version."})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-6",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"File Information"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"File Type"}),i.jsx("p",{className:"text-gray-900 dark:text-white capitalize",children:y.file_type})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"File Size"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:Y(y.file_size)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${X(y.status)}`,children:y.status})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Access Level"}),i.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${U(y.min_grade)}`,children:[y.min_grade,"+"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Downloads"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:y.download_count.toLocaleString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Release Date"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(y.created_at).toLocaleDateString()})]})]})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:[i.jsxs("h4",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-4 flex items-center",children:[i.jsx(bs,{className:"mr-2 text-blue-500",size:20}),"Download Notifications"]}),i.jsx("p",{className:"text-blue-800 dark:text-blue-200 mb-4",children:"Admins will be notified when users download this file. This helps track usage and identify popular files."}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(lt,{size:16,className:"text-blue-600 dark:text-blue-400"}),i.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"Notifications are automatically sent to admins"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Download Options"}),P(y)?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>{I(y),f(!1)},className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(dt,{size:18}),i.jsx("span",{children:"Download Now"})]}),i.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(y.file_url),te.success("Download link copied to clipboard")},className:"w-full flex items-center justify-center space-x-2 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx(Zx,{size:18}),i.jsx("span",{children:"Copy Link"})]})]}):i.jsxs("div",{className:"text-center py-4",children:[i.jsx(Ui,{className:"mx-auto w-12 h-12 text-gray-400 mb-3"}),i.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:[y.min_grade," access required"]})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-6",children:[i.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[i.jsx(Se,{size:18,className:"mr-2"}),"System Requirements"]}),i.jsx("div",{className:"space-y-2 text-sm",children:x.map(O=>i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[O.label,":"]}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:O.value})]},O.id))})]})]})]})]})]})})]})},$j=()=>{const{user:t,hasAccess:e}=ht(),{getDocumentation:a,createDocumentation:r,updateDocumentation:s,deleteDocumentation:n,loading:o}=Kt(),[l,c]=T.useState([]),[d,u]=T.useState("v4"),[h,p]=T.useState("all"),[m,v]=T.useState(""),[y,k]=T.useState(!1),[g,f]=T.useState(null),[x,w]=T.useState(null),[S,N]=T.useState(!0),[_,b]=T.useState(!1),[j,A]=T.useState(new Set),[I,z]=T.useState(null),[$,W]=T.useState({title:"",slug:"",content:"",category:"info",version_type:"v4",status:"draft",meta_description:"",tags:[],order_index:0}),L=[{id:"info",label:"Information",icon:""},{id:"installation",label:"Installation",icon:""},{id:"features",label:"Features",icon:""},{id:"api",label:"API Reference",icon:""},{id:"troubleshooting",label:"Troubleshooting",icon:""},{id:"pricing",label:"Pricing",icon:""},{id:"about",label:"About",icon:""},{id:"tos",label:"Terms of Service",icon:""},{id:"changelog",label:"Changelog",icon:""},{id:"partners",label:"Partners",icon:""}];T.useEffect(()=>{J()},[]),T.useEffect(()=>{const C=D();C.length>0&&!x&&w(C[0])},[d,l]),T.useEffect(()=>{if(x){const C=P(x.content);C.length>0&&j.size===0&&A(new Set([C[0].id]))}},[x==null?void 0:x.content]);const J=async()=>{const C=await a();c(C);const K=C.filter(G=>G.status==="published");K.length>0&&!x&&w(K[0])},D=()=>l.filter(C=>{const K=C.version_type===d,G=h==="all"||C.category===h,ne=C.title.toLowerCase().includes(m.toLowerCase())||C.content.toLowerCase().includes(m.toLowerCase()),fe=C.status==="published"||e("Admin")||(t==null?void 0:t.grade)==="Support";return K&&G&&ne&&fe}).sort((C,K)=>C.order_index-K.order_index),F=C=>{f(C),W({title:C.title,slug:C.slug,content:C.content,category:C.category,version_type:C.version_type,status:C.status,meta_description:C.meta_description||"",tags:C.tags||[],order_index:C.order_index}),k(!0)},B=async()=>{if(!t)return;let C=!1;g?C=await s(g.id,$):C=await r({...$,author_id:t.id,author_name:t.name}),C&&(await J(),X())},X=()=>{k(!1),f(null),W({title:"",slug:"",content:"",category:"info",version_type:"v4",status:"draft",meta_description:"",tags:[],order_index:0})},U=async C=>{z(C)},Y=async C=>{l.find(K=>K.id===C)&&(await n(C)&&(await J(),(x==null?void 0:x.id)===C&&w(null)),z(null))},E=()=>{z(null)},P=C=>C.split(/(?=^##\s)/m).filter(K=>K.trim()).map((K,G)=>{var ne;const fe=K.trim().split(`
`),kt=((ne=fe[0])==null?void 0:ne.replace(/^##\s*/,""))||`Section ${G+1}`,Ft=fe.slice(1).join(`
`).trim(),Ct=kt.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),$t=Ft.length>800||/installation|configuration|troubleshooting|api|advanced|technical|setup|deployment/i.test(kt);return{id:Ct,title:kt,content:Ft,shouldBeSpoiler:$t,readingTime:Math.ceil(Ft.length/1e3)}}),R=C=>{const K=new Set(j);K.has(C)?K.delete(C):K.add(C),A(K)},O=C=>{const K=document.getElementById(C);K&&(K.scrollIntoView({behavior:"smooth",block:"start"}),j.has(C)||R(C))},M=C=>{const K=P(C);return i.jsx("div",{className:"space-y-6",children:K.map((G,ne)=>{const fe=j.has(G.id);return i.jsx("div",{id:G.id,className:"scroll-mt-4",children:G.shouldBeSpoiler?i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[i.jsxs("button",{onClick:()=>R(G.id),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[fe?i.jsx(kc,{className:"w-5 h-5 text-gray-500"}):i.jsx(Gt,{className:"w-5 h-5 text-gray-500"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white text-left",children:G.title})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[G.readingTime," min read"]}),i.jsx(ju,{className:`w-5 h-5 text-gray-500 transition-transform duration-200 ${fe?"rotate-180":""}`})]})]}),fe&&i.jsx("div",{className:"p-6 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:i.jsx("div",{className:"prose dark:prose-invert max-w-none",children:i.jsx("div",{className:"whitespace-pre-wrap",children:G.content})})}),!fe&&i.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[G.content.substring(0,150),"..."]})})]}):i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:G.title}),i.jsx("div",{className:"prose dark:prose-invert max-w-none",children:i.jsx("div",{className:"whitespace-pre-wrap",children:G.content})})]})},G.id)})})},V=C=>{const K=P(C);return i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[i.jsxs("button",{onClick:()=>b(!_),className:"flex items-center justify-between w-full mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ak,{className:"w-4 h-4 text-gray-500"}),i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Table of Contents"})]}),i.jsx(ju,{className:`w-4 h-4 text-gray-500 transition-transform duration-200 ${_?"rotate-180":""}`})]}),!_&&i.jsx("div",{className:"space-y-2",children:K.map((G,ne)=>i.jsxs("button",{onClick:()=>O(G.id),className:"flex items-center justify-between w-full text-left p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 group",children:[i.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[i.jsx(Q1,{className:"w-3 h-3 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate group-hover:text-blue-600 dark:group-hover:text-blue-400",children:G.title})]}),i.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0 ml-2",children:[G.shouldBeSpoiler&&i.jsx(Gt,{className:"w-3 h-3 text-gray-400"}),i.jsxs("span",{className:"text-xs text-gray-400",children:[G.readingTime,"m"]})]})]},G.id))})]})},Q=()=>e("Admin")||(t==null?void 0:t.grade)==="Support";return e("Guest")?i.jsxs("div",{className:"h-screen flex bg-gray-50 dark:bg-gray-900",children:[i.jsx("div",{className:`${S?"w-80":"w-0"} transition-all duration-300 overflow-hidden border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800`,children:i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Documentation"}),Q()&&i.jsxs("button",{onClick:()=>k(!0),className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors duration-200",children:[i.jsx(Ia,{size:14}),i.jsx("span",{children:"Add"})]})]}),i.jsxs("div",{className:"flex space-x-1 mb-4 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>u("v4"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors duration-200 ${d==="v4"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"V4 Docs"}),i.jsx("button",{onClick:()=>u("v5"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors duration-200 ${d==="v5"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"V5 Docs"})]}),i.jsxs("div",{className:"relative mb-4",children:[i.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Search documentation...",value:m,onChange:C=>v(C.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(_s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsxs("select",{value:h,onChange:C=>p(C.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Categories"}),L.map(C=>i.jsxs("option",{value:C.id,children:[C.icon," ",C.label]},C.id))]})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i.jsxs("div",{className:"space-y-2",children:[D().map(C=>{var K,G;return i.jsx("button",{onClick:()=>w(C),className:`w-full text-left p-3 rounded-lg border transition-all duration-200 ${(x==null?void 0:x.id)===C.id?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:`font-medium text-sm mb-1 truncate ${(x==null?void 0:x.id)===C.id?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white"}`,children:C.title}),i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded",children:[(K=L.find(ne=>ne.id===C.category))==null?void 0:K.icon," ",(G=L.find(ne=>ne.id===C.category))==null?void 0:G.label]}),C.status==="draft"&&i.jsx("span",{className:"text-xs px-2 py-1 bg-amber-100 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400 rounded",children:"Draft"})]}),C.meta_description&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:C.meta_description})]}),Q()&&i.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[i.jsx("button",{onClick:ne=>{ne.stopPropagation(),F(C)},className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:i.jsx(ra,{size:12})}),i.jsx("button",{onClick:ne=>{ne.stopPropagation(),U(C.id)},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:i.jsx(Rt,{size:12})})]})]})},C.id)}),D().length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(ku,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No documentation found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria."})]})]})})]})}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>N(!S),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:i.jsx(ku,{size:20})}),x&&i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:x.title}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(nr,{size:14}),i.jsx("span",{children:x.author_name})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(sr,{size:14}),i.jsx("span",{children:new Date(x.updated_at).toLocaleDateString()})]}),x.tags&&x.tags.length>0&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(sb,{size:14}),i.jsx("span",{children:x.tags.join(", ")})]})]})]})]}),x&&Q()&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("button",{onClick:()=>F(x),className:"flex items-center space-x-2 px-3 py-2 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:[i.jsx(ra,{size:16}),i.jsx("span",{children:"Edit"})]}),i.jsxs("button",{onClick:()=>U(x.id),className:"flex items-center space-x-2 px-3 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:[i.jsx(Rt,{size:16}),i.jsx("span",{children:"Delete"})]})]})]})}),i.jsx("div",{className:"flex-1 overflow-hidden",children:x?i.jsxs("div",{className:"h-full flex",children:[i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:M(x.content)})}),i.jsx("div",{className:"w-64 border-l border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-4 overflow-y-auto",children:V(x.content)})]}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"text-center",children:[i.jsx(ya,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Select Documentation"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Choose a document from the sidebar to start reading."})]})})})]}),y&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:X}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:g?"Edit Documentation":"Create New Documentation"}),i.jsx("button",{onClick:X,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),i.jsx("input",{type:"text",value:$.title,onChange:C=>W({...$,title:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Documentation title"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Slug"}),i.jsx("input",{type:"text",value:$.slug,onChange:C=>W({...$,slug:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"url-friendly-slug"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),i.jsx("select",{value:$.category,onChange:C=>W({...$,category:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:L.map(C=>i.jsxs("option",{value:C.id,children:[C.icon," ",C.label]},C.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Version"}),i.jsxs("select",{value:$.version_type,onChange:C=>W({...$,version_type:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"v4",children:"V4"}),i.jsx("option",{value:"v5",children:"V5"}),i.jsx("option",{value:"general",children:"General"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),i.jsxs("select",{value:$.status,onChange:C=>W({...$,status:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Meta Description"}),i.jsx("textarea",{value:$.meta_description,onChange:C=>W({...$,meta_description:C.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Brief description for search engines..."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content (Markdown supported)"}),i.jsx("textarea",{value:$.content,onChange:C=>W({...$,content:C.target.value}),rows:20,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:`Write your documentation content here...

Use ## for section headers to create automatic spoilers and table of contents.

## Installation
This section will automatically become a spoiler if it's long enough.

## Getting Started
Regular sections work normally.

## Advanced Configuration
Technical sections are automatically collapsed.`}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[" ",i.jsx("strong",{children:"Tip:"})," Use ## headers to create sections. Long sections (800+ chars) or technical sections will automatically become spoilers."]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:X,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:B,disabled:o,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Ir,{size:18}),i.jsx("span",{children:o?"Saving...":"Save"})]})]})]})]})}),I&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:E}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"sm:flex sm:items-start",children:[i.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:i.jsx(Rt,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),i.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[i.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete Documentation"}),i.jsx("div",{className:"mt-2",children:i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this documentation? This action cannot be undone."})})]})]}),i.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[i.jsx("button",{type:"button",onClick:()=>Y(I),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),i.jsx("button",{type:"button",onClick:E,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(It,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Required"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Please sign in to access the documentation."})]})})},Uj=()=>{const{user:t,hasAccess:e}=ht(),{getPatchNotes:a,createPatchNote:r,updatePatchNote:s,deletePatchNote:n,loading:o}=Kt(),{logPatchNoteCreate:l,logPatchNoteUpdate:c,logPatchNoteDelete:d,logPatchNotePublish:u}=Es(),[h,p]=T.useState(!1),[m,v]=T.useState(null),[y,k]=T.useState([]),[g,f]=T.useState(null),[x,w]=T.useState({version:"",title:"",content:"",status:"draft"});T.useEffect(()=>{S()},[]);const S=async()=>{const D=await a();k(D)},N=D=>{v(D),w({version:D.version,title:D.title,content:D.content,status:D.status}),p(!0)},_=async()=>{if(!t)return;let D=!1;m==null||m.status;const F=x.status==="published"&&(m==null?void 0:m.status)!=="published";m?(D=await s(m.id,x),D&&(await c(x.version,x.title),F&&(await u(x.version),te.patchNotePublished(x.version),$("New Patch Notes Published",`Version ${x.version} patch notes are now available: ${x.title}`,"success")))):(D=await r({...x,author_id:t.id,author_name:t.name}),D&&(await l(x.version,x.title),x.status==="published"&&(await u(x.version),te.patchNotePublished(x.version),$("New Patch Notes Published",`Version ${x.version} patch notes are now available: ${x.title}`,"success")))),D&&(await S(),b())},b=()=>{p(!1),v(null),w({version:"",title:"",content:"",status:"draft"})},j=async D=>{y.find(F=>F.id===D)&&f(D)},A=async D=>{const F=y.find(B=>B.id===D);F&&(await n(D)?(await d(F.version),await S(),te.warning(`Patch note for version ${F.version} deleted`)):te.error("Failed to delete patch note"),f(null))},I=()=>{f(null)},z=async D=>{const F=y.find(B=>B.id===D);!F||F.status==="published"||await s(D,{status:"published"})&&(await u(F.version),await S(),te.patchNotePublished(F.version),$("New Patch Notes Published",`Version ${F.version} patch notes are now available: ${F.title}`,"success"))},$=(D,F,B)=>{try{const X=localStorage.getItem("prodomo_users");if(!X)return;JSON.parse(X).forEach(U=>{const Y=`prodomo_notifications_${U.id}`,E=JSON.parse(localStorage.getItem(Y)||"[]"),P=[{id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:D,message:F,type:B,read:!1,created_at:new Date().toISOString(),related_id:"patch_notes",action_url:"/patch-notes"},...E].slice(0,50);localStorage.setItem(Y,JSON.stringify(P))}),console.log("Global notification created for all users:",D)}catch(X){console.error("Failed to create global notification:",X)}},W=D=>D==="published"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400":"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400",L=()=>e("Admin")||(t==null?void 0:t.grade)==="Support",J=y.filter(D=>e("Admin")||(t==null?void 0:t.grade)==="Support"?!0:D.status==="published");return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Patch Notes"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:L()?"Create and manage patch notes for server updates.":"View the latest server updates and changes."})]}),L()&&i.jsxs("button",{onClick:()=>p(!0),className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ia,{size:18}),i.jsx("span",{children:"New Patch Note"})]})]}),h&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:b}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:m?"Edit Patch Note":"Create New Patch Note"}),i.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Version"}),i.jsx("input",{type:"text",value:x.version,onChange:D=>w({...x,version:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 2.1.4"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),i.jsxs("select",{value:x.status,onChange:D=>w({...x,status:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"})]}),x.status==="published"&&i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[i.jsx(bs,{className:"inline-block w-3 h-3 mr-1"}),"Publishing will notify all users"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),i.jsx("input",{type:"text",value:x.title,onChange:D=>w({...x,title:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter patch note title"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content (Markdown supported)"}),i.jsx("textarea",{value:x.content,onChange:D=>w({...x,content:D.target.value}),rows:12,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"Enter patch note content using Markdown..."})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:b,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:_,disabled:o,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Ir,{size:18}),i.jsx("span",{children:o?"Saving...":"Save"})]})]})]})]})}),g&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:I}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"sm:flex sm:items-start",children:[i.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:i.jsx(Rt,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),i.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[i.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete Patch Note"}),i.jsx("div",{className:"mt-2",children:i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this patch note? This action cannot be undone."})})]})]}),i.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[i.jsx("button",{type:"button",onClick:()=>A(g),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),i.jsx("button",{type:"button",onClick:I,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})}),i.jsxs("div",{className:"space-y-4",children:[J.map(D=>i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:D.title}),i.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 rounded-full",children:["v",D.version]}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${W(D.status)}`,children:D.status})]}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(nr,{size:16}),i.jsx("span",{children:D.author_name}),D.author_name.includes("Admin")&&i.jsxs("span",{className:"ml-1 px-1.5 py-0.5 text-xs font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400 flex items-center",children:[i.jsx(Se,{size:10,className:"mr-0.5"}),"Admin"]}),D.author_name.includes("Support")&&i.jsxs("span",{className:"ml-1 px-1.5 py-0.5 text-xs font-medium rounded-full bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400 flex items-center",children:[i.jsx(Pr,{size:10,className:"mr-0.5"}),"Support"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(sr,{size:16}),i.jsxs("span",{children:["Created ",new Date(D.created_at).toLocaleDateString()]})]}),D.updated_at!==D.created_at&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(ra,{size:16}),i.jsxs("span",{children:["Updated ",new Date(D.updated_at).toLocaleDateString()]})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[L()&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>N(D),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:i.jsx(ra,{size:18})}),D.status==="draft"&&i.jsx("button",{onClick:()=>z(D.id),className:"p-2 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Publish",children:i.jsx(bs,{size:18})}),i.jsx("button",{onClick:()=>j(D.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:i.jsx(Rt,{size:18})})]}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/patch-notes?v=${D.version}`),te.success("Link copied to clipboard")},className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"Copy link",children:i.jsx(Zx,{size:18})})]})]}),i.jsx("div",{className:"prose dark:prose-invert max-w-none",children:i.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:i.jsx("pre",{className:"whitespace-pre-wrap font-mono text-sm text-gray-900 dark:text-gray-100 overflow-x-auto",children:D.content})})}),i.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[i.jsx(dt,{size:16,className:"text-blue-500"}),i.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Related Downloads"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("button",{onClick:()=>{te.info("Navigating to Downloads section")},className:"flex items-center space-x-2 px-3 py-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg text-sm transition-colors duration-200",children:[i.jsx(dt,{size:14}),i.jsxs("span",{children:["Download v",D.version]})]}),i.jsxs("button",{onClick:()=>{te.info("Navigating to Documentation")},className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm transition-colors duration-200",children:[i.jsx(Gt,{size:14}),i.jsx("span",{children:"View Documentation"})]})]})]})]})},D.id)),J.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ya,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No patch notes"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:L()?"Get started by creating your first patch note.":"Patch notes will appear here when they are published."}),L()&&i.jsxs("button",{onClick:()=>p(!0),className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ia,{size:18}),i.jsx("span",{children:"Create Patch Note"})]})]})]})]})},Bj=({userId:t,onBack:e})=>{var a;const{user:r,hasAccess:s}=ht(),{getUsers:n,updateUser:o,updateUserNotes:l,getActivityLogs:c,getDownloadLogs:d,updateUserGrade:u,loading:h}=Kt(),[p,m]=T.useState(null),[v,y]=T.useState([]),[k,g]=T.useState(null),[f,x]=T.useState(""),[w,S]=T.useState("all"),[N,_]=T.useState(!1),[b,j]=T.useState(!1),[A,I]=T.useState(!0),[z,$]=T.useState(""),[W,L]=T.useState(!1),[J,D]=T.useState(new Set),[F,B]=T.useState(new Set),[X,U]=T.useState({name:"",email:""}),[Y,E]=T.useState(!0),[P,R]=T.useState(null),[O,M]=T.useState([]),[V,Q]=T.useState(!1),[C,K]=T.useState("");if(r!=null&&r.is_guest)return i.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:i.jsx("div",{className:"text-center max-w-md mx-auto",children:i.jsxs("div",{className:"p-8 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl shadow-lg",children:[i.jsx(Ka,{className:"mx-auto h-16 w-16 text-amber-500 mb-6"}),i.jsx("h3",{className:"text-xl font-bold text-amber-900 dark:text-amber-100 mb-3",children:"Access Restricted"}),i.jsx("p",{className:"text-amber-800 dark:text-amber-200 mb-6 leading-relaxed",children:"You are a guest user, you cannot view profiles."}),i.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 rounded-lg p-4 mb-6",children:i.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:[i.jsx("strong",{children:"Guest limitations:"}),i.jsx("br",{})," Cannot view your own profile",i.jsx("br",{})," Cannot view other users' profiles",i.jsx("br",{})," Profile access requires V4+ membership"]})}),e&&i.jsxs("button",{onClick:e,className:"flex items-center space-x-2 mx-auto px-6 py-3 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-colors duration-200 shadow-md hover:shadow-lg",children:[i.jsx(Oo,{size:18}),i.jsx("span",{children:"Go Back to Dashboard"})]})]})})});T.useEffect(()=>{if(k){const ee=`prodomo_hidden_activities_${k}`,oe=`prodomo_deleted_activities_${k}`;try{const pe=localStorage.getItem(ee),cr=localStorage.getItem(oe);if(pe){const Hr=JSON.parse(pe);D(new Set(Hr))}else D(new Set);if(cr){const Hr=JSON.parse(cr);B(new Set(Hr))}else B(new Set)}catch(pe){console.error("Failed to load activity states:",pe),D(new Set),B(new Set)}}},[k]);const G=(ee,oe)=>{if(k){const pe=`prodomo_hidden_activities_${k}`,cr=`prodomo_deleted_activities_${k}`;try{localStorage.setItem(pe,JSON.stringify(Array.from(ee))),localStorage.setItem(cr,JSON.stringify(Array.from(oe)))}catch(Hr){console.error("Failed to save activity states:",Hr)}}};T.useEffect(()=>{t?g(t):r!=null&&r.id&&g(r.id)},[t,r==null?void 0:r.id]),T.useEffect(()=>{k&&kt(k)},[k]),T.useEffect(()=>{s("Admin")&&fe()},[s]),T.useEffect(()=>{k&&ne(k)},[k]);const ne=async ee=>{try{E(!0);const[oe,pe]=await Promise.all([c(50),d(50)]),cr=oe.filter(Xt=>Xt.user_id===ee).map(Xt=>({...Xt,type:"activity"})),Hr=pe.filter(Xt=>Xt.user_id===ee).map(Xt=>({...Xt,type:"download",action:`Downloaded ${Xt.file_name} v${Xt.file_version}`,details:`File: ${Xt.file_name}`})),pv=[...cr,...Hr].sort((Xt,mv)=>new Date(mv.created_at).getTime()-new Date(Xt.created_at).getTime()).slice(0,20);M(pv)}catch(oe){console.error("Failed to load user activities:",oe)}finally{E(!1)}},fe=async()=>{try{E(!0);const ee=(await n()).filter(oe=>!oe.is_guest);y(ee)}catch(ee){console.error("Failed to load users:",ee),R("Failed to load users. Please try again.")}finally{E(!1)}},kt=async ee=>{try{E(!0),R(null);const oe=(await n()).find(pe=>pe.id===ee);oe?(m(oe),U({name:oe.name,email:oe.email}),oe.admin_notes&&$(oe.admin_notes),K(oe.grade)):(R("User not found"),console.error("User not found with ID:",ee))}catch(oe){console.error("Failed to load user data:",oe),R("Failed to load user data. Please try again.")}finally{E(!1)}},Ft=async()=>{if(p!=null&&p.id)try{await o(p.id,X)?(m({...p,...X}),_(!1),te.success("Profile updated successfully")):te.error("Failed to update profile")}catch(ee){console.error("Failed to update profile:",ee),te.error("Failed to update profile")}},Ct=()=>{U({name:(p==null?void 0:p.name)||"",email:(p==null?void 0:p.email)||""}),_(!1)},$t=async()=>{if(p!=null&&p.id)try{await l(p.id,z)?(m({...p,admin_notes:z}),j(!1),te.success("Admin notes updated successfully")):te.error("Failed to update admin notes")}catch(ee){console.error("Failed to update admin notes:",ee),te.error("Failed to update admin notes")}},H=()=>{$((p==null?void 0:p.admin_notes)||""),j(!1)},ce=()=>{$((p==null?void 0:p.admin_notes)||""),j(!0)},Ie=ee=>{const oe=new Set(J);oe.add(ee),D(oe),G(oe,F),te.info("Activity hidden from user view")},qr=ee=>{const oe=new Set(F);oe.add(ee),B(oe),G(J,oe),te.warning("Activity deleted")},Mn=ee=>{const oe=new Set(J),pe=new Set(F);oe.delete(ee),pe.delete(ee),D(oe),B(pe),G(oe,pe),te.success("Activity restored")},ae=()=>{p&&(K(p.grade),Q(!0))},he=async()=>{if(!(!(p!=null&&p.id)||C===p.grade))try{await u(p.id,C)?(m({...p,grade:C}),Q(!1),te.success(`User grade updated to ${C}`)):te.error("Failed to update user grade")}catch(ee){console.error("Failed to update user grade:",ee),te.error("Failed to update user grade")}},Ae=()=>{Q(!1)},Ke=ee=>ee.type==="download"?i.jsx(dt,{size:16,className:"text-blue-500"}):ee.action.includes("login")||ee.action.includes("Sign")?i.jsx(nr,{size:16,className:"text-emerald-500"}):ee.action.includes("profile")||ee.action.includes("Updated")?i.jsx(ra,{size:16,className:"text-purple-500"}):i.jsx(nt,{size:16,className:"text-gray-500"}),Le=ee=>{switch(ee){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400 border-red-200 dark:border-red-800";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400 border-amber-200 dark:border-amber-800";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400 border-purple-200 dark:border-purple-800";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 border-blue-200 dark:border-blue-800";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400 border-gray-200 dark:border-gray-700"}},Vr=ee=>{switch(ee){case"Admin":return"Full system access with management privileges";case"Support":return"Bug management access with V4 download permissions";case"V5":return"Advanced access with beta features";case"V4":return"Standard access with stable releases";default:return"Basic access to public releases"}},lr=v.filter(ee=>{const oe=ee.name.toLowerCase().includes(f.toLowerCase())||ee.email.toLowerCase().includes(f.toLowerCase()),pe=w==="all"||ee.grade===w;return oe&&pe}),Dn=[{label:"Total Downloads",value:((a=p==null?void 0:p.total_downloads)==null?void 0:a.toString())||"0",icon:dt},{label:"Account Age",value:p!=null&&p.join_date?`${Math.floor((new Date().getTime()-new Date(p.join_date).getTime())/(1e3*60*60*24))} days`:"0 days",icon:sr},{label:"Last Active",value:p!=null&&p.last_active?new Date(p.last_active).toLocaleDateString():"Unknown",icon:nt},{label:"Grade Level",value:(p==null?void 0:p.grade)||"Guest",icon:(p==null?void 0:p.grade)==="Support"?Pr:Se}],ka=(p==null?void 0:p.id)===(r==null?void 0:r.id),La=ka||s("Admin"),Ra=s("Admin"),Tn=ee=>{const oe=new Date(ee),pe=Math.floor((new Date().getTime()-oe.getTime())/1e3);return pe<60?`${pe}s ago`:pe<3600?`${Math.floor(pe/60)}m ago`:pe<86400?`${Math.floor(pe/3600)}h ago`:`${Math.floor(pe/86400)}d ago`};return Y?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):P?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Ka,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Error Loading Profile"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:P}),e&&i.jsxs("button",{onClick:e,className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Oo,{size:18}),i.jsx("span",{children:"Go Back"})]})]})}):p?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[e&&i.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:i.jsx(Oo,{size:20})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ka?"My Profile":`${p.name}'s Profile`}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:ka?"Manage your account settings and preferences.":"View and manage user account information."})]})]}),s("Admin")&&i.jsxs("button",{onClick:()=>L(!W),className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(va,{size:18}),i.jsx("span",{children:W?"Hide User List":"View All Users"})]})]}),s("Admin")&&W&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Select User to View"}),i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search users...",value:f,onChange:ee=>x(ee.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_s,{className:"text-gray-400 w-5 h-5"}),i.jsxs("select",{value:w,onChange:ee=>S(ee.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Grades"}),i.jsx("option",{value:"Guest",children:"Guest"}),i.jsx("option",{value:"V4",children:"V4"}),i.jsx("option",{value:"V5",children:"V5"}),i.jsx("option",{value:"Support",children:"Support"}),i.jsx("option",{value:"Admin",children:"Admin"})]})]})]})]}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:lr.map(ee=>i.jsx("button",{onClick:()=>{g(ee.id),L(!1)},className:`p-4 rounded-lg border-2 transition-all duration-200 text-left ${ee.id===k?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-sm",children:ee.name.charAt(0)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:[ee.name,ee.id===(r==null?void 0:r.id)&&i.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400",children:"(You)"})]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:ee.email}),i.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:ee.grade==="Support"?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Le("V4")}`,children:"V4"}),i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Le("Support")}`,children:"Support"})]}):i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Le(ee.grade)}`,children:ee.grade})})]})]})},ee.id))})})]}),s("Admin")&&i.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-900/10 dark:to-yellow-900/10 border border-amber-200 dark:border-amber-800 rounded-xl shadow-sm",children:i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ok,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),i.jsx("h3",{className:"text-lg font-semibold text-amber-900 dark:text-amber-100",children:"Admin Notes"}),i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200 rounded-full",children:"Admin Only"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>I(!A),className:"p-1 text-amber-600 dark:text-amber-400 hover:text-amber-800 dark:hover:text-amber-200 transition-colors duration-200",title:A?"Hide notes":"Show notes",children:A?i.jsx(kc,{size:16}):i.jsx(Gt,{size:16})}),!b&&i.jsx("button",{onClick:ce,className:"p-1 text-amber-600 dark:text-amber-400 hover:text-amber-800 dark:hover:text-amber-200 transition-colors duration-200",title:"Edit notes",children:i.jsx(ra,{size:16})})]})]}),A&&i.jsx("div",{className:"space-y-3",children:b?i.jsxs("div",{className:"space-y-3",children:[i.jsx("textarea",{value:z,onChange:ee=>$(ee.target.value),rows:4,className:"w-full px-3 py-2 border border-amber-300 dark:border-amber-700 rounded-lg bg-white dark:bg-amber-900/20 text-amber-900 dark:text-amber-100 placeholder-amber-500 dark:placeholder-amber-400 focus:ring-2 focus:ring-amber-500 focus:border-transparent resize-none",placeholder:"Add admin notes about this user... (behavior, preferences, special requirements, etc.)"}),i.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[i.jsx("button",{onClick:H,className:"px-3 py-1 text-sm text-amber-700 dark:text-amber-300 hover:text-amber-900 dark:hover:text-amber-100 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:$t,disabled:h,className:"flex items-center space-x-1 px-3 py-1 bg-amber-600 hover:bg-amber-700 disabled:bg-amber-400 text-white rounded-lg text-sm font-medium transition-colors duration-200",children:[i.jsx(Ir,{size:14}),i.jsx("span",{children:h?"Saving...":"Save"})]})]})]}):i.jsx("div",{className:"bg-amber-100/50 dark:bg-amber-900/20 rounded-lg p-3 border border-amber-200 dark:border-amber-700",children:p.admin_notes?i.jsx("p",{className:"text-amber-900 dark:text-amber-100 text-sm leading-relaxed whitespace-pre-wrap",children:p.admin_notes}):i.jsxs("div",{className:"flex items-center space-x-2 text-amber-600 dark:text-amber-400",children:[i.jsx(Ka,{size:16}),i.jsx("p",{className:"text-sm italic",children:"No admin notes for this user. Click the edit button to add notes."})]})})})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto",children:i.jsx("span",{className:"text-2xl font-bold text-white",children:p.name.charAt(0)})}),i.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-900 dark:text-white",children:p.name}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:p.email})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:p.grade==="Support"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`inline-flex items-center px-3 py-2 rounded-lg border ${Le("V4")}`,children:[i.jsx(Se,{size:16,className:"mr-2"}),i.jsx("span",{className:"font-medium",children:"V4 Access"})]}),i.jsxs("div",{className:`inline-flex items-center px-3 py-2 rounded-lg border ${Le("Support")}`,children:[i.jsx(Pr,{size:16,className:"mr-2"}),i.jsx("span",{className:"font-medium",children:"Support Access"})]})]}):i.jsxs("div",{className:`inline-flex items-center px-3 py-2 rounded-lg border ${Le(p.grade)}`,children:[p.grade==="Admin"?i.jsx(Se,{size:16,className:"mr-2"}):p.grade==="Support"?i.jsx(Pr,{size:16,className:"mr-2"}):i.jsx(Se,{size:16,className:"mr-2"}),i.jsxs("span",{className:"font-medium",children:[p.grade," Access"]})]})}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 text-center",children:Vr(p.grade)})]}),i.jsx("div",{className:"space-y-4",children:Dn.map((ee,oe)=>{const pe=ee.icon;return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(pe,{size:18,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:ee.label})]}),i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:ee.value})]},oe)})}),s("Admin")&&!ka&&i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("button",{onClick:ae,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(ra,{size:16}),i.jsx("span",{children:"Change Access Level"})]})})]})}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Account Information"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:La?"Update personal information and contact details.":"View account information."})]}),La&&!N?i.jsxs("button",{onClick:()=>_(!0),className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:[i.jsx(ra,{size:16}),i.jsx("span",{children:"Edit"})]}):La&&N?i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("button",{onClick:Ct,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:[i.jsx(_e,{size:16}),i.jsx("span",{children:"Cancel"})]}),i.jsxs("button",{onClick:Ft,disabled:h,className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Ir,{size:16}),i.jsx("span",{children:h?"Saving...":"Save"})]})]}):null]})}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),N&&La?i.jsx("input",{type:"text",value:X.name,onChange:ee=>U({...X,name:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):i.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsx(nr,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:p.name})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),N&&La?i.jsx("input",{type:"email",value:X.email,onChange:ee=>U({...X,email:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):i.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsx(nn,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:p.email})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Member Since"}),i.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsx(sr,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(p.join_date).toLocaleDateString()})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Active"}),i.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsx(qt,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(p.last_active).toLocaleDateString()})]})]})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:ka?"Your recent actions and downloads.":`${p.name}'s recent activity.`})]}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"space-y-4",children:O.length>0?O.map(ee=>{const oe=J.has(ee.id),pe=F.has(ee.id);return(pe||oe)&&!Ra?null:i.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-lg transition-all duration-200 ${pe?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":oe?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800":"hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:Ke(ee)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("p",{className:`text-sm ${pe?"text-red-700 dark:text-red-300 line-through":oe?"text-amber-700 dark:text-amber-300":"text-gray-900 dark:text-white"}`,children:[ee.action,pe&&Ra&&i.jsx("span",{className:"ml-2 text-xs",children:"(Deleted by admin)"}),oe&&Ra&&i.jsx("span",{className:"ml-2 text-xs",children:"(Hidden from user)"})]}),ee.details&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:ee.details}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:Tn(ee.created_at)})]}),Ra&&!ka&&i.jsxs("div",{className:"flex items-center space-x-1",children:[!pe&&!oe&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ie(ee.id),className:"p-1 text-amber-500 hover:text-amber-700 dark:hover:text-amber-400 transition-colors duration-200",title:"Hide from user",children:i.jsx(dk,{size:14})}),i.jsx("button",{onClick:()=>qr(ee.id),className:"p-1 text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors duration-200",title:"Delete activity",children:i.jsx(Rt,{size:14})})]}),(pe||oe)&&i.jsx("button",{onClick:()=>Mn(ee.id),className:"p-1 text-emerald-500 hover:text-emerald-700 dark:hover:text-emerald-400 transition-colors duration-200",title:"Restore activity",children:i.jsx(nk,{size:14})})]})]},ee.id)}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(nt,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No recent activity"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Activity will appear here as it happens."})]})})})]})]})]}),V&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:Ae}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Change Access Level"}),i.jsx("button",{onClick:Ae,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:p.name.charAt(0)})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:p.name}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.email})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Access Level"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:p.grade==="Support"?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Le("V4")}`,children:"V4"}),i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Le("Support")}`,children:"Support"})]}):i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Le(p.grade)}`,children:p.grade})}),i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Access Level"}),i.jsxs("select",{value:C,onChange:ee=>K(ee.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"V4",children:"V4 - Standard access"}),i.jsx("option",{value:"V5",children:"V5 - Advanced features"}),i.jsx("option",{value:"Support",children:"Support - Bug management access"}),i.jsx("option",{value:"Admin",children:"Admin - Full system access"})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(Se,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Access Level Information"}),i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:[C==="Admin"&&"Admin users have full access to all system features and management capabilities.",C==="Support"&&"Support users have V4 download access plus the ability to manage and respond to bug reports.",C==="V5"&&"V5 users have access to advanced features and beta versions.",C==="V4"&&"V4 users have standard access to stable releases."]})]})]})})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:Ae,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:he,disabled:h||C===p.grade,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Ir,{size:18}),i.jsx("span",{children:h?"Saving...":"Save Changes"})]})]})]})]})})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Ka,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"User Not Found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"The requested user profile could not be found."}),e&&i.jsxs("button",{onClick:e,className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Oo,{size:18}),i.jsx("span",{children:"Go Back"})]})]})})},qj=()=>{const{isDark:t,toggleTheme:e}=ob(),[a,r]=T.useState({email:!0,push:!1,downloads:!0,security:!0,updates:!0}),[s,n]=T.useState(!1),[o,l]=T.useState({current:"",new:"",confirm:""}),[c,d]=T.useState({language:"en",timezone:"UTC",downloadPath:"/downloads",autoUpdate:!0,betaAccess:!1}),u=(v,y)=>{r(k=>({...k,[v]:y}))},h=(v,y)=>{d(k=>({...k,[v]:y}))},p=()=>{if(o.new!==o.confirm){alert("New passwords do not match!");return}alert("Password changed successfully!"),l({current:"",new:"",confirm:""})},m=()=>{alert("Settings saved successfully!")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Settings"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Manage your account preferences and system settings."})]}),i.jsxs("button",{onClick:m,className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ir,{size:18}),i.jsx("span",{children:"Save Changes"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:t?i.jsx(rb,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}):i.jsx(ab,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Appearance"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Customize your visual experience"})]})]})}),i.jsx("div",{className:"p-6 space-y-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Theme"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choose your preferred theme"})]}),i.jsx("button",{onClick:e,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${t?"bg-blue-600":"bg-gray-200"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${t?"translate-x-6":"translate-x-1"}`})})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/20 rounded-lg",children:i.jsx(bs,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notifications"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your notification preferences"})]})]})}),i.jsx("div",{className:"p-6 space-y-4",children:[{key:"email",label:"Email Notifications",desc:"Receive updates via email",icon:nn},{key:"push",label:"Push Notifications",desc:"Browser push notifications",icon:ik},{key:"downloads",label:"Download Alerts",desc:"Notify when downloads complete",icon:dt},{key:"security",label:"Security Alerts",desc:"Important security notifications",icon:Se},{key:"updates",label:"Update Notifications",desc:"New version announcements",icon:It}].map(v=>{const y=v.icon;return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(y,{size:16,className:"text-gray-400"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.label}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:v.desc})]})]}),i.jsx("button",{onClick:()=>u(v.key,!a[v.key]),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${a[v.key]?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${a[v.key]?"translate-x-6":"translate-x-1"}`})})]},v.key)})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/20 rounded-lg",children:i.jsx(Se,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Security"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your account security"})]})]})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:s?"text":"password",value:o.current,onChange:v=>l({...o,current:v.target.value}),className:"w-full px-3 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter current password"}),i.jsx("button",{type:"button",onClick:()=>n(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s?i.jsx(kc,{size:16,className:"text-gray-400"}):i.jsx(Gt,{size:16,className:"text-gray-400"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),i.jsx("input",{type:"password",value:o.new,onChange:v=>l({...o,new:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),i.jsx("input",{type:"password",value:o.confirm,onChange:v=>l({...o,confirm:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm new password"})]}),i.jsxs("button",{onClick:p,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ui,{size:16}),i.jsx("span",{children:"Change Password"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:i.jsx(Qh,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Preferences"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Customize your experience"})]})]})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Language"}),i.jsxs("select",{value:c.language,onChange:v=>h("language",v.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"en",children:"English"}),i.jsx("option",{value:"es",children:"Spanish"}),i.jsx("option",{value:"fr",children:"French"}),i.jsx("option",{value:"de",children:"German"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Timezone"}),i.jsxs("select",{value:c.timezone,onChange:v=>h("timezone",v.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"UTC",children:"UTC"}),i.jsx("option",{value:"EST",children:"Eastern Standard Time"}),i.jsx("option",{value:"PST",children:"Pacific Standard Time"}),i.jsx("option",{value:"CET",children:"Central European Time"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Default Download Path"}),i.jsx("input",{type:"text",value:c.downloadPath,onChange:v=>h("downloadPath",v.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Auto-update"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Automatically check for updates"})]}),i.jsx("button",{onClick:()=>h("autoUpdate",!c.autoUpdate),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${c.autoUpdate?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${c.autoUpdate?"translate-x-6":"translate-x-1"}`})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Beta Access"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Access to beta versions"})]}),i.jsx("button",{onClick:()=>h("betaAccess",!c.betaAccess),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${c.betaAccess?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${c.betaAccess?"translate-x-6":"translate-x-1"}`})})]})]})]})]})]})};var $b={exports:{}},Vj="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Hj=Vj,Wj=Hj;function Ub(){}function Bb(){}Bb.resetWarningCache=Ub;var Gj=function(){function t(r,s,n,o,l,c){if(c!==Wj){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var a={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Bb,resetWarningCache:Ub};return a.PropTypes=a,a};$b.exports=Gj();var Jj=$b.exports;const Ce=ah(Jj);function Ms(t,e,a,r){function s(n){return n instanceof a?n:new a(function(o){o(n)})}return new(a||(a=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):s(u.value).then(l,c)}d((r=r.apply(t,[])).next())})}const Yj=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function yn(t,e,a){const r=Kj(t),{webkitRelativePath:s}=t,n=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${t.name}`;return typeof r.path!="string"&&ng(r,"path",n),ng(r,"relativePath",n),r}function Kj(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const a=e.split(".").pop().toLowerCase(),r=Yj.get(a);r&&Object.defineProperty(t,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return t}function ng(t,e,a){Object.defineProperty(t,e,{value:a,writable:!1,configurable:!1,enumerable:!0})}const Xj=[".DS_Store","Thumbs.db"];function Qj(t){return Ms(this,void 0,void 0,function*(){return Yl(t)&&Zj(t.dataTransfer)?r_(t.dataTransfer,t.type):e_(t)?t_(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?a_(t):[]})}function Zj(t){return Yl(t)}function e_(t){return Yl(t)&&Yl(t.target)}function Yl(t){return typeof t=="object"&&t!==null}function t_(t){return Lu(t.target.files).map(e=>yn(e))}function a_(t){return Ms(this,void 0,void 0,function*(){return(yield Promise.all(t.map(e=>e.getFile()))).map(e=>yn(e))})}function r_(t,e){return Ms(this,void 0,void 0,function*(){if(t.items){const a=Lu(t.items).filter(s=>s.kind==="file");if(e!=="drop")return a;const r=yield Promise.all(a.map(s_));return ig(qb(r))}return ig(Lu(t.files).map(a=>yn(a)))})}function ig(t){return t.filter(e=>Xj.indexOf(e.name)===-1)}function Lu(t){if(t===null)return[];const e=[];for(let a=0;a<t.length;a++){const r=t[a];e.push(r)}return e}function s_(t){if(typeof t.webkitGetAsEntry!="function")return og(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?Vb(e):og(t,e)}function qb(t){return t.reduce((e,a)=>[...e,...Array.isArray(a)?qb(a):[a]],[])}function og(t,e){return Ms(this,void 0,void 0,function*(){var a;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const s=yield t.getAsFileSystemHandle();if(s===null)throw new Error(`${t} is not a File`);if(s!==void 0){const n=yield s.getFile();return n.handle=s,yn(n)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return yn(r,(a=e==null?void 0:e.fullPath)!==null&&a!==void 0?a:void 0)})}function n_(t){return Ms(this,void 0,void 0,function*(){return t.isDirectory?Vb(t):i_(t)})}function Vb(t){const e=t.createReader();return new Promise((a,r)=>{const s=[];function n(){e.readEntries(o=>Ms(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(n_));s.push(l),n()}else try{const l=yield Promise.all(s);a(l)}catch(l){r(l)}}),o=>{r(o)})}n()})}function i_(t){return Ms(this,void 0,void 0,function*(){return new Promise((e,a)=>{t.file(r=>{const s=yn(r,t.fullPath);e(s)},r=>{a(r)})})})}var gd=function(t,e){if(t&&e){var a=Array.isArray(e)?e:e.split(",");if(a.length===0)return!0;var r=t.name||"",s=(t.type||"").toLowerCase(),n=s.replace(/\/.*$/,"");return a.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?n===l.replace(/\/.*$/,""):s===l})}return!0};function lg(t){return c_(t)||l_(t)||Wb(t)||o_()}function o_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l_(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function c_(t){if(Array.isArray(t))return Ru(t)}function cg(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function dg(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?cg(Object(a),!0).forEach(function(r){Hb(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):cg(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Hb(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function qi(t,e){return h_(t)||u_(t,e)||Wb(t,e)||d_()}function d_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wb(t,e){if(t){if(typeof t=="string")return Ru(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ru(t,e)}}function Ru(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function u_(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r=[],s=!0,n=!1,o,l;try{for(a=a.call(t);!(s=(o=a.next()).done)&&(r.push(o.value),!(e&&r.length===e));s=!0);}catch(c){n=!0,l=c}finally{try{!s&&a.return!=null&&a.return()}finally{if(n)throw l}}return r}}function h_(t){if(Array.isArray(t))return t}var p_=typeof gd=="function"?gd:gd.default,m_="file-invalid-type",g_="file-too-large",f_="file-too-small",x_="too-many-files",b_=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=t.split(","),a=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:m_,message:"File type must be ".concat(a)}},ug=function(t){return{code:g_,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},hg=function(t){return{code:f_,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},y_={code:x_,message:"Too many files"};function Gb(t,e){var a=t.type==="application/x-moz-file"||p_(t,e);return[a,a?null:b_(e)]}function Jb(t,e,a){if(rs(t.size))if(rs(e)&&rs(a)){if(t.size>a)return[!1,ug(a)];if(t.size<e)return[!1,hg(e)]}else{if(rs(e)&&t.size<e)return[!1,hg(e)];if(rs(a)&&t.size>a)return[!1,ug(a)]}return[!0,null]}function rs(t){return t!=null}function v_(t){var e=t.files,a=t.accept,r=t.minSize,s=t.maxSize,n=t.multiple,o=t.maxFiles,l=t.validator;return!n&&e.length>1||n&&o>=1&&e.length>o?!1:e.every(function(c){var d=Gb(c,a),u=qi(d,1),h=u[0],p=Jb(c,r,s),m=qi(p,1),v=m[0],y=l?l(c):null;return h&&v&&!y})}function Kl(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Ro(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function pg(t){t.preventDefault()}function w_(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function k_(t){return t.indexOf("Edge/")!==-1}function j_(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return w_(t)||k_(t)}function _a(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return function(r){for(var s=arguments.length,n=new Array(s>1?s-1:0),o=1;o<s;o++)n[o-1]=arguments[o];return e.some(function(l){return!Kl(r)&&l&&l.apply(void 0,[r].concat(n)),Kl(r)})}}function __(){return"showOpenFilePicker"in window}function N_(t){if(rs(t)){var e=Object.entries(t).filter(function(a){var r=qi(a,2),s=r[0],n=r[1],o=!0;return Yb(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(n)||!n.every(Kb))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(a,r){var s=qi(r,2),n=s[0],o=s[1];return dg(dg({},a),{},Hb({},n,o))},{});return[{description:"Files",accept:e}]}return t}function S_(t){if(rs(t))return Object.entries(t).reduce(function(e,a){var r=qi(a,2),s=r[0],n=r[1];return[].concat(lg(e),[s],lg(n))},[]).filter(function(e){return Yb(e)||Kb(e)}).join(",")}function C_(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function E_(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function Yb(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function Kb(t){return/^.*\.[\w]+$/.test(t)}var M_=["children"],D_=["open"],T_=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],O_=["refKey","onChange","onClick"];function P_(t){return A_(t)||z_(t)||Xb(t)||I_()}function I_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z_(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function A_(t){if(Array.isArray(t))return Fu(t)}function fd(t,e){return F_(t)||R_(t,e)||Xb(t,e)||L_()}function L_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xb(t,e){if(t){if(typeof t=="string")return Fu(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Fu(t,e)}}function Fu(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function R_(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r=[],s=!0,n=!1,o,l;try{for(a=a.call(t);!(s=(o=a.next()).done)&&(r.push(o.value),!(e&&r.length===e));s=!0);}catch(c){n=!0,l=c}finally{try{!s&&a.return!=null&&a.return()}finally{if(n)throw l}}return r}}function F_(t){if(Array.isArray(t))return t}function mg(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Re(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?mg(Object(a),!0).forEach(function(r){$u(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):mg(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function $u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Xl(t,e){if(t==null)return{};var a=$_(t,e),r,s;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function $_(t,e){if(t==null)return{};var a={},r=Object.keys(t),s,n;for(n=0;n<r.length;n++)s=r[n],!(e.indexOf(s)>=0)&&(a[s]=t[s]);return a}var ip=T.forwardRef(function(t,e){var a=t.children,r=Xl(t,M_),s=Zb(r),n=s.open,o=Xl(s,D_);return T.useImperativeHandle(e,function(){return{open:n}},[n]),oh.createElement(T.Fragment,null,a(Re(Re({},o),{},{open:n})))});ip.displayName="Dropzone";var Qb={disabled:!1,getFilesFromEvent:Qj,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};ip.defaultProps=Qb;ip.propTypes={children:Ce.func,accept:Ce.objectOf(Ce.arrayOf(Ce.string)),multiple:Ce.bool,preventDropOnDocument:Ce.bool,noClick:Ce.bool,noKeyboard:Ce.bool,noDrag:Ce.bool,noDragEventsBubbling:Ce.bool,minSize:Ce.number,maxSize:Ce.number,maxFiles:Ce.number,disabled:Ce.bool,getFilesFromEvent:Ce.func,onFileDialogCancel:Ce.func,onFileDialogOpen:Ce.func,useFsAccessApi:Ce.bool,autoFocus:Ce.bool,onDragEnter:Ce.func,onDragLeave:Ce.func,onDragOver:Ce.func,onDrop:Ce.func,onDropAccepted:Ce.func,onDropRejected:Ce.func,onError:Ce.func,validator:Ce.func};var Uu={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Zb(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Re(Re({},Qb),t),a=e.accept,r=e.disabled,s=e.getFilesFromEvent,n=e.maxSize,o=e.minSize,l=e.multiple,c=e.maxFiles,d=e.onDragEnter,u=e.onDragLeave,h=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,v=e.onDropRejected,y=e.onFileDialogCancel,k=e.onFileDialogOpen,g=e.useFsAccessApi,f=e.autoFocus,x=e.preventDropOnDocument,w=e.noClick,S=e.noKeyboard,N=e.noDrag,_=e.noDragEventsBubbling,b=e.onError,j=e.validator,A=T.useMemo(function(){return S_(a)},[a]),I=T.useMemo(function(){return N_(a)},[a]),z=T.useMemo(function(){return typeof k=="function"?k:gg},[k]),$=T.useMemo(function(){return typeof y=="function"?y:gg},[y]),W=T.useRef(null),L=T.useRef(null),J=T.useReducer(U_,Uu),D=fd(J,2),F=D[0],B=D[1],X=F.isFocused,U=F.isFileDialogActive,Y=T.useRef(typeof window<"u"&&window.isSecureContext&&g&&__()),E=function(){!Y.current&&U&&setTimeout(function(){if(L.current){var ae=L.current.files;ae.length||(B({type:"closeDialog"}),$())}},300)};T.useEffect(function(){return window.addEventListener("focus",E,!1),function(){window.removeEventListener("focus",E,!1)}},[L,U,$,Y]);var P=T.useRef([]),R=function(ae){W.current&&W.current.contains(ae.target)||(ae.preventDefault(),P.current=[])};T.useEffect(function(){return x&&(document.addEventListener("dragover",pg,!1),document.addEventListener("drop",R,!1)),function(){x&&(document.removeEventListener("dragover",pg),document.removeEventListener("drop",R))}},[W,x]),T.useEffect(function(){return!r&&f&&W.current&&W.current.focus(),function(){}},[W,f,r]);var O=T.useCallback(function(ae){b?b(ae):console.error(ae)},[b]),M=T.useCallback(function(ae){ae.preventDefault(),ae.persist(),ce(ae),P.current=[].concat(P_(P.current),[ae.target]),Ro(ae)&&Promise.resolve(s(ae)).then(function(he){if(!(Kl(ae)&&!_)){var Ae=he.length,Ke=Ae>0&&v_({files:he,accept:A,minSize:o,maxSize:n,multiple:l,maxFiles:c,validator:j}),Le=Ae>0&&!Ke;B({isDragAccept:Ke,isDragReject:Le,isDragActive:!0,type:"setDraggedFiles"}),d&&d(ae)}}).catch(function(he){return O(he)})},[s,d,O,_,A,o,n,l,c,j]),V=T.useCallback(function(ae){ae.preventDefault(),ae.persist(),ce(ae);var he=Ro(ae);if(he&&ae.dataTransfer)try{ae.dataTransfer.dropEffect="copy"}catch{}return he&&h&&h(ae),!1},[h,_]),Q=T.useCallback(function(ae){ae.preventDefault(),ae.persist(),ce(ae);var he=P.current.filter(function(Ke){return W.current&&W.current.contains(Ke)}),Ae=he.indexOf(ae.target);Ae!==-1&&he.splice(Ae,1),P.current=he,!(he.length>0)&&(B({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ro(ae)&&u&&u(ae))},[W,u,_]),C=T.useCallback(function(ae,he){var Ae=[],Ke=[];ae.forEach(function(Le){var Vr=Gb(Le,A),lr=fd(Vr,2),Dn=lr[0],ka=lr[1],La=Jb(Le,o,n),Ra=fd(La,2),Tn=Ra[0],ee=Ra[1],oe=j?j(Le):null;if(Dn&&Tn&&!oe)Ae.push(Le);else{var pe=[ka,ee];oe&&(pe=pe.concat(oe)),Ke.push({file:Le,errors:pe.filter(function(cr){return cr})})}}),(!l&&Ae.length>1||l&&c>=1&&Ae.length>c)&&(Ae.forEach(function(Le){Ke.push({file:Le,errors:[y_]})}),Ae.splice(0)),B({acceptedFiles:Ae,fileRejections:Ke,isDragReject:Ke.length>0,type:"setFiles"}),p&&p(Ae,Ke,he),Ke.length>0&&v&&v(Ke,he),Ae.length>0&&m&&m(Ae,he)},[B,l,A,o,n,c,p,m,v,j]),K=T.useCallback(function(ae){ae.preventDefault(),ae.persist(),ce(ae),P.current=[],Ro(ae)&&Promise.resolve(s(ae)).then(function(he){Kl(ae)&&!_||C(he,ae)}).catch(function(he){return O(he)}),B({type:"reset"})},[s,C,O,_]),G=T.useCallback(function(){if(Y.current){B({type:"openDialog"}),z();var ae={multiple:l,types:I};window.showOpenFilePicker(ae).then(function(he){return s(he)}).then(function(he){C(he,null),B({type:"closeDialog"})}).catch(function(he){C_(he)?($(he),B({type:"closeDialog"})):E_(he)?(Y.current=!1,L.current?(L.current.value=null,L.current.click()):O(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):O(he)});return}L.current&&(B({type:"openDialog"}),z(),L.current.value=null,L.current.click())},[B,z,$,g,C,O,I,l]),ne=T.useCallback(function(ae){!W.current||!W.current.isEqualNode(ae.target)||(ae.key===" "||ae.key==="Enter"||ae.keyCode===32||ae.keyCode===13)&&(ae.preventDefault(),G())},[W,G]),fe=T.useCallback(function(){B({type:"focus"})},[]),kt=T.useCallback(function(){B({type:"blur"})},[]),Ft=T.useCallback(function(){w||(j_()?setTimeout(G,0):G())},[w,G]),Ct=function(ae){return r?null:ae},$t=function(ae){return S?null:Ct(ae)},H=function(ae){return N?null:Ct(ae)},ce=function(ae){_&&ae.stopPropagation()},Ie=T.useMemo(function(){return function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=ae.refKey,Ae=he===void 0?"ref":he,Ke=ae.role,Le=ae.onKeyDown,Vr=ae.onFocus,lr=ae.onBlur,Dn=ae.onClick,ka=ae.onDragEnter,La=ae.onDragOver,Ra=ae.onDragLeave,Tn=ae.onDrop,ee=Xl(ae,T_);return Re(Re($u({onKeyDown:$t(_a(Le,ne)),onFocus:$t(_a(Vr,fe)),onBlur:$t(_a(lr,kt)),onClick:Ct(_a(Dn,Ft)),onDragEnter:H(_a(ka,M)),onDragOver:H(_a(La,V)),onDragLeave:H(_a(Ra,Q)),onDrop:H(_a(Tn,K)),role:typeof Ke=="string"&&Ke!==""?Ke:"presentation"},Ae,W),!r&&!S?{tabIndex:0}:{}),ee)}},[W,ne,fe,kt,Ft,M,V,Q,K,S,N,r]),qr=T.useCallback(function(ae){ae.stopPropagation()},[]),Mn=T.useMemo(function(){return function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=ae.refKey,Ae=he===void 0?"ref":he,Ke=ae.onChange,Le=ae.onClick,Vr=Xl(ae,O_),lr=$u({accept:A,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ct(_a(Ke,K)),onClick:Ct(_a(Le,qr)),tabIndex:-1},Ae,L);return Re(Re({},lr),Vr)}},[L,a,l,K,r]);return Re(Re({},F),{},{isFocused:X&&!r,getRootProps:Ie,getInputProps:Mn,rootRef:W,inputRef:L,open:Ct(G)})}function U_(t,e){switch(e.type){case"focus":return Re(Re({},t),{},{isFocused:!0});case"blur":return Re(Re({},t),{},{isFocused:!1});case"openDialog":return Re(Re({},Uu),{},{isFileDialogActive:!0});case"closeDialog":return Re(Re({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Re(Re({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Re(Re({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Re({},Uu);default:return t}}function gg(){}const B_=()=>{const{user:t,hasAccess:e}=ht(),{getServerFiles:a,createServerFile:r,updateServerFile:s,deleteServerFile:n,uploadFile:o,loading:l,error:c,setError:d}=Kt(),{logFileUpload:u,logFileDelete:h}=Es(),[p,m]=T.useState([]),[v,y]=T.useState(!1),[k,g]=T.useState(null),[f,x]=T.useState(null),[w,S]=T.useState({name:"",version:"",description:"",file_type:"server",min_grade:"Guest",status:"active",changelog:[""],file_url:"",upload_method:"direct",notify_users:!0}),[N,_]=T.useState(null);T.useEffect(()=>{b()},[]);const b=async()=>{const M=await a();m(M)},j=M=>{M.length>0&&(_(M[0]),S(V=>({...V,upload_method:"direct"})))},{getRootProps:A,getInputProps:I,isDragActive:z}=Zb({onDrop:j,accept:{"application/zip":[".zip"],"application/x-rar-compressed":[".rar"],"application/x-7z-compressed":[".7z"],"application/octet-stream":[".jar",".exe"],"text/plain":[".txt"],"application/pdf":[".pdf"]},maxFiles:1}),$=M=>{g(M),S({name:M.name,version:M.version,description:M.description,file_type:M.file_type,min_grade:M.min_grade,status:M.status,changelog:M.changelog||[""],file_url:M.file_url,upload_method:"external",notify_users:!0}),y(!0)},W=(M,V)=>{try{if(!w.notify_users)return;const Q=localStorage.getItem("prodomo_users");if(!Q)return;JSON.parse(Q).forEach(C=>{const K=C.grade,G=M.min_grade,ne=["Guest","V4","V5","Admin"],fe=ne.indexOf(K),kt=ne.indexOf(G);if(fe<kt)return;const Ft=`prodomo_notifications_${C.id}`,Ct=JSON.parse(localStorage.getItem(Ft)||"[]"),$t=[{id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:V?"New File Available":"File Updated",message:V?`${M.name} v${M.version} is now available for download`:`${M.name} has been updated to v${M.version}`,type:"info",read:!1,created_at:new Date().toISOString(),related_id:M.id,action_url:"/downloads"},...Ct].slice(0,50);localStorage.setItem(Ft,JSON.stringify($t))}),console.log(`File ${V?"upload":"update"} notification created for users`)}catch(Q){console.error("Failed to create file notification:",Q)}},L=async()=>{try{let M=(k==null?void 0:k.file_url)||w.file_url,V=(k==null?void 0:k.file_size)||0;if(w.upload_method==="direct"&&N){const K=`${Date.now()}-${N.name}`,G=await o(N,"server-files",K);if(G)M=G,V=N.size,te.upload(N.name);else throw new Error("Failed to upload file")}else w.upload_method!=="direct"&&w.file_url&&(M=w.file_url,V=(k==null?void 0:k.file_size)||50*1024*1024);if(!M)throw new Error("Please provide a file or download URL");const Q={...w,file_url:M,file_size:V,changelog:w.changelog.filter(K=>K.trim()!==""),created_by:(t==null?void 0:t.id)||"",download_count:(k==null?void 0:k.download_count)||0};let C=!1;if(k)C=await s(k.id,Q),C&&(te.success(`${w.name} has been updated`),await u(w.name,"update"),W({...Q,id:k.id},!1));else if(C=await r(Q),C){te.success(`${w.name} has been uploaded`),await u(w.name,w.file_type);const K=(await a()).find(G=>G.name===w.name&&G.version===w.version);K&&W({...Q,id:K.id},!0)}C&&(await b(),J())}catch(M){const V=M instanceof Error?M.message:"An error occurred";d(V),te.error(V)}},J=()=>{y(!1),g(null),_(null),S({name:"",version:"",description:"",file_type:"server",min_grade:"Guest",status:"active",changelog:[""],file_url:"",upload_method:"direct",notify_users:!0})},D=async M=>{x(M.id)},F=async M=>{const V=p.find(Q=>Q.id===M);V&&(await n(M)?(await b(),te.fileDeleted(V.name),await h(V.name)):te.error("Failed to delete file"),x(null))},B=()=>{x(null)},X=()=>{S({...w,changelog:[...w.changelog,""]})},U=(M,V)=>{const Q=[...w.changelog];Q[M]=V,S({...w,changelog:Q})},Y=M=>{const V=w.changelog.filter((Q,C)=>C!==M);S({...w,changelog:V})},E=M=>{switch(M){case"server":return i.jsx(ys,{className:"w-5 h-5 text-blue-500"});case"plugin":return i.jsx(sk,{className:"w-5 h-5 text-purple-500"});case"archive":return i.jsx(W1,{className:"w-5 h-5 text-amber-500"});case"documentation":return i.jsx(ya,{className:"w-5 h-5 text-emerald-500"});default:return i.jsx(K1,{className:"w-5 h-5 text-gray-500"})}},P=M=>{switch(M){case"active":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400";case"beta":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"deprecated":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},R=M=>{if(M===0)return"0 Bytes";const V=1024,Q=["Bytes","KB","MB","GB"],C=Math.floor(Math.log(M)/Math.log(V));return parseFloat((M/Math.pow(V,C)).toFixed(2))+" "+Q[C]},O=M=>{switch(M){case"google_drive":return i.jsx(Xa,{className:"w-5 h-5 text-blue-500"});case"mega":return i.jsx(Xa,{className:"w-5 h-5 text-red-500"});case"external":return i.jsx(Rm,{className:"w-5 h-5 text-purple-500"});default:return i.jsx(_u,{className:"w-5 h-5 text-gray-500"})}};return e("Admin")?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"File Manager"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Upload and manage server files, updates, and archives."})]}),i.jsxs("button",{onClick:()=>y(!0),className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ia,{size:18}),i.jsx("span",{children:"Add File"})]})]}),c&&i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(It,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:c})]}),i.jsx("button",{onClick:()=>d(null),className:"text-red-400 hover:text-red-600 dark:hover:text-red-300",children:i.jsx(_e,{size:16})})]})}),v&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:J}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:k?"Edit File":"Upload New File"}),i.jsx("button",{onClick:J,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Upload Method"}),i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[{id:"direct",label:"Direct Upload",icon:_u,desc:"Upload file directly"},{id:"google_drive",label:"Google Drive",icon:Xa,desc:"Share link from Google Drive"},{id:"mega",label:"MEGA",icon:Xa,desc:"Share link from MEGA"},{id:"external",label:"External Link",icon:Rm,desc:"Any external download link"}].map(M=>{const V=M.icon,Q=w.upload_method===M.id;return i.jsxs("button",{type:"button",onClick:()=>S({...w,upload_method:M.id}),className:`p-4 rounded-lg border-2 transition-all duration-200 ${Q?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[i.jsx(V,{className:`w-6 h-6 mx-auto mb-2 ${Q?"text-blue-500":"text-gray-400"}`}),i.jsx("p",{className:`text-sm font-medium ${Q?"text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300"}`,children:M.label}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:M.desc})]},M.id)})})]}),w.upload_method==="direct"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload File"}),i.jsxs("div",{...A(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors duration-200 ${z?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,children:[i.jsx("input",{...I()}),i.jsx(Zh,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),N?i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N.name}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:R(N.size)})]}):i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Drag and drop a file here, or click to select"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Supports: ZIP, RAR, 7Z, JAR, EXE, TXT, PDF"})]})]})]}):i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[w.upload_method==="google_drive"&&"Google Drive Share Link",w.upload_method==="mega"&&"MEGA Share Link",w.upload_method==="external"&&"External Download URL"]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"url",value:w.file_url,onChange:M=>S({...w,file_url:M.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:w.upload_method==="google_drive"?"https://drive.google.com/file/d/...":w.upload_method==="mega"?"https://mega.nz/file/...":"https://example.com/download/file.zip"}),i.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:O(w.upload_method)})]}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[w.upload_method==="google_drive"&&'Make sure the file is publicly accessible or shared with "Anyone with the link"',w.upload_method==="mega"&&"Use the public share link from MEGA",w.upload_method==="external"&&"Any direct download link that users can access"]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),i.jsx("input",{type:"text",value:w.name,onChange:M=>S({...w,name:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Prodomo Server"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Version"}),i.jsx("input",{type:"text",value:w.version,onChange:M=>S({...w,version:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 2.1.4"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"File Type"}),i.jsxs("select",{value:w.file_type,onChange:M=>S({...w,file_type:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"server",children:"Server"}),i.jsx("option",{value:"plugin",children:"Plugin"}),i.jsx("option",{value:"archive",children:"Archive"}),i.jsx("option",{value:"documentation",children:"Documentation"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Minimum Grade"}),i.jsxs("select",{value:w.min_grade,onChange:M=>S({...w,min_grade:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"Guest",children:"Guest"}),i.jsx("option",{value:"V4",children:"V4"}),i.jsx("option",{value:"V5",children:"V5"}),i.jsx("option",{value:"Admin",children:"Admin"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),i.jsxs("select",{value:w.status,onChange:M=>S({...w,status:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"beta",children:"Beta"}),i.jsx("option",{value:"deprecated",children:"Deprecated"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notification Settings"}),i.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[i.jsx("input",{type:"checkbox",id:"notify_users",checked:w.notify_users,onChange:M=>S({...w,notify_users:M.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsxs("label",{htmlFor:"notify_users",className:"text-sm text-gray-700 dark:text-gray-300",children:["Notify users about this ",k?"update":"new file"]})]}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center",children:[i.jsx(bs,{size:12,className:"mr-1 text-blue-500"}),"Users with appropriate access level will be notified"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),i.jsx("textarea",{value:w.description,onChange:M=>S({...w,description:M.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe this file..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Changelog"}),i.jsxs("div",{className:"space-y-2",children:[w.changelog.map((M,V)=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"text",value:M,onChange:Q=>U(V,Q.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"What's new in this version..."}),i.jsx("button",{type:"button",onClick:()=>Y(V),className:"p-2 text-red-500 hover:text-red-700 dark:hover:text-red-400",children:i.jsx(_e,{size:16})})]},V)),i.jsxs("button",{type:"button",onClick:X,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:[i.jsx(Ia,{size:16}),i.jsx("span",{children:"Add changelog item"})]})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:J,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:L,disabled:l||!k&&w.upload_method==="direct"&&!N&&!w.file_url,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Ir,{size:18}),i.jsx("span",{children:l?"Saving...":"Save"})]})]})]})]})}),f&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:B}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"sm:flex sm:items-start",children:[i.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:i.jsx(Rt,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),i.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[i.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete File"}),i.jsx("div",{className:"mt-2",children:i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this file? This action cannot be undone."})})]})]}),i.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[i.jsx("button",{type:"button",onClick:()=>F(f),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),i.jsx("button",{type:"button",onClick:B,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})}),i.jsxs("div",{className:"space-y-4",children:[p.map(M=>i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-200",children:i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[i.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded-lg",children:E(M.file_type)}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:M.name}),i.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 rounded-full",children:["v",M.version]}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${P(M.status)}`,children:M.status})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:M.description}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[i.jsx("span",{children:R(M.file_size)}),i.jsxs("span",{children:[M.download_count," downloads"]}),i.jsxs("span",{children:["Min: ",M.min_grade]}),i.jsx("span",{children:new Date(M.created_at).toLocaleDateString()})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>$(M),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:i.jsx(ra,{size:18})}),i.jsx("button",{onClick:()=>D(M),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:i.jsx(Rt,{size:18})})]})]})})},M.id)),p.length===0&&!l&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(X1,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No files uploaded"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Get started by uploading your first server file."}),i.jsxs("button",{onClick:()=>y(!0),className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ia,{size:18}),i.jsx("span",{children:"Upload File"})]})]})]})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(It,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access file management."})]})})};/*!
* @kurkle/color v0.3.4
* https://github.com/kurkle/color#readme
* (c) 2024 Jukka Kurkela
* Released under the MIT License
*/function co(t){return t+.5|0}const kr=(t,e,a)=>Math.max(Math.min(t,a),e);function ei(t){return kr(co(t*2.55),0,255)}function zr(t){return kr(co(t*255),0,255)}function Wa(t){return kr(co(t/2.55)/100,0,1)}function fg(t){return kr(co(t*100),0,100)}const Qt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Bu=[..."0123456789ABCDEF"],q_=t=>Bu[t&15],V_=t=>Bu[(t&240)>>4]+Bu[t&15],Fo=t=>(t&240)>>4===(t&15),H_=t=>Fo(t.r)&&Fo(t.g)&&Fo(t.b)&&Fo(t.a);function W_(t){var e=t.length,a;return t[0]==="#"&&(e===4||e===5?a={r:255&Qt[t[1]]*17,g:255&Qt[t[2]]*17,b:255&Qt[t[3]]*17,a:e===5?Qt[t[4]]*17:255}:(e===7||e===9)&&(a={r:Qt[t[1]]<<4|Qt[t[2]],g:Qt[t[3]]<<4|Qt[t[4]],b:Qt[t[5]]<<4|Qt[t[6]],a:e===9?Qt[t[7]]<<4|Qt[t[8]]:255})),a}const G_=(t,e)=>t<255?e(t):"";function J_(t){var e=H_(t)?q_:V_;return t?"#"+e(t.r)+e(t.g)+e(t.b)+G_(t.a,e):void 0}const Y_=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ey(t,e,a){const r=e*Math.min(a,1-a),s=(n,o=(n+t/30)%12)=>a-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function K_(t,e,a){const r=(s,n=(s+t/60)%6)=>a-a*e*Math.max(Math.min(n,4-n,1),0);return[r(5),r(3),r(1)]}function X_(t,e,a){const r=ey(t,1,.5);let s;for(e+a>1&&(s=1/(e+a),e*=s,a*=s),s=0;s<3;s++)r[s]*=1-e-a,r[s]+=e;return r}function Q_(t,e,a,r,s){return t===s?(e-a)/r+(e<a?6:0):e===s?(a-t)/r+2:(t-e)/r+4}function op(t){const e=t.r/255,a=t.g/255,r=t.b/255,s=Math.max(e,a,r),n=Math.min(e,a,r),o=(s+n)/2;let l,c,d;return s!==n&&(d=s-n,c=o>.5?d/(2-s-n):d/(s+n),l=Q_(e,a,r,d,s),l=l*60+.5),[l|0,c||0,o]}function lp(t,e,a,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,a,r)).map(zr)}function cp(t,e,a){return lp(ey,t,e,a)}function Z_(t,e,a){return lp(X_,t,e,a)}function eN(t,e,a){return lp(K_,t,e,a)}function ty(t){return(t%360+360)%360}function tN(t){const e=Y_.exec(t);let a=255,r;if(!e)return;e[5]!==r&&(a=e[6]?ei(+e[5]):zr(+e[5]));const s=ty(+e[2]),n=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Z_(s,n,o):e[1]==="hsv"?r=eN(s,n,o):r=cp(s,n,o),{r:r[0],g:r[1],b:r[2],a}}function aN(t,e){var a=op(t);a[0]=ty(a[0]+e),a=cp(a),t.r=a[0],t.g=a[1],t.b=a[2]}function rN(t){if(!t)return;const e=op(t),a=e[0],r=fg(e[1]),s=fg(e[2]);return t.a<255?`hsla(${a}, ${r}%, ${s}%, ${Wa(t.a)})`:`hsl(${a}, ${r}%, ${s}%)`}const xg={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},bg={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function sN(){const t={},e=Object.keys(bg),a=Object.keys(xg);let r,s,n,o,l;for(r=0;r<e.length;r++){for(o=l=e[r],s=0;s<a.length;s++)n=a[s],l=l.replace(n,xg[n]);n=parseInt(bg[o],16),t[l]=[n>>16&255,n>>8&255,n&255]}return t}let $o;function nN(t){$o||($o=sN(),$o.transparent=[0,0,0,0]);const e=$o[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const iN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function oN(t){const e=iN.exec(t);let a=255,r,s,n;if(e){if(e[7]!==r){const o=+e[7];a=e[8]?ei(o):kr(o*255,0,255)}return r=+e[1],s=+e[3],n=+e[5],r=255&(e[2]?ei(r):kr(r,0,255)),s=255&(e[4]?ei(s):kr(s,0,255)),n=255&(e[6]?ei(n):kr(n,0,255)),{r,g:s,b:n,a}}}function lN(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Wa(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const xd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ls=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function cN(t,e,a){const r=Ls(Wa(t.r)),s=Ls(Wa(t.g)),n=Ls(Wa(t.b));return{r:zr(xd(r+a*(Ls(Wa(e.r))-r))),g:zr(xd(s+a*(Ls(Wa(e.g))-s))),b:zr(xd(n+a*(Ls(Wa(e.b))-n))),a:t.a+a*(e.a-t.a)}}function Uo(t,e,a){if(t){let r=op(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*a,e===0?360:1)),r=cp(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function ay(t,e){return t&&Object.assign(e||{},t)}function yg(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=zr(t[3]))):(e=ay(t,{r:0,g:0,b:0,a:1}),e.a=zr(e.a)),e}function dN(t){return t.charAt(0)==="r"?oN(t):tN(t)}class Vi{constructor(e){if(e instanceof Vi)return e;const a=typeof e;let r;a==="object"?r=yg(e):a==="string"&&(r=W_(e)||nN(e)||dN(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=ay(this._rgb);return e&&(e.a=Wa(e.a)),e}set rgb(e){this._rgb=yg(e)}rgbString(){return this._valid?lN(this._rgb):void 0}hexString(){return this._valid?J_(this._rgb):void 0}hslString(){return this._valid?rN(this._rgb):void 0}mix(e,a){if(e){const r=this.rgb,s=e.rgb;let n;const o=a===n?.5:a,l=2*o-1,c=r.a-s.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;n=1-d,r.r=255&d*r.r+n*s.r+.5,r.g=255&d*r.g+n*s.g+.5,r.b=255&d*r.b+n*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,a){return e&&(this._rgb=cN(this._rgb,e._rgb,a)),this}clone(){return new Vi(this.rgb)}alpha(e){return this._rgb.a=zr(e),this}clearer(e){const a=this._rgb;return a.a*=1-e,this}greyscale(){const e=this._rgb,a=co(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=a,this}opaquer(e){const a=this._rgb;return a.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Uo(this._rgb,2,e),this}darken(e){return Uo(this._rgb,2,-e),this}saturate(e){return Uo(this._rgb,1,e),this}desaturate(e){return Uo(this._rgb,1,-e),this}rotate(e){return aN(this._rgb,e),this}}/*!
* Chart.js v4.5.0
* https://www.chartjs.org
* (c) 2025 Chart.js Contributors
* Released under the MIT License
*/function Fa(){}const uN=(()=>{let t=0;return()=>t++})();function ve(t){return t==null}function et(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function be(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function la(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Na(t,e){return la(t)?t:e}function ue(t,e){return typeof t>"u"?e:t}const hN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,ry=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Te(t,e,a){if(t&&typeof t.call=="function")return t.apply(a,e)}function ke(t,e,a,r){let s,n,o;if(et(t))for(n=t.length,s=0;s<n;s++)e.call(a,t[s],s);else if(be(t))for(o=Object.keys(t),n=o.length,s=0;s<n;s++)e.call(a,t[o[s]],o[s])}function Ql(t,e){let a,r,s,n;if(!t||!e||t.length!==e.length)return!1;for(a=0,r=t.length;a<r;++a)if(s=t[a],n=e[a],s.datasetIndex!==n.datasetIndex||s.index!==n.index)return!1;return!0}function Zl(t){if(et(t))return t.map(Zl);if(be(t)){const e=Object.create(null),a=Object.keys(t),r=a.length;let s=0;for(;s<r;++s)e[a[s]]=Zl(t[a[s]]);return e}return t}function sy(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function pN(t,e,a,r){if(!sy(t))return;const s=e[t],n=a[t];be(s)&&be(n)?Hi(s,n,r):e[t]=Zl(n)}function Hi(t,e,a){const r=et(e)?e:[e],s=r.length;if(!be(t))return t;a=a||{};const n=a.merger||pN;let o;for(let l=0;l<s;++l){if(o=r[l],!be(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)n(c[d],t,o,a)}return t}function bi(t,e){return Hi(t,e,{merger:mN})}function mN(t,e,a){if(!sy(t))return;const r=e[t],s=a[t];be(r)&&be(s)?bi(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Zl(s))}const vg={"":t=>t,x:t=>t.x,y:t=>t.y};function gN(t){const e=t.split("."),a=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(a.push(r),r="");return a}function fN(t){const e=gN(t);return a=>{for(const r of e){if(r==="")break;a=a&&a[r]}return a}}function vs(t,e){return(vg[e]||(vg[e]=fN(e)))(t)}function dp(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Wi=t=>typeof t<"u",Rr=t=>typeof t=="function",wg=(t,e)=>{if(t.size!==e.size)return!1;for(const a of t)if(!e.has(a))return!1;return!0};function xN(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const je=Math.PI,Ve=2*je,bN=Ve+je,ec=Number.POSITIVE_INFINITY,yN=je/180,at=je/2,Gr=je/4,kg=je*2/3,qu=Math.log10,za=Math.sign;function yi(t,e,a){return Math.abs(t-e)<a}function jg(t){const e=Math.round(t);t=yi(t,e,t/1e3)?e:t;const a=Math.pow(10,Math.floor(qu(t))),r=t/a;return(r<=1?1:r<=2?2:r<=5?5:10)*a}function vN(t){const e=[],a=Math.sqrt(t);let r;for(r=1;r<a;r++)t%r===0&&(e.push(r),e.push(t/r));return a===(a|0)&&e.push(a),e.sort((s,n)=>s-n).pop(),e}function wN(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Gi(t){return!wN(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function kN(t,e){const a=Math.round(t);return a-e<=t&&a+e>=t}function jN(t,e,a){let r,s,n;for(r=0,s=t.length;r<s;r++)n=t[r][a],isNaN(n)||(e.min=Math.min(e.min,n),e.max=Math.max(e.max,n))}function Qa(t){return t*(je/180)}function _N(t){return t*(180/je)}function _g(t){if(!la(t))return;let e=1,a=0;for(;Math.round(t*e)/e!==t;)e*=10,a++;return a}function ny(t,e){const a=e.x-t.x,r=e.y-t.y,s=Math.sqrt(a*a+r*r);let n=Math.atan2(r,a);return n<-.5*je&&(n+=Ve),{angle:n,distance:s}}function Vu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function NN(t,e){return(t-e+bN)%Ve-je}function ga(t){return(t%Ve+Ve)%Ve}function Ji(t,e,a,r){const s=ga(t),n=ga(e),o=ga(a),l=ga(n-s),c=ga(o-s),d=ga(s-n),u=ga(s-o);return s===n||s===o||r&&n===o||l>c&&d<u}function yt(t,e,a){return Math.max(e,Math.min(a,t))}function SN(t){return yt(t,-32768,32767)}function jr(t,e,a,r=1e-6){return t>=Math.min(e,a)-r&&t<=Math.max(e,a)+r}function up(t,e,a){a=a||(o=>t[o]<e);let r=t.length-1,s=0,n;for(;r-s>1;)n=s+r>>1,a(n)?s=n:r=n;return{lo:s,hi:r}}const ls=(t,e,a,r)=>up(t,a,r?s=>{const n=t[s][e];return n<a||n===a&&t[s+1][e]===a}:s=>t[s][e]<a),CN=(t,e,a)=>up(t,a,r=>t[r][e]>=a);function EN(t,e,a){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>a;)s--;return r>0||s<t.length?t.slice(r,s):t}const iy=["push","pop","shift","splice","unshift"];function MN(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),iy.forEach(a=>{const r="_onData"+dp(a),s=t[a];Object.defineProperty(t,a,{configurable:!0,enumerable:!1,value(...n){const o=s.apply(this,n);return t._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...n)}),o}})})}function Ng(t,e){const a=t._chartjs;if(!a)return;const r=a.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(iy.forEach(n=>{delete t[n]}),delete t._chartjs)}function oy(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ly=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function cy(t,e){let a=[],r=!1;return function(...s){a=s,r||(r=!0,ly.call(window,()=>{r=!1,t.apply(e,a)}))}}function DN(t,e){let a;return function(...r){return e?(clearTimeout(a),a=setTimeout(t,e,r)):t.apply(this,r),e}}const hp=t=>t==="start"?"left":t==="end"?"right":"center",ft=(t,e,a)=>t==="start"?e:t==="end"?a:(e+a)/2,TN=(t,e,a,r)=>t===(r?"left":"right")?a:t==="center"?(e+a)/2:e;function ON(t,e,a){const r=e.length;let s=0,n=r;if(t._sorted){const{iScale:o,vScale:l,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:p,minDefined:m,maxDefined:v}=o.getUserBounds();if(m){if(s=Math.min(ls(c,u,h).lo,a?r:ls(e,u,o.getPixelForValue(h)).lo),d){const y=c.slice(0,s+1).reverse().findIndex(k=>!ve(k[l.axis]));s-=Math.max(0,y)}s=yt(s,0,r-1)}if(v){let y=Math.max(ls(c,o.axis,p,!0).hi+1,a?0:ls(e,u,o.getPixelForValue(p),!0).hi+1);if(d){const k=c.slice(y-1).findIndex(g=>!ve(g[l.axis]));y+=Math.max(0,k)}n=yt(y,s,r)-s}else n=r-s}return{start:s,count:n}}function PN(t){const{xScale:e,yScale:a,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:a.min,ymax:a.max};if(!r)return t._scaleRanges=s,!0;const n=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==a.min||r.ymax!==a.max;return Object.assign(r,s),n}const Bo=t=>t===0||t===1,Sg=(t,e,a)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ve/a)),Cg=(t,e,a)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ve/a)+1,vi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*at)+1,easeOutSine:t=>Math.sin(t*at),easeInOutSine:t=>-.5*(Math.cos(je*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Bo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Bo(t)?t:Sg(t,.075,.3),easeOutElastic:t=>Bo(t)?t:Cg(t,.075,.3),easeInOutElastic(t){return Bo(t)?t:t<.5?.5*Sg(t*2,.1125,.45):.5+.5*Cg(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-vi.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?vi.easeInBounce(t*2)*.5:vi.easeOutBounce(t*2-1)*.5+.5};function pp(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Eg(t){return pp(t)?t:new Vi(t)}function bd(t){return pp(t)?t:new Vi(t).saturate(.5).darken(.1).hexString()}const IN=["x","y","borderWidth","radius","tension"],zN=["color","borderColor","backgroundColor"];function AN(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:zN},numbers:{type:"number",properties:IN}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function LN(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Mg=new Map;function RN(t,e){e=e||{};const a=t+JSON.stringify(e);let r=Mg.get(a);return r||(r=new Intl.NumberFormat(t,e),Mg.set(a,r)),r}function mp(t,e,a){return RN(e,a).format(t)}const dy={values(t){return et(t)?t:""+t},numeric(t,e,a){if(t===0)return"0";const r=this.chart.options.locale;let s,n=t;if(a.length>1){const d=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(d<1e-4||d>1e15)&&(s="scientific"),n=FN(t,a)}const o=qu(Math.abs(n)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),mp(t,r,c)},logarithmic(t,e,a){if(t===0)return"0";const r=a[e].significand||t/Math.pow(10,Math.floor(qu(t)));return[1,2,3,5,10,15].includes(r)||e>.8*a.length?dy.numeric.call(this,t,e,a):""}};function FN(t,e){let a=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(a)>=1&&t!==Math.floor(t)&&(a=t-Math.floor(t)),a}var uy={formatters:dy};function $N(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,a)=>a.lineWidth,tickColor:(e,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ws=Object.create(null),Hu=Object.create(null);function wi(t,e){if(!e)return t;const a=e.split(".");for(let r=0,s=a.length;r<s;++r){const n=a[r];t=t[n]||(t[n]=Object.create(null))}return t}function yd(t,e,a){return typeof e=="string"?Hi(wi(t,e),a):Hi(wi(t,""),e)}class UN{constructor(e,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>bd(s.backgroundColor),this.hoverBorderColor=(r,s)=>bd(s.borderColor),this.hoverColor=(r,s)=>bd(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(a)}set(e,a){return yd(this,e,a)}get(e){return wi(this,e)}describe(e,a){return yd(Hu,e,a)}override(e,a){return yd(ws,e,a)}route(e,a,r,s){const n=wi(this,e),o=wi(this,r),l="_"+a;Object.defineProperties(n,{[l]:{value:n[a],writable:!0},[a]:{enumerable:!0,get(){const c=this[l],d=o[s];return be(c)?Object.assign({},d,c):ue(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(a=>a(this))}}var Ge=new UN({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[AN,LN,$N]);function BN(t){return!t||ve(t.size)||ve(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Dg(t,e,a,r,s){let n=e[s];return n||(n=e[s]=t.measureText(s).width,a.push(s)),n>r&&(r=n),r}function Jr(t,e,a){const r=t.currentDevicePixelRatio,s=a!==0?Math.max(a/2,.5):0;return Math.round((e-s)*r)/r+s}function Tg(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Wu(t,e,a,r){hy(t,e,a,r,null)}function hy(t,e,a,r,s){let n,o,l,c,d,u,h,p;const m=e.pointStyle,v=e.rotation,y=e.radius;let k=(v||0)*yN;if(m&&typeof m=="object"&&(n=m.toString(),n==="[object HTMLImageElement]"||n==="[object HTMLCanvasElement]")){t.save(),t.translate(a,r),t.rotate(k),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),m){default:s?t.ellipse(a,r,s/2,y,0,0,Ve):t.arc(a,r,y,0,Ve),t.closePath();break;case"triangle":u=s?s/2:y,t.moveTo(a+Math.sin(k)*u,r-Math.cos(k)*y),k+=kg,t.lineTo(a+Math.sin(k)*u,r-Math.cos(k)*y),k+=kg,t.lineTo(a+Math.sin(k)*u,r-Math.cos(k)*y),t.closePath();break;case"rectRounded":d=y*.516,c=y-d,o=Math.cos(k+Gr)*c,h=Math.cos(k+Gr)*(s?s/2-d:c),l=Math.sin(k+Gr)*c,p=Math.sin(k+Gr)*(s?s/2-d:c),t.arc(a-h,r-l,d,k-je,k-at),t.arc(a+p,r-o,d,k-at,k),t.arc(a+h,r+l,d,k,k+at),t.arc(a-p,r+o,d,k+at,k+je),t.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*y,u=s?s/2:c,t.rect(a-u,r-c,2*u,2*c);break}k+=Gr;case"rectRot":h=Math.cos(k)*(s?s/2:y),o=Math.cos(k)*y,l=Math.sin(k)*y,p=Math.sin(k)*(s?s/2:y),t.moveTo(a-h,r-l),t.lineTo(a+p,r-o),t.lineTo(a+h,r+l),t.lineTo(a-p,r+o),t.closePath();break;case"crossRot":k+=Gr;case"cross":h=Math.cos(k)*(s?s/2:y),o=Math.cos(k)*y,l=Math.sin(k)*y,p=Math.sin(k)*(s?s/2:y),t.moveTo(a-h,r-l),t.lineTo(a+h,r+l),t.moveTo(a+p,r-o),t.lineTo(a-p,r+o);break;case"star":h=Math.cos(k)*(s?s/2:y),o=Math.cos(k)*y,l=Math.sin(k)*y,p=Math.sin(k)*(s?s/2:y),t.moveTo(a-h,r-l),t.lineTo(a+h,r+l),t.moveTo(a+p,r-o),t.lineTo(a-p,r+o),k+=Gr,h=Math.cos(k)*(s?s/2:y),o=Math.cos(k)*y,l=Math.sin(k)*y,p=Math.sin(k)*(s?s/2:y),t.moveTo(a-h,r-l),t.lineTo(a+h,r+l),t.moveTo(a+p,r-o),t.lineTo(a-p,r+o);break;case"line":o=s?s/2:Math.cos(k)*y,l=Math.sin(k)*y,t.moveTo(a-o,r-l),t.lineTo(a+o,r+l);break;case"dash":t.moveTo(a,r),t.lineTo(a+Math.cos(k)*(s?s/2:y),r+Math.sin(k)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Yi(t,e,a){return a=a||.5,!e||t&&t.x>e.left-a&&t.x<e.right+a&&t.y>e.top-a&&t.y<e.bottom+a}function gp(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function fp(t){t.restore()}function qN(t,e,a,r,s){if(!e)return t.lineTo(a.x,a.y);if(s==="middle"){const n=(e.x+a.x)/2;t.lineTo(n,e.y),t.lineTo(n,a.y)}else s==="after"!=!!r?t.lineTo(e.x,a.y):t.lineTo(a.x,e.y);t.lineTo(a.x,a.y)}function VN(t,e,a,r){if(!e)return t.lineTo(a.x,a.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?a.cp2x:a.cp1x,r?a.cp2y:a.cp1y,a.x,a.y)}function HN(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ve(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function WN(t,e,a,r,s){if(s.strikethrough||s.underline){const n=t.measureText(r),o=e-n.actualBoundingBoxLeft,l=e+n.actualBoundingBoxRight,c=a-n.actualBoundingBoxAscent,d=a+n.actualBoundingBoxDescent,u=s.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(l,u),t.stroke()}}function GN(t,e){const a=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=a}function Ki(t,e,a,r,s,n={}){const o=et(e)?e:[e],l=n.strokeWidth>0&&n.strokeColor!=="";let c,d;for(t.save(),t.font=s.string,HN(t,n),c=0;c<o.length;++c)d=o[c],n.backdrop&&GN(t,n.backdrop),l&&(n.strokeColor&&(t.strokeStyle=n.strokeColor),ve(n.strokeWidth)||(t.lineWidth=n.strokeWidth),t.strokeText(d,a,r,n.maxWidth)),t.fillText(d,a,r,n.maxWidth),WN(t,a,r,d,n),r+=Number(s.lineHeight);t.restore()}function tc(t,e){const{x:a,y:r,w:s,h:n,radius:o}=e;t.arc(a+o.topLeft,r+o.topLeft,o.topLeft,1.5*je,je,!0),t.lineTo(a,r+n-o.bottomLeft),t.arc(a+o.bottomLeft,r+n-o.bottomLeft,o.bottomLeft,je,at,!0),t.lineTo(a+s-o.bottomRight,r+n),t.arc(a+s-o.bottomRight,r+n-o.bottomRight,o.bottomRight,at,0,!0),t.lineTo(a+s,r+o.topRight),t.arc(a+s-o.topRight,r+o.topRight,o.topRight,0,-at,!0),t.lineTo(a+o.topLeft,r)}const JN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,YN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function KN(t,e){const a=(""+t).match(JN);if(!a||a[1]==="normal")return e*1.2;switch(t=+a[2],a[3]){case"px":return t;case"%":t/=100;break}return e*t}const XN=t=>+t||0;function xp(t,e){const a={},r=be(e),s=r?Object.keys(e):e,n=be(t)?r?o=>ue(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)a[o]=XN(n(o));return a}function py(t){return xp(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ln(t){return xp(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ca(t){const e=py(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function vt(t,e){t=t||{},e=e||Ge.font;let a=ue(t.size,e.size);typeof a=="string"&&(a=parseInt(a,10));let r=ue(t.style,e.style);r&&!(""+r).match(YN)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:ue(t.family,e.family),lineHeight:KN(ue(t.lineHeight,e.lineHeight),a),size:a,style:r,weight:ue(t.weight,e.weight),string:""};return s.string=BN(s),s}function qo(t,e,a,r){let s,n,o;for(s=0,n=t.length;s<n;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function QN(t,e,a){const{min:r,max:s}=t,n=ry(e,(s-r)/2),o=(l,c)=>a&&l===0?0:l+c;return{min:o(r,-Math.abs(n)),max:o(s,n)}}function Ds(t,e){return Object.assign(Object.create(t),e)}function bp(t,e=[""],a,r,s=()=>t[0]){const n=a||t;typeof r>"u"&&(r=xy("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:r,_getTarget:s,override:l=>bp([l,...t],e,n,r)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return gy(l,c,()=>iS(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return Pg(l).includes(c)},ownKeys(l){return Pg(l)},set(l,c,d){const u=l._storage||(l._storage=s());return l[c]=u[c]=d,delete l._keys,!0}})}function vn(t,e,a,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:a,_stack:new Set,_descriptors:my(t,r),setContext:n=>vn(t,n,a,r),override:n=>vn(t.override(n),e,a,r)};return new Proxy(s,{deleteProperty(n,o){return delete n[o],delete t[o],!0},get(n,o,l){return gy(n,o,()=>eS(n,o,l))},getOwnPropertyDescriptor(n,o){return n._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(n,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(n,o,l){return t[o]=l,delete n[o],!0}})}function my(t,e={scriptable:!0,indexable:!0}){const{_scriptable:a=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:a,indexable:r,isScriptable:Rr(a)?a:()=>a,isIndexable:Rr(r)?r:()=>r}}const ZN=(t,e)=>t?t+dp(e):e,yp=(t,e)=>be(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function gy(t,e,a){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=a();return t[e]=r,r}function eS(t,e,a){const{_proxy:r,_context:s,_subProxy:n,_descriptors:o}=t;let l=r[e];return Rr(l)&&o.isScriptable(e)&&(l=tS(e,l,t,a)),et(l)&&l.length&&(l=aS(e,l,t,o.isIndexable)),yp(e,l)&&(l=vn(l,s,n&&n[e],o)),l}function tS(t,e,a,r){const{_proxy:s,_context:n,_subProxy:o,_stack:l}=a;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(n,o||r);return l.delete(t),yp(t,c)&&(c=vp(s._scopes,s,t,c)),c}function aS(t,e,a,r){const{_proxy:s,_context:n,_subProxy:o,_descriptors:l}=a;if(typeof n.index<"u"&&r(t))return e[n.index%e.length];if(be(e[0])){const c=e,d=s._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=vp(d,s,t,u);e.push(vn(h,n,o&&o[t],l))}}return e}function fy(t,e,a){return Rr(t)?t(e,a):t}const rS=(t,e)=>t===!0?e:typeof t=="string"?vs(e,t):void 0;function sS(t,e,a,r,s){for(const n of e){const o=rS(a,n);if(o){t.add(o);const l=fy(o._fallback,a,s);if(typeof l<"u"&&l!==a&&l!==r)return l}else if(o===!1&&typeof r<"u"&&a!==r)return null}return!1}function vp(t,e,a,r){const s=e._rootScopes,n=fy(e._fallback,a,r),o=[...t,...s],l=new Set;l.add(r);let c=Og(l,o,a,n||a,r);return c===null||typeof n<"u"&&n!==a&&(c=Og(l,o,n,c,r),c===null)?!1:bp(Array.from(l),[""],s,n,()=>nS(e,a,r))}function Og(t,e,a,r,s){for(;a;)a=sS(t,e,a,r,s);return a}function nS(t,e,a){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return et(s)&&be(a)?a:s||{}}function iS(t,e,a,r){let s;for(const n of e)if(s=xy(ZN(n,t),a),typeof s<"u")return yp(t,s)?vp(a,r,t,s):s}function xy(t,e){for(const a of e){if(!a)continue;const r=a[t];if(typeof r<"u")return r}}function Pg(t){let e=t._keys;return e||(e=t._keys=oS(t._scopes)),e}function oS(t){const e=new Set;for(const a of t)for(const r of Object.keys(a).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const lS=Number.EPSILON||1e-14,wn=(t,e)=>e<t.length&&!t[e].skip&&t[e],by=t=>t==="x"?"y":"x";function cS(t,e,a,r){const s=t.skip?e:t,n=e,o=a.skip?e:a,l=Vu(n,s),c=Vu(o,n);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=r*d,p=r*u;return{previous:{x:n.x-h*(o.x-s.x),y:n.y-h*(o.y-s.y)},next:{x:n.x+p*(o.x-s.x),y:n.y+p*(o.y-s.y)}}}function dS(t,e,a){const r=t.length;let s,n,o,l,c,d=wn(t,0);for(let u=0;u<r-1;++u)if(c=d,d=wn(t,u+1),!(!c||!d)){if(yi(e[u],0,lS)){a[u]=a[u+1]=0;continue}s=a[u]/e[u],n=a[u+1]/e[u],l=Math.pow(s,2)+Math.pow(n,2),!(l<=9)&&(o=3/Math.sqrt(l),a[u]=s*o*e[u],a[u+1]=n*o*e[u])}}function uS(t,e,a="x"){const r=by(a),s=t.length;let n,o,l,c=wn(t,0);for(let d=0;d<s;++d){if(o=l,l=c,c=wn(t,d+1),!l)continue;const u=l[a],h=l[r];o&&(n=(u-o[a])/3,l[`cp1${a}`]=u-n,l[`cp1${r}`]=h-n*e[d]),c&&(n=(c[a]-u)/3,l[`cp2${a}`]=u+n,l[`cp2${r}`]=h+n*e[d])}}function hS(t,e="x"){const a=by(e),r=t.length,s=Array(r).fill(0),n=Array(r);let o,l,c,d=wn(t,0);for(o=0;o<r;++o)if(l=c,c=d,d=wn(t,o+1),!!c){if(d){const u=d[e]-c[e];s[o]=u!==0?(d[a]-c[a])/u:0}n[o]=l?d?za(s[o-1])!==za(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}dS(t,s,n),uS(t,n,e)}function Vo(t,e,a){return Math.max(Math.min(t,a),e)}function pS(t,e){let a,r,s,n,o,l=Yi(t[0],e);for(a=0,r=t.length;a<r;++a)o=n,n=l,l=a<r-1&&Yi(t[a+1],e),n&&(s=t[a],o&&(s.cp1x=Vo(s.cp1x,e.left,e.right),s.cp1y=Vo(s.cp1y,e.top,e.bottom)),l&&(s.cp2x=Vo(s.cp2x,e.left,e.right),s.cp2y=Vo(s.cp2y,e.top,e.bottom)))}function mS(t,e,a,r,s){let n,o,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")hS(t,s);else{let d=r?t[t.length-1]:t[0];for(n=0,o=t.length;n<o;++n)l=t[n],c=cS(d,l,t[Math.min(n+1,o-(r?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&pS(t,a)}function wp(){return typeof window<"u"&&typeof document<"u"}function kp(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ac(t,e,a){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[a])):r=t,r}const Dc=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function gS(t,e){return Dc(t).getPropertyValue(e)}const fS=["top","right","bottom","left"];function us(t,e,a){const r={};a=a?"-"+a:"";for(let s=0;s<4;s++){const n=fS[s];r[n]=parseFloat(t[e+"-"+n+a])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const xS=(t,e,a)=>(t>0||e>0)&&(!a||!a.shadowRoot);function bS(t,e){const a=t.touches,r=a&&a.length?a[0]:t,{offsetX:s,offsetY:n}=r;let o=!1,l,c;if(xS(s,n,t.target))l=s,c=n;else{const d=e.getBoundingClientRect();l=r.clientX-d.left,c=r.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function Zr(t,e){if("native"in t)return t;const{canvas:a,currentDevicePixelRatio:r}=e,s=Dc(a),n=s.boxSizing==="border-box",o=us(s,"padding"),l=us(s,"border","width"),{x:c,y:d,box:u}=bS(t,a),h=o.left+(u&&l.left),p=o.top+(u&&l.top);let{width:m,height:v}=e;return n&&(m-=o.width+l.width,v-=o.height+l.height),{x:Math.round((c-h)/m*a.width/r),y:Math.round((d-p)/v*a.height/r)}}function yS(t,e,a){let r,s;if(e===void 0||a===void 0){const n=t&&kp(t);if(!n)e=t.clientWidth,a=t.clientHeight;else{const o=n.getBoundingClientRect(),l=Dc(n),c=us(l,"border","width"),d=us(l,"padding");e=o.width-d.width-c.width,a=o.height-d.height-c.height,r=ac(l.maxWidth,n,"clientWidth"),s=ac(l.maxHeight,n,"clientHeight")}}return{width:e,height:a,maxWidth:r||ec,maxHeight:s||ec}}const Ho=t=>Math.round(t*10)/10;function vS(t,e,a,r){const s=Dc(t),n=us(s,"margin"),o=ac(s.maxWidth,t,"clientWidth")||ec,l=ac(s.maxHeight,t,"clientHeight")||ec,c=yS(t,e,a);let{width:d,height:u}=c;if(s.boxSizing==="content-box"){const h=us(s,"border","width"),p=us(s,"padding");d-=p.width+h.width,u-=p.height+h.height}return d=Math.max(0,d-n.width),u=Math.max(0,r?d/r:u-n.height),d=Ho(Math.min(d,o,c.maxWidth)),u=Ho(Math.min(u,l,c.maxHeight)),d&&!u&&(u=Ho(d/2)),(e!==void 0||a!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,d=Ho(Math.floor(u*r))),{width:d,height:u}}function Ig(t,e,a){const r=e||1,s=Math.floor(t.height*r),n=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(a||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==n?(t.currentDevicePixelRatio=r,o.height=s,o.width=n,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const wS=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};wp()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function zg(t,e){const a=gS(t,e),r=a&&a.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function es(t,e,a,r){return{x:t.x+a*(e.x-t.x),y:t.y+a*(e.y-t.y)}}function kS(t,e,a,r){return{x:t.x+a*(e.x-t.x),y:r==="middle"?a<.5?t.y:e.y:r==="after"?a<1?t.y:e.y:a>0?e.y:t.y}}function jS(t,e,a,r){const s={x:t.cp2x,y:t.cp2y},n={x:e.cp1x,y:e.cp1y},o=es(t,s,a),l=es(s,n,a),c=es(n,e,a),d=es(o,l,a),u=es(l,c,a);return es(d,u,a)}const _S=function(t,e){return{x(a){return t+t+e-a},setWidth(a){e=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,r){return a-r},leftForLtr(a,r){return a-r}}},NS=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function cn(t,e,a){return t?_S(e,a):NS()}function yy(t,e){let a,r;(e==="ltr"||e==="rtl")&&(a=t.canvas.style,r=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",e,"important"),t.prevTextDirection=r)}function vy(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function wy(t){return t==="angle"?{between:Ji,compare:NN,normalize:ga}:{between:jr,compare:(e,a)=>e-a,normalize:e=>e}}function Ag({start:t,end:e,count:a,loop:r,style:s}){return{start:t%a,end:e%a,loop:r&&(e-t+1)%a===0,style:s}}function SS(t,e,a){const{property:r,start:s,end:n}=a,{between:o,normalize:l}=wy(r),c=e.length;let{start:d,end:u,loop:h}=t,p,m;if(h){for(d+=c,u+=c,p=0,m=c;p<m&&o(l(e[d%c][r]),s,n);++p)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:t.style}}function CS(t,e,a){if(!a)return[t];const{property:r,start:s,end:n}=a,o=e.length,{compare:l,between:c,normalize:d}=wy(r),{start:u,end:h,loop:p,style:m}=SS(t,e,a),v=[];let y=!1,k=null,g,f,x;const w=()=>c(s,x,g)&&l(s,x)!==0,S=()=>l(n,g)===0||c(n,x,g),N=()=>y||w(),_=()=>!y||S();for(let b=u,j=u;b<=h;++b)f=e[b%o],!f.skip&&(g=d(f[r]),g!==x&&(y=c(g,s,n),k===null&&N()&&(k=l(g,s)===0?b:j),k!==null&&_()&&(v.push(Ag({start:k,end:b,loop:p,count:o,style:m})),k=null),j=b,x=g));return k!==null&&v.push(Ag({start:k,end:h,loop:p,count:o,style:m})),v}function ES(t,e){const a=[],r=t.segments;for(let s=0;s<r.length;s++){const n=CS(r[s],t.points,e);n.length&&a.push(...n)}return a}function MS(t,e,a,r){let s=0,n=e-1;if(a&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,a&&(n+=s);n>s&&t[n%e].skip;)n--;return n%=e,{start:s,end:n}}function DS(t,e,a,r){const s=t.length,n=[];let o=e,l=t[e],c;for(c=e+1;c<=a;++c){const d=t[c%s];d.skip||d.stop?l.skip||(r=!1,n.push({start:e%s,end:(c-1)%s,loop:r}),e=o=d.stop?c:null):(o=c,l.skip&&(e=c)),l=d}return o!==null&&n.push({start:e%s,end:o%s,loop:r}),n}function TS(t,e){const a=t.points,r=t.options.spanGaps,s=a.length;if(!s)return[];const n=!!t._loop,{start:o,end:l}=MS(a,s,n,r);if(r===!0)return Lg(t,[{start:o,end:l,loop:n}],a,e);const c=l<o?l+s:l,d=!!t._fullLoop&&o===0&&l===s-1;return Lg(t,DS(a,o,c,d),a,e)}function Lg(t,e,a,r){return!r||!r.setContext||!a?e:OS(t,e,a,r)}function OS(t,e,a,r){const s=t._chart.getContext(),n=Rg(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=a.length,d=[];let u=n,h=e[0].start,p=h;function m(v,y,k,g){const f=l?-1:1;if(v!==y){for(v+=c;a[v%c].skip;)v-=f;for(;a[y%c].skip;)y+=f;v%c!==y%c&&(d.push({start:v%c,end:y%c,loop:k,style:g}),u=g,h=y%c)}}for(const v of e){h=l?h:v.start;let y=a[h%c],k;for(p=h+1;p<=v.end;p++){const g=a[p%c];k=Rg(r.setContext(Ds(s,{type:"segment",p0:y,p1:g,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),PS(k,u)&&m(h,p-1,v.loop,u),y=g,u=k}h<p-1&&m(h,p-1,v.loop,u)}return d}function Rg(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function PS(t,e){if(!e)return!1;const a=[],r=function(s,n){return pp(n)?(a.includes(n)||a.push(n),a.indexOf(n)):n};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Wo(t,e,a){return t.options.clip?t[a]:e[a]}function IS(t,e){const{xScale:a,yScale:r}=t;return a&&r?{left:Wo(a,e,"left"),right:Wo(a,e,"right"),top:Wo(r,e,"top"),bottom:Wo(r,e,"bottom")}:e}function zS(t,e){const a=e._clip;if(a.disabled)return!1;const r=IS(e,t.chartArea);return{left:a.left===!1?0:r.left-(a.left===!0?0:a.left),right:a.right===!1?t.width:r.right+(a.right===!0?0:a.right),top:a.top===!1?0:r.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?t.height:r.bottom+(a.bottom===!0?0:a.bottom)}}/*!
* Chart.js v4.5.0
* https://www.chartjs.org
* (c) 2025 Chart.js Contributors
* Released under the MIT License
*/class AS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,a,r,s){const n=a.listeners[s],o=a.duration;n.forEach(l=>l({chart:e,initial:a.initial,numSteps:o,currentStep:Math.min(r-a.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ly.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let a=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const n=r.items;let o=n.length-1,l=!1,c;for(;o>=0;--o)c=n[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),l=!0):(n[o]=n[n.length-1],n.pop());l&&(s.draw(),this._notify(s,r,e,"progress")),n.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),a+=n.length}),this._lastDate=e,a===0&&(this._running=!1)}_getAnims(e){const a=this._charts;let r=a.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(e,r)),r}listen(e,a,r){this._getAnims(e).listeners[a].push(r)}add(e,a){!a||!a.length||this._getAnims(e).items.push(...a)}has(e){return this._getAnims(e).items.length>0}start(e){const a=this._charts.get(e);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const a=this._charts.get(e);return!(!a||!a.running||!a.items.length)}stop(e){const a=this._charts.get(e);if(!a||!a.items.length)return;const r=a.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();a.items=[],this._notify(e,a,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ua=new AS;const Fg="transparent",LS={boolean(t,e,a){return a>.5?e:t},color(t,e,a){const r=Eg(t||Fg),s=r.valid&&Eg(e||Fg);return s&&s.valid?s.mix(r,a).hexString():e},number(t,e,a){return t+(e-t)*a}};class RS{constructor(e,a,r,s){const n=a[r];s=qo([e.to,s,n,e.from]);const o=qo([e.from,n,s]);this._active=!0,this._fn=e.fn||LS[e.type||typeof o],this._easing=vi[e.easing]||vi.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=a,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,a,r){if(this._active){this._notify(!1);const s=this._target[this._prop],n=r-this._start,o=this._duration-n;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=n,this._loop=!!e.loop,this._to=qo([e.to,a,s,e.from]),this._from=qo([e.from,s,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const a=e-this._start,r=this._duration,s=this._prop,n=this._from,o=this._loop,l=this._to;let c;if(this._active=n!==l&&(o||a<r),!this._active){this._target[s]=l,this._notify(!0);return}if(a<0){this._target[s]=n;return}c=a/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(n,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((a,r)=>{e.push({res:a,rej:r})})}_notify(e){const a=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][a]()}}class ky{constructor(e,a){this._chart=e,this._properties=new Map,this.configure(a)}configure(e){if(!be(e))return;const a=Object.keys(Ge.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const n=e[s];if(!be(n))return;const o={};for(const l of a)o[l]=n[l];(et(n.properties)&&n.properties||[s]).forEach(l=>{(l===s||!r.has(l))&&r.set(l,o)})})}_animateOptions(e,a){const r=a.options,s=$S(e,r);if(!s)return[];const n=this._createAnimations(s,r);return r.$shared&&FS(e.options.$animations,r).then(()=>{e.options=r},()=>{}),n}_createAnimations(e,a){const r=this._properties,s=[],n=e.$animations||(e.$animations={}),o=Object.keys(a),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){s.push(...this._animateOptions(e,a));continue}const u=a[d];let h=n[d];const p=r.get(d);if(h)if(p&&h.active()){h.update(p,u,l);continue}else h.cancel();if(!p||!p.duration){e[d]=u;continue}n[d]=h=new RS(p,e,d,u),s.push(h)}return s}update(e,a){if(this._properties.size===0){Object.assign(e,a);return}const r=this._createAnimations(e,a);if(r.length)return Ua.add(this._chart,r),!0}}function FS(t,e){const a=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const n=t[r[s]];n&&n.active()&&a.push(n.wait())}return Promise.all(a)}function $S(t,e){if(!e)return;let a=t.options;if(!a){t.options=e;return}return a.$shared&&(t.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function $g(t,e){const a=t&&t.options||{},r=a.reverse,s=a.min===void 0?e:0,n=a.max===void 0?e:0;return{start:r?n:s,end:r?s:n}}function US(t,e,a){if(a===!1)return!1;const r=$g(t,a),s=$g(e,a);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function BS(t){let e,a,r,s;return be(t)?(e=t.top,a=t.right,r=t.bottom,s=t.left):e=a=r=s=t,{top:e,right:a,bottom:r,left:s,disabled:t===!1}}function jy(t,e){const a=[],r=t._getSortedDatasetMetas(e);let s,n;for(s=0,n=r.length;s<n;++s)a.push(r[s].index);return a}function Ug(t,e,a,r={}){const s=t.keys,n=r.mode==="single";let o,l,c,d;if(e===null)return;let u=!1;for(o=0,l=s.length;o<l;++o){if(c=+s[o],c===a){if(u=!0,r.all)continue;break}d=t.values[c],la(d)&&(n||e===0||za(e)===za(d))&&(e+=d)}return!u&&!r.all?0:e}function qS(t,e){const{iScale:a,vScale:r}=e,s=a.axis==="x"?"x":"y",n=r.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[s]:u,[n]:t[u]};return l}function vd(t,e){const a=t&&t.options.stacked;return a||a===void 0&&e.stack!==void 0}function VS(t,e,a){return`${t.id}.${e.id}.${a.stack||a.type}`}function HS(t){const{min:e,max:a,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?a:Number.POSITIVE_INFINITY}}function WS(t,e,a){const r=t[e]||(t[e]={});return r[a]||(r[a]={})}function Bg(t,e,a,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const n=t[s.index];if(a&&n>0||!a&&n<0)return s.index}return null}function qg(t,e){const{chart:a,_cachedMeta:r}=t,s=a._stacks||(a._stacks={}),{iScale:n,vScale:o,index:l}=r,c=n.axis,d=o.axis,u=VS(n,o,r),h=e.length;let p;for(let m=0;m<h;++m){const v=e[m],{[c]:y,[d]:k}=v,g=v._stacks||(v._stacks={});p=g[d]=WS(s,u,y),p[l]=k,p._top=Bg(p,o,!0,r.type),p._bottom=Bg(p,o,!1,r.type);const f=p._visualValues||(p._visualValues={});f[l]=k}}function wd(t,e){const a=t.scales;return Object.keys(a).filter(r=>a[r].axis===e).shift()}function GS(t,e){return Ds(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function JS(t,e,a){return Ds(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:a,index:e,mode:"default",type:"data"})}function Un(t,e){const a=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const n=s._stacks;if(!n||n[r]===void 0||n[r][a]===void 0)return;delete n[r][a],n[r]._visualValues!==void 0&&n[r]._visualValues[a]!==void 0&&delete n[r]._visualValues[a]}}}const kd=t=>t==="reset"||t==="none",Vg=(t,e)=>e?t:Object.assign({},t),YS=(t,e,a)=>t&&!e.hidden&&e._stacked&&{keys:jy(a,!0),values:null};class hs{constructor(e,a){this.chart=e,this._ctx=e.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=vd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Un(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,a=this._cachedMeta,r=this.getDataset(),s=(h,p,m,v)=>h==="x"?p:h==="r"?v:m,n=a.xAxisID=ue(r.xAxisID,wd(e,"x")),o=a.yAxisID=ue(r.yAxisID,wd(e,"y")),l=a.rAxisID=ue(r.rAxisID,wd(e,"r")),c=a.indexAxis,d=a.iAxisID=s(c,n,o,l),u=a.vAxisID=s(c,o,n,l);a.xScale=this.getScaleForId(n),a.yScale=this.getScaleForId(o),a.rScale=this.getScaleForId(l),a.iScale=this.getScaleForId(d),a.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const a=this._cachedMeta;return e===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Ng(this._data,this),e._stacked&&Un(e)}_dataCheck(){const e=this.getDataset(),a=e.data||(e.data=[]),r=this._data;if(be(a)){const s=this._cachedMeta;this._data=qS(a,s)}else if(r!==a){if(r){Ng(r,this);const s=this._cachedMeta;Un(s),s._parsed=[]}a&&Object.isExtensible(a)&&MN(a,this),this._syncList=[],this._data=a}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const a=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const n=a._stacked;a._stacked=vd(a.vScale,a),a.stack!==r.stack&&(s=!0,Un(a),a.stack=r.stack),this._resyncElements(e),(s||n!==a._stacked)&&(qg(this,a._parsed),a._stacked=vd(a.vScale,a))}configure(){const e=this.chart.config,a=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),a,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,a){const{_cachedMeta:r,_data:s}=this,{iScale:n,_stacked:o}=r,l=n.axis;let c=e===0&&a===s.length?!0:r._sorted,d=e>0&&r._parsed[e-1],u,h,p;if(this._parsing===!1)r._parsed=s,r._sorted=!0,p=s;else{et(s[e])?p=this.parseArrayData(r,s,e,a):be(s[e])?p=this.parseObjectData(r,s,e,a):p=this.parsePrimitiveData(r,s,e,a);const m=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<a;++u)r._parsed[u+e]=h=p[u],c&&(m()&&(c=!1),d=h);r._sorted=c}o&&qg(this,p)}parsePrimitiveData(e,a,r,s){const{iScale:n,vScale:o}=e,l=n.axis,c=o.axis,d=n.getLabels(),u=n===o,h=new Array(s);let p,m,v;for(p=0,m=s;p<m;++p)v=p+r,h[p]={[l]:u||n.parse(d[v],v),[c]:o.parse(a[v],v)};return h}parseArrayData(e,a,r,s){const{xScale:n,yScale:o}=e,l=new Array(s);let c,d,u,h;for(c=0,d=s;c<d;++c)u=c+r,h=a[u],l[c]={x:n.parse(h[0],u),y:o.parse(h[1],u)};return l}parseObjectData(e,a,r,s){const{xScale:n,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(s);let u,h,p,m;for(u=0,h=s;u<h;++u)p=u+r,m=a[p],d[u]={x:n.parse(vs(m,l),p),y:o.parse(vs(m,c),p)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,a,r){const s=this.chart,n=this._cachedMeta,o=a[e.axis],l={keys:jy(s,!0),values:a._stacks[e.axis]._visualValues};return Ug(l,o,n.index,{mode:r})}updateRangeFromParsed(e,a,r,s){const n=r[a.axis];let o=n===null?NaN:n;const l=s&&r._stacks[a.axis];s&&l&&(s.values=l,o=Ug(s,n,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,a){const r=this._cachedMeta,s=r._parsed,n=r._sorted&&e===r.iScale,o=s.length,l=this._getOtherScale(e),c=YS(a,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=HS(l);let p,m;function v(){m=s[p];const y=m[l.axis];return!la(m[e.axis])||u>y||h<y}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(d,e,m,c),n));++p);if(n){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(d,e,m,c);break}}return d}getAllParsedValues(e){const a=this._cachedMeta._parsed,r=[];let s,n,o;for(s=0,n=a.length;s<n;++s)o=a[s][e.axis],la(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const a=this._cachedMeta,r=a.iScale,s=a.vScale,n=this.getParsed(e);return{label:r?""+r.getLabelForValue(n[r.axis]):"",value:s?""+s.getLabelForValue(n[s.axis]):""}}_update(e){const a=this._cachedMeta;this.update(e||"default"),a._clip=BS(ue(this.options.clip,US(a.xScale,a.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,a=this.chart,r=this._cachedMeta,s=r.data||[],n=a.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||s.length-l,d=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,n,l,c),u=l;u<l+c;++u){const h=s[u];h.hidden||(h.active&&d?o.push(h):h.draw(e,n))}for(u=0;u<o.length;++u)o[u].draw(e,n)}getStyle(e,a){const r=a?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,a,r){const s=this.getDataset();let n;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];n=o.$context||(o.$context=JS(this.getContext(),e,o)),n.parsed=this.getParsed(e),n.raw=s.data[e],n.index=n.dataIndex=e}else n=this.$context||(this.$context=GS(this.chart.getContext(),this.index)),n.dataset=s,n.index=n.datasetIndex=this.index;return n.active=!!a,n.mode=r,n}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,a){return this._resolveElementOptions(this.dataElementType.id,a,e)}_resolveElementOptions(e,a="default",r){const s=a==="active",n=this._cachedDataOpts,o=e+"-"+a,l=n[o],c=this.enableOptionSharing&&Wi(r);if(l)return Vg(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],p=d.getOptionScopes(this.getDataset(),u),m=Object.keys(Ge.elements[e]),v=()=>this.getContext(r,s,a),y=d.resolveNamedOptions(p,m,v,h);return y.$shared&&(y.$shared=c,n[o]=Object.freeze(Vg(y,c))),y}_resolveAnimations(e,a,r){const s=this.chart,n=this._cachedDataOpts,o=`animation-${a}`,l=n[o];if(l)return l;let c;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,a),p=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(p,this.getContext(e,r,a))}const d=new ky(s,c&&c.animations);return c&&c._cacheable&&(n[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,a){return!a||kd(e)||this.chart._animationsDisabled}_getSharedOptions(e,a){const r=this.resolveDataElementOptions(e,a),s=this._sharedOptions,n=this.getSharedOptions(r),o=this.includeOptions(a,n)||n!==s;return this.updateSharedOptions(n,a,r),{sharedOptions:n,includeOptions:o}}updateElement(e,a,r,s){kd(s)?Object.assign(e,r):this._resolveAnimations(a,s).update(e,r)}updateSharedOptions(e,a,r){e&&!kd(a)&&this._resolveAnimations(void 0,a).update(e,r)}_setStyle(e,a,r,s){e.active=s;const n=this.getStyle(a,s);this._resolveAnimations(a,r,s).update(e,{options:!s&&this.getSharedOptions(n)||n})}removeHoverStyle(e,a,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,a,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const a=this._data,r=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const s=r.length,n=a.length,o=Math.min(n,s);o&&this.parse(0,o),n>s?this._insertElements(s,n-s,e):n<s&&this._removeElements(n,s-n)}_insertElements(e,a,r=!0){const s=this._cachedMeta,n=s.data,o=e+a;let l;const c=d=>{for(d.length+=a,l=d.length-1;l>=o;l--)d[l]=d[l-a]};for(c(n),l=e;l<o;++l)n[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,a),r&&this.updateElements(n,e,a,"reset")}updateElements(e,a,r,s){}_removeElements(e,a){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,a);r._stacked&&Un(r,s)}r.data.splice(e,a)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[a,r,s]=e;this[a](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,a){a&&this._sync(["_removeElements",e,a]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}q(hs,"defaults",{}),q(hs,"datasetElementType",null),q(hs,"dataElementType",null);function KS(t,e){if(!t._cache.$bar){const a=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,n=a.length;s<n;s++)r=r.concat(a[s].controller.getAllParsedValues(t));t._cache.$bar=oy(r.sort((s,n)=>s-n))}return t._cache.$bar}function XS(t){const e=t.iScale,a=KS(e,t.type);let r=e._length,s,n,o,l;const c=()=>{o===32767||o===-32768||(Wi(l)&&(r=Math.min(r,Math.abs(o-l)||r)),l=o)};for(s=0,n=a.length;s<n;++s)o=e.getPixelForValue(a[s]),c();for(l=void 0,s=0,n=e.ticks.length;s<n;++s)o=e.getPixelForTick(s),c();return r}function QS(t,e,a,r){const s=a.barThickness;let n,o;return ve(s)?(n=e.min*a.categoryPercentage,o=a.barPercentage):(n=s*r,o=1),{chunk:n/r,ratio:o,start:e.pixels[t]-n/2}}function ZS(t,e,a,r){const s=e.pixels,n=s[t];let o=t>0?s[t-1]:null,l=t<s.length-1?s[t+1]:null;const c=a.categoryPercentage;o===null&&(o=n-(l===null?e.end-e.start:l-n)),l===null&&(l=n+n-o);const d=n-(n-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/r,ratio:a.barPercentage,start:d}}function e4(t,e,a,r){const s=a.parse(t[0],r),n=a.parse(t[1],r),o=Math.min(s,n),l=Math.max(s,n);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),e[a.axis]=d,e._custom={barStart:c,barEnd:d,start:s,end:n,min:o,max:l}}function _y(t,e,a,r){return et(t)?e4(t,e,a,r):e[a.axis]=a.parse(t,r),e}function Hg(t,e,a,r){const s=t.iScale,n=t.vScale,o=s.getLabels(),l=s===n,c=[];let d,u,h,p;for(d=a,u=a+r;d<u;++d)p=e[d],h={},h[s.axis]=l||s.parse(o[d],d),c.push(_y(p,h,n,d));return c}function jd(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function t4(t,e,a){return t!==0?za(t):(e.isHorizontal()?1:-1)*(e.min>=a?1:-1)}function a4(t){let e,a,r,s,n;return t.horizontal?(e=t.base>t.x,a="left",r="right"):(e=t.base<t.y,a="bottom",r="top"),e?(s="end",n="start"):(s="start",n="end"),{start:a,end:r,reverse:e,top:s,bottom:n}}function r4(t,e,a,r){let s=e.borderSkipped;const n={};if(!s){t.borderSkipped=n;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=a4(t);s==="middle"&&a&&(t.enableBorderRadius=!0,(a._top||0)===r?s=d:(a._bottom||0)===r?s=u:(n[Wg(u,o,l,c)]=!0,s=d)),n[Wg(s,o,l,c)]=!0,t.borderSkipped=n}function Wg(t,e,a,r){return r?(t=s4(t,e,a),t=Gg(t,a,e)):t=Gg(t,e,a),t}function s4(t,e,a){return t===e?a:t===a?e:t}function Gg(t,e,a){return t==="start"?e:t==="end"?a:t}function n4(t,{inflateAmount:e},a){t.inflateAmount=e==="auto"?a===1?.33:0:e}class pl extends hs{parsePrimitiveData(e,a,r,s){return Hg(e,a,r,s)}parseArrayData(e,a,r,s){return Hg(e,a,r,s)}parseObjectData(e,a,r,s){const{iScale:n,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=n.axis==="x"?l:c,u=o.axis==="x"?l:c,h=[];let p,m,v,y;for(p=r,m=r+s;p<m;++p)y=a[p],v={},v[n.axis]=n.parse(vs(y,d),p),h.push(_y(vs(y,u),v,o,p));return h}updateRangeFromParsed(e,a,r,s){super.updateRangeFromParsed(e,a,r,s);const n=r._custom;n&&a===this._cachedMeta.vScale&&(e.min=Math.min(e.min,n.min),e.max=Math.max(e.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const a=this._cachedMeta,{iScale:r,vScale:s}=a,n=this.getParsed(e),o=n._custom,l=jd(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(n[s.axis]);return{label:""+r.getLabelForValue(n[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,e)}updateElements(e,a,r,s){const n=s==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(a,s);for(let m=a;m<a+r;m++){const v=this.getParsed(m),y=n||ve(v[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),k=this._calculateBarIndexPixels(m,u),g=(v._stacks||{})[l.axis],f={horizontal:d,base:y.base,enableBorderRadius:!g||jd(v._custom)||o===g._top||o===g._bottom,x:d?y.head:k.center,y:d?k.center:y.head,height:d?k.size:Math.abs(y.size),width:d?Math.abs(y.size):k.size};p&&(f.options=h||this.resolveDataElementOptions(m,e[m].active?"active":s));const x=f.options||e[m].options;r4(f,x,g,o),n4(f,x,u.ratio),this.updateElement(e[m],m,f,s)}}_getStacks(e,a){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),n=r.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(a),c=l&&l[r.axis],d=u=>{const h=u._parsed.find(m=>m[r.axis]===c),p=h&&h[u.vScale.axis];if(ve(p)||isNaN(p))return!0};for(const u of s)if(!(a!==void 0&&d(u))&&((n===!1||o.indexOf(u.stack)===-1||n===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,a=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===a).shift()}_getAxis(){const e={},a=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[ue(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,a)]=!0;return Object.keys(e)}_getStackIndex(e,a,r){const s=this._getStacks(e,r),n=a!==void 0?s.indexOf(a):-1;return n===-1?s.length-1:n}_getRuler(){const e=this.options,a=this._cachedMeta,r=a.iScale,s=[];let n,o;for(n=0,o=a.data.length;n<o;++n)s.push(r.getPixelForValue(this.getParsed(n)[r.axis],n));const l=e.barThickness;return{min:l||XS(a),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:a,_stacked:r,index:s},options:{base:n,minBarLength:o}}=this,l=n||0,c=this.getParsed(e),d=c._custom,u=jd(d);let h=c[a.axis],p=0,m=r?this.applyStack(a,c,r):h,v,y;m!==h&&(p=m-h,m=h),u&&(h=d.barStart,m=d.barEnd-d.barStart,h!==0&&za(h)!==za(d.barEnd)&&(p=0),p+=h);const k=!ve(n)&&!u?n:p;let g=a.getPixelForValue(k);if(this.chart.getDataVisibility(e)?v=a.getPixelForValue(p+m):v=g,y=v-g,Math.abs(y)<o){y=t4(y,a,l)*o,h===l&&(g-=y/2);const f=a.getPixelForDecimal(0),x=a.getPixelForDecimal(1),w=Math.min(f,x),S=Math.max(f,x);g=Math.max(Math.min(g,S),w),v=g+y,r&&!u&&(c._stacks[a.axis]._visualValues[s]=a.getValueForPixel(v)-a.getValueForPixel(g))}if(g===a.getPixelForValue(l)){const f=za(y)*a.getLineWidthForValue(l)/2;g+=f,y-=f}return{size:y,base:g,head:v,center:v+y/2}}_calculateBarIndexPixels(e,a){const r=a.scale,s=this.options,n=s.skipNull,o=ue(s.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(a.grouped){const u=n?this._getStackCount(e):a.stackCount,h=s.barThickness==="flex"?ZS(e,a,s,u*d):QS(e,a,s,u*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(ue(p,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,n?e:void 0)+m;l=h.start+h.chunk*v+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=r.getPixelForValue(this.getParsed(e)[r.axis],e),c=Math.min(o,a.min*a.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,a=e.vScale,r=e.data,s=r.length;let n=0;for(;n<s;++n)this.getParsed(n)[a.axis]!==null&&!r[n].hidden&&r[n].draw(this._ctx)}}q(pl,"id","bar"),q(pl,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),q(pl,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function i4(t,e,a){let r=1,s=1,n=0,o=0;if(e<Ve){const l=t,c=l+e,d=Math.cos(l),u=Math.sin(l),h=Math.cos(c),p=Math.sin(c),m=(x,w,S)=>Ji(x,l,c,!0)?1:Math.max(w,w*a,S,S*a),v=(x,w,S)=>Ji(x,l,c,!0)?-1:Math.min(w,w*a,S,S*a),y=m(0,d,h),k=m(at,u,p),g=v(je,d,h),f=v(je+at,u,p);r=(y-g)/2,s=(k-f)/2,n=-(y+g)/2,o=-(k+f)/2}return{ratioX:r,ratioY:s,offsetX:n,offsetY:o}}class ti extends hs{constructor(e,a){super(e,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,a){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let n=c=>+r[c];if(be(r[e])){const{key:c="value"}=this._parsing;n=d=>+vs(r[d],c)}let o,l;for(o=e,l=e+a;o<l;++o)s._parsed[o]=n(o)}}_getRotation(){return Qa(this.options.rotation-90)}_getCircumference(){return Qa(this.options.circumference)}_getRotationExtents(){let e=Ve,a=-Ve;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,n=s._getRotation(),o=s._getCircumference();e=Math.min(e,n),a=Math.max(a,n+o)}return{rotation:e,circumference:a-e}}update(e){const a=this.chart,{chartArea:r}=a,s=this._cachedMeta,n=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-o)/2,0),c=Math.min(hN(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:v,offsetY:y}=i4(h,u,c),k=(r.width-o)/p,g=(r.height-o)/m,f=Math.max(Math.min(k,g)/2,0),x=ry(this.options.radius,f),w=Math.max(x*c,0),S=(x-w)/this._getVisibleDatasetWeightTotal();this.offsetX=v*x,this.offsetY=y*x,s.total=this.calculateTotal(),this.outerRadius=x-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*d,0),this.updateElements(n,0,n.length,e)}_circumference(e,a){const r=this.options,s=this._cachedMeta,n=this._getCircumference();return a&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*n/Ve)}updateElements(e,a,r,s){const n=s==="reset",o=this.chart,l=o.chartArea,c=o.options.animation,d=(l.left+l.right)/2,u=(l.top+l.bottom)/2,h=n&&c.animateScale,p=h?0:this.innerRadius,m=h?0:this.outerRadius,{sharedOptions:v,includeOptions:y}=this._getSharedOptions(a,s);let k=this._getRotation(),g;for(g=0;g<a;++g)k+=this._circumference(g,n);for(g=a;g<a+r;++g){const f=this._circumference(g,n),x=e[g],w={x:d+this.offsetX,y:u+this.offsetY,startAngle:k,endAngle:k+f,circumference:f,outerRadius:m,innerRadius:p};y&&(w.options=v||this.resolveDataElementOptions(g,x.active?"active":s)),k+=f,this.updateElement(x,g,w,s)}}calculateTotal(){const e=this._cachedMeta,a=e.data;let r=0,s;for(s=0;s<a.length;s++){const n=e._parsed[s];n!==null&&!isNaN(n)&&this.chart.getDataVisibility(s)&&!a[s].hidden&&(r+=Math.abs(n))}return r}calculateCircumference(e){const a=this._cachedMeta.total;return a>0&&!isNaN(e)?Ve*(Math.abs(e)/a):0}getLabelAndValue(e){const a=this._cachedMeta,r=this.chart,s=r.data.labels||[],n=mp(a._parsed[e],r.options.locale);return{label:s[e]||"",value:n}}getMaxBorderWidth(e){let a=0;const r=this.chart;let s,n,o,l,c;if(!e){for(s=0,n=r.data.datasets.length;s<n;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),e=o.data,l=o.controller;break}}if(!e)return 0;for(s=0,n=e.length;s<n;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(a=Math.max(a,c.borderWidth||0,c.hoverBorderWidth||0));return a}getMaxOffset(e){let a=0;for(let r=0,s=e.length;r<s;++r){const n=this.resolveDataElementOptions(r);a=Math.max(a,n.offset||0,n.hoverOffset||0)}return a}_getRingWeightOffset(e){let a=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(a+=this._getRingWeight(r));return a}_getRingWeight(e){return Math.max(ue(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}q(ti,"id","doughnut"),q(ti,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),q(ti,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),q(ti,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:a,color:r}}=t.legend.options;return e.labels.map((s,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:s,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:a,hidden:!t.getDataVisibility(n),index:n}})}return[]}},onClick(t,e,a){a.chart.toggleDataVisibility(e.index),a.chart.update()}}}});class ml extends hs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const a=this._cachedMeta,{dataset:r,data:s=[],_dataset:n}=a,o=this.chart._animationsDisabled;let{start:l,count:c}=ON(a,s,o);this._drawStart=l,this._drawCount=c,PN(a)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!n._decimated,r.points=s;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:d},e),this.updateElements(s,l,c,e)}updateElements(e,a,r,s){const n=s==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(a,s),p=o.axis,m=l.axis,{spanGaps:v,segment:y}=this.options,k=Gi(v)?v:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||n||s==="none",f=a+r,x=e.length;let w=a>0&&this.getParsed(a-1);for(let S=0;S<x;++S){const N=e[S],_=g?N:{};if(S<a||S>=f){_.skip=!0;continue}const b=this.getParsed(S),j=ve(b[m]),A=_[p]=o.getPixelForValue(b[p],S),I=_[m]=n||j?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,b,c):b[m],S);_.skip=isNaN(A)||isNaN(I)||j,_.stop=S>0&&Math.abs(b[p]-w[p])>k,y&&(_.parsed=b,_.raw=d.data[S]),h&&(_.options=u||this.resolveDataElementOptions(S,N.active?"active":s)),g||this.updateElement(N,S,_,s),w=b}}getMaxOverflow(){const e=this._cachedMeta,a=e.dataset,r=a.options&&a.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const n=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,n,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}q(ml,"id","line"),q(ml,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),q(ml,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Yr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class jp{constructor(e){q(this,"options"),this.options=e||{}}static override(e){Object.assign(jp.prototype,e)}init(){}formats(){return Yr()}parse(){return Yr()}format(){return Yr()}add(){return Yr()}diff(){return Yr()}startOf(){return Yr()}endOf(){return Yr()}}var Ny={_date:jp};function o4(t,e,a,r){const{controller:s,data:n,_sorted:o}=t,l=s._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&n.length){const d=l._reversePixels?CN:ls;if(r){if(s._sharedOptions){const u=n[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const p=d(n,e,a-h),m=d(n,e,a+h);return{lo:p.lo,hi:m.hi}}}}else{const u=d(n,e,a);if(c){const{vScale:h}=s._cachedMeta,{_parsed:p}=t,m=p.slice(0,u.lo+1).reverse().findIndex(y=>!ve(y[h.axis]));u.lo-=Math.max(0,m);const v=p.slice(u.hi).findIndex(y=>!ve(y[h.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:n.length-1}}function uo(t,e,a,r,s){const n=t.getSortedVisibleDatasetMetas(),o=a[e];for(let l=0,c=n.length;l<c;++l){const{index:d,data:u}=n[l],{lo:h,hi:p}=o4(n[l],e,o,s);for(let m=h;m<=p;++m){const v=u[m];v.skip||r(v,d,m)}}}function l4(t){const e=t.indexOf("x")!==-1,a=t.indexOf("y")!==-1;return function(r,s){const n=e?Math.abs(r.x-s.x):0,o=a?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}}function _d(t,e,a,r,s){const n=[];return!s&&!t.isPointInArea(e)||uo(t,a,e,function(o,l,c){!s&&!Yi(o,t.chartArea,0)||o.inRange(e.x,e.y,r)&&n.push({element:o,datasetIndex:l,index:c})},!0),n}function c4(t,e,a,r){let s=[];function n(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=ny(o,{x:e.x,y:e.y});Ji(h,d,u)&&s.push({element:o,datasetIndex:l,index:c})}return uo(t,a,e,n),s}function d4(t,e,a,r,s,n){let o=[];const l=l4(a);let c=Number.POSITIVE_INFINITY;function d(u,h,p){const m=u.inRange(e.x,e.y,s);if(r&&!m)return;const v=u.getCenterPoint(s);if(!(n||t.isPointInArea(v))&&!m)return;const y=l(e,v);y<c?(o=[{element:u,datasetIndex:h,index:p}],c=y):y===c&&o.push({element:u,datasetIndex:h,index:p})}return uo(t,a,e,d),o}function Nd(t,e,a,r,s,n){return!n&&!t.isPointInArea(e)?[]:a==="r"&&!r?c4(t,e,a,s):d4(t,e,a,r,s,n)}function Jg(t,e,a,r,s){const n=[],o=a==="x"?"inXRange":"inYRange";let l=!1;return uo(t,a,e,(c,d,u)=>{c[o]&&c[o](e[a],s)&&(n.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,s))}),r&&!l?[]:n}var u4={evaluateInteractionItems:uo,modes:{index(t,e,a,r){const s=Zr(e,t),n=a.axis||"x",o=a.includeInvisible||!1,l=a.intersect?_d(t,s,n,r,o):Nd(t,s,n,!1,r,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,a,r){const s=Zr(e,t),n=a.axis||"xy",o=a.includeInvisible||!1;let l=a.intersect?_d(t,s,n,r,o):Nd(t,s,n,!1,r,o);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(t,e,a,r){const s=Zr(e,t),n=a.axis||"xy",o=a.includeInvisible||!1;return _d(t,s,n,r,o)},nearest(t,e,a,r){const s=Zr(e,t),n=a.axis||"xy",o=a.includeInvisible||!1;return Nd(t,s,n,a.intersect,r,o)},x(t,e,a,r){const s=Zr(e,t);return Jg(t,s,"x",a.intersect,r)},y(t,e,a,r){const s=Zr(e,t);return Jg(t,s,"y",a.intersect,r)}}};const Sy=["left","top","right","bottom"];function Bn(t,e){return t.filter(a=>a.pos===e)}function Yg(t,e){return t.filter(a=>Sy.indexOf(a.pos)===-1&&a.box.axis===e)}function qn(t,e){return t.sort((a,r)=>{const s=e?r:a,n=e?a:r;return s.weight===n.weight?s.index-n.index:s.weight-n.weight})}function h4(t){const e=[];let a,r,s,n,o,l;for(a=0,r=(t||[]).length;a<r;++a)s=t[a],{position:n,options:{stack:o,stackWeight:l=1}}=s,e.push({index:a,box:s,pos:n,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&n+o,stackWeight:l});return e}function p4(t){const e={};for(const a of t){const{stack:r,pos:s,stackWeight:n}=a;if(!r||!Sy.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=n}return e}function m4(t,e){const a=p4(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let n,o,l;for(n=0,o=t.length;n<o;++n){l=t[n];const{fullSize:c}=l.box,d=a[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*r:c&&e.availableWidth,l.height=s):(l.width=r,l.height=u?u*s:c&&e.availableHeight)}return a}function g4(t){const e=h4(t),a=qn(e.filter(d=>d.box.fullSize),!0),r=qn(Bn(e,"left"),!0),s=qn(Bn(e,"right")),n=qn(Bn(e,"top"),!0),o=qn(Bn(e,"bottom")),l=Yg(e,"x"),c=Yg(e,"y");return{fullSize:a,leftAndTop:r.concat(n),rightAndBottom:s.concat(c).concat(o).concat(l),chartArea:Bn(e,"chartArea"),vertical:r.concat(s).concat(c),horizontal:n.concat(o).concat(l)}}function Kg(t,e,a,r){return Math.max(t[a],e[a])+Math.max(t[r],e[r])}function Cy(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function f4(t,e,a,r){const{pos:s,box:n}=a,o=t.maxPadding;if(!be(s)){a.size&&(t[s]-=a.size);const h=r[a.stack]||{size:0,count:1};h.size=Math.max(h.size,a.horizontal?n.height:n.width),a.size=h.size/h.count,t[s]+=a.size}n.getPadding&&Cy(o,n.getPadding());const l=Math.max(0,e.outerWidth-Kg(o,t,"left","right")),c=Math.max(0,e.outerHeight-Kg(o,t,"top","bottom")),d=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,a.horizontal?{same:d,other:u}:{same:u,other:d}}function x4(t){const e=t.maxPadding;function a(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=a("top"),t.x+=a("left"),a("right"),a("bottom")}function b4(t,e){const a=e.maxPadding;function r(s){const n={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{n[o]=Math.max(e[o],a[o])}),n}return r(t?["left","right"]:["top","bottom"])}function ai(t,e,a,r){const s=[];let n,o,l,c,d,u;for(n=0,o=t.length,d=0;n<o;++n){l=t[n],c=l.box,c.update(l.width||e.w,l.height||e.h,b4(l.horizontal,e));const{same:h,other:p}=f4(e,a,l,r);d|=h&&s.length,u=u||p,c.fullSize||s.push(l)}return d&&ai(s,e,a,r)||u}function Go(t,e,a,r,s){t.top=a,t.left=e,t.right=e+r,t.bottom=a+s,t.width=r,t.height=s}function Xg(t,e,a,r){const s=a.padding;let{x:n,y:o}=e;for(const l of t){const c=l.box,d=r[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,p=d.size||c.height;Wi(d.start)&&(o=d.start),c.fullSize?Go(c,s.left,o,a.outerWidth-s.right-s.left,p):Go(c,e.left+d.placed,o,h,p),d.start=o,d.placed+=h,o=c.bottom}else{const h=e.h*u,p=d.size||c.width;Wi(d.start)&&(n=d.start),c.fullSize?Go(c,n,s.top,p,a.outerHeight-s.bottom-s.top):Go(c,n,e.top+d.placed,p,h),d.start=n,d.placed+=h,n=c.right}}e.x=n,e.y=o}var sa={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(a){e.draw(a)}}]},t.boxes.push(e)},removeBox(t,e){const a=t.boxes?t.boxes.indexOf(e):-1;a!==-1&&t.boxes.splice(a,1)},configure(t,e,a){e.fullSize=a.fullSize,e.position=a.position,e.weight=a.weight},update(t,e,a,r){if(!t)return;const s=ca(t.options.layout.padding),n=Math.max(e-s.width,0),o=Math.max(a-s.height,0),l=g4(t.boxes),c=l.vertical,d=l.horizontal;ke(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=c.reduce((y,k)=>k.box.options&&k.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:a,padding:s,availableWidth:n,availableHeight:o,vBoxMaxWidth:n/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},s);Cy(p,ca(r));const m=Object.assign({maxPadding:p,w:n,h:o,x:s.left,y:s.top},s),v=m4(c.concat(d),h);ai(l.fullSize,m,h,v),ai(c,m,h,v),ai(d,m,h,v)&&ai(c,m,h,v),x4(m),Xg(l.leftAndTop,m,h,v),m.x+=m.w,m.y+=m.h,Xg(l.rightAndBottom,m,h,v),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ke(l.chartArea,y=>{const k=y.box;Object.assign(k,t.chartArea),k.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Ey{acquireContext(e,a){}releaseContext(e){return!1}addEventListener(e,a,r){}removeEventListener(e,a,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,a,r,s){return a=Math.max(0,a||e.width),r=r||e.height,{width:a,height:Math.max(0,s?Math.floor(a/s):r)}}isAttached(e){return!0}updateConfig(e){}}class y4 extends Ey{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const gl="$chartjs",v4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Qg=t=>t===null||t==="";function w4(t,e){const a=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[gl]={initial:{height:r,width:s,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",Qg(s)){const n=zg(t,"width");n!==void 0&&(t.width=n)}if(Qg(r))if(t.style.height==="")t.height=t.width/(e||2);else{const n=zg(t,"height");n!==void 0&&(t.height=n)}return t}const My=wS?{passive:!0}:!1;function k4(t,e,a){t&&t.addEventListener(e,a,My)}function j4(t,e,a){t&&t.canvas&&t.canvas.removeEventListener(e,a,My)}function _4(t,e){const a=v4[t.type]||t.type,{x:r,y:s}=Zr(t,e);return{type:a,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function rc(t,e){for(const a of t)if(a===e||a.contains(e))return!0}function N4(t,e,a){const r=t.canvas,s=new MutationObserver(n=>{let o=!1;for(const l of n)o=o||rc(l.addedNodes,r),o=o&&!rc(l.removedNodes,r);o&&a()});return s.observe(document,{childList:!0,subtree:!0}),s}function S4(t,e,a){const r=t.canvas,s=new MutationObserver(n=>{let o=!1;for(const l of n)o=o||rc(l.removedNodes,r),o=o&&!rc(l.addedNodes,r);o&&a()});return s.observe(document,{childList:!0,subtree:!0}),s}const Xi=new Map;let Zg=0;function Dy(){const t=window.devicePixelRatio;t!==Zg&&(Zg=t,Xi.forEach((e,a)=>{a.currentDevicePixelRatio!==t&&e()}))}function C4(t,e){Xi.size||window.addEventListener("resize",Dy),Xi.set(t,e)}function E4(t){Xi.delete(t),Xi.size||window.removeEventListener("resize",Dy)}function M4(t,e,a){const r=t.canvas,s=r&&kp(r);if(!s)return;const n=cy((l,c)=>{const d=s.clientWidth;a(l,c),d<s.clientWidth&&a()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||n(d,u)});return o.observe(s),C4(t,n),o}function Sd(t,e,a){a&&a.disconnect(),e==="resize"&&E4(t)}function D4(t,e,a){const r=t.canvas,s=cy(n=>{t.ctx!==null&&a(_4(n,t))},t);return k4(r,e,s),s}class T4 extends Ey{acquireContext(e,a){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(w4(e,a),r):null}releaseContext(e){const a=e.canvas;if(!a[gl])return!1;const r=a[gl].initial;["height","width"].forEach(n=>{const o=r[n];ve(o)?a.removeAttribute(n):a.setAttribute(n,o)});const s=r.style||{};return Object.keys(s).forEach(n=>{a.style[n]=s[n]}),a.width=a.width,delete a[gl],!0}addEventListener(e,a,r){this.removeEventListener(e,a);const s=e.$proxies||(e.$proxies={}),n={attach:N4,detach:S4,resize:M4}[a]||D4;s[a]=n(e,a,r)}removeEventListener(e,a){const r=e.$proxies||(e.$proxies={}),s=r[a];s&&(({attach:Sd,detach:Sd,resize:Sd}[a]||j4)(e,a,s),r[a]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,a,r,s){return vS(e,a,r,s)}isAttached(e){const a=e&&kp(e);return!!(a&&a.isConnected)}}function O4(t){return!wp()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?y4:T4}var Jo;let or=(Jo=class{constructor(){q(this,"x"),q(this,"y"),q(this,"active",!1),q(this,"options"),q(this,"$animations")}tooltipPosition(t){const{x:e,y:a}=this.getProps(["x","y"],t);return{x:e,y:a}}hasValue(){return Gi(this.x)&&Gi(this.y)}getProps(t,e){const a=this.$animations;if(!e||!a)return this;const r={};return t.forEach(s=>{r[s]=a[s]&&a[s].active()?a[s]._to:this[s]}),r}},q(Jo,"defaults",{}),q(Jo,"defaultRoutes"),Jo);function P4(t,e){const a=t.options.ticks,r=I4(t),s=Math.min(a.maxTicksLimit||r,r),n=a.major.enabled?A4(e):[],o=n.length,l=n[0],c=n[o-1],d=[];if(o>s)return L4(e,d,n,o/s),d;const u=z4(n,e,s);if(o>0){let h,p;const m=o>1?Math.round((c-l)/(o-1)):null;for(Yo(e,d,u,ve(m)?0:l-m,l),h=0,p=o-1;h<p;h++)Yo(e,d,u,n[h],n[h+1]);return Yo(e,d,u,c,ve(m)?e.length:c+m),d}return Yo(e,d,u),d}function I4(t){const e=t.options.offset,a=t._tickSize(),r=t._length/a+(e?0:1),s=t._maxLength/a;return Math.floor(Math.min(r,s))}function z4(t,e,a){const r=R4(t),s=e.length/a;if(!r)return Math.max(s,1);const n=vN(r);for(let o=0,l=n.length-1;o<l;o++){const c=n[o];if(c>s)return c}return Math.max(s,1)}function A4(t){const e=[];let a,r;for(a=0,r=t.length;a<r;a++)t[a].major&&e.push(a);return e}function L4(t,e,a,r){let s=0,n=a[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===n&&(e.push(t[o]),s++,n=a[s*r])}function Yo(t,e,a,r,s){const n=ue(r,0),o=Math.min(ue(s,t.length),t.length);let l=0,c,d,u;for(a=Math.ceil(a),s&&(c=s-r,a=c/Math.floor(c/a)),u=n;u<0;)l++,u=Math.round(n+l*a);for(d=Math.max(n,0);d<o;d++)d===u&&(e.push(t[d]),l++,u=Math.round(n+l*a))}function R4(t){const e=t.length;let a,r;if(e<2)return!1;for(r=t[0],a=1;a<e;++a)if(t[a]-t[a-1]!==r)return!1;return r}const F4=t=>t==="left"?"right":t==="right"?"left":t,e0=(t,e,a)=>e==="top"||e==="left"?t[e]+a:t[e]-a,t0=(t,e)=>Math.min(e||t,t);function a0(t,e){const a=[],r=t.length/e,s=t.length;let n=0;for(;n<s;n+=r)a.push(t[Math.floor(n)]);return a}function $4(t,e,a){const r=t.ticks.length,s=Math.min(e,r-1),n=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(s),d;if(!(a&&(r===1?d=Math.max(c-n,o-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(s-1))/2,c+=s<e?d:-d,c<n-l||c>o+l)))return c}function U4(t,e){ke(t,a=>{const r=a.gc,s=r.length/2;let n;if(s>e){for(n=0;n<s;++n)delete a.data[r[n]];r.splice(0,s)}})}function Vn(t){return t.drawTicks?t.tickLength:0}function r0(t,e){if(!t.display)return 0;const a=vt(t.font,e),r=ca(t.padding);return(et(t.text)?t.text.length:1)*a.lineHeight+r.height}function B4(t,e){return Ds(t,{scale:e,type:"scale"})}function q4(t,e,a){return Ds(t,{tick:a,index:e,type:"tick"})}function V4(t,e,a){let r=hp(t);return(a&&e!=="right"||!a&&e==="right")&&(r=F4(r)),r}function H4(t,e,a,r){const{top:s,left:n,bottom:o,right:l,chart:c}=t,{chartArea:d,scales:u}=c;let h=0,p,m,v;const y=o-s,k=l-n;if(t.isHorizontal()){if(m=ft(r,n,l),be(a)){const g=Object.keys(a)[0],f=a[g];v=u[g].getPixelForValue(f)+y-e}else a==="center"?v=(d.bottom+d.top)/2+y-e:v=e0(t,a,e);p=l-n}else{if(be(a)){const g=Object.keys(a)[0],f=a[g];m=u[g].getPixelForValue(f)-k+e}else a==="center"?m=(d.left+d.right)/2-k+e:m=e0(t,a,e);v=ft(r,o,s),h=a==="left"?-at:at}return{titleX:m,titleY:v,maxWidth:p,rotation:h}}class En extends or{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,a){return e}getUserBounds(){let{_userMin:e,_userMax:a,_suggestedMin:r,_suggestedMax:s}=this;return e=Na(e,Number.POSITIVE_INFINITY),a=Na(a,Number.NEGATIVE_INFINITY),r=Na(r,Number.POSITIVE_INFINITY),s=Na(s,Number.NEGATIVE_INFINITY),{min:Na(e,r),max:Na(a,s),minDefined:la(e),maxDefined:la(a)}}getMinMax(e){let{min:a,max:r,minDefined:s,maxDefined:n}=this.getUserBounds(),o;if(s&&n)return{min:a,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,e),s||(a=Math.min(a,o.min)),n||(r=Math.max(r,o.max));return a=n&&a>r?r:a,r=s&&a>r?a:r,{min:Na(a,Na(r,a)),max:Na(r,Na(a,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Te(this.options.beforeUpdate,[this])}update(e,a,r){const{beginAtZero:s,grace:n,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=a,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=QN(this,n,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?a0(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=P4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,a,r;this.isHorizontal()?(a=this.left,r=this.right):(a=this.top,r=this.bottom,e=!e),this._startPixel=a,this._endPixel=r,this._reversePixels=e,this._length=r-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Te(this.options.afterUpdate,[this])}beforeSetDimensions(){Te(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Te(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Te(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Te(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const a=this.options.ticks;let r,s,n;for(r=0,s=e.length;r<s;r++)n=e[r],n.label=Te(a.callback,[n.value,r,e],this)}afterTickToLabelConversion(){Te(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Te(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,a=e.ticks,r=t0(this.ticks.length,e.ticks.maxTicksLimit),s=a.minRotation||0,n=a.maxRotation;let o=s,l,c,d;if(!this._isVisible()||!a.display||s>=n||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,p=u.highest.height,m=yt(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/r:m/(r-1),h+6>l&&(l=m/(r-(e.offset?.5:1)),c=this.maxHeight-Vn(e.grid)-a.padding-r0(e.title,this.chart.options.font),d=Math.sqrt(h*h+p*p),o=_N(Math.min(Math.asin(yt((u.highest.height+6)/l,-1,1)),Math.asin(yt(c/d,-1,1))-Math.asin(yt(p/d,-1,1)))),o=Math.max(s,Math.min(n,o))),this.labelRotation=o}afterCalculateLabelRotation(){Te(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Te(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:a,options:{ticks:r,title:s,grid:n}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=r0(s,a.options.font);if(l?(e.width=this.maxWidth,e.height=Vn(n)+c):(e.height=this.maxHeight,e.width=Vn(n)+c),r.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:p}=this._getLabelSizes(),m=r.padding*2,v=Qa(this.labelRotation),y=Math.cos(v),k=Math.sin(v);if(l){const g=r.mirror?0:k*h.width+y*p.height;e.height=Math.min(this.maxHeight,e.height+g+m)}else{const g=r.mirror?0:y*h.width+k*p.height;e.width=Math.min(this.maxWidth,e.width+g+m)}this._calculatePadding(d,u,k,y)}}this._handleMargins(),l?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,a,r,s){const{ticks:{align:n,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;c?d?(p=s*e.width,m=r*a.height):(p=r*e.height,m=s*a.width):n==="start"?m=a.width:n==="end"?p=e.width:n!=="inner"&&(p=e.width/2,m=a.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+o)*this.width/(this.width-h),0)}else{let u=a.height/2,h=e.height/2;n==="start"?(u=0,h=e.height):n==="end"&&(u=a.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Te(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:a}=this.options;return a==="top"||a==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let a,r;for(a=0,r=e.length;a<r;a++)ve(e[a].label)&&(e.splice(a,1),r--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const a=this.options.ticks.sampleSize;let r=this.ticks;a<r.length&&(r=a0(r,a)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,a,r){const{ctx:s,_longestTextCache:n}=this,o=[],l=[],c=Math.floor(a/t0(a,r));let d=0,u=0,h,p,m,v,y,k,g,f,x,w,S;for(h=0;h<a;h+=c){if(v=e[h].label,y=this._resolveTickFontOptions(h),s.font=k=y.string,g=n[k]=n[k]||{data:{},gc:[]},f=y.lineHeight,x=w=0,!ve(v)&&!et(v))x=Dg(s,g.data,g.gc,x,v),w=f;else if(et(v))for(p=0,m=v.length;p<m;++p)S=v[p],!ve(S)&&!et(S)&&(x=Dg(s,g.data,g.gc,x,S),w+=f);o.push(x),l.push(w),d=Math.max(x,d),u=Math.max(w,u)}U4(n,a);const N=o.indexOf(d),_=l.indexOf(u),b=j=>({width:o[j]||0,height:l[j]||0});return{first:b(0),last:b(a-1),widest:b(N),highest:b(_),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,a){return NaN}getValueForPixel(e){}getPixelForTick(e){const a=this.ticks;return e<0||e>a.length-1?null:this.getPixelForValue(a[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const a=this._startPixel+e*this._length;return SN(this._alignToPixels?Jr(this.chart,a,0):a)}getDecimalForPixel(e){const a=(e-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:a}=this;return e<0&&a<0?a:e>0&&a>0?e:0}getContext(e){const a=this.ticks||[];if(e>=0&&e<a.length){const r=a[e];return r.$context||(r.$context=q4(this.getContext(),e,r))}return this.$context||(this.$context=B4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,a=Qa(this.labelRotation),r=Math.abs(Math.cos(a)),s=Math.abs(Math.sin(a)),n=this._getLabelSizes(),o=e.autoSkipPadding||0,l=n?n.widest.width+o:0,c=n?n.highest.height+o:0;return this.isHorizontal()?c*r>l*s?l/r:c/s:c*s<l*r?c/r:l/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const a=this.axis,r=this.chart,s=this.options,{grid:n,position:o,border:l}=s,c=n.offset,d=this.isHorizontal(),u=this.ticks.length+(c?1:0),h=Vn(n),p=[],m=l.setContext(this.getContext()),v=m.display?m.width:0,y=v/2,k=function(L){return Jr(r,L,v)};let g,f,x,w,S,N,_,b,j,A,I,z;if(o==="top")g=k(this.bottom),N=this.bottom-h,b=g-y,A=k(e.top)+y,z=e.bottom;else if(o==="bottom")g=k(this.top),A=e.top,z=k(e.bottom)-y,N=g+y,b=this.top+h;else if(o==="left")g=k(this.right),S=this.right-h,_=g-y,j=k(e.left)+y,I=e.right;else if(o==="right")g=k(this.left),j=e.left,I=k(e.right)-y,S=g+y,_=this.left+h;else if(a==="x"){if(o==="center")g=k((e.top+e.bottom)/2+.5);else if(be(o)){const L=Object.keys(o)[0],J=o[L];g=k(this.chart.scales[L].getPixelForValue(J))}A=e.top,z=e.bottom,N=g+y,b=N+h}else if(a==="y"){if(o==="center")g=k((e.left+e.right)/2);else if(be(o)){const L=Object.keys(o)[0],J=o[L];g=k(this.chart.scales[L].getPixelForValue(J))}S=g-y,_=S-h,j=e.left,I=e.right}const $=ue(s.ticks.maxTicksLimit,u),W=Math.max(1,Math.ceil(u/$));for(f=0;f<u;f+=W){const L=this.getContext(f),J=n.setContext(L),D=l.setContext(L),F=J.lineWidth,B=J.color,X=D.dash||[],U=D.dashOffset,Y=J.tickWidth,E=J.tickColor,P=J.tickBorderDash||[],R=J.tickBorderDashOffset;x=$4(this,f,c),x!==void 0&&(w=Jr(r,x,F),d?S=_=j=I=w:N=b=A=z=w,p.push({tx1:S,ty1:N,tx2:_,ty2:b,x1:j,y1:A,x2:I,y2:z,width:F,color:B,borderDash:X,borderDashOffset:U,tickWidth:Y,tickColor:E,tickBorderDash:P,tickBorderDashOffset:R}))}return this._ticksLength=u,this._borderValue=g,p}_computeLabelItems(e){const a=this.axis,r=this.options,{position:s,ticks:n}=r,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=n,p=Vn(r.grid),m=p+u,v=h?-u:m,y=-Qa(this.labelRotation),k=[];let g,f,x,w,S,N,_,b,j,A,I,z,$="middle";if(s==="top")N=this.bottom-v,_=this._getXAxisLabelAlignment();else if(s==="bottom")N=this.top+v,_=this._getXAxisLabelAlignment();else if(s==="left"){const L=this._getYAxisLabelAlignment(p);_=L.textAlign,S=L.x}else if(s==="right"){const L=this._getYAxisLabelAlignment(p);_=L.textAlign,S=L.x}else if(a==="x"){if(s==="center")N=(e.top+e.bottom)/2+m;else if(be(s)){const L=Object.keys(s)[0],J=s[L];N=this.chart.scales[L].getPixelForValue(J)+m}_=this._getXAxisLabelAlignment()}else if(a==="y"){if(s==="center")S=(e.left+e.right)/2-m;else if(be(s)){const L=Object.keys(s)[0],J=s[L];S=this.chart.scales[L].getPixelForValue(J)}_=this._getYAxisLabelAlignment(p).textAlign}a==="y"&&(c==="start"?$="top":c==="end"&&($="bottom"));const W=this._getLabelSizes();for(g=0,f=l.length;g<f;++g){x=l[g],w=x.label;const L=n.setContext(this.getContext(g));b=this.getPixelForTick(g)+n.labelOffset,j=this._resolveTickFontOptions(g),A=j.lineHeight,I=et(w)?w.length:1;const J=I/2,D=L.color,F=L.textStrokeColor,B=L.textStrokeWidth;let X=_;o?(S=b,_==="inner"&&(g===f-1?X=this.options.reverse?"left":"right":g===0?X=this.options.reverse?"right":"left":X="center"),s==="top"?d==="near"||y!==0?z=-I*A+A/2:d==="center"?z=-W.highest.height/2-J*A+A:z=-W.highest.height+A/2:d==="near"||y!==0?z=A/2:d==="center"?z=W.highest.height/2-J*A:z=W.highest.height-I*A,h&&(z*=-1),y!==0&&!L.showLabelBackdrop&&(S+=A/2*Math.sin(y))):(N=b,z=(1-I)*A/2);let U;if(L.showLabelBackdrop){const Y=ca(L.backdropPadding),E=W.heights[g],P=W.widths[g];let R=z-Y.top,O=0-Y.left;switch($){case"middle":R-=E/2;break;case"bottom":R-=E;break}switch(_){case"center":O-=P/2;break;case"right":O-=P;break;case"inner":g===f-1?O-=P:g>0&&(O-=P/2);break}U={left:O,top:R,width:P+Y.width,height:E+Y.height,color:L.backdropColor}}k.push({label:w,font:j,textOffset:z,options:{rotation:y,color:D,strokeColor:F,strokeWidth:B,textAlign:X,textBaseline:$,translation:[S,N],backdrop:U}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:a}=this.options;if(-Qa(this.labelRotation))return e==="top"?"left":"right";let r="center";return a.align==="start"?r="left":a.align==="end"?r="right":a.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:a,ticks:{crossAlign:r,mirror:s,padding:n}}=this.options,o=this._getLabelSizes(),l=e+n,c=o.widest.width;let d,u;return a==="left"?s?(u=this.right+n,r==="near"?d="left":r==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,r==="near"?d="right":r==="center"?(d="center",u-=c/2):(d="left",u=this.left)):a==="right"?s?(u=this.left+n,r==="near"?d="right":r==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,r==="near"?d="left":r==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:a},left:r,top:s,width:n,height:o}=this;a&&(e.save(),e.fillStyle=a,e.fillRect(r,s,n,o),e.restore())}getLineWidthForValue(e){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?a.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const a=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let n,o;const l=(c,d,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(d.x,d.y),r.stroke(),r.restore())};if(a.display)for(n=0,o=s.length;n<o;++n){const c=s[n];a.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),a.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:a,options:{border:r,grid:s}}=this,n=r.setContext(this.getContext()),o=r.display?n.width:0;if(!o)return;const l=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,p;this.isHorizontal()?(d=Jr(e,this.left,o)-o/2,u=Jr(e,this.right,l)+l/2,h=p=c):(h=Jr(e,this.top,o)-o/2,p=Jr(e,this.bottom,l)+l/2,d=u=c),a.save(),a.lineWidth=n.width,a.strokeStyle=n.color,a.beginPath(),a.moveTo(d,h),a.lineTo(u,p),a.stroke(),a.restore()}drawLabels(e){if(!this.options.ticks.display)return;const a=this.ctx,r=this._computeLabelArea();r&&gp(a,r);const s=this.getLabelItems(e);for(const n of s){const o=n.options,l=n.font,c=n.label,d=n.textOffset;Ki(a,c,0,d,l,o)}r&&fp(a)}drawTitle(){const{ctx:e,options:{position:a,title:r,reverse:s}}=this;if(!r.display)return;const n=vt(r.font),o=ca(r.padding),l=r.align;let c=n.lineHeight/2;a==="bottom"||a==="center"||be(a)?(c+=o.bottom,et(r.text)&&(c+=n.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:h,rotation:p}=H4(this,c,a,l);Ki(e,r.text,0,0,n,{color:r.color,maxWidth:h,rotation:p,textAlign:V4(l,a,s),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,a=e.ticks&&e.ticks.z||0,r=ue(e.grid&&e.grid.z,-1),s=ue(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==En.prototype.draw?[{z:a,draw:n=>{this.draw(n)}}]:[{z:r,draw:n=>{this.drawBackground(),this.drawGrid(n),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:a,draw:n=>{this.drawLabels(n)}}]}getMatchingVisibleMetas(e){const a=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let n,o;for(n=0,o=a.length;n<o;++n){const l=a[n];l[r]===this.id&&(!e||l.type===e)&&s.push(l)}return s}_resolveTickFontOptions(e){const a=this.options.ticks.setContext(this.getContext(e));return vt(a.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ko{constructor(e,a,r){this.type=e,this.scope=a,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const a=Object.getPrototypeOf(e);let r;J4(a)&&(r=this.register(a));const s=this.items,n=e.id,o=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+e);return n in s||(s[n]=e,W4(e,o,r),this.override&&Ge.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const a=this.items,r=e.id,s=this.scope;r in a&&delete a[r],s&&r in Ge[s]&&(delete Ge[s][r],this.override&&delete ws[r])}}function W4(t,e,a){const r=Hi(Object.create(null),[a?Ge.get(a):{},Ge.get(e),t.defaults]);Ge.set(e,r),t.defaultRoutes&&G4(e,t.defaultRoutes),t.descriptors&&Ge.describe(e,t.descriptors)}function G4(t,e){Object.keys(e).forEach(a=>{const r=a.split("."),s=r.pop(),n=[t].concat(r).join("."),o=e[a].split("."),l=o.pop(),c=o.join(".");Ge.route(n,s,c,l)})}function J4(t){return"id"in t&&"defaults"in t}class Y4{constructor(){this.controllers=new Ko(hs,"datasets",!0),this.elements=new Ko(or,"elements"),this.plugins=new Ko(Object,"plugins"),this.scales=new Ko(En,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,a,r){[...a].forEach(s=>{const n=r||this._getRegistryForType(s);r||n.isForType(s)||n===this.plugins&&s.id?this._exec(e,n,s):ke(s,o=>{const l=r||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,a,r){const s=dp(e);Te(r["before"+s],[],r),a[e](r),Te(r["after"+s],[],r)}_getRegistryForType(e){for(let a=0;a<this._typedRegistries.length;a++){const r=this._typedRegistries[a];if(r.isForType(e))return r}return this.plugins}_get(e,a,r){const s=a.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Ea=new Y4;class K4{constructor(){this._init=[]}notify(e,a,r,s){a==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const n=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(n,e,a,r);return a==="afterDestroy"&&(this._notify(n,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,a,r,s){s=s||{};for(const n of e){const o=n.plugin,l=o[r],c=[a,s,n.options];if(Te(l,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){ve(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),a}_createDescriptors(e,a){const r=e&&e.config,s=ue(r.options&&r.options.plugins,{}),n=X4(r);return s===!1&&!a?[]:Z4(e,n,s,a)}_notifyStateChanges(e){const a=this._oldCache||[],r=this._cache,s=(n,o)=>n.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(s(a,r),e,"stop"),this._notify(s(r,a),e,"start")}}function X4(t){const e={},a=[],r=Object.keys(Ea.plugins.items);for(let n=0;n<r.length;n++)a.push(Ea.getPlugin(r[n]));const s=t.plugins||[];for(let n=0;n<s.length;n++){const o=s[n];a.indexOf(o)===-1&&(a.push(o),e[o.id]=!0)}return{plugins:a,localIds:e}}function Q4(t,e){return!e&&t===!1?null:t===!0?{}:t}function Z4(t,{plugins:e,localIds:a},r,s){const n=[],o=t.getContext();for(const l of e){const c=l.id,d=Q4(r[c],s);d!==null&&n.push({plugin:l,options:e3(t.config,{plugin:l,local:a[c]},d,o)})}return n}function e3(t,{plugin:e,local:a},r,s){const n=t.pluginScopeKeys(e),o=t.getOptionScopes(r,n);return a&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gu(t,e){const a=Ge.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||a.indexAxis||"x"}function t3(t,e){let a=t;return t==="_index_"?a=e:t==="_value_"&&(a=e==="x"?"y":"x"),a}function a3(t,e){return t===e?"_index_":"_value_"}function s0(t){if(t==="x"||t==="y"||t==="r")return t}function r3(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Ju(t,...e){if(s0(t))return t;for(const a of e){const r=a.axis||r3(a.position)||t.length>1&&s0(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function n0(t,e,a){if(a[e+"AxisID"]===t)return{axis:e}}function s3(t,e){if(e.data&&e.data.datasets){const a=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(a.length)return n0(t,"x",a[0])||n0(t,"y",a[0])}return{}}function n3(t,e){const a=ws[t.type]||{scales:{}},r=e.scales||{},s=Gu(t.type,e),n=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!be(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Ju(o,l,s3(o,t),Ge.scales[l.type]),d=a3(c,s),u=a.scales||{};n[o]=bi(Object.create(null),[{axis:c},l,u[c],u[d]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||Gu(l,e),d=(ws[l]||{}).scales||{};Object.keys(d).forEach(u=>{const h=t3(u,c),p=o[h+"AxisID"]||h;n[p]=n[p]||Object.create(null),bi(n[p],[{axis:h},r[p],d[u]])})}),Object.keys(n).forEach(o=>{const l=n[o];bi(l,[Ge.scales[l.type],Ge.scale])}),n}function Ty(t){const e=t.options||(t.options={});e.plugins=ue(e.plugins,{}),e.scales=n3(t,e)}function Oy(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function i3(t){return t=t||{},t.data=Oy(t.data),Ty(t),t}const i0=new Map,Py=new Set;function Xo(t,e){let a=i0.get(t);return a||(a=e(),i0.set(t,a),Py.add(a)),a}const Hn=(t,e,a)=>{const r=vs(e,a);r!==void 0&&t.add(r)};class o3{constructor(e){this._config=i3(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Oy(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Ty(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Xo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,a){return Xo(`${e}.transition.${a}`,()=>[[`datasets.${e}.transitions.${a}`,`transitions.${a}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,a){return Xo(`${e}-${a}`,()=>[[`datasets.${e}.elements.${a}`,`datasets.${e}`,`elements.${a}`,""]])}pluginScopeKeys(e){const a=e.id,r=this.type;return Xo(`${r}-plugin-${a}`,()=>[[`plugins.${a}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,a){const r=this._scopeCache;let s=r.get(e);return(!s||a)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,a,r){const{options:s,type:n}=this,o=this._cachedScopes(e,r),l=o.get(a);if(l)return l;const c=new Set;a.forEach(u=>{e&&(c.add(e),u.forEach(h=>Hn(c,e,h))),u.forEach(h=>Hn(c,s,h)),u.forEach(h=>Hn(c,ws[n]||{},h)),u.forEach(h=>Hn(c,Ge,h)),u.forEach(h=>Hn(c,Hu,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),Py.has(a)&&o.set(a,d),d}chartOptionScopes(){const{options:e,type:a}=this;return[e,ws[a]||{},Ge.datasets[a]||{},{type:a},Ge,Hu]}resolveNamedOptions(e,a,r,s=[""]){const n={$shared:!0},{resolver:o,subPrefixes:l}=o0(this._resolverCache,e,s);let c=o;if(c3(o,a)){n.$shared=!1,r=Rr(r)?r():r;const d=this.createResolver(e,r,l);c=vn(o,r,d)}for(const d of a)n[d]=c[d];return n}createResolver(e,a,r=[""],s){const{resolver:n}=o0(this._resolverCache,e,r);return be(a)?vn(n,a,void 0,s):n}}function o0(t,e,a){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=a.join();let n=r.get(s);return n||(n={resolver:bp(e,a),subPrefixes:a.filter(o=>!o.toLowerCase().includes("hover"))},r.set(s,n)),n}const l3=t=>be(t)&&Object.getOwnPropertyNames(t).some(e=>Rr(t[e]));function c3(t,e){const{isScriptable:a,isIndexable:r}=my(t);for(const s of e){const n=a(s),o=r(s),l=(o||n)&&t[s];if(n&&(Rr(l)||l3(l))||o&&et(l))return!0}return!1}var d3="4.5.0";const u3=["top","bottom","left","right","chartArea"];function l0(t,e){return t==="top"||t==="bottom"||u3.indexOf(t)===-1&&e==="x"}function c0(t,e){return function(a,r){return a[t]===r[t]?a[e]-r[e]:a[t]-r[t]}}function d0(t){const e=t.chart,a=e.options.animation;e.notifyPlugins("afterRender"),Te(a&&a.onComplete,[t],e)}function h3(t){const e=t.chart,a=e.options.animation;Te(a&&a.onProgress,[t],e)}function Iy(t){return wp()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const fl={},u0=t=>{const e=Iy(t);return Object.values(fl).filter(a=>a.canvas===e).pop()};function p3(t,e,a){const r=Object.keys(t);for(const s of r){const n=+s;if(n>=e){const o=t[s];delete t[s],(a>0||n>e)&&(t[n+a]=o)}}}function m3(t,e,a,r){return!a||t.type==="mouseout"?null:r?e:t}var ur;let Tc=(ur=class{static register(...t){Ea.add(...t),h0()}static unregister(...t){Ea.remove(...t),h0()}constructor(t,e){const a=this.config=new o3(e),r=Iy(t),s=u0(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const n=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||O4(r)),this.platform.updateConfig(a);const o=this.platform.acquireContext(r,n.aspectRatio),l=o&&o.canvas,c=l&&l.height,d=l&&l.width;if(this.id=uN(),this.ctx=o,this.canvas=l,this.width=d,this.height=c,this._options=n,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new K4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=DN(u=>this.update(u),n.resizeDelay||0),this._dataChanges=[],fl[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ua.listen(this,"complete",d0),Ua.listen(this,"progress",h3),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:a,height:r,_aspectRatio:s}=this;return ve(t)?e&&s?s:r?a/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ea}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ig(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Tg(this.canvas,this.ctx),this}stop(){return Ua.stop(this),this}resize(t,e){Ua.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const a=this.options,r=this.canvas,s=a.maintainAspectRatio&&this.aspectRatio,n=this.platform.getMaximumSize(r,t,e,s),o=a.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=n.width,this.height=n.height,this._aspectRatio=this.aspectRatio,Ig(this,o,!0)&&(this.notifyPlugins("resize",{size:n}),Te(a.onResize,[this,n],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};ke(t,(e,a)=>{e.id=a})}buildOrUpdateScales(){const t=this.options,e=t.scales,a=this.scales,r=Object.keys(a).reduce((n,o)=>(n[o]=!1,n),{});let s=[];e&&(s=s.concat(Object.keys(e).map(n=>{const o=e[n],l=Ju(n,o),c=l==="r",d=l==="x";return{options:o,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),ke(s,n=>{const o=n.options,l=o.id,c=Ju(l,o),d=ue(o.type,n.dtype);(o.position===void 0||l0(o.position,c)!==l0(n.dposition))&&(o.position=n.dposition),r[l]=!0;let u=null;if(l in a&&a[l].type===d)u=a[l];else{const h=Ea.getScale(d);u=new h({id:l,type:d,ctx:this.ctx,chart:this}),a[u.id]=u}u.init(o,t)}),ke(r,(n,o)=>{n||delete a[o]}),ke(a,n=>{sa.configure(this,n,n.options),sa.addBox(this,n)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,a=t.length;if(t.sort((r,s)=>r.index-s.index),a>e){for(let r=e;r<a;++r)this._destroyDatasetMeta(r);t.splice(e,a-e)}this._sortedMetasets=t.slice(0).sort(c0("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((a,r)=>{e.filter(s=>s===a._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let a,r;for(this._removeUnreferencedMetasets(),a=0,r=e.length;a<r;a++){const s=e[a];let n=this.getDatasetMeta(a);const o=s.type||this.config.type;if(n.type&&n.type!==o&&(this._destroyDatasetMeta(a),n=this.getDatasetMeta(a)),n.type=o,n.indexAxis=s.indexAxis||Gu(o,this.options),n.order=s.order||0,n.index=a,n.label=""+s.label,n.visible=this.isDatasetVisible(a),n.controller)n.controller.updateIndex(a),n.controller.linkScales();else{const l=Ea.getController(o),{datasetElementType:c,dataElementType:d}=Ge.datasets[o];Object.assign(l,{dataElementType:Ea.getElement(d),datasetElementType:c&&Ea.getElement(c)}),n.controller=new l(this,a),t.push(n.controller)}}return this._updateMetasets(),t}_resetElements(){ke(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const a=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!a.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let n=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:u}=this.getDatasetMeta(c),h=!r&&s.indexOf(u)===-1;u.buildOrUpdateElements(h),n=Math.max(+u.getMaxOverflow(),n)}n=this._minPadding=a.layout.autoPadding?n:0,this._updateLayout(n),r||ke(s,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(c0("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){ke(this.scales,t=>{sa.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),a=new Set(t.events);(!wg(e,a)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:a,start:r,count:s}of e){const n=a==="_removeElements"?-s:s;p3(t,r,n)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,a=s=>new Set(t.filter(n=>n[0]===s).map((n,o)=>o+","+n.splice(1).join(","))),r=a(0);for(let s=1;s<e;s++)if(!wg(r,a(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;sa.update(this,this.width,this.height,t);const e=this.chartArea,a=e.width<=0||e.height<=0;this._layers=[],ke(this.boxes,r=>{a&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,a=this.data.datasets.length;e<a;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,a=this.data.datasets.length;e<a;++e)this._updateDataset(e,Rr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const a=this.getDatasetMeta(t),r={meta:a,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(a.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ua.has(this)?this.attached&&!Ua.running(this)&&Ua.start(this):(this.draw(),d0({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:a,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(a,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,a=[];let r,s;for(r=0,s=e.length;r<s;++r){const n=e[r];(!t||n.visible)&&a.push(n)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,a={meta:t,index:t.index,cancelable:!0},r=zS(this,t);this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(r&&gp(e,r),t.controller.draw(),r&&fp(e),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return Yi(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,a,r){const s=u4.modes[e];return typeof s=="function"?s(this,t,a,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],a=this._metasets;let r=a.filter(s=>s&&s._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},a.push(r)),r}getContext(){return this.$context||(this.$context=Ds(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const a=this.getDatasetMeta(t);return typeof a.hidden=="boolean"?!a.hidden:!e.hidden}setDatasetVisibility(t,e){const a=this.getDatasetMeta(t);a.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,a){const r=a?"show":"hide",s=this.getDatasetMeta(t),n=s.controller._resolveAnimations(void 0,r);Wi(e)?(s.data[e].hidden=!a,this.update()):(this.setDatasetVisibility(t,a),n.update(s,{visible:a}),this.update(o=>o.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ua.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Tg(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete fl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,a=(s,n)=>{e.addEventListener(this,s,n),t[s]=n},r=(s,n,o)=>{s.offsetX=n,s.offsetY=o,this._eventHandler(s)};ke(this.options.events,s=>a(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,a=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},r=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let n;const o=()=>{r("attach",o),this.attached=!0,this.resize(),a("resize",s),a("detach",n)};n=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),a("attach",o)},e.isAttached(this.canvas)?o():n()}unbindEvents(){ke(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ke(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,a){const r=a?"set":"remove";let s,n,o,l;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),o=0,l=t.length;o<l;++o){n=t[o];const c=n&&this.getDatasetMeta(n.datasetIndex).controller;c&&c[r+"HoverStyle"](n.element,n.datasetIndex,n.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],a=t.map(({datasetIndex:r,index:s})=>{const n=this.getDatasetMeta(r);if(!n)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:n.data[s],index:s}});!Ql(a,e)&&(this._active=a,this._lastEvent=null,this._updateHoverStyles(a,e))}notifyPlugins(t,e,a){return this._plugins.notify(this,t,e,a)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,a){const r=this.options.hover,s=(l,c)=>l.filter(d=>!c.some(u=>d.datasetIndex===u.datasetIndex&&d.index===u.index)),n=s(e,t),o=a?t:s(t,e);n.length&&this.updateHoverStyle(n,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(t,e){const a={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=n=>(n.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",a,r)===!1)return;const s=this._handleEvent(t,e,a.inChartArea);return a.cancelable=!1,this.notifyPlugins("afterEvent",a,r),(s||a.changed)&&this.render(),this}_handleEvent(t,e,a){const{_active:r=[],options:s}=this,n=e,o=this._getActiveElements(t,r,a,n),l=xN(t),c=m3(t,this._lastEvent,a,l);a&&(this._lastEvent=null,Te(s.onHover,[t,o,this],this),l&&Te(s.onClick,[t,o,this],this));const d=!Ql(o,r);return(d||e)&&(this._active=o,this._updateHoverStyles(o,r,e)),this._lastEvent=c,d}_getActiveElements(t,e,a,r){if(t.type==="mouseout")return[];if(!a)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}},q(ur,"defaults",Ge),q(ur,"instances",fl),q(ur,"overrides",ws),q(ur,"registry",Ea),q(ur,"version",d3),q(ur,"getChart",u0),ur);function h0(){return ke(Tc.instances,t=>t._plugins.invalidate())}function g3(t,e,a){const{startAngle:r,x:s,y:n,outerRadius:o,innerRadius:l,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,h=Math.min(d/o,ga(r-a));if(t.beginPath(),t.arc(s,n,o-d/2,r+h/2,a-h/2),l>0){const p=Math.min(d/l,ga(r-a));t.arc(s,n,l+d/2,a-p/2,r+p/2,!0)}else{const p=Math.min(d/2,o*ga(r-a));if(u==="round")t.arc(s,n,p,a-je/2,r+je/2,!0);else if(u==="bevel"){const m=2*p*p,v=-m*Math.cos(a+je/2)+s,y=-m*Math.sin(a+je/2)+n,k=m*Math.cos(r+je/2)+s,g=m*Math.sin(r+je/2)+n;t.lineTo(v,y),t.lineTo(k,g)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function f3(t,e,a){const{startAngle:r,pixelMargin:s,x:n,y:o,outerRadius:l,innerRadius:c}=e;let d=s/l;t.beginPath(),t.arc(n,o,l,r-d,a+d),c>s?(d=s/c,t.arc(n,o,c,a+d,r-d,!0)):t.arc(n,o,s,a+at,r-at),t.closePath(),t.clip()}function x3(t){return xp(t,["outerStart","outerEnd","innerStart","innerEnd"])}function b3(t,e,a,r){const s=x3(t.options.borderRadius),n=(a-e)/2,o=Math.min(n,r*e/2),l=c=>{const d=(a-Math.min(n,c))*r/2;return yt(c,0,Math.min(n,d))};return{outerStart:l(s.outerStart),outerEnd:l(s.outerEnd),innerStart:yt(s.innerStart,0,o),innerEnd:yt(s.innerEnd,0,o)}}function Rs(t,e,a,r){return{x:a+t*Math.cos(e),y:r+t*Math.sin(e)}}function sc(t,e,a,r,s,n){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=e,h=Math.max(e.outerRadius+r+a-d,0),p=u>0?u+r+a+d:0;let m=0;const v=s-c;if(r){const L=u>0?u-r:0,J=h>0?h-r:0,D=(L+J)/2,F=D!==0?v*D/(D+r):v;m=(v-F)/2}const y=Math.max(.001,v*h-a/je)/h,k=(v-y)/2,g=c+k+m,f=s-k-m,{outerStart:x,outerEnd:w,innerStart:S,innerEnd:N}=b3(e,p,h,f-g),_=h-x,b=h-w,j=g+x/_,A=f-w/b,I=p+S,z=p+N,$=g+S/I,W=f-N/z;if(t.beginPath(),n){const L=(j+A)/2;if(t.arc(o,l,h,j,L),t.arc(o,l,h,L,A),w>0){const B=Rs(b,A,o,l);t.arc(B.x,B.y,w,A,f+at)}const J=Rs(z,f,o,l);if(t.lineTo(J.x,J.y),N>0){const B=Rs(z,W,o,l);t.arc(B.x,B.y,N,f+at,W+Math.PI)}const D=(f-N/p+(g+S/p))/2;if(t.arc(o,l,p,f-N/p,D,!0),t.arc(o,l,p,D,g+S/p,!0),S>0){const B=Rs(I,$,o,l);t.arc(B.x,B.y,S,$+Math.PI,g-at)}const F=Rs(_,g,o,l);if(t.lineTo(F.x,F.y),x>0){const B=Rs(_,j,o,l);t.arc(B.x,B.y,x,g-at,j)}}else{t.moveTo(o,l);const L=Math.cos(j)*h+o,J=Math.sin(j)*h+l;t.lineTo(L,J);const D=Math.cos(A)*h+o,F=Math.sin(A)*h+l;t.lineTo(D,F)}t.closePath()}function y3(t,e,a,r,s){const{fullCircles:n,startAngle:o,circumference:l}=e;let c=e.endAngle;if(n){sc(t,e,a,r,c,s);for(let d=0;d<n;++d)t.fill();isNaN(l)||(c=o+(l%Ve||Ve))}return sc(t,e,a,r,c,s),t.fill(),c}function v3(t,e,a,r,s){const{fullCircles:n,startAngle:o,circumference:l,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:p,borderRadius:m}=c,v=c.borderAlign==="inner";if(!d)return;t.setLineDash(h||[]),t.lineDashOffset=p,v?(t.lineWidth=d*2,t.lineJoin=u||"round"):(t.lineWidth=d,t.lineJoin=u||"bevel");let y=e.endAngle;if(n){sc(t,e,a,r,y,s);for(let k=0;k<n;++k)t.stroke();isNaN(l)||(y=o+(l%Ve||Ve))}v&&f3(t,e,y),c.selfJoin&&y-o>=je&&m===0&&u!=="miter"&&g3(t,e,y),n||(sc(t,e,a,r,y,s),t.stroke())}class ri extends or{constructor(e){super(),q(this,"circumference"),q(this,"endAngle"),q(this,"fullCircles"),q(this,"innerRadius"),q(this,"outerRadius"),q(this,"pixelMargin"),q(this,"startAngle"),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,a,r){const s=this.getProps(["x","y"],r),{angle:n,distance:o}=ny(s,{x:e,y:a}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),p=(this.options.spacing+this.options.borderWidth)/2,m=ue(h,c-l),v=Ji(n,l,c)&&l!==c,y=m>=Ve||v,k=jr(o,d+p,u+p);return y&&k}getCenterPoint(e){const{x:a,y:r,startAngle:s,endAngle:n,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,u=(s+n)/2,h=(o+l+d+c)/2;return{x:a+Math.cos(u)*h,y:r+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:a,circumference:r}=this,s=(a.offset||0)/4,n=(a.spacing||0)/2,o=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=r>Ve?Math.floor(r/Ve):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(je,r||0)),d=s*c;e.fillStyle=a.backgroundColor,e.strokeStyle=a.borderColor,y3(e,this,d,n,o),v3(e,this,d,n,o),e.restore()}}q(ri,"id","arc"),q(ri,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),q(ri,"defaultRoutes",{backgroundColor:"backgroundColor"}),q(ri,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function zy(t,e,a=e){t.lineCap=ue(a.borderCapStyle,e.borderCapStyle),t.setLineDash(ue(a.borderDash,e.borderDash)),t.lineDashOffset=ue(a.borderDashOffset,e.borderDashOffset),t.lineJoin=ue(a.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ue(a.borderWidth,e.borderWidth),t.strokeStyle=ue(a.borderColor,e.borderColor)}function w3(t,e,a){t.lineTo(a.x,a.y)}function k3(t){return t.stepped?qN:t.tension||t.cubicInterpolationMode==="monotone"?VN:w3}function Ay(t,e,a={}){const r=t.length,{start:s=0,end:n=r-1}=a,{start:o,end:l}=e,c=Math.max(s,o),d=Math.min(n,l),u=s<o&&n<o||s>l&&n>l;return{count:r,start:c,loop:e.loop,ilen:d<c&&!u?r+d-c:d-c}}function j3(t,e,a,r){const{points:s,options:n}=e,{count:o,start:l,loop:c,ilen:d}=Ay(s,a,r),u=k3(n);let{move:h=!0,reverse:p}=r||{},m,v,y;for(m=0;m<=d;++m)v=s[(l+(p?d-m:m))%o],!v.skip&&(h?(t.moveTo(v.x,v.y),h=!1):u(t,y,v,p,n.stepped),y=v);return c&&(v=s[(l+(p?d:0))%o],u(t,y,v,p,n.stepped)),!!c}function _3(t,e,a,r){const s=e.points,{count:n,start:o,ilen:l}=Ay(s,a,r),{move:c=!0,reverse:d}=r||{};let u=0,h=0,p,m,v,y,k,g;const f=w=>(o+(d?l-w:w))%n,x=()=>{y!==k&&(t.lineTo(u,k),t.lineTo(u,y),t.lineTo(u,g))};for(c&&(m=s[f(0)],t.moveTo(m.x,m.y)),p=0;p<=l;++p){if(m=s[f(p)],m.skip)continue;const w=m.x,S=m.y,N=w|0;N===v?(S<y?y=S:S>k&&(k=S),u=(h*u+w)/++h):(x(),t.lineTo(w,S),v=N,h=0,y=k=S),g=S}x()}function Yu(t){const e=t.options,a=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!a?_3:j3}function N3(t){return t.stepped?kS:t.tension||t.cubicInterpolationMode==="monotone"?jS:es}function S3(t,e,a,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,a,r)&&s.closePath()),zy(t,e.options),t.stroke(s)}function C3(t,e,a,r){const{segments:s,options:n}=e,o=Yu(e);for(const l of s)zy(t,n,l.style),t.beginPath(),o(t,e,l,{start:a,end:a+r-1})&&t.closePath(),t.stroke()}const E3=typeof Path2D=="function";function M3(t,e,a,r){E3&&!e.options.segment?S3(t,e,a,r):C3(t,e,a,r)}class si extends or{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,a){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;mS(this._points,r,e,s,a),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=TS(this,this.options.segment))}first(){const e=this.segments,a=this.points;return e.length&&a[e[0].start]}last(){const e=this.segments,a=this.points,r=e.length;return r&&a[e[r-1].end]}interpolate(e,a){const r=this.options,s=e[a],n=this.points,o=ES(this,{property:a,start:s,end:s});if(!o.length)return;const l=[],c=N3(r);let d,u;for(d=0,u=o.length;d<u;++d){const{start:h,end:p}=o[d],m=n[h],v=n[p];if(m===v){l.push(m);continue}const y=Math.abs((s-m[a])/(v[a]-m[a])),k=c(m,v,y,r.stepped);k[a]=e[a],l.push(k)}return l.length===1?l[0]:l}pathSegment(e,a,r){return Yu(this)(e,this,a,r)}path(e,a,r){const s=this.segments,n=Yu(this);let o=this._loop;a=a||0,r=r||this.points.length-a;for(const l of s)o&=n(e,this,l,{start:a,end:a+r-1});return!!o}draw(e,a,r,s){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(e.save(),M3(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}q(si,"id","line"),q(si,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),q(si,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),q(si,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function p0(t,e,a,r){const s=t.options,{[a]:n}=t.getProps([a],r);return Math.abs(e-n)<s.radius+s.hitRadius}class xl extends or{constructor(e){super(),q(this,"parsed"),q(this,"skip"),q(this,"stop"),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,a,r){const s=this.options,{x:n,y:o}=this.getProps(["x","y"],r);return Math.pow(e-n,2)+Math.pow(a-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,a){return p0(this,e,"x",a)}inYRange(e,a){return p0(this,e,"y",a)}getCenterPoint(e){const{x:a,y:r}=this.getProps(["x","y"],e);return{x:a,y:r}}size(e){e=e||this.options||{};let a=e.radius||0;a=Math.max(a,a&&e.hoverRadius||0);const r=a&&e.borderWidth||0;return(a+r)*2}draw(e,a){const r=this.options;this.skip||r.radius<.1||!Yi(this,a,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,Wu(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}q(xl,"id","point"),q(xl,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),q(xl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Ly(t,e){const{x:a,y:r,base:s,width:n,height:o}=t.getProps(["x","y","base","width","height"],e);let l,c,d,u,h;return t.horizontal?(h=o/2,l=Math.min(a,s),c=Math.max(a,s),d=r-h,u=r+h):(h=n/2,l=a-h,c=a+h,d=Math.min(r,s),u=Math.max(r,s)),{left:l,top:d,right:c,bottom:u}}function _r(t,e,a,r){return t?0:yt(e,a,r)}function D3(t,e,a){const r=t.options.borderWidth,s=t.borderSkipped,n=py(r);return{t:_r(s.top,n.top,0,a),r:_r(s.right,n.right,0,e),b:_r(s.bottom,n.bottom,0,a),l:_r(s.left,n.left,0,e)}}function T3(t,e,a){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,n=ln(s),o=Math.min(e,a),l=t.borderSkipped,c=r||be(s);return{topLeft:_r(!c||l.top||l.left,n.topLeft,0,o),topRight:_r(!c||l.top||l.right,n.topRight,0,o),bottomLeft:_r(!c||l.bottom||l.left,n.bottomLeft,0,o),bottomRight:_r(!c||l.bottom||l.right,n.bottomRight,0,o)}}function O3(t){const e=Ly(t),a=e.right-e.left,r=e.bottom-e.top,s=D3(t,a/2,r/2),n=T3(t,a/2,r/2);return{outer:{x:e.left,y:e.top,w:a,h:r,radius:n},inner:{x:e.left+s.l,y:e.top+s.t,w:a-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,n.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,n.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,n.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,n.bottomRight-Math.max(s.b,s.r))}}}}function Cd(t,e,a,r){const s=e===null,n=a===null,o=t&&!(s&&n)&&Ly(t,r);return o&&(s||jr(e,o.left,o.right))&&(n||jr(a,o.top,o.bottom))}function P3(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function I3(t,e){t.rect(e.x,e.y,e.w,e.h)}function Ed(t,e,a={}){const r=t.x!==a.x?-e:0,s=t.y!==a.y?-e:0,n=(t.x+t.w!==a.x+a.w?e:0)-r,o=(t.y+t.h!==a.y+a.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+n,h:t.h+o,radius:t.radius}}class bl extends or{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:a,options:{borderColor:r,backgroundColor:s}}=this,{inner:n,outer:o}=O3(this),l=P3(o.radius)?tc:I3;e.save(),(o.w!==n.w||o.h!==n.h)&&(e.beginPath(),l(e,Ed(o,a,n)),e.clip(),l(e,Ed(n,-a,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),l(e,Ed(n,a)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,a,r){return Cd(this,e,a,r)}inXRange(e,a){return Cd(this,e,null,a)}inYRange(e,a){return Cd(this,null,e,a)}getCenterPoint(e){const{x:a,y:r,base:s,horizontal:n}=this.getProps(["x","y","base","horizontal"],e);return{x:n?(a+s)/2:a,y:n?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}q(bl,"id","bar"),q(bl,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),q(bl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const m0=(t,e)=>{let{boxHeight:a=e,boxWidth:r=e}=t;return t.usePointStyle&&(a=Math.min(a,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:a,itemHeight:Math.max(e,a)}},z3=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class g0 extends or{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,a,r){this.maxWidth=e,this.maxHeight=a,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let a=Te(e.generateLabels,[this.chart],this)||[];e.filter&&(a=a.filter(r=>e.filter(r,this.chart.data))),e.sort&&(a=a.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:e,ctx:a}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=vt(r.font),n=s.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=m0(r,n);let d,u;a.font=s.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,n,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,s,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,a,r,s){const{ctx:n,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=s+l;let h=e;n.textAlign="left",n.textBaseline="middle";let p=-1,m=-u;return this.legendItems.forEach((v,y)=>{const k=r+a/2+n.measureText(v.text).width;(y===0||d[d.length-1]+k+2*l>o)&&(h+=u,d[d.length-(y>0?0:1)]=0,m+=u,p++),c[y]={left:0,top:m,row:p,width:k,height:s},d[d.length-1]+=k+l}),h}_fitCols(e,a,r,s){const{ctx:n,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-e;let h=l,p=0,m=0,v=0,y=0;return this.legendItems.forEach((k,g)=>{const{itemWidth:f,itemHeight:x}=A3(r,a,n,k,s);g>0&&m+x+2*l>u&&(h+=p+l,d.push({width:p,height:m}),v+=p+l,y++,p=m=0),c[g]={left:v,top:m,col:y,width:f,height:x},p=Math.max(p,f),m+=x+l}),h+=p,d.push({width:p,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:r,labels:{padding:s},rtl:n}}=this,o=cn(n,this.left,this.width);if(this.isHorizontal()){let l=0,c=ft(r,this.left+s,this.right-this.lineWidths[l]);for(const d of a)l!==d.row&&(l=d.row,c=ft(r,this.left+s,this.right-this.lineWidths[l])),d.top+=this.top+e+s,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+s}else{let l=0,c=ft(r,this.top+e+s,this.bottom-this.columnSizes[l].height);for(const d of a)d.col!==l&&(l=d.col,c=ft(r,this.top+e+s,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+s,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;gp(e,this),this._draw(),fp(e)}}_draw(){const{options:e,columnSizes:a,lineWidths:r,ctx:s}=this,{align:n,labels:o}=e,l=Ge.color,c=cn(e.rtl,this.left,this.width),d=vt(o.font),{padding:u}=o,h=d.size,p=h/2;let m;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=d.string;const{boxWidth:v,boxHeight:y,itemHeight:k}=m0(o,h),g=function(N,_,b){if(isNaN(v)||v<=0||isNaN(y)||y<0)return;s.save();const j=ue(b.lineWidth,1);if(s.fillStyle=ue(b.fillStyle,l),s.lineCap=ue(b.lineCap,"butt"),s.lineDashOffset=ue(b.lineDashOffset,0),s.lineJoin=ue(b.lineJoin,"miter"),s.lineWidth=j,s.strokeStyle=ue(b.strokeStyle,l),s.setLineDash(ue(b.lineDash,[])),o.usePointStyle){const A={radius:y*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:j},I=c.xPlus(N,v/2),z=_+p;hy(s,A,I,z,o.pointStyleWidth&&v)}else{const A=_+Math.max((h-y)/2,0),I=c.leftForLtr(N,v),z=ln(b.borderRadius);s.beginPath(),Object.values(z).some($=>$!==0)?tc(s,{x:I,y:A,w:v,h:y,radius:z}):s.rect(I,A,v,y),s.fill(),j!==0&&s.stroke()}s.restore()},f=function(N,_,b){Ki(s,b.text,N,_+k/2,d,{strikethrough:b.hidden,textAlign:c.textAlign(b.textAlign)})},x=this.isHorizontal(),w=this._computeTitleHeight();x?m={x:ft(n,this.left+u,this.right-r[0]),y:this.top+u+w,line:0}:m={x:this.left+u,y:ft(n,this.top+w+u,this.bottom-a[0].height),line:0},yy(this.ctx,e.textDirection);const S=k+u;this.legendItems.forEach((N,_)=>{s.strokeStyle=N.fontColor,s.fillStyle=N.fontColor;const b=s.measureText(N.text).width,j=c.textAlign(N.textAlign||(N.textAlign=o.textAlign)),A=v+p+b;let I=m.x,z=m.y;c.setWidth(this.width),x?_>0&&I+A+u>this.right&&(z=m.y+=S,m.line++,I=m.x=ft(n,this.left+u,this.right-r[m.line])):_>0&&z+S>this.bottom&&(I=m.x=I+a[m.line].width+u,m.line++,z=m.y=ft(n,this.top+w+u,this.bottom-a[m.line].height));const $=c.x(I);if(g($,z,N),I=TN(j,I+v+p,x?I+A:this.right,e.rtl),f(c.x(I),z,N),x)m.x+=A+u;else if(typeof N.text!="string"){const W=d.lineHeight;m.y+=Ry(N,W)+u}else m.y+=S}),vy(this.ctx,e.textDirection)}drawTitle(){const e=this.options,a=e.title,r=vt(a.font),s=ca(a.padding);if(!a.display)return;const n=cn(e.rtl,this.left,this.width),o=this.ctx,l=a.position,c=r.size/2,d=s.top+c;let u,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+d,h=ft(e.align,h,this.right-p);else{const v=this.columnSizes.reduce((y,k)=>Math.max(y,k.height),0);u=d+ft(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const m=ft(l,h,h+p);o.textAlign=n.textAlign(hp(l)),o.textBaseline="middle",o.strokeStyle=a.color,o.fillStyle=a.color,o.font=r.string,Ki(o,a.text,m,u,r)}_computeTitleHeight(){const e=this.options.title,a=vt(e.font),r=ca(e.padding);return e.display?a.lineHeight+r.height:0}_getLegendItemAt(e,a){let r,s,n;if(jr(e,this.left,this.right)&&jr(a,this.top,this.bottom)){for(n=this.legendHitBoxes,r=0;r<n.length;++r)if(s=n[r],jr(e,s.left,s.left+s.width)&&jr(a,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const a=this.options;if(!F3(e.type,a))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,n=z3(s,r);s&&!n&&Te(a.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!n&&Te(a.onHover,[e,r,this],this)}else r&&Te(a.onClick,[e,r,this],this)}}function A3(t,e,a,r,s){const n=L3(r,t,e,a),o=R3(s,r,e.lineHeight);return{itemWidth:n,itemHeight:o}}function L3(t,e,a,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((n,o)=>n.length>o.length?n:o)),e+a.size/2+r.measureText(s).width}function R3(t,e,a){let r=t;return typeof e.text!="string"&&(r=Ry(e,a)),r}function Ry(t,e){const a=t.text?t.text.length:0;return e*a}function F3(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var $3={id:"legend",_element:g0,start(t,e,a){const r=t.legend=new g0({ctx:t.ctx,options:a,chart:t});sa.configure(t,r,a),sa.addBox(t,r)},stop(t){sa.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,a){const r=t.legend;sa.configure(t,r,a),r.options=a},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,a){const r=e.datasetIndex,s=a.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:a,pointStyle:r,textAlign:s,color:n,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(a?0:void 0),u=ca(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:n,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:r||d.pointStyle,rotation:d.rotation,textAlign:s||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Fy extends or{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,a){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=a;const s=et(r.text)?r.text.length:1;this._padding=ca(r.padding);const n=s*vt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:a,left:r,bottom:s,right:n,options:o}=this,l=o.align;let c=0,d,u,h;return this.isHorizontal()?(u=ft(l,r,n),h=a+e,d=n-r):(o.position==="left"?(u=r+e,h=ft(l,s,a),c=je*-.5):(u=n-e,h=ft(l,a,s),c=je*.5),d=s-a),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,a=this.options;if(!a.display)return;const r=vt(a.font),s=r.lineHeight/2+this._padding.top,{titleX:n,titleY:o,maxWidth:l,rotation:c}=this._drawArgs(s);Ki(e,a.text,0,0,r,{color:a.color,maxWidth:l,rotation:c,textAlign:hp(a.align),textBaseline:"middle",translation:[n,o]})}}function U3(t,e){const a=new Fy({ctx:t.ctx,options:e,chart:t});sa.configure(t,a,e),sa.addBox(t,a),t.titleBlock=a}var B3={id:"title",_element:Fy,start(t,e,a){U3(t,a)},stop(t){const e=t.titleBlock;sa.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,a){const r=t.titleBlock;sa.configure(t,r,a),r.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ki={average(t){if(!t.length)return!1;let e,a,r=new Set,s=0,n=0;for(e=0,a=t.length;e<a;++e){const o=t[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();r.add(l.x),s+=l.y,++n}}return n===0||r.size===0?!1:{x:[...r].reduce((o,l)=>o+l)/r.size,y:s/n}},nearest(t,e){if(!t.length)return!1;let a=e.x,r=e.y,s=Number.POSITIVE_INFINITY,n,o,l;for(n=0,o=t.length;n<o;++n){const c=t[n].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=Vu(e,d);u<s&&(s=u,l=c)}}if(l){const c=l.tooltipPosition();a=c.x,r=c.y}return{x:a,y:r}}};function Sa(t,e){return e&&(et(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ba(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function q3(t,e){const{element:a,datasetIndex:r,index:s}=e,n=t.getDatasetMeta(r).controller,{label:o,value:l}=n.getLabelAndValue(s);return{chart:t,label:o,parsed:n.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:l,dataset:n.getDataset(),dataIndex:s,datasetIndex:r,element:a}}function f0(t,e){const a=t.chart.ctx,{body:r,footer:s,title:n}=t,{boxWidth:o,boxHeight:l}=e,c=vt(e.bodyFont),d=vt(e.titleFont),u=vt(e.footerFont),h=n.length,p=s.length,m=r.length,v=ca(e.padding);let y=v.height,k=0,g=r.reduce((w,S)=>w+S.before.length+S.lines.length+S.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,h&&(y+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),g){const w=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;y+=m*w+(g-m)*c.lineHeight+(g-1)*e.bodySpacing}p&&(y+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let f=0;const x=function(w){k=Math.max(k,a.measureText(w).width+f)};return a.save(),a.font=d.string,ke(t.title,x),a.font=c.string,ke(t.beforeBody.concat(t.afterBody),x),f=e.displayColors?o+2+e.boxPadding:0,ke(r,w=>{ke(w.before,x),ke(w.lines,x),ke(w.after,x)}),f=0,a.font=u.string,ke(t.footer,x),a.restore(),k+=v.width,{width:k,height:y}}function V3(t,e){const{y:a,height:r}=e;return a<r/2?"top":a>t.height-r/2?"bottom":"center"}function H3(t,e,a,r){const{x:s,width:n}=r,o=a.caretSize+a.caretPadding;if(t==="left"&&s+n+o>e.width||t==="right"&&s-n-o<0)return!0}function W3(t,e,a,r){const{x:s,width:n}=a,{width:o,chartArea:{left:l,right:c}}=t;let d="center";return r==="center"?d=s<=(l+c)/2?"left":"right":s<=n/2?d="left":s>=o-n/2&&(d="right"),H3(d,t,e,a)&&(d="center"),d}function x0(t,e,a){const r=a.yAlign||e.yAlign||V3(t,a);return{xAlign:a.xAlign||e.xAlign||W3(t,e,a,r),yAlign:r}}function G3(t,e){let{x:a,width:r}=t;return e==="right"?a-=r:e==="center"&&(a-=r/2),a}function J3(t,e,a){let{y:r,height:s}=t;return e==="top"?r+=a:e==="bottom"?r-=s+a:r-=s/2,r}function b0(t,e,a,r){const{caretSize:s,caretPadding:n,cornerRadius:o}=t,{xAlign:l,yAlign:c}=a,d=s+n,{topLeft:u,topRight:h,bottomLeft:p,bottomRight:m}=ln(o);let v=G3(e,l);const y=J3(e,c,d);return c==="center"?l==="left"?v+=d:l==="right"&&(v-=d):l==="left"?v-=Math.max(u,p)+s:l==="right"&&(v+=Math.max(h,m)+s),{x:yt(v,0,r.width-e.width),y:yt(y,0,r.height-e.height)}}function Qo(t,e,a){const r=ca(a.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function y0(t){return Sa([],Ba(t))}function Y3(t,e,a){return Ds(t,{tooltip:e,tooltipItems:a,type:"tooltip"})}function v0(t,e){const a=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return a?t.override(a):t}const $y={beforeTitle:Fa,title(t){if(t.length>0){const e=t[0],a=e.chart.data.labels,r=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return a[e.dataIndex]}return""},afterTitle:Fa,beforeBody:Fa,beforeLabel:Fa,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const a=t.formattedValue;return ve(a)||(e+=a),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Fa,afterBody:Fa,beforeFooter:Fa,footer:Fa,afterFooter:Fa};function Mt(t,e,a,r){const s=t[e].call(a,r);return typeof s>"u"?$y[e].call(a,r):s}class Ku extends or{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const a=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&a.options.animation&&r.animations,n=new ky(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=Y3(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,a){const{callbacks:r}=a,s=Mt(r,"beforeTitle",this,e),n=Mt(r,"title",this,e),o=Mt(r,"afterTitle",this,e);let l=[];return l=Sa(l,Ba(s)),l=Sa(l,Ba(n)),l=Sa(l,Ba(o)),l}getBeforeBody(e,a){return y0(Mt(a.callbacks,"beforeBody",this,e))}getBody(e,a){const{callbacks:r}=a,s=[];return ke(e,n=>{const o={before:[],lines:[],after:[]},l=v0(r,n);Sa(o.before,Ba(Mt(l,"beforeLabel",this,n))),Sa(o.lines,Mt(l,"label",this,n)),Sa(o.after,Ba(Mt(l,"afterLabel",this,n))),s.push(o)}),s}getAfterBody(e,a){return y0(Mt(a.callbacks,"afterBody",this,e))}getFooter(e,a){const{callbacks:r}=a,s=Mt(r,"beforeFooter",this,e),n=Mt(r,"footer",this,e),o=Mt(r,"afterFooter",this,e);let l=[];return l=Sa(l,Ba(s)),l=Sa(l,Ba(n)),l=Sa(l,Ba(o)),l}_createItems(e){const a=this._active,r=this.chart.data,s=[],n=[],o=[];let l=[],c,d;for(c=0,d=a.length;c<d;++c)l.push(q3(this.chart,a[c]));return e.filter&&(l=l.filter((u,h,p)=>e.filter(u,h,p,r))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,r))),ke(l,u=>{const h=v0(e.callbacks,u);s.push(Mt(h,"labelColor",this,u)),n.push(Mt(h,"labelPointStyle",this,u)),o.push(Mt(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=n,this.labelTextColors=o,this.dataPoints=l,l}update(e,a){const r=this.options.setContext(this.getContext()),s=this._active;let n,o=[];if(!s.length)this.opacity!==0&&(n={opacity:0});else{const l=ki[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const c=this._size=f0(this,r),d=Object.assign({},l,c),u=x0(this.chart,r,d),h=b0(r,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,n={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(e,a,r,s){const n=this.getCaretPosition(e,r,s);a.lineTo(n.x1,n.y1),a.lineTo(n.x2,n.y2),a.lineTo(n.x3,n.y3)}getCaretPosition(e,a,r){const{xAlign:s,yAlign:n}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=ln(l),{x:p,y:m}=e,{width:v,height:y}=a;let k,g,f,x,w,S;return n==="center"?(w=m+y/2,s==="left"?(k=p,g=k-o,x=w+o,S=w-o):(k=p+v,g=k+o,x=w-o,S=w+o),f=k):(s==="left"?g=p+Math.max(c,u)+o:s==="right"?g=p+v-Math.max(d,h)-o:g=this.caretX,n==="top"?(x=m,w=x-o,k=g-o,f=g+o):(x=m+y,w=x+o,k=g+o,f=g-o),S=x),{x1:k,x2:g,x3:f,y1:x,y2:w,y3:S}}drawTitle(e,a,r){const s=this.title,n=s.length;let o,l,c;if(n){const d=cn(r.rtl,this.x,this.width);for(e.x=Qo(this,r.titleAlign,r),a.textAlign=d.textAlign(r.titleAlign),a.textBaseline="middle",o=vt(r.titleFont),l=r.titleSpacing,a.fillStyle=r.titleColor,a.font=o.string,c=0;c<n;++c)a.fillText(s[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===n&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,a,r,s,n){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:d}=n,u=vt(n.bodyFont),h=Qo(this,"left",n),p=s.x(h),m=c<u.lineHeight?(u.lineHeight-c)/2:0,v=a.y+m;if(n.usePointStyle){const y={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},k=s.leftForLtr(p,d)+d/2,g=v+c/2;e.strokeStyle=n.multiKeyBackground,e.fillStyle=n.multiKeyBackground,Wu(e,y,k,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Wu(e,y,k,g)}else{e.lineWidth=be(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=s.leftForLtr(p,d),k=s.leftForLtr(s.xPlus(p,1),d-2),g=ln(o.borderRadius);Object.values(g).some(f=>f!==0)?(e.beginPath(),e.fillStyle=n.multiKeyBackground,tc(e,{x:y,y:v,w:d,h:c,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),tc(e,{x:k,y:v+1,w:d-2,h:c-2,radius:g}),e.fill()):(e.fillStyle=n.multiKeyBackground,e.fillRect(y,v,d,c),e.strokeRect(y,v,d,c),e.fillStyle=o.backgroundColor,e.fillRect(k,v+1,d-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,a,r){const{body:s}=this,{bodySpacing:n,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=r,h=vt(r.bodyFont);let p=h.lineHeight,m=0;const v=cn(r.rtl,this.x,this.width),y=function(b){a.fillText(b,v.x(e.x+m),e.y+p/2),e.y+=p+n},k=v.textAlign(o);let g,f,x,w,S,N,_;for(a.textAlign=o,a.textBaseline="middle",a.font=h.string,e.x=Qo(this,k,r),a.fillStyle=r.bodyColor,ke(this.beforeBody,y),m=l&&k!=="right"?o==="center"?d/2+u:d+2+u:0,w=0,N=s.length;w<N;++w){for(g=s[w],f=this.labelTextColors[w],a.fillStyle=f,ke(g.before,y),x=g.lines,l&&x.length&&(this._drawColorBox(a,e,w,v,r),p=Math.max(h.lineHeight,c)),S=0,_=x.length;S<_;++S)y(x[S]),p=h.lineHeight;ke(g.after,y)}m=0,p=h.lineHeight,ke(this.afterBody,y),e.y-=n}drawFooter(e,a,r){const s=this.footer,n=s.length;let o,l;if(n){const c=cn(r.rtl,this.x,this.width);for(e.x=Qo(this,r.footerAlign,r),e.y+=r.footerMarginTop,a.textAlign=c.textAlign(r.footerAlign),a.textBaseline="middle",o=vt(r.footerFont),a.fillStyle=r.footerColor,a.font=o.string,l=0;l<n;++l)a.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,a,r,s){const{xAlign:n,yAlign:o}=this,{x:l,y:c}=e,{width:d,height:u}=r,{topLeft:h,topRight:p,bottomLeft:m,bottomRight:v}=ln(s.cornerRadius);a.fillStyle=s.backgroundColor,a.strokeStyle=s.borderColor,a.lineWidth=s.borderWidth,a.beginPath(),a.moveTo(l+h,c),o==="top"&&this.drawCaret(e,a,r,s),a.lineTo(l+d-p,c),a.quadraticCurveTo(l+d,c,l+d,c+p),o==="center"&&n==="right"&&this.drawCaret(e,a,r,s),a.lineTo(l+d,c+u-v),a.quadraticCurveTo(l+d,c+u,l+d-v,c+u),o==="bottom"&&this.drawCaret(e,a,r,s),a.lineTo(l+m,c+u),a.quadraticCurveTo(l,c+u,l,c+u-m),o==="center"&&n==="left"&&this.drawCaret(e,a,r,s),a.lineTo(l,c+h),a.quadraticCurveTo(l,c,l+h,c),a.closePath(),a.fill(),s.borderWidth>0&&a.stroke()}_updateAnimationTarget(e){const a=this.chart,r=this.$animations,s=r&&r.x,n=r&&r.y;if(s||n){const o=ki[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=f0(this,e),c=Object.assign({},o,this._size),d=x0(a,e,c),u=b0(e,c,d,a);(s._to!==u.x||n._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const a=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(a);const s={width:this.width,height:this.height},n={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=ca(a.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(n,e,s,a),yy(e,a.textDirection),n.y+=o.top,this.drawTitle(n,e,a),this.drawBody(n,e,a),this.drawFooter(n,e,a),vy(e,a.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,a){const r=this._active,s=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),n=!Ql(r,s),o=this._positionChanged(s,a);(n||o)&&(this._active=s,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,a,r=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,n=this._active||[],o=this._getActiveElements(e,n,a,r),l=this._positionChanged(o,e),c=a||!Ql(o,n)||l;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,a))),c}_getActiveElements(e,a,r,s){const n=this.options;if(e.type==="mouseout")return[];if(!s)return a.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,n.mode,n,r);return n.reverse&&o.reverse(),o}_positionChanged(e,a){const{caretX:r,caretY:s,options:n}=this,o=ki[n.position].call(this,e,a);return o!==!1&&(r!==o.x||s!==o.y)}}q(Ku,"positioners",ki);var K3={id:"tooltip",_element:Ku,positioners:ki,afterInit(t,e,a){a&&(t.tooltip=new Ku({chart:t,options:a}))},beforeUpdate(t,e,a){t.tooltip&&t.tooltip.initialize(a)},reset(t,e,a){t.tooltip&&t.tooltip.initialize(a)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const a={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",a)}},afterEvent(t,e){if(t.tooltip){const a=e.replay;t.tooltip.handleEvent(e.event,a,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:$y},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const X3=(t,e,a,r)=>(typeof e=="string"?(a=t.push(e)-1,r.unshift({index:a,label:e})):isNaN(e)&&(a=null),a);function Q3(t,e,a,r){const s=t.indexOf(e);if(s===-1)return X3(t,e,a,r);const n=t.lastIndexOf(e);return s!==n?a:s}const Z3=(t,e)=>t===null?null:yt(Math.round(t),0,e);function Uy(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Xu extends En{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const a=this._addedLabels;if(a.length){const r=this.getLabels();for(const{index:s,label:n}of a)r[s]===n&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,a){if(ve(e))return null;const r=this.getLabels();return a=isFinite(a)&&r[a]===e?a:Q3(r,e,ue(a,e),this._addedLabels),Z3(a,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:a}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),a||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,a=this.max,r=this.options.offset,s=[];let n=this.getLabels();n=e===0&&a===n.length-1?n:n.slice(e,a+1),this._valueRange=Math.max(n.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=a;o++)s.push({value:o});return s}getLabelForValue(e){return Uy.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const a=this.ticks;return e<0||e>a.length-1?null:this.getPixelForValue(a[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}q(Xu,"id","category"),q(Xu,"defaults",{ticks:{callback:Uy}});function e5(t,e){const a=[],{bounds:r,step:s,min:n,max:o,precision:l,count:c,maxTicks:d,maxDigits:u,includeBounds:h}=t,p=s||1,m=d-1,{min:v,max:y}=e,k=!ve(n),g=!ve(o),f=!ve(c),x=(y-v)/(u+1);let w=jg((y-v)/m/p)*p,S,N,_,b;if(w<1e-14&&!k&&!g)return[{value:v},{value:y}];b=Math.ceil(y/w)-Math.floor(v/w),b>m&&(w=jg(b*w/m/p)*p),ve(l)||(S=Math.pow(10,l),w=Math.ceil(w*S)/S),r==="ticks"?(N=Math.floor(v/w)*w,_=Math.ceil(y/w)*w):(N=v,_=y),k&&g&&s&&kN((o-n)/s,w/1e3)?(b=Math.round(Math.min((o-n)/w,d)),w=(o-n)/b,N=n,_=o):f?(N=k?n:N,_=g?o:_,b=c-1,w=(_-N)/b):(b=(_-N)/w,yi(b,Math.round(b),w/1e3)?b=Math.round(b):b=Math.ceil(b));const j=Math.max(_g(w),_g(N));S=Math.pow(10,ve(l)?j:l),N=Math.round(N*S)/S,_=Math.round(_*S)/S;let A=0;for(k&&(h&&N!==n?(a.push({value:n}),N<n&&A++,yi(Math.round((N+A*w)*S)/S,n,w0(n,x,t))&&A++):N<n&&A++);A<b;++A){const I=Math.round((N+A*w)*S)/S;if(g&&I>o)break;a.push({value:I})}return g&&h&&_!==o?a.length&&yi(a[a.length-1].value,o,w0(o,x,t))?a[a.length-1].value=o:a.push({value:o}):(!g||_===o)&&a.push({value:_}),a}function w0(t,e,{horizontal:a,minRotation:r}){const s=Qa(r),n=(a?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/n,o)}class t5 extends En{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,a){return ve(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:a,maxDefined:r}=this.getUserBounds();let{min:s,max:n}=this;const o=c=>s=a?s:c,l=c=>n=r?n:c;if(e){const c=za(s),d=za(n);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(s===n){let c=n===0?1:Math.abs(n*.05);l(n+c),e||o(s-c)}this.min=s,this.max=n}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:a,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),a=a||11),a&&(s=Math.min(a,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,a=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},n=this._range||this,o=e5(s,n);return e.bounds==="ticks"&&jN(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let a=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-a)/Math.max(e.length-1,1)/2;a-=s,r+=s}this._startValue=a,this._endValue=r,this._valueRange=r-a}getLabelForValue(e){return mp(e,this.chart.options.locale,this.options.ticks.format)}}class Qu extends t5{determineDataLimits(){const{min:e,max:a}=this.getMinMax(!0);this.min=la(e)?e:0,this.max=la(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),a=e?this.width:this.height,r=Qa(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,n.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}q(Qu,"id","linear"),q(Qu,"defaults",{ticks:{callback:uy.formatters.numeric}});const Oc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ot=Object.keys(Oc);function k0(t,e){return t-e}function j0(t,e){if(ve(e))return null;const a=t._adapter,{parser:r,round:s,isoWeekday:n}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),la(o)||(o=typeof r=="string"?a.parse(o,r):a.parse(o)),o===null?null:(s&&(o=s==="week"&&(Gi(n)||n===!0)?a.startOf(o,"isoWeek",n):a.startOf(o,s)),+o)}function _0(t,e,a,r){const s=Ot.length;for(let n=Ot.indexOf(t);n<s-1;++n){const o=Oc[Ot[n]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((a-e)/(l*o.size))<=r)return Ot[n]}return Ot[s-1]}function a5(t,e,a,r,s){for(let n=Ot.length-1;n>=Ot.indexOf(a);n--){const o=Ot[n];if(Oc[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return Ot[a?Ot.indexOf(a):0]}function r5(t){for(let e=Ot.indexOf(t)+1,a=Ot.length;e<a;++e)if(Oc[Ot[e]].common)return Ot[e]}function N0(t,e,a){if(!a)t[e]=!0;else if(a.length){const{lo:r,hi:s}=up(a,e),n=a[r]>=e?a[r]:a[s];t[n]=!0}}function s5(t,e,a,r){const s=t._adapter,n=+s.startOf(e[0].value,r),o=e[e.length-1].value;let l,c;for(l=n;l<=o;l=+s.add(l,1,r))c=a[l],c>=0&&(e[c].major=!0);return e}function S0(t,e,a){const r=[],s={},n=e.length;let o,l;for(o=0;o<n;++o)l=e[o],s[l]=o,r.push({value:l,major:!1});return n===0||!a?r:s5(t,r,s,a)}class Qi extends En{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,a={}){const r=e.time||(e.time={}),s=this._adapter=new Ny._date(e.adapters.date);s.init(a),bi(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=a.normalized}parse(e,a){return e===void 0?null:j0(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,a=this._adapter,r=e.time.unit||"day";let{min:s,max:n,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!l&&!isNaN(d.max)&&(n=Math.max(n,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=la(s)&&!isNaN(s)?s:+a.startOf(Date.now(),r),n=la(n)&&!isNaN(n)?n:+a.endOf(Date.now(),r)+1,this.min=Math.min(s,n-1),this.max=Math.max(s+1,n)}_getLabelBounds(){const e=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(a=e[0],r=e[e.length-1]),{min:a,max:r}}buildTicks(){const e=this.options,a=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const n=this.min,o=this.max,l=EN(s,n,o);return this._unit=a.unit||(r.autoSkip?_0(a.minUnit,this.min,this.max,this._getLabelCapacity(n)):a5(this,l.length,a.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:r5(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),S0(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let a=0,r=0,s,n;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?a=1-s:a=(this.getDecimalForValue(e[1])-s)/2,n=this.getDecimalForValue(e[e.length-1]),e.length===1?r=n:r=(n-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;a=yt(a,0,o),r=yt(r,0,o),this._offsets={start:a,end:r,factor:1/(a+1+r)}}_generate(){const e=this._adapter,a=this.min,r=this.max,s=this.options,n=s.time,o=n.unit||_0(n.minUnit,a,r,this._getLabelCapacity(a)),l=ue(s.ticks.stepSize,1),c=o==="week"?n.isoWeekday:!1,d=Gi(c)||c===!0,u={};let h=a,p,m;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":o),e.diff(r,a,o)>1e5*l)throw new Error(a+" and "+r+" are too far apart with stepSize of "+l+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(p=h,m=0;p<r;p=+e.add(p,l,o),m++)N0(u,p,v);return(p===r||s.bounds==="ticks"||m===1)&&N0(u,p,v),Object.keys(u).sort(k0).map(y=>+y)}getLabelForValue(e){const a=this._adapter,r=this.options.time;return r.tooltipFormat?a.format(e,r.tooltipFormat):a.format(e,r.displayFormats.datetime)}format(e,a){const r=this.options.time.displayFormats,s=this._unit,n=a||r[s];return this._adapter.format(e,n)}_tickFormatFunction(e,a,r,s){const n=this.options,o=n.ticks.callback;if(o)return Te(o,[e,a,r],this);const l=n.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],p=r[a],m=d&&h&&p&&p.major;return this._adapter.format(e,s||(m?h:u))}generateTickLabels(e){let a,r,s;for(a=0,r=e.length;a<r;++a)s=e[a],s.label=this._tickFormatFunction(s.value,a,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const a=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((a.start+r)*a.factor)}getValueForPixel(e){const a=this._offsets,r=this.getDecimalForPixel(e)/a.factor-a.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const a=this.options.ticks,r=this.ctx.measureText(e).width,s=Qa(this.isHorizontal()?a.maxRotation:a.minRotation),n=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*n+l*o,h:r*o+l*n}}_getLabelCapacity(e){const a=this.options.time,r=a.displayFormats,s=r[a.unit]||r.millisecond,n=this._tickFormatFunction(e,0,S0(this,[e],this._majorUnit),s),o=this._getLabelSize(n),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],a,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(a=0,r=s.length;a<r;++a)e=e.concat(s[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let a,r;if(e.length)return e;const s=this.getLabels();for(a=0,r=s.length;a<r;++a)e.push(j0(this,s[a]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return oy(e.sort(k0))}}q(Qi,"id","time"),q(Qi,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Zo(t,e,a){let r=0,s=t.length-1,n,o,l,c;a?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=ls(t,"pos",e)),{pos:n,time:l}=t[r],{pos:o,time:c}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=ls(t,"time",e)),{time:n,pos:l}=t[r],{time:o,pos:c}=t[s]);const d=o-n;return d?l+(c-l)*(e-n)/d:l}class C0 extends Qi{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(e);this._minPos=Zo(a,this.min),this._tableRange=Zo(a,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:a,max:r}=this,s=[],n=[];let o,l,c,d,u;for(o=0,l=e.length;o<l;++o)d=e[o],d>=a&&d<=r&&s.push(d);if(s.length<2)return[{time:a,pos:0},{time:r,pos:1}];for(o=0,l=s.length;o<l;++o)u=s[o+1],c=s[o-1],d=s[o],Math.round((u+c)/2)!==d&&n.push({time:d,pos:o/(l-1)});return n}_generate(){const e=this.min,a=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(a)||r.length===1)&&r.push(a),r.sort((s,n)=>s-n)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const a=this.getDataTimestamps(),r=this.getLabelTimestamps();return a.length&&r.length?e=this.normalize(a.concat(r)):e=a.length?a:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Zo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const a=this._offsets,r=this.getDecimalForPixel(e)/a.factor-a.end;return Zo(this._table,r*this._tableRange+this._minPos,!0)}}q(C0,"id","timeseries"),q(C0,"defaults",Qi.defaults);const By="label";function E0(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function n5(t,e){const a=t.options;a&&e&&Object.assign(a,e)}function qy(t,e){t.labels=e}function Vy(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:By;const r=[];t.datasets=e.map(s=>{const n=t.datasets.find(o=>o[a]===s[a]);return!n||!s.data||r.includes(n)?{...s}:(r.push(n),Object.assign(n,s),n)})}function i5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:By;const a={labels:[],datasets:[]};return qy(a,t.labels),Vy(a,t.datasets,e),a}function o5(t,e){const{height:a=150,width:r=300,redraw:s=!1,datasetIdKey:n,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...p}=t,m=T.useRef(null),v=T.useRef(null),y=()=>{m.current&&(v.current=new Tc(m.current,{type:o,data:i5(l,n),options:c&&{...c},plugins:d}),E0(e,v.current))},k=()=>{E0(e,null),v.current&&(v.current.destroy(),v.current=null)};return T.useEffect(()=>{!s&&v.current&&c&&n5(v.current,c)},[s,c]),T.useEffect(()=>{!s&&v.current&&qy(v.current.config.data,l.labels)},[s,l.labels]),T.useEffect(()=>{!s&&v.current&&l.datasets&&Vy(v.current.config.data,l.datasets,n)},[s,l.datasets]),T.useEffect(()=>{v.current&&(s?(k(),setTimeout(y)):v.current.update(h))},[s,c,l.labels,l.datasets,h]),T.useEffect(()=>{v.current&&(k(),setTimeout(y))},[o]),T.useEffect(()=>(y(),()=>k()),[]),oh.createElement("canvas",{ref:m,role:"img",height:a,width:r,...p},u)}const l5=T.forwardRef(o5);function _p(t,e){return Tc.register(e),T.forwardRef((a,r)=>oh.createElement(l5,{...a,ref:r,type:t}))}const M0=_p("line",ml),c5=_p("bar",pl),d5=_p("doughnut",ti);function ie(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Oe(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Pc(t,e){const a=ie(t);return isNaN(e)?Oe(t,NaN):(e&&a.setDate(a.getDate()+e),a)}function Np(t,e){const a=ie(t);if(isNaN(e))return Oe(t,NaN);if(!e)return a;const r=a.getDate(),s=Oe(t,a.getTime());s.setMonth(a.getMonth()+e+1,0);const n=s.getDate();return r>=n?s:(a.setFullYear(s.getFullYear(),s.getMonth(),r),a)}function Ic(t,e){const a=+ie(t);return Oe(t,a+e)}const Hy=6048e5,u5=864e5,ho=6e4,po=36e5,h5=1e3;function p5(t,e){return Ic(t,e*po)}let m5={};function Ts(){return m5}function Aa(t,e){var a,r,s,n;const o=Ts(),l=(e==null?void 0:e.weekStartsOn)??((r=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:r.weekStartsOn)??o.weekStartsOn??((n=(s=o.locale)==null?void 0:s.options)==null?void 0:n.weekStartsOn)??0,c=ie(t),d=c.getDay(),u=(d<l?7:0)+d-l;return c.setDate(c.getDate()-u),c.setHours(0,0,0,0),c}function kn(t){return Aa(t,{weekStartsOn:1})}function Wy(t){const e=ie(t),a=e.getFullYear(),r=Oe(t,0);r.setFullYear(a+1,0,4),r.setHours(0,0,0,0);const s=kn(r),n=Oe(t,0);n.setFullYear(a,0,4),n.setHours(0,0,0,0);const o=kn(n);return e.getTime()>=s.getTime()?a+1:e.getTime()>=o.getTime()?a:a-1}function Zu(t){const e=ie(t);return e.setHours(0,0,0,0),e}function nc(t){const e=ie(t),a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return a.setUTCFullYear(e.getFullYear()),+t-+a}function Gy(t,e){const a=Zu(t),r=Zu(e),s=+a-nc(a),n=+r-nc(r);return Math.round((s-n)/u5)}function g5(t){const e=Wy(t),a=Oe(t,0);return a.setFullYear(e,0,4),a.setHours(0,0,0,0),kn(a)}function f5(t,e){return Ic(t,e*ho)}function x5(t,e){const a=e*3;return Np(t,a)}function b5(t,e){return Ic(t,e*1e3)}function y5(t,e){const a=e*7;return Pc(t,a)}function v5(t,e){return Np(t,e*12)}function ji(t,e){const a=ie(t),r=ie(e),s=a.getTime()-r.getTime();return s<0?-1:s>0?1:s}function w5(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Jy(t){if(!w5(t)&&typeof t!="number")return!1;const e=ie(t);return!isNaN(Number(e))}function k5(t,e){const a=ie(t),r=ie(e),s=a.getFullYear()-r.getFullYear(),n=a.getMonth()-r.getMonth();return s*12+n}function j5(t,e){const a=ie(t),r=ie(e);return a.getFullYear()-r.getFullYear()}function Yy(t,e){const a=ie(t),r=ie(e),s=D0(a,r),n=Math.abs(Gy(a,r));a.setDate(a.getDate()-s*n);const o=+(D0(a,r)===-s),l=s*(n-o);return l===0?0:l}function D0(t,e){const a=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return a<0?-1:a>0?1:a}function mo(t){return e=>{const a=(t?Math[t]:Math.trunc)(e);return a===0?0:a}}function zc(t,e){return+ie(t)-+ie(e)}function _5(t,e,a){const r=zc(t,e)/po;return mo(void 0)(r)}function N5(t,e,a){const r=zc(t,e)/ho;return mo(void 0)(r)}function Ky(t){const e=ie(t);return e.setHours(23,59,59,999),e}function Xy(t){const e=ie(t),a=e.getMonth();return e.setFullYear(e.getFullYear(),a+1,0),e.setHours(23,59,59,999),e}function S5(t){const e=ie(t);return+Ky(e)==+Xy(e)}function Qy(t,e){const a=ie(t),r=ie(e),s=ji(a,r),n=Math.abs(k5(a,r));let o;if(n<1)o=0;else{a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-s*n);let l=ji(a,r)===-s;S5(ie(t))&&n===1&&ji(t,r)===1&&(l=!1),o=s*(n-Number(l))}return o===0?0:o}function C5(t,e,a){const r=Qy(t,e)/3;return mo(void 0)(r)}function E5(t,e,a){const r=zc(t,e)/1e3;return mo(void 0)(r)}function M5(t,e,a){const r=Yy(t,e)/7;return mo(void 0)(r)}function D5(t,e){const a=ie(t),r=ie(e),s=ji(a,r),n=Math.abs(j5(a,r));a.setFullYear(1584),r.setFullYear(1584);const o=ji(a,r)===-s,l=s*(n-+o);return l===0?0:l}function T5(t){const e=ie(t);return e.setSeconds(0,0),e}function O5(t){const e=ie(t),a=e.getMonth(),r=a-a%3;return e.setMonth(r,1),e.setHours(0,0,0,0),e}function P5(t){const e=ie(t);return e.setDate(1),e.setHours(0,0,0,0),e}function I5(t){const e=ie(t),a=e.getFullYear();return e.setFullYear(a+1,0,0),e.setHours(23,59,59,999),e}function Zy(t){const e=ie(t),a=Oe(t,0);return a.setFullYear(e.getFullYear(),0,1),a.setHours(0,0,0,0),a}function z5(t){const e=ie(t);return e.setMinutes(59,59,999),e}function A5(t,e){var a,r;const s=Ts(),n=s.weekStartsOn??((r=(a=s.locale)==null?void 0:a.options)==null?void 0:r.weekStartsOn)??0,o=ie(t),l=o.getDay(),c=(l<n?-7:0)+6-(l-n);return o.setDate(o.getDate()+c),o.setHours(23,59,59,999),o}function L5(t){const e=ie(t);return e.setSeconds(59,999),e}function R5(t){const e=ie(t),a=e.getMonth(),r=a-a%3+3;return e.setMonth(r,0),e.setHours(23,59,59,999),e}function F5(t){const e=ie(t);return e.setMilliseconds(999),e}const $5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},U5=(t,e,a)=>{let r;const s=$5[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+r:r+" ago":r};function Md(t){return(e={})=>{const a=e.width?String(e.width):t.defaultWidth;return t.formats[a]||t.formats[t.defaultWidth]}}const B5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},q5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},V5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},H5={date:Md({formats:B5,defaultWidth:"full"}),time:Md({formats:q5,defaultWidth:"full"}),dateTime:Md({formats:V5,defaultWidth:"full"})},W5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},G5=(t,e,a,r)=>W5[t];function Wn(t){return(e,a)=>{const r=a!=null&&a.context?String(a.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=a!=null&&a.width?String(a.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=a!=null&&a.width?String(a.width):t.defaultWidth;s=t.values[l]||t.values[o]}const n=t.argumentCallback?t.argumentCallback(e):e;return s[n]}}const J5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Y5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},K5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},X5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Q5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Z5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eC=(t,e)=>{const a=Number(t),r=a%100;if(r>20||r<10)switch(r%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},tC={ordinalNumber:eC,era:Wn({values:J5,defaultWidth:"wide"}),quarter:Wn({values:Y5,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Wn({values:K5,defaultWidth:"wide"}),day:Wn({values:X5,defaultWidth:"wide"}),dayPeriod:Wn({values:Q5,defaultWidth:"wide",formattingValues:Z5,defaultFormattingWidth:"wide"})};function Gn(t){return(e,a={})=>{const r=a.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],n=e.match(s);if(!n)return null;const o=n[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?rC(l,h=>h.test(o)):aC(l,h=>h.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=a.valueCallback?a.valueCallback(d):d;const u=e.slice(o.length);return{value:d,rest:u}}}function aC(t,e){for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&e(t[a]))return a}function rC(t,e){for(let a=0;a<t.length;a++)if(e(t[a]))return a}function sC(t){return(e,a={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],n=e.match(t.parsePattern);if(!n)return null;let o=t.valueCallback?t.valueCallback(n[0]):n[0];o=a.valueCallback?a.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const nC=/^(\d+)(th|st|nd|rd)?/i,iC=/\d+/i,oC={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},lC={any:[/^b/i,/^(a|c)/i]},cC={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dC={any:[/1/i,/2/i,/3/i,/4/i]},uC={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hC={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pC={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mC={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gC={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fC={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xC={ordinalNumber:sC({matchPattern:nC,parsePattern:iC,valueCallback:t=>parseInt(t,10)}),era:Gn({matchPatterns:oC,defaultMatchWidth:"wide",parsePatterns:lC,defaultParseWidth:"any"}),quarter:Gn({matchPatterns:cC,defaultMatchWidth:"wide",parsePatterns:dC,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gn({matchPatterns:uC,defaultMatchWidth:"wide",parsePatterns:hC,defaultParseWidth:"any"}),day:Gn({matchPatterns:pC,defaultMatchWidth:"wide",parsePatterns:mC,defaultParseWidth:"any"}),dayPeriod:Gn({matchPatterns:gC,defaultMatchWidth:"any",parsePatterns:fC,defaultParseWidth:"any"})},ev={code:"en-US",formatDistance:U5,formatLong:H5,formatRelative:G5,localize:tC,match:xC,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bC(t){const e=ie(t);return Gy(e,Zy(e))+1}function tv(t){const e=ie(t),a=+kn(e)-+g5(e);return Math.round(a/Hy)+1}function Sp(t,e){var a,r,s,n;const o=ie(t),l=o.getFullYear(),c=Ts(),d=(e==null?void 0:e.firstWeekContainsDate)??((r=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:r.firstWeekContainsDate)??c.firstWeekContainsDate??((n=(s=c.locale)==null?void 0:s.options)==null?void 0:n.firstWeekContainsDate)??1,u=Oe(t,0);u.setFullYear(l+1,0,d),u.setHours(0,0,0,0);const h=Aa(u,e),p=Oe(t,0);p.setFullYear(l,0,d),p.setHours(0,0,0,0);const m=Aa(p,e);return o.getTime()>=h.getTime()?l+1:o.getTime()>=m.getTime()?l:l-1}function yC(t,e){var a,r,s,n;const o=Ts(),l=(e==null?void 0:e.firstWeekContainsDate)??((r=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:r.firstWeekContainsDate)??o.firstWeekContainsDate??((n=(s=o.locale)==null?void 0:s.options)==null?void 0:n.firstWeekContainsDate)??1,c=Sp(t,e),d=Oe(t,0);return d.setFullYear(c,0,l),d.setHours(0,0,0,0),Aa(d,e)}function av(t,e){const a=ie(t),r=+Aa(a,e)-+yC(a,e);return Math.round(r/Hy)+1}function we(t,e){const a=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return a+r}const hr={y(t,e){const a=t.getFullYear(),r=a>0?a:1-a;return we(e==="yy"?r%100:r,e.length)},M(t,e){const a=t.getMonth();return e==="M"?String(a+1):we(a+1,2)},d(t,e){return we(t.getDate(),e.length)},a(t,e){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(t,e){return we(t.getHours()%12||12,e.length)},H(t,e){return we(t.getHours(),e.length)},m(t,e){return we(t.getMinutes(),e.length)},s(t,e){return we(t.getSeconds(),e.length)},S(t,e){const a=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,a-3));return we(s,e.length)}},Fs={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},T0={G:function(t,e,a){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})}},y:function(t,e,a){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return a.ordinalNumber(s,{unit:"year"})}return hr.y(t,e)},Y:function(t,e,a,r){const s=Sp(t,r),n=s>0?s:1-s;if(e==="YY"){const o=n%100;return we(o,2)}return e==="Yo"?a.ordinalNumber(n,{unit:"year"}):we(n,e.length)},R:function(t,e){const a=Wy(t);return we(a,e.length)},u:function(t,e){const a=t.getFullYear();return we(a,e.length)},Q:function(t,e,a){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return we(r,2);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,a){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return we(r,2);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,a){const r=t.getMonth();switch(e){case"M":case"MM":return hr.M(t,e);case"Mo":return a.ordinalNumber(r+1,{unit:"month"});case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,a){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return we(r+1,2);case"Lo":return a.ordinalNumber(r+1,{unit:"month"});case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,a,r){const s=av(t,r);return e==="wo"?a.ordinalNumber(s,{unit:"week"}):we(s,e.length)},I:function(t,e,a){const r=tv(t);return e==="Io"?a.ordinalNumber(r,{unit:"week"}):we(r,e.length)},d:function(t,e,a){return e==="do"?a.ordinalNumber(t.getDate(),{unit:"date"}):hr.d(t,e)},D:function(t,e,a){const r=bC(t);return e==="Do"?a.ordinalNumber(r,{unit:"dayOfYear"}):we(r,e.length)},E:function(t,e,a){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,a,r){const s=t.getDay(),n=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(n);case"ee":return we(n,2);case"eo":return a.ordinalNumber(n,{unit:"day"});case"eee":return a.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(s,{width:"short",context:"formatting"});case"eeee":default:return a.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,a,r){const s=t.getDay(),n=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(n);case"cc":return we(n,e.length);case"co":return a.ordinalNumber(n,{unit:"day"});case"ccc":return a.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(s,{width:"narrow",context:"standalone"});case"cccccc":return a.day(s,{width:"short",context:"standalone"});case"cccc":default:return a.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,a){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return we(s,e.length);case"io":return a.ordinalNumber(s,{unit:"day"});case"iii":return a.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(r,{width:"short",context:"formatting"});case"iiii":default:return a.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,a){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,a){const r=t.getHours();let s;switch(r===12?s=Fs.noon:r===0?s=Fs.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,a){const r=t.getHours();let s;switch(r>=17?s=Fs.evening:r>=12?s=Fs.afternoon:r>=4?s=Fs.morning:s=Fs.night,e){case"B":case"BB":case"BBB":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,a){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),a.ordinalNumber(r,{unit:"hour"})}return hr.h(t,e)},H:function(t,e,a){return e==="Ho"?a.ordinalNumber(t.getHours(),{unit:"hour"}):hr.H(t,e)},K:function(t,e,a){const r=t.getHours()%12;return e==="Ko"?a.ordinalNumber(r,{unit:"hour"}):we(r,e.length)},k:function(t,e,a){let r=t.getHours();return r===0&&(r=24),e==="ko"?a.ordinalNumber(r,{unit:"hour"}):we(r,e.length)},m:function(t,e,a){return e==="mo"?a.ordinalNumber(t.getMinutes(),{unit:"minute"}):hr.m(t,e)},s:function(t,e,a){return e==="so"?a.ordinalNumber(t.getSeconds(),{unit:"second"}):hr.s(t,e)},S:function(t,e){return hr.S(t,e)},X:function(t,e,a){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return P0(r);case"XXXX":case"XX":return ts(r);case"XXXXX":case"XXX":default:return ts(r,":")}},x:function(t,e,a){const r=t.getTimezoneOffset();switch(e){case"x":return P0(r);case"xxxx":case"xx":return ts(r);case"xxxxx":case"xxx":default:return ts(r,":")}},O:function(t,e,a){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+O0(r,":");case"OOOO":default:return"GMT"+ts(r,":")}},z:function(t,e,a){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+O0(r,":");case"zzzz":default:return"GMT"+ts(r,":")}},t:function(t,e,a){const r=Math.trunc(t.getTime()/1e3);return we(r,e.length)},T:function(t,e,a){const r=t.getTime();return we(r,e.length)}};function O0(t,e=""){const a=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),n=r%60;return n===0?a+String(s):a+String(s)+e+we(n,2)}function P0(t,e){return t%60===0?(t>0?"-":"+")+we(Math.abs(t)/60,2):ts(t,e)}function ts(t,e=""){const a=t>0?"-":"+",r=Math.abs(t),s=we(Math.trunc(r/60),2),n=we(r%60,2);return a+s+e+n}const I0=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},rv=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},vC=(t,e)=>{const a=t.match(/(P+)(p+)?/)||[],r=a[1],s=a[2];if(!s)return I0(t,e);let n;switch(r){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;case"PPPP":default:n=e.dateTime({width:"full"});break}return n.replace("{{date}}",I0(r,e)).replace("{{time}}",rv(s,e))},eh={p:rv,P:vC},wC=/^D+$/,kC=/^Y+$/,jC=["D","DD","YY","YYYY"];function sv(t){return wC.test(t)}function nv(t){return kC.test(t)}function th(t,e,a){const r=_C(t,e,a);if(console.warn(r),jC.includes(t))throw new RangeError(r)}function _C(t,e,a){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const NC=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,SC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,CC=/^'([^]*?)'?$/,EC=/''/g,MC=/[a-zA-Z]/;function DC(t,e,a){var r,s,n,o,l,c,d,u;const h=Ts(),p=(a==null?void 0:a.locale)??h.locale??ev,m=(a==null?void 0:a.firstWeekContainsDate)??((s=(r=a==null?void 0:a.locale)==null?void 0:r.options)==null?void 0:s.firstWeekContainsDate)??h.firstWeekContainsDate??((o=(n=h.locale)==null?void 0:n.options)==null?void 0:o.firstWeekContainsDate)??1,v=(a==null?void 0:a.weekStartsOn)??((c=(l=a==null?void 0:a.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??h.weekStartsOn??((u=(d=h.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,y=ie(t);if(!Jy(y))throw new RangeError("Invalid time value");let k=e.match(SC).map(f=>{const x=f[0];if(x==="p"||x==="P"){const w=eh[x];return w(f,p.formatLong)}return f}).join("").match(NC).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const x=f[0];if(x==="'")return{isToken:!1,value:TC(f)};if(T0[x])return{isToken:!0,value:f};if(x.match(MC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:f}});p.localize.preprocessor&&(k=p.localize.preprocessor(y,k));const g={firstWeekContainsDate:m,weekStartsOn:v,locale:p};return k.map(f=>{if(!f.isToken)return f.value;const x=f.value;(!(a!=null&&a.useAdditionalWeekYearTokens)&&nv(x)||!(a!=null&&a.useAdditionalDayOfYearTokens)&&sv(x))&&th(x,e,String(t));const w=T0[x[0]];return w(y,x,p.localize,g)}).join("")}function TC(t){const e=t.match(CC);return e?e[1].replace(EC,"'"):t}function OC(){return Object.assign({},Ts())}function PC(t){let e=ie(t).getDay();return e===0&&(e=7),e}function IC(t,e){const a=e instanceof Date?Oe(e,0):new e(0);return a.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),a.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),a}const zC=10;class iv{constructor(){q(this,"subPriority",0)}validate(e,a){return!0}}class AC extends iv{constructor(e,a,r,s,n){super(),this.value=e,this.validateValue=a,this.setValue=r,this.priority=s,n&&(this.subPriority=n)}validate(e,a){return this.validateValue(e,this.value,a)}set(e,a,r){return this.setValue(e,a,this.value,r)}}class LC extends iv{constructor(){super(...arguments),q(this,"priority",zC),q(this,"subPriority",-1)}set(e,a){return a.timestampIsSet?e:Oe(e,IC(e,Date))}}class ye{run(e,a,r,s){const n=this.parse(e,a,r,s);return n?{setter:new AC(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}validate(e,a,r){return!0}}class RC extends ye{constructor(){super(...arguments),q(this,"priority",140),q(this,"incompatibleTokens",["R","u","t","T"])}parse(e,a,r){switch(a){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,a,r){return a.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}const Je={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Da={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ye(t,e){return t&&{value:e(t.value),rest:t.rest}}function $e(t,e){const a=e.match(t);return a?{value:parseInt(a[0],10),rest:e.slice(a[0].length)}:null}function Ta(t,e){const a=e.match(t);if(!a)return null;if(a[0]==="Z")return{value:0,rest:e.slice(1)};const r=a[1]==="+"?1:-1,s=a[2]?parseInt(a[2],10):0,n=a[3]?parseInt(a[3],10):0,o=a[5]?parseInt(a[5],10):0;return{value:r*(s*po+n*ho+o*h5),rest:e.slice(a[0].length)}}function ov(t){return $e(Je.anyDigitsSigned,t)}function He(t,e){switch(t){case 1:return $e(Je.singleDigit,e);case 2:return $e(Je.twoDigits,e);case 3:return $e(Je.threeDigits,e);case 4:return $e(Je.fourDigits,e);default:return $e(new RegExp("^\\d{1,"+t+"}"),e)}}function lv(t,e){switch(t){case 1:return $e(Je.singleDigitSigned,e);case 2:return $e(Je.twoDigitsSigned,e);case 3:return $e(Je.threeDigitsSigned,e);case 4:return $e(Je.fourDigitsSigned,e);default:return $e(new RegExp("^-?\\d{1,"+t+"}"),e)}}function Cp(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function cv(t,e){const a=e>0,r=a?e:1-e;let s;if(r<=50)s=t||100;else{const n=r+50,o=Math.trunc(n/100)*100,l=t>=n%100;s=t+o-(l?100:0)}return a?s:1-s}function dv(t){return t%400===0||t%4===0&&t%100!==0}class FC extends ye{constructor(){super(...arguments),q(this,"priority",130),q(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,a,r){const s=n=>({year:n,isTwoDigitYear:a==="yy"});switch(a){case"y":return Ye(He(4,e),s);case"yo":return Ye(r.ordinalNumber(e,{unit:"year"}),s);default:return Ye(He(a.length,e),s)}}validate(e,a){return a.isTwoDigitYear||a.year>0}set(e,a,r){const s=e.getFullYear();if(r.isTwoDigitYear){const o=cv(r.year,s);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}const n=!("era"in a)||a.era===1?r.year:1-r.year;return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}}class $C extends ye{constructor(){super(...arguments),q(this,"priority",130),q(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,a,r){const s=n=>({year:n,isTwoDigitYear:a==="YY"});switch(a){case"Y":return Ye(He(4,e),s);case"Yo":return Ye(r.ordinalNumber(e,{unit:"year"}),s);default:return Ye(He(a.length,e),s)}}validate(e,a){return a.isTwoDigitYear||a.year>0}set(e,a,r,s){const n=Sp(e,s);if(r.isTwoDigitYear){const l=cv(r.year,n);return e.setFullYear(l,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Aa(e,s)}const o=!("era"in a)||a.era===1?r.year:1-r.year;return e.setFullYear(o,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Aa(e,s)}}class UC extends ye{constructor(){super(...arguments),q(this,"priority",130),q(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,a){return lv(a==="R"?4:a.length,e)}set(e,a,r){const s=Oe(e,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),kn(s)}}class BC extends ye{constructor(){super(...arguments),q(this,"priority",130),q(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,a){return lv(a==="u"?4:a.length,e)}set(e,a,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}class qC extends ye{constructor(){super(...arguments),q(this,"priority",120),q(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,a,r){switch(a){case"Q":case"QQ":return He(a.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,a){return a>=1&&a<=4}set(e,a,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}}class VC extends ye{constructor(){super(...arguments),q(this,"priority",120),q(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,a,r){switch(a){case"q":case"qq":return He(a.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,a){return a>=1&&a<=4}set(e,a,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}}class HC extends ye{constructor(){super(...arguments),q(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),q(this,"priority",110)}parse(e,a,r){const s=n=>n-1;switch(a){case"M":return Ye($e(Je.month,e),s);case"MM":return Ye(He(2,e),s);case"Mo":return Ye(r.ordinalNumber(e,{unit:"month"}),s);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,a){return a>=0&&a<=11}set(e,a,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class WC extends ye{constructor(){super(...arguments),q(this,"priority",110),q(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,a,r){const s=n=>n-1;switch(a){case"L":return Ye($e(Je.month,e),s);case"LL":return Ye(He(2,e),s);case"Lo":return Ye(r.ordinalNumber(e,{unit:"month"}),s);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,a){return a>=0&&a<=11}set(e,a,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}function GC(t,e,a){const r=ie(t),s=av(r,a)-e;return r.setDate(r.getDate()-s*7),r}class JC extends ye{constructor(){super(...arguments),q(this,"priority",100),q(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,a,r){switch(a){case"w":return $e(Je.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return He(a.length,e)}}validate(e,a){return a>=1&&a<=53}set(e,a,r,s){return Aa(GC(e,r,s),s)}}function YC(t,e){const a=ie(t),r=tv(a)-e;return a.setDate(a.getDate()-r*7),a}class KC extends ye{constructor(){super(...arguments),q(this,"priority",100),q(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,a,r){switch(a){case"I":return $e(Je.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return He(a.length,e)}}validate(e,a){return a>=1&&a<=53}set(e,a,r){return kn(YC(e,r))}}const XC=[31,28,31,30,31,30,31,31,30,31,30,31],QC=[31,29,31,30,31,30,31,31,30,31,30,31];class ZC extends ye{constructor(){super(...arguments),q(this,"priority",90),q(this,"subPriority",1),q(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,a,r){switch(a){case"d":return $e(Je.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return He(a.length,e)}}validate(e,a){const r=e.getFullYear(),s=dv(r),n=e.getMonth();return s?a>=1&&a<=QC[n]:a>=1&&a<=XC[n]}set(e,a,r){return e.setDate(r),e.setHours(0,0,0,0),e}}class e6 extends ye{constructor(){super(...arguments),q(this,"priority",90),q(this,"subpriority",1),q(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,a,r){switch(a){case"D":case"DD":return $e(Je.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return He(a.length,e)}}validate(e,a){const r=e.getFullYear();return dv(r)?a>=1&&a<=366:a>=1&&a<=365}set(e,a,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}}function Ep(t,e,a){var r,s,n,o;const l=Ts(),c=(a==null?void 0:a.weekStartsOn)??((s=(r=a==null?void 0:a.locale)==null?void 0:r.options)==null?void 0:s.weekStartsOn)??l.weekStartsOn??((o=(n=l.locale)==null?void 0:n.options)==null?void 0:o.weekStartsOn)??0,d=ie(t),u=d.getDay(),h=(e%7+7)%7,p=7-c,m=e<0||e>6?e-(u+p)%7:(h+p)%7-(u+p)%7;return Pc(d,m)}class t6 extends ye{constructor(){super(...arguments),q(this,"priority",90),q(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,a,r){switch(a){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,a){return a>=0&&a<=6}set(e,a,r,s){return e=Ep(e,r,s),e.setHours(0,0,0,0),e}}class a6 extends ye{constructor(){super(...arguments),q(this,"priority",90),q(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,a,r,s){const n=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(a){case"e":case"ee":return Ye(He(a.length,e),n);case"eo":return Ye(r.ordinalNumber(e,{unit:"day"}),n);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,a){return a>=0&&a<=6}set(e,a,r,s){return e=Ep(e,r,s),e.setHours(0,0,0,0),e}}class r6 extends ye{constructor(){super(...arguments),q(this,"priority",90),q(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,a,r,s){const n=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(a){case"c":case"cc":return Ye(He(a.length,e),n);case"co":return Ye(r.ordinalNumber(e,{unit:"day"}),n);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,a){return a>=0&&a<=6}set(e,a,r,s){return e=Ep(e,r,s),e.setHours(0,0,0,0),e}}function s6(t,e){const a=ie(t),r=PC(a),s=e-r;return Pc(a,s)}class n6 extends ye{constructor(){super(...arguments),q(this,"priority",90),q(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,a,r){const s=n=>n===0?7:n;switch(a){case"i":case"ii":return He(a.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Ye(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return Ye(r.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Ye(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Ye(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,a){return a>=1&&a<=7}set(e,a,r){return e=s6(e,r),e.setHours(0,0,0,0),e}}class i6 extends ye{constructor(){super(...arguments),q(this,"priority",80),q(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,a,r){switch(a){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,a,r){return e.setHours(Cp(r),0,0,0),e}}class o6 extends ye{constructor(){super(...arguments),q(this,"priority",80),q(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,a,r){switch(a){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,a,r){return e.setHours(Cp(r),0,0,0),e}}class l6 extends ye{constructor(){super(...arguments),q(this,"priority",80),q(this,"incompatibleTokens",["a","b","t","T"])}parse(e,a,r){switch(a){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,a,r){return e.setHours(Cp(r),0,0,0),e}}class c6 extends ye{constructor(){super(...arguments),q(this,"priority",70),q(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,a,r){switch(a){case"h":return $e(Je.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return He(a.length,e)}}validate(e,a){return a>=1&&a<=12}set(e,a,r){const s=e.getHours()>=12;return s&&r<12?e.setHours(r+12,0,0,0):!s&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}}class d6 extends ye{constructor(){super(...arguments),q(this,"priority",70),q(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,a,r){switch(a){case"H":return $e(Je.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return He(a.length,e)}}validate(e,a){return a>=0&&a<=23}set(e,a,r){return e.setHours(r,0,0,0),e}}class u6 extends ye{constructor(){super(...arguments),q(this,"priority",70),q(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,a,r){switch(a){case"K":return $e(Je.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return He(a.length,e)}}validate(e,a){return a>=0&&a<=11}set(e,a,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}}class h6 extends ye{constructor(){super(...arguments),q(this,"priority",70),q(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,a,r){switch(a){case"k":return $e(Je.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return He(a.length,e)}}validate(e,a){return a>=1&&a<=24}set(e,a,r){const s=r<=24?r%24:r;return e.setHours(s,0,0,0),e}}class p6 extends ye{constructor(){super(...arguments),q(this,"priority",60),q(this,"incompatibleTokens",["t","T"])}parse(e,a,r){switch(a){case"m":return $e(Je.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return He(a.length,e)}}validate(e,a){return a>=0&&a<=59}set(e,a,r){return e.setMinutes(r,0,0),e}}class m6 extends ye{constructor(){super(...arguments),q(this,"priority",50),q(this,"incompatibleTokens",["t","T"])}parse(e,a,r){switch(a){case"s":return $e(Je.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return He(a.length,e)}}validate(e,a){return a>=0&&a<=59}set(e,a,r){return e.setSeconds(r,0),e}}class g6 extends ye{constructor(){super(...arguments),q(this,"priority",30),q(this,"incompatibleTokens",["t","T"])}parse(e,a){const r=s=>Math.trunc(s*Math.pow(10,-a.length+3));return Ye(He(a.length,e),r)}set(e,a,r){return e.setMilliseconds(r),e}}class f6 extends ye{constructor(){super(...arguments),q(this,"priority",10),q(this,"incompatibleTokens",["t","T","x"])}parse(e,a){switch(a){case"X":return Ta(Da.basicOptionalMinutes,e);case"XX":return Ta(Da.basic,e);case"XXXX":return Ta(Da.basicOptionalSeconds,e);case"XXXXX":return Ta(Da.extendedOptionalSeconds,e);case"XXX":default:return Ta(Da.extended,e)}}set(e,a,r){return a.timestampIsSet?e:Oe(e,e.getTime()-nc(e)-r)}}class x6 extends ye{constructor(){super(...arguments),q(this,"priority",10),q(this,"incompatibleTokens",["t","T","X"])}parse(e,a){switch(a){case"x":return Ta(Da.basicOptionalMinutes,e);case"xx":return Ta(Da.basic,e);case"xxxx":return Ta(Da.basicOptionalSeconds,e);case"xxxxx":return Ta(Da.extendedOptionalSeconds,e);case"xxx":default:return Ta(Da.extended,e)}}set(e,a,r){return a.timestampIsSet?e:Oe(e,e.getTime()-nc(e)-r)}}class b6 extends ye{constructor(){super(...arguments),q(this,"priority",40),q(this,"incompatibleTokens","*")}parse(e){return ov(e)}set(e,a,r){return[Oe(e,r*1e3),{timestampIsSet:!0}]}}class y6 extends ye{constructor(){super(...arguments),q(this,"priority",20),q(this,"incompatibleTokens","*")}parse(e){return ov(e)}set(e,a,r){return[Oe(e,r),{timestampIsSet:!0}]}}const v6={G:new RC,y:new FC,Y:new $C,R:new UC,u:new BC,Q:new qC,q:new VC,M:new HC,L:new WC,w:new JC,I:new KC,d:new ZC,D:new e6,E:new t6,e:new a6,c:new r6,i:new n6,a:new i6,b:new o6,B:new l6,h:new c6,H:new d6,K:new u6,k:new h6,m:new p6,s:new m6,S:new g6,X:new f6,x:new x6,t:new b6,T:new y6},w6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,k6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,j6=/^'([^]*?)'?$/,_6=/''/g,N6=/\S/,S6=/[a-zA-Z]/;function C6(t,e,a,r){var s,n,o,l,c,d,u,h;const p=OC(),m=(r==null?void 0:r.locale)??p.locale??ev,v=(r==null?void 0:r.firstWeekContainsDate)??((n=(s=r==null?void 0:r.locale)==null?void 0:s.options)==null?void 0:n.firstWeekContainsDate)??p.firstWeekContainsDate??((l=(o=p.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??1,y=(r==null?void 0:r.weekStartsOn)??((d=(c=r==null?void 0:r.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??p.weekStartsOn??((h=(u=p.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0;if(e==="")return t===""?ie(a):Oe(a,NaN);const k={firstWeekContainsDate:v,weekStartsOn:y,locale:m},g=[new LC],f=e.match(k6).map(_=>{const b=_[0];if(b in eh){const j=eh[b];return j(_,m.formatLong)}return _}).join("").match(w6),x=[];for(let _ of f){!(r!=null&&r.useAdditionalWeekYearTokens)&&nv(_)&&th(_,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&sv(_)&&th(_,e,t);const b=_[0],j=v6[b];if(j){const{incompatibleTokens:A}=j;if(Array.isArray(A)){const z=x.find($=>A.includes($.token)||$.token===b);if(z)throw new RangeError(`The format string mustn't contain \`${z.fullToken}\` and \`${_}\` at the same time`)}else if(j.incompatibleTokens==="*"&&x.length>0)throw new RangeError(`The format string mustn't contain \`${_}\` and any other token at the same time`);x.push({token:b,fullToken:_});const I=j.run(t,_,m.match,k);if(!I)return Oe(a,NaN);g.push(I.setter),t=I.rest}else{if(b.match(S6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");if(_==="''"?_="'":b==="'"&&(_=E6(_)),t.indexOf(_)===0)t=t.slice(_.length);else return Oe(a,NaN)}}if(t.length>0&&N6.test(t))return Oe(a,NaN);const w=g.map(_=>_.priority).sort((_,b)=>b-_).filter((_,b,j)=>j.indexOf(_)===b).map(_=>g.filter(b=>b.priority===_).sort((b,j)=>j.subPriority-b.subPriority)).map(_=>_[0]);let S=ie(a);if(isNaN(S.getTime()))return Oe(a,NaN);const N={};for(const _ of w){if(!_.validate(S,k))return Oe(a,NaN);const b=_.set(S,N,k);Array.isArray(b)?(S=b[0],Object.assign(N,b[1])):S=b}return Oe(a,S)}function E6(t){return t.match(j6)[1].replace(_6,"'")}function M6(t){const e=ie(t);return e.setMinutes(0,0,0),e}function D6(t){const e=ie(t);return e.setMilliseconds(0),e}function T6(t,e){const a=(e==null?void 0:e.additionalDigits)??2,r=z6(t);let s;if(r.date){const c=A6(r.date,a);s=L6(c.restDateString,c.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const n=s.getTime();let o=0,l;if(r.time&&(o=R6(r.time),isNaN(o)))return new Date(NaN);if(r.timezone){if(l=F6(r.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(n+o),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(n+o+l)}const el={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},O6=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,P6=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,I6=/^([+-])(\d{2})(?::?(\d{2}))?$/;function z6(t){const e={},a=t.split(el.dateTimeDelimiter);let r;if(a.length>2)return e;if(/:/.test(a[0])?r=a[0]:(e.date=a[0],r=a[1],el.timeZoneDelimiter.test(e.date)&&(e.date=t.split(el.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const s=el.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function A6(t,e){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(a);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,n=r[2]?parseInt(r[2]):null;return{year:n===null?s:n*100,restDateString:t.slice((r[1]||r[2]).length)}}function L6(t,e){if(e===null)return new Date(NaN);const a=t.match(O6);if(!a)return new Date(NaN);const r=!!a[4],s=Jn(a[1]),n=Jn(a[2])-1,o=Jn(a[3]),l=Jn(a[4]),c=Jn(a[5])-1;if(r)return V6(e,l,c)?$6(e,l,c):new Date(NaN);{const d=new Date(0);return!B6(e,n,o)||!q6(e,s)?new Date(NaN):(d.setUTCFullYear(e,n,Math.max(s,o)),d)}}function Jn(t){return t?parseInt(t):1}function R6(t){const e=t.match(P6);if(!e)return NaN;const a=Dd(e[1]),r=Dd(e[2]),s=Dd(e[3]);return H6(a,r,s)?a*po+r*ho+s*1e3:NaN}function Dd(t){return t&&parseFloat(t.replace(",","."))||0}function F6(t){if(t==="Z")return 0;const e=t.match(I6);if(!e)return 0;const a=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return W6(r,s)?a*(r*po+s*ho):NaN}function $6(t,e,a){const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,n=(e-1)*7+a+1-s;return r.setUTCDate(r.getUTCDate()+n),r}const U6=[31,null,31,30,31,30,31,31,30,31,30,31];function uv(t){return t%400===0||t%4===0&&t%100!==0}function B6(t,e,a){return e>=0&&e<=11&&a>=1&&a<=(U6[e]||(uv(t)?29:28))}function q6(t,e){return e>=1&&e<=(uv(t)?366:365)}function V6(t,e,a){return e>=1&&e<=53&&a>=0&&a<=6}function H6(t,e,a){return t===24?e===0&&a===0:a>=0&&a<60&&e>=0&&e<60&&t>=0&&t<25}function W6(t,e){return e>=0&&e<=59}/*!
* chartjs-adapter-date-fns v3.0.0
* https://www.chartjs.org
* (c) 2022 chartjs-adapter-date-fns Contributors
* Released under the MIT license
*/const G6={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};Ny._date.override({_id:"date-fns",formats:function(){return G6},parse:function(t,e){if(t===null||typeof t>"u")return null;const a=typeof t;return a==="number"||t instanceof Date?t=ie(t):a==="string"&&(typeof e=="string"?t=C6(t,e,new Date,this.options):t=T6(t,this.options)),Jy(t)?t.getTime():null},format:function(t,e){return DC(t,e,this.options)},add:function(t,e,a){switch(a){case"millisecond":return Ic(t,e);case"second":return b5(t,e);case"minute":return f5(t,e);case"hour":return p5(t,e);case"day":return Pc(t,e);case"week":return y5(t,e);case"month":return Np(t,e);case"quarter":return x5(t,e);case"year":return v5(t,e);default:return t}},diff:function(t,e,a){switch(a){case"millisecond":return zc(t,e);case"second":return E5(t,e);case"minute":return N5(t,e);case"hour":return _5(t,e);case"day":return Yy(t,e);case"week":return M5(t,e);case"month":return Qy(t,e);case"quarter":return C5(t,e);case"year":return D5(t,e);default:return 0}},startOf:function(t,e,a){switch(e){case"second":return D6(t);case"minute":return T5(t);case"hour":return M6(t);case"day":return Zu(t);case"week":return Aa(t);case"isoWeek":return Aa(t,{weekStartsOn:+a});case"month":return P5(t);case"quarter":return O5(t);case"year":return Zy(t);default:return t}},endOf:function(t,e){switch(e){case"second":return F5(t);case"minute":return L5(t);case"hour":return z5(t);case"day":return Ky(t);case"week":return A5(t);case"month":return Xy(t);case"quarter":return R5(t);case"year":return I5(t);default:return t}}});T.createContext(void 0);const hv=()=>{var t,e,a,r,s,n;const o=ht();return{user:{id:((t=o.user)==null?void 0:t.id)||"1",name:((e=o.user)==null?void 0:e.name)||"Guest User",email:((a=o.user)==null?void 0:a.email)||"guest@example.com",grade:((r=o.user)==null?void 0:r.grade)||"Guest",joinDate:((s=o.user)==null?void 0:s.join_date)||new Date().toISOString(),lastActive:((n=o.user)==null?void 0:n.last_active)||new Date().toISOString()},setUser:()=>{},hasAccess:o.hasAccess}};Tc.register(Xu,Qu,xl,si,bl,B3,K3,$3,ri,Qi);const J6=()=>{const{hasAccess:t}=hv(),{getSystemMetrics:e,getDownloadLogs:a,getActivityLogs:r,getUsers:s,loading:n}=Kt(),[o,l]=T.useState("7d"),[c,d]=T.useState(null),[u,h]=T.useState(null),[p,m]=T.useState(null),[v,y]=T.useState(null),[k,g]=T.useState([]),[f,x]=T.useState({totalDownloads:0,activeUsers:0,popularFile:"",avgDownloadsPerDay:0,networkUsage:"2.4 GB",bandwidth:"45.2 MB/s"}),[w,S]=T.useState({hourlyUsage:[],hourlyBandwidth:[],totalUsage:0,peakBandwidth:0,lastUpdated:new Date});T.useEffect(()=>{j(),N()},[o]);const N=()=>{try{const L=localStorage.getItem("prodomo_network_metrics");if(L)S(JSON.parse(L));else{const J=Array.from({length:24},(U,Y)=>{const E=Y;let P=20;return E>=9&&E<=17?P=60+Math.floor(Math.random()*40):E>=6&&E<9||E>17&&E<=22?P=30+Math.floor(Math.random()*30):P=10+Math.floor(Math.random()*20),P}),D=J.map(U=>Math.max(5,Math.floor(U/3)+Math.floor(Math.random()*15))),F=J.reduce((U,Y)=>U+Y,0),B=Math.max(...D),X={hourlyUsage:J,hourlyBandwidth:D,totalUsage:F,peakBandwidth:B,lastUpdated:new Date};S(X),localStorage.setItem("prodomo_network_metrics",JSON.stringify(X))}}catch(L){console.error("Failed to initialize network metrics:",L)}},_=()=>{try{const L=new Date,J=L.getHours();if(L.getTime()-new Date(w.lastUpdated).getTime()<5*60*1e3)return;const D=[...w.hourlyUsage],F=[...w.hourlyBandwidth];let B=0;J>=9&&J<=17?B=2+Math.floor(Math.random()*8):J>=6&&J<9||J>17&&J<=22?B=1+Math.floor(Math.random()*4):B=Math.floor(Math.random()*2),D[J]+=B;const X=Math.max(0,Math.floor(B/2)+Math.floor(Math.random()*3));F[J]=Math.max(F[J],F[J]+X);const U=D.reduce((P,R)=>P+R,0),Y=Math.max(...F),E={hourlyUsage:D,hourlyBandwidth:F,totalUsage:U,peakBandwidth:Y,lastUpdated:L};S(E),localStorage.setItem("prodomo_network_metrics",JSON.stringify(E)),b(D,F),x(P=>({...P,networkUsage:`${(U/1024).toFixed(1)} GB`,bandwidth:`${Y.toFixed(1)} MB/s`}))}catch(L){console.error("Failed to update network metrics:",L)}},b=(L,J)=>{const D={labels:Array.from({length:24},(F,B)=>`${B}:00`),datasets:[{label:"Network Usage (MB)",data:L,borderColor:"rgb(139, 92, 246)",backgroundColor:"rgba(139, 92, 246, 0.1)",tension:.4,fill:!0},{label:"Bandwidth (MB/s)",data:J,borderColor:"rgb(245, 158, 11)",backgroundColor:"rgba(245, 158, 11, 0.1)",tension:.4,fill:!0}]};y(D)},j=async()=>{const L=o==="7d"?7:o==="30d"?30:90,[J,D,F,B]=await Promise.all([e(void 0,L),a(1e3),r(1e3),s()]),X=D.reduce((G,ne)=>{const fe=new Date(ne.created_at).toDateString();return G[fe]=(G[fe]||0)+1,G},{}),U={labels:Object.keys(X).slice(-L),datasets:[{label:"Downloads",data:Object.values(X).slice(-L),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},Y=F.reduce((G,ne)=>{const fe=new Date(ne.created_at).getHours();return G[fe]=(G[fe]||0)+1,G},{}),E={labels:Array.from({length:24},(G,ne)=>`${ne}:00`),datasets:[{label:"User Activity",data:Array.from({length:24},(G,ne)=>Y[ne]||0),backgroundColor:"rgba(16, 185, 129, 0.8)",borderColor:"rgb(16, 185, 129)",borderWidth:1}]},P=D.reduce((G,ne)=>{var fe;const kt=((fe=ne.file_name.split(".").pop())==null?void 0:fe.toLowerCase())||"unknown";return G[kt]=(G[kt]||0)+1,G},{}),R={labels:Object.keys(P),datasets:[{data:Object.values(P),backgroundColor:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#F97316"],borderWidth:0}]};_();const O=F.slice(0,10).map(G=>{const ne=B.find(fe=>fe.id===G.user_id);return{...G,user_grade:ne==null?void 0:ne.grade}}),M=D.length,V=new Set(D.map(G=>G.user_id)).size,Q=D.reduce((G,ne)=>(G[ne.file_name]=(G[ne.file_name]||0)+1,G),{}),C=Object.keys(Q).reduce((G,ne)=>Q[G]>Q[ne]?G:ne,""),K=Math.round(M/L);d(U),h(E),m(R),g(O),x({totalDownloads:M,activeUsers:V,popularFile:C,avgDownloadsPerDay:K,networkUsage:`${(w.totalUsage/1024).toFixed(1)} GB`,bandwidth:`${w.peakBandwidth.toFixed(1)} MB/s`})},A={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(156, 163, 175, 0.1)"}},x:{grid:{color:"rgba(156, 163, 175, 0.1)"}}}},I={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}},z=L=>L.type==="download"?i.jsx(dt,{size:16,className:"text-blue-500"}):L.action&&L.action.includes("login")||L.action&&L.action.includes("auth")?i.jsx(nt,{size:16,className:"text-emerald-500"}):L.action&&L.action.includes("profile")||L.action&&L.action.includes("user")?i.jsx(va,{size:16,className:"text-purple-500"}):i.jsx(nt,{size:16,className:"text-gray-500"}),$=L=>{switch(L){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},W=L=>{const J=new Date(L),D=Math.floor((new Date().getTime()-J.getTime())/1e3);return D<60?`${D}s ago`:D<3600?`${Math.floor(D/60)}m ago`:D<86400?`${Math.floor(D/3600)}h ago`:`${Math.floor(D/86400)}d ago`};return t("Admin")?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Analytics Dashboard"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Monitor downloads, user activity, network usage, and system performance."})]}),i.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[i.jsxs("select",{value:o,onChange:L=>l(L.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"7d",children:"Last 7 days"}),i.jsx("option",{value:"30d",children:"Last 30 days"}),i.jsx("option",{value:"90d",children:"Last 90 days"})]}),i.jsxs("button",{onClick:j,disabled:n,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(so,{size:18,className:n?"animate-spin":""}),i.jsx("span",{children:"Refresh"})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-6",children:[{title:"Total Downloads",value:f.totalDownloads.toLocaleString(),icon:dt,color:"bg-blue-500",change:"+12%",changeType:"positive"},{title:"Active Users",value:f.activeUsers.toLocaleString(),icon:va,color:"bg-emerald-500",change:"+8%",changeType:"positive"},{title:"Network Usage",value:f.networkUsage,icon:Eu,color:"bg-purple-500",change:"+15%",changeType:"positive"},{title:"Bandwidth",value:f.bandwidth,icon:Xa,color:"bg-amber-500",change:"+5%",changeType:"positive"},{title:"Avg Downloads/Day",value:f.avgDownloadsPerDay.toLocaleString(),icon:Vl,color:"bg-indigo-500",change:"+22%",changeType:"positive"},{title:"Server Uptime",value:"99.9%",icon:ys,color:"bg-emerald-600",change:"+0.1%",changeType:"positive"}].map((L,J)=>{const D=L.icon;return i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:L.title}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:L.value}),i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx(Vl,{size:14,className:`${L.changeType==="positive"?"text-emerald-500":"text-red-500"} mr-1`}),i.jsx("span",{className:`text-sm font-medium ${L.changeType==="positive"?"text-emerald-600":"text-red-600"}`,children:L.change}),i.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:L.title==="Total Files"?"":"vs last month"})]})]}),i.jsx("div",{className:`p-3 rounded-lg ${L.color} bg-opacity-10`,children:i.jsx(D,{className:`w-6 h-6 ${L.color.replace("bg-","text-")}`})})]})},J)})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Network Usage"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Eu,{className:"w-5 h-5 text-purple-500"}),i.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",new Date(w.lastUpdated).toLocaleTimeString()]})]})]}),i.jsx("div",{className:"h-64",children:v&&i.jsx(M0,{data:v,options:A})}),i.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[i.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Total Usage"}),i.jsxs("span",{className:"text-sm font-medium text-purple-800 dark:text-purple-200",children:[(w.totalUsage/1024).toFixed(1)," GB"]})]})}),i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Peak Bandwidth"}),i.jsxs("span",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:[w.peakBandwidth.toFixed(1)," MB/s"]})]})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Downloads Over Time"}),i.jsx(dt,{className:"w-5 h-5 text-blue-500"})]}),i.jsx("div",{className:"h-64",children:c&&i.jsx(M0,{data:c,options:A})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Activity by Hour"}),i.jsx(nt,{className:"w-5 h-5 text-emerald-500"})]}),i.jsx("div",{className:"h-64",children:u&&i.jsx(c5,{data:u,options:A})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"File Types"}),i.jsx(Qx,{className:"w-5 h-5 text-amber-500"})]}),i.jsx("div",{className:"h-64",children:p&&i.jsx(d5,{data:p,options:I})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent User Activity"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Latest user actions and system events with user details"})]}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[k.map((L,J)=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-sm",children:L.user_name.charAt(0)})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:L.user_name}),L.user_grade&&i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${$(L.user_grade)}`,children:L.user_grade})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[z(L),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:W(L.created_at)})]})]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:L.action}),L.details&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:L.details})]})]},J)),k.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(nt,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No recent activity"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"User activity will appear here as it happens."})]})]})})]})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(nt,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access analytics."})]})})},Y6=({onViewProfile:t})=>{const{user:e,hasAccess:a}=ht(),{getUsers:r,updateUserGrade:s,blockUser:n,unblockUser:o,createUser:l,deleteUser:c,getUserPassword:d,loading:u,error:h,setError:p}=Kt(),{logUserCreation:m,logUserGradeUpdate:v,logUserBlock:y,logUserUnblock:k,logUserDelete:g}=Es(),[f,x]=T.useState([]),[w,S]=T.useState(""),[N,_]=T.useState("all"),[b,j]=T.useState(null),[A,I]=T.useState(null),[z,$]=T.useState(null),[W,L]=T.useState(!1),[J,D]=T.useState(""),[F,B]=T.useState("30m"),[X,U]=T.useState(new Set),[Y,E]=T.useState({name:"",email:"",password:"",grade:"V4"});T.useEffect(()=>{P()},[]);const P=async()=>{console.log("UserManagement: Loading users...");const H=(await r()).filter(ce=>!ce.is_guest);x(H),console.log("UserManagement: Loaded",H.length,"users")},R=async(H,ce)=>{console.log("UserManagement: Updating user grade:",H,"to",ce);const Ie=f.find(Mn=>Mn.id===H);if(!Ie)return;const qr=Ie.grade;await s(H,ce)&&(await P(),j(null),D(""),te.gradeUpdated(Ie.name,ce),await v(Ie.name,qr,ce),console.log("UserManagement: Grade updated successfully"))},O=async(H,ce)=>{console.log("UserManagement: Blocking user:",H,"for",ce);const Ie=f.find(qr=>qr.id===H);Ie&&await n(H,ce)&&(await P(),I(null),te.userBlocked(Ie.name),await y(Ie.name,ce),console.log("UserManagement: User blocked successfully"))},M=async H=>{console.log("UserManagement: Unblocking user:",H);const ce=f.find(Ie=>Ie.id===H);ce&&await o(H)&&(await P(),te.userUnblocked(ce.name),await k(ce.name),console.log("UserManagement: User unblocked successfully"))},V=async H=>{console.log("UserManagement: Deleting user:",H);const ce=f.find(Ie=>Ie.id===H);ce&&await c(H)&&(await P(),$(null),te.warning(`User ${ce.name} has been deleted`),await g(ce.name),console.log("UserManagement: User deleted successfully"))},Q=async()=>{console.log("UserManagement: Creating new user:",Y.email);try{const H=Y.password||Math.random().toString(36).slice(-8)+Math.random().toString(36).slice(-8).toUpperCase()+"123!";await l({...Y,password:H})&&(await P(),te.success(`User ${Y.name} created successfully`),await m(Y.name,Y.grade),L(!1),E({name:"",email:"",password:"",grade:"V4"}),console.log("UserManagement: User created successfully"))}catch(H){console.error("UserManagement: Error creating user:",H)}},C=H=>{t&&t(H)},K=H=>{const ce=new Set(X);ce.has(H)?ce.delete(H):ce.add(H),U(ce)},G=async H=>{const ce=d(H);if(ce)try{await navigator.clipboard.writeText(ce),te.success("Password copied to clipboard")}catch(Ie){console.error("Failed to copy password:",Ie),te.error("Failed to copy password")}},ne=f.filter(H=>{const ce=H.name.toLowerCase().includes(w.toLowerCase())||H.email.toLowerCase().includes(w.toLowerCase()),Ie=N==="all"||H.grade===N;return ce&&Ie&&!H.is_guest}),fe=H=>{switch(H){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},kt=H=>{switch(H){case"Admin":return"Full system access";case"Support":return"Bug management access";case"V5":return"Advanced features";case"V4":return"Standard access";default:return"Basic access"}},Ft=H=>{switch(H){case"Admin":return i.jsx(Se,{size:16,className:"text-red-500"});case"Support":return i.jsx(Pr,{size:16,className:"text-amber-500"});case"V5":return i.jsx(Se,{size:16,className:"text-purple-500"});case"V4":return i.jsx(Se,{size:16,className:"text-blue-500"});default:return i.jsx(Se,{size:16,className:"text-gray-500"})}},Ct=H=>{switch(H){case"30m":return"30 minutes";case"1d":return"1 day";case"7d":return"7 days";case"30d":return"30 days";default:return H}},$t=H=>!H.is_blocked||!H.blocked_until?!1:new Date(H.blocked_until)>new Date;return a("Admin")?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"User Management"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Manage user accounts, permissions, and access levels."})]}),i.jsxs("button",{onClick:()=>L(!0),className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ia,{size:18}),i.jsx("span",{children:"Create User"})]})]}),h&&i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(It,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:h})]}),i.jsx("button",{onClick:()=>p(null),className:"text-red-400 hover:text-red-600 dark:hover:text-red-300",children:i.jsx(_e,{size:16})})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search users...",value:w,onChange:H=>S(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_s,{className:"text-gray-400 w-5 h-5"}),i.jsxs("select",{value:N,onChange:H=>_(H.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Grades"}),i.jsx("option",{value:"V4",children:"V4"}),i.jsx("option",{value:"V5",children:"V5"}),i.jsx("option",{value:"Support",children:"Support"}),i.jsx("option",{value:"Admin",children:"Admin"})]})]})]})}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Password"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Grade"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Downloads"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Last Active"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:ne.map(H=>{const ce=d(H.id),Ie=X.has(H.id);return i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:H.name.charAt(0)})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:i.jsxs("button",{onClick:()=>C(H.id),className:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:[H.name,H.id===(e==null?void 0:e.id)&&i.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400",children:"(You)"})]})}),i.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[i.jsx(nn,{size:12,className:"mr-1"}),H.email]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg px-3 py-2",children:[i.jsx(tk,{size:14,className:"text-gray-400"}),i.jsx("span",{className:"text-sm font-mono text-gray-900 dark:text-white",children:ce?Ie?ce:"":"No password"})]}),ce&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{onClick:()=>K(H.id),className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:Ie?"Hide password":"Show password",children:Ie?i.jsx(kc,{size:14}):i.jsx(Gt,{size:14})}),i.jsx("button",{onClick:()=>G(H.id),className:"p-1 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Copy password",children:i.jsx(J1,{size:14})})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:`flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full ${fe(H.grade)}`,children:[Ft(H.grade),i.jsx("span",{children:H.grade})]}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:kt(H.grade)})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$t(H)?i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(os,{size:14,className:"text-red-500"}),i.jsx("span",{className:"text-sm text-red-600 dark:text-red-400",children:"Blocked"})]}):i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(lt,{size:14,className:"text-emerald-500"}),i.jsx("span",{className:"text-sm text-emerald-600 dark:text-emerald-400",children:"Active"})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-900 dark:text-white",children:[i.jsx(nt,{size:14,className:"mr-1 text-gray-400"}),H.total_downloads||0]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[i.jsx(sr,{size:14,className:"mr-1"}),new Date(H.last_active).toLocaleDateString()]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>C(H.id),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"View Profile",children:i.jsx(Gt,{size:16})}),H.id!==(e==null?void 0:e.id)&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>{j(H),D(H.grade)},className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"Edit Grade",children:i.jsx(ra,{size:16})}),$t(H)?i.jsx("button",{onClick:()=>M(H.id),className:"p-2 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Unblock User",children:i.jsx(lk,{size:16})}):i.jsx("button",{onClick:()=>I(H),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",title:"Block User",children:i.jsx(os,{size:16})}),i.jsx("button",{onClick:()=>$(H),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",title:"Delete User",children:i.jsx(Rt,{size:16})})]})]})})]},H.id)})})]})}),ne.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(va,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No users found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria."})]})]}),W&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>L(!1)}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Create New User"}),i.jsx("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),i.jsx("input",{type:"text",value:Y.name,onChange:H=>E({...Y,name:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter full name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),i.jsx("input",{type:"email",value:Y.email,onChange:H=>E({...Y,email:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password (optional)"}),i.jsx("input",{type:"password",value:Y.password,onChange:H=>E({...Y,password:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Leave empty to auto-generate"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"If left empty, a secure password will be generated automatically"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Access Grade"}),i.jsxs("select",{value:Y.grade,onChange:H=>E({...Y,grade:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"V4",children:"V4 - Standard access"}),i.jsx("option",{value:"V5",children:"V5 - Advanced features"}),i.jsx("option",{value:"Support",children:"Support - Bug management access"})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(lt,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"User Account Created"}),i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"The user account will be created with the specified credentials. The user can log in immediately with their email and password."})]})]})})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:Q,disabled:u||!Y.name||!Y.email,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(ck,{size:18}),i.jsx("span",{children:u?"Creating...":"Create User"})]})]})]})]})}),b&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>j(null)}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Edit User Grade"}),i.jsx("button",{onClick:()=>j(null),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:b.name.charAt(0)})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:b.name}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:b.email})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Current Grade: ",i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${fe(b.grade)}`,children:b.grade})]}),i.jsxs("select",{value:J,onChange:H=>D(H.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"V4",children:"V4 - Standard access"}),i.jsx("option",{value:"V5",children:"V5 - Advanced features"}),i.jsx("option",{value:"Support",children:"Support - Bug management access"}),i.jsx("option",{value:"Admin",children:"Admin - Full system access"})]})]}),i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(It,{className:"text-amber-600 dark:text-amber-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Grade Change Warning"}),i.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:"Changing a user's grade will immediately affect their access permissions and available features."})]})]})})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:()=>j(null),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:()=>R(b.id,J),disabled:u||J===b.grade,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(lt,{size:18}),i.jsx("span",{children:u?"Updating...":"Update Grade"})]})]})]})]})}),A&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>I(null)}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Block User"}),i.jsx("button",{onClick:()=>I(null),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:A.name.charAt(0)})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:A.name}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:A.email})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Block Duration"}),i.jsxs("select",{value:F,onChange:H=>B(H.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"30m",children:"30 minutes"}),i.jsx("option",{value:"1d",children:"1 day"}),i.jsx("option",{value:"7d",children:"7 days"}),i.jsx("option",{value:"30d",children:"30 days"})]})]}),i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(os,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Block User Warning"}),i.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:["This user will be blocked for ",Ct(F)," and won't be able to access the system until the block expires."]})]})]})})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:()=>I(null),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:()=>O(A.id,F),disabled:u,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(os,{size:18}),i.jsx("span",{children:u?"Blocking...":"Block User"})]})]})]})]})}),z&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>$(null)}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Delete User"}),i.jsx("button",{onClick:()=>$(null),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:z.name.charAt(0)})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:z.name}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:z.email})]})]}),i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(It,{className:"text-red-600 dark:text-red-400 w-6 h-6 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Warning: This action cannot be undone"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"Deleting this user will permanently remove their account and all associated data including:"}),i.jsxs("ul",{className:"mt-2 text-sm text-red-700 dark:text-red-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"User profile information"}),i.jsx("li",{children:"Download history"}),i.jsx("li",{children:"Activity logs"}),i.jsx("li",{children:"Bug reports"}),i.jsx("li",{children:"Authored content"})]})]})]})}),i.jsxs("div",{className:"pt-3",children:[i.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Please type ",i.jsx("span",{className:"font-medium",children:z.name})," to confirm deletion:"]}),i.jsx("input",{type:"text",className:"mt-2 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:`Type "${z.name}" to confirm`,id:"delete-confirmation"})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:()=>$(null),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:()=>{const H=document.getElementById("delete-confirmation");H&&H.value===z.name?V(z.id):te.error("Name confirmation does not match")},disabled:u,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Rt,{size:18}),i.jsx("span",{children:u?"Deleting...":"Delete User"})]})]})]})]})}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-4",children:[{label:"Total Users",value:f.length,color:"bg-blue-500"},{label:"Admin Users",value:f.filter(H=>H.grade==="Admin").length,color:"bg-red-500"},{label:"Support Users",value:f.filter(H=>H.grade==="Support").length,color:"bg-amber-500"},{label:"V5 Users",value:f.filter(H=>H.grade==="V5").length,color:"bg-purple-500"},{label:"Blocked Users",value:f.filter(H=>$t(H)).length,color:"bg-gray-500"}].map((H,ce)=>i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:H.label}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:H.value})]}),i.jsx("div",{className:`p-2 rounded-lg ${H.color} bg-opacity-10`,children:i.jsx(va,{className:`w-5 h-5 ${H.color.replace("bg-","text-")}`})})]})},ce))})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(It,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access user management."})]})})},K6=()=>{const{hasAccess:t}=hv(),{getActivityLogs:e,getDownloadLogs:a,loading:r}=Kt(),[s,n]=T.useState([]),[o,l]=T.useState([]),[c,d]=T.useState(""),[u,h]=T.useState("all"),[p,m]=T.useState("7d");T.useEffect(()=>{v()},[p]);const v=async()=>{const f=p==="7d"?100:p==="30d"?500:1e3,[x,w]=await Promise.all([e(f),a(f)]);n(x),l(w)},y=f=>f.includes("download")?i.jsx(dt,{size:16,className:"text-blue-500"}):f.includes("login")||f.includes("auth")?i.jsx(Se,{size:16,className:"text-emerald-500"}):f.includes("profile")||f.includes("user")?i.jsx(nr,{size:16,className:"text-purple-500"}):f.includes("patch")||f.includes("note")?i.jsx(ya,{size:16,className:"text-amber-500"}):i.jsx(nt,{size:16,className:"text-gray-500"}),k=f=>{const x=new Date(f),w=Math.floor((new Date().getTime()-x.getTime())/1e3);return w<60?`${w}s ago`:w<3600?`${Math.floor(w/60)}m ago`:w<86400?`${Math.floor(w/3600)}h ago`:`${Math.floor(w/86400)}d ago`},g=()=>{let f=[];return(u==="all"||u==="activity")&&(f=[...f,...s.map(x=>({...x,type:"activity"}))]),(u==="all"||u==="downloads")&&(f=[...f,...o.map(x=>({...x,type:"download",action:`Downloaded ${x.file_name} v${x.file_version}`,details:`File: ${x.file_name}`}))]),f.sort((x,w)=>new Date(w.created_at).getTime()-new Date(x.created_at).getTime()),c&&(f=f.filter(x=>x.user_name.toLowerCase().includes(c.toLowerCase())||x.action.toLowerCase().includes(c.toLowerCase())||x.details&&x.details.toLowerCase().includes(c.toLowerCase()))),f};return t("Admin")?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Activity Logs"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Monitor user activities, downloads, and system events."})]}),i.jsxs("button",{onClick:v,disabled:r,className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(so,{size:18,className:r?"animate-spin":""}),i.jsx("span",{children:"Refresh"})]})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search logs...",value:c,onChange:f=>d(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_s,{className:"text-gray-400 w-5 h-5"}),i.jsxs("select",{value:u,onChange:f=>h(f.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Logs"}),i.jsx("option",{value:"activity",children:"Activity Only"}),i.jsx("option",{value:"downloads",children:"Downloads Only"})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(sr,{className:"text-gray-400 w-5 h-5"}),i.jsxs("select",{value:p,onChange:f=>m(f.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"7d",children:"Last 7 days"}),i.jsx("option",{value:"30d",children:"Last 30 days"}),i.jsx("option",{value:"90d",children:"Last 90 days"})]})]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Activities"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.length})]}),i.jsx(nt,{className:"w-8 h-8 text-blue-500"})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Downloads"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.length})]}),i.jsx(dt,{className:"w-8 h-8 text-emerald-500"})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Unique Users"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:new Set([...s.map(f=>f.user_id),...o.map(f=>f.user_id)]).size})]}),i.jsx(nr,{className:"w-8 h-8 text-purple-500"})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Showing ",g().length," log entries"]})]}),i.jsx("div",{className:"max-h-96 overflow-y-auto",children:i.jsxs("div",{className:"p-6 space-y-4",children:[g().map((f,x)=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:y(f.action)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f.user_name}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${f.type==="download"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400"}`,children:f.type}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:k(f.created_at)})]})]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:f.action}),f.details&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:f.details}),i.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500 dark:text-gray-500",children:[i.jsxs("span",{children:["IP: ",f.ip_address||"Unknown"]}),i.jsx("span",{children:new Date(f.created_at).toLocaleString()})]})]})]},`${f.type}-${f.id}-${x}`)),g().length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Gt,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No logs found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria or date range."})]})]})})]})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(It,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access activity logs."})]})})},X6=()=>{var t,e;const{user:a,hasAccess:r}=ht(),{createBugReport:s,getBugReports:n,updateBugReport:o,loading:l}=Kt(),{logSystemAction:c,logBugReportSubmit:d}=Es(),[u,h]=T.useState({title:"",description:"",severity:"medium",category:"general",steps:[""],expected_behavior:"",actual_behavior:"",environment:{os:"FreeBSD",version:"V4"}}),[p,m]=T.useState([]),[v,y]=T.useState(!1),[k,g]=T.useState(!1),[f,x]=T.useState([]),[w,S]=T.useState(null),[N,_]=T.useState(!1),[b,j]=T.useState(""),[A,I]=T.useState(""),[z,$]=T.useState("all"),W=[{value:"low",label:"Low",color:"text-green-600 bg-green-100 dark:bg-green-900/20 dark:text-green-400",description:"Minor issue, workaround available"},{value:"medium",label:"Medium",color:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-400",description:"Moderate impact on functionality"},{value:"high",label:"High",color:"text-orange-600 bg-orange-100 dark:bg-orange-900/20 dark:text-orange-400",description:"Significant impact, needs attention"},{value:"critical",label:"Critical",color:"text-red-600 bg-red-100 dark:bg-red-900/20 dark:text-red-400",description:"System breaking, immediate fix required"}],L=[{value:"general",label:"General",icon:Ga},{value:"ui",label:"User Interface",icon:ys},{value:"performance",label:"Performance",icon:ys},{value:"security",label:"Security",icon:It},{value:"feature",label:"Feature Request",icon:lt}];T.useEffect(()=>{J()},[a]);const J=async()=>{if(a)try{const C=(await n()).filter(K=>K.reporter_id===a.id);x(C)}catch(C){console.error("Failed to load bug reports:",C),te.error("Failed to load your bug reports")}},D=async C=>{if(C.preventDefault(),!!a)try{y(!0);const K={...u,reporter_id:a.id,reporter_name:a.name,steps:u.steps.filter(G=>G.trim()!==""),attachments:p.map(G=>G.name),status:"open",environment:{browser:"",os:u.environment.os,version:u.environment.version},comments:[]};await s(K)&&(te.success("Bug report submitted successfully"),await d(u.title),await c(`Submitted bug report: ${u.title}`),h({title:"",description:"",severity:"medium",category:"general",steps:[""],expected_behavior:"",actual_behavior:"",environment:{os:"FreeBSD",version:"V4"}}),m([]),g(!1),await J())}catch(K){console.error("Failed to submit bug report:",K),te.error("Failed to submit bug report")}finally{y(!1)}},F=async()=>{if(!(!w||!a||!b.trim()))try{const C={id:`comment_${Date.now()}`,author:a.name,author_grade:a.grade,content:b,created_at:new Date().toISOString()},K=[...w.comments||[],C];if(await o(w.id,{comments:K})){te.success("Comment added successfully"),j(""),await J();const G=(await n()).find(ne=>ne.id===w.id);G&&S(G)}}catch(C){console.error("Failed to add comment:",C),te.error("Failed to add comment")}},B=()=>{h({...u,steps:[...u.steps,""]})},X=(C,K)=>{const G=[...u.steps];G[C]=K,h({...u,steps:G})},U=C=>{const K=u.steps.filter((G,ne)=>ne!==C);h({...u,steps:K})},Y=C=>{const K=Array.from(C.target.files||[]);m([...p,...K])},E=C=>{m(p.filter((K,G)=>G!==C))},P=C=>{S(C),_(!0)},R=C=>{switch(C){case"low":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400";case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},O=C=>{switch(C){case"open":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"in-progress":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"resolved":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400";case"closed":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},M=C=>{switch(C){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},V=C=>{const K=new Date(C),G=Math.floor((new Date().getTime()-K.getTime())/1e3);return G<60?`${G}s ago`:G<3600?`${Math.floor(G/60)}m ago`:G<86400?`${Math.floor(G/3600)}h ago`:`${Math.floor(G/86400)}d ago`},Q=f.filter(C=>{const K=C.title.toLowerCase().includes(A.toLowerCase())||C.description.toLowerCase().includes(A.toLowerCase()),G=z==="all"||C.status===z;return K&&G});return r("V4")?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Bug Reports"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"View your submitted bug reports and submit new ones."})]}),i.jsx("div",{className:"mt-4 sm:mt-0",children:i.jsx("button",{onClick:()=>{g(!k),N&&_(!1)},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:k?i.jsxs(i.Fragment,{children:[i.jsx(_e,{size:18}),i.jsx("span",{children:"Cancel"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Ia,{size:18}),i.jsx("span",{children:"Submit New Bug"})]})})})]}),!k&&!N&&i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search bug reports...",value:A,onChange:C=>I(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_s,{className:"text-gray-400 w-5 h-5"}),i.jsxs("select",{value:z,onChange:C=>$(C.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"open",children:"Open"}),i.jsx("option",{value:"in-progress",children:"In Progress"}),i.jsx("option",{value:"resolved",children:"Resolved"}),i.jsx("option",{value:"closed",children:"Closed"})]})]}),i.jsxs("button",{onClick:J,disabled:l,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(so,{size:18,className:l?"animate-spin":""}),i.jsx("span",{children:"Refresh"})]})]})]})}),k&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bug Report Details"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Please provide as much detail as possible to help us reproduce and fix the issue."})]}),i.jsxs("form",{onSubmit:D,className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bug Title *"}),i.jsx("input",{type:"text",value:u.title,onChange:C=>h({...u,title:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Brief description of the bug",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Severity *"}),i.jsx("div",{className:"space-y-2",children:W.map(C=>i.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"severity",value:C.value,checked:u.severity===C.value,onChange:K=>h({...u,severity:K.target.value}),className:"text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${C.color}`,children:C.label}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:C.description})]},C.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category *"}),i.jsx("div",{className:"space-y-2",children:L.map(C=>{const K=C.icon;return i.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"category",value:C.value,checked:u.category===C.value,onChange:G=>h({...u,category:G.target.value}),className:"text-blue-600 focus:ring-blue-500"}),i.jsx(K,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:C.label})]},C.value)})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description *"}),i.jsx("textarea",{value:u.description,onChange:C=>h({...u,description:C.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Detailed description of the bug...",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Steps to Reproduce"}),i.jsxs("div",{className:"space-y-2",children:[u.steps.map((C,K)=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 w-8",children:[K+1,"."]}),i.jsx("input",{type:"text",value:C,onChange:G=>X(K,G.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe this step..."}),u.steps.length>1&&i.jsx("button",{type:"button",onClick:()=>U(K),className:"p-2 text-red-500 hover:text-red-700 dark:hover:text-red-400",children:i.jsx(_e,{size:16})})]},K)),i.jsx("button",{type:"button",onClick:B,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:i.jsx("span",{children:"Add Step"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Expected Behavior"}),i.jsx("textarea",{value:u.expected_behavior,onChange:C=>h({...u,expected_behavior:C.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"What should happen?"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Actual Behavior"}),i.jsx("textarea",{value:u.actual_behavior,onChange:C=>h({...u,actual_behavior:C.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"What actually happens?"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Environment Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Operating System"}),i.jsx("select",{value:u.environment.os,onChange:C=>h({...u,environment:{...u.environment,os:C.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:i.jsx("option",{value:"FreeBSD",children:"FreeBSD"})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Version"}),i.jsxs("select",{value:u.environment.version,onChange:C=>h({...u,environment:{...u.environment,version:C.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"V4",children:"V4"}),i.jsx("option",{value:"V5",children:"V5"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Attachments (Screenshots, logs, etc.)"}),i.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Zh,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("label",{className:"cursor-pointer",children:[i.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900 dark:text-white",children:"Upload files"}),i.jsx("input",{type:"file",multiple:!0,accept:"image/*,.txt,.log,.pdf",onChange:Y,className:"hidden"})]}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"PNG, JPG, TXT, LOG, PDF up to 10MB each"})]})]})}),p.length>0&&i.jsx("div",{className:"mt-4 space-y-2",children:p.map((C,K)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(ya,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:C.name}),i.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",(C.size/1024).toFixed(1)," KB)"]})]}),i.jsx("button",{type:"button",onClick:()=>E(K),className:"text-red-500 hover:text-red-700 dark:hover:text-red-400",children:i.jsx(_e,{size:16})})]},K))})]}),i.jsxs("div",{className:"flex justify-end space-x-3",children:[i.jsx("button",{type:"button",onClick:()=>{h({title:"",description:"",severity:"medium",category:"general",steps:[""],expected_behavior:"",actual_behavior:"",environment:{os:"FreeBSD",version:"V4"}}),m([])},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Clear Form"}),i.jsxs("button",{type:"submit",disabled:v||!u.title||!u.description,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Su,{size:18}),i.jsx("span",{children:v?"Submitting...":"Submit Bug Report"})]})]})]})]}),N&&w&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>_(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:i.jsx(_e,{size:20})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Bug Report Details"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R(w.severity)}`,children:w.severity}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O(w.status)}`,children:w.status})]})]})}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:w.title}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:w.description})]}),w.steps&&w.steps.length>0&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-2",children:"Steps to Reproduce"}),i.jsx("ol",{className:"list-decimal list-inside space-y-1",children:w.steps.map((C,K)=>i.jsx("li",{className:"text-gray-600 dark:text-gray-400",children:C},K))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.expected_behavior&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-2",children:"Expected Behavior"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:w.expected_behavior})]}),w.actual_behavior&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-2",children:"Actual Behavior"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:w.actual_behavior})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-2",children:"Environment"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"OS:"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:((t=w.environment)==null?void 0:t.os)||"Not specified"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Version:"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:((e=w.environment)==null?void 0:e.version)||"Not specified"})]})]})]}),i.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[i.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[i.jsx(on,{size:18,className:"mr-2"}),"Comments"]}),i.jsx("div",{className:"space-y-4 mb-6",children:w.comments&&w.comments.length>0?w.comments.map((C,K)=>i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-xs",children:C.author.charAt(0)})}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:C.author}),C.author_grade&&i.jsxs("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full flex items-center ${M(C.author_grade)}`,children:[i.jsx(Se,{size:10,className:"mr-1"}),C.author_grade]})]})]}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:V(C.created_at)})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:C.content})]},K)):i.jsxs("div",{className:"text-center py-4",children:[i.jsx(on,{className:"mx-auto h-8 w-8 text-gray-400"}),i.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"No comments yet"})]})}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Add a Comment"}),i.jsx("textarea",{value:b,onChange:C=>j(C.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Type your comment here..."}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:F,disabled:!b.trim()||l,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Su,{size:16}),i.jsx("span",{children:l?"Sending...":"Send Comment"})]})})]})]})]})})]}),!k&&!N&&i.jsx("div",{className:"space-y-4",children:Q.length>0?Q.map(C=>i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>P(C),children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:C.title}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R(C.severity)}`,children:C.severity}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O(C.status)}`,children:C.status.replace("-"," ")})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[i.jsx(qt,{size:14}),i.jsx("span",{children:V(C.created_at)})]})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 line-clamp-2 mb-3",children:C.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[i.jsx(on,{size:14}),i.jsxs("span",{children:[C.comments?C.comments.length:0," comments"]})]}),i.jsxs("button",{onClick:K=>{K.stopPropagation(),P(C)},className:"flex items-center space-x-1 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm",children:[i.jsx(Gt,{size:14}),i.jsx("span",{children:"View Details"})]})]})]})},C.id)):i.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx(Ga,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"No bug reports found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:A||z!=="all"?"Try adjusting your search criteria.":"You haven't submitted any bug reports yet."}),i.jsxs("button",{onClick:()=>g(!0),className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ia,{size:18}),i.jsx("span",{children:"Submit New Bug"})]})]})}),k&&i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(lt,{className:"text-blue-600 dark:text-blue-400 w-6 h-6 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Tips for Better Bug Reports"}),i.jsxs("ul",{className:"space-y-1 text-sm text-blue-800 dark:text-blue-200",children:[i.jsx("li",{children:" Be specific and descriptive in your title"}),i.jsx("li",{children:" Include step-by-step instructions to reproduce the issue"}),i.jsx("li",{children:" Attach screenshots or screen recordings when possible"}),i.jsx("li",{children:" Mention what you expected to happen vs. what actually happened"}),i.jsx("li",{children:" Specify which Prodomo version you're using (V4 or V5)"})]})]})]})})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(It,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need V4+ access to report bugs."})]})})},Q6=()=>{var t;const{user:e,hasAccess:a}=ht(),{getBugReports:r,updateBugReport:s,deleteBugReport:n,loading:o}=Kt(),{logSystemAction:l}=Es();Fb();const[c,d]=T.useState([]),[u,h]=T.useState(""),[p,m]=T.useState("all"),[v,y]=T.useState("all"),[k,g]=T.useState(null),[f,x]=T.useState(!1),[w,S]=T.useState("");T.useEffect(()=>{N()},[]);const N=async()=>{const U=await r();d(U)},_=async(U,Y)=>{const E=c.find(R=>R.id===U);if(!E)return;const P=E.status;if(await s(U,{status:Y})&&(await N(),te.success(`Bug "${E.title}" marked as ${Y}`),await l(`[ADMIN] Updated bug status: ${E.title} -> ${Y}`,`Bug ID: ${U}`),(Y==="in-progress"||Y==="resolved")&&E.reporter_id!==(e==null?void 0:e.id))){console.log("Sending notification to reporter:",E.reporter_id,"for bug:",E.title),E.id,E.title,E.reporter_id,new Date().toISOString();const R=JSON.parse(localStorage.getItem(`prodomo_notifications_${E.reporter_id}`)||"[]");let O="",M="info";switch(Y){case"in-progress":O=`Your bug report "${E.title}" is now being worked on by our team.`,M="info";break;case"resolved":O=`Great news! Your bug report "${E.title}" has been resolved.`,M="success";break;case"closed":O=`Your bug report "${E.title}" has been closed.`,M="info";break;default:O=`Your bug report "${E.title}" status changed from ${P} to ${Y}.`,M="info"}const V={id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:"Bug Report Update",message:O,type:M,read:!1,created_at:new Date().toISOString(),related_id:E.id,action_url:"/bug-report"},Q=[V,...R].slice(0,50);localStorage.setItem(`prodomo_notifications_${E.reporter_id}`,JSON.stringify(Q)),console.log("Notification stored for user:",E.reporter_id,V)}},b=async()=>{if(!(!k||!e||!w.trim()))try{const U={id:`comment_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,author:e.name,author_grade:e.grade,content:w.trim(),created_at:new Date().toISOString()},Y=[...k.comments||[],U];if(await s(k.id,{comments:Y})){await N(),S("");const E=(await r()).find(P=>P.id===k.id);if(E&&g(E),te.success("Comment added successfully"),await l("Added comment to bug report",`Bug ID: ${k.id}`),(a("Admin")||e.grade==="Support")&&k.reporter_id!==e.id){const P=JSON.parse(localStorage.getItem(`prodomo_notifications_${k.reporter_id}`)||"[]"),R=[{id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:"New Comment on Your Bug Report",message:`${e.name} commented on your bug report "${k.title}"`,type:"info",read:!1,created_at:new Date().toISOString(),related_id:k.id,action_url:"/bug-report"},...P].slice(0,50);localStorage.setItem(`prodomo_notifications_${k.reporter_id}`,JSON.stringify(R))}}}catch(U){console.error("Failed to add comment:",U),te.error("Failed to add comment")}},j=async U=>{c.find(Y=>Y.id===U)&&$(U)},A=async U=>{const Y=c.find(E=>E.id===U);Y&&(await n(U)?(await l(`[ADMIN] Deleted bug report: ${Y.title}`,`Bug ID: ${U}`),await N(),te.warning(`Bug report for "${Y.title}" deleted`)):te.error("Failed to delete bug report"),$(null))},I=()=>{$(null)},[z,$]=T.useState(null),W=U=>{switch(U){case"low":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400";case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},L=U=>{switch(U){case"open":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"in-progress":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"resolved":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400";case"closed":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},J=U=>{switch(U){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},D=U=>{switch(U){case"open":return i.jsx(Ga,{size:16});case"in-progress":return i.jsx(qt,{size:16});case"resolved":return i.jsx(lt,{size:16});case"closed":return i.jsx(_e,{size:16});default:return i.jsx(Ga,{size:16})}},F=c.filter(U=>{const Y=U.title.toLowerCase().includes(u.toLowerCase())||U.description.toLowerCase().includes(u.toLowerCase())||U.reporter_name.toLowerCase().includes(u.toLowerCase()),E=p==="all"||U.status===p,P=v==="all"||U.severity===v;return Y&&E&&P}),B={open:c.filter(U=>U.status==="open").length,"in-progress":c.filter(U=>U.status==="in-progress").length,resolved:c.filter(U=>U.status==="resolved").length,closed:c.filter(U=>U.status==="closed").length},X=U=>new Date(U).toLocaleString();return!a("Admin")&&(e==null?void 0:e.grade)!=="Support"?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Ka,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin or Support privileges to manage bug reports."})]})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Bug Management"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Review, manage, and resolve bug reports from users."})]}),i.jsxs("button",{onClick:N,disabled:o,className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(so,{size:18,className:o?"animate-spin":""}),i.jsx("span",{children:"Refresh"})]})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-6",children:[{label:"Open",value:B.open,color:"bg-blue-500",icon:Ga},{label:"In Progress",value:B["in-progress"],color:"bg-purple-500",icon:qt},{label:"Resolved",value:B.resolved,color:"bg-emerald-500",icon:lt},{label:"Closed",value:B.closed,color:"bg-gray-500",icon:_e}].map((U,Y)=>{const E=U.icon;return i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:U.label}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:U.value})]}),i.jsx("div",{className:`p-3 rounded-lg ${U.color} bg-opacity-10`,children:i.jsx(E,{className:`w-6 h-6 ${U.color.replace("bg-","text-")}`})})]})},Y)})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search bug reports...",value:u,onChange:U=>h(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_s,{className:"text-gray-400 w-5 h-5"}),i.jsxs("select",{value:p,onChange:U=>m(U.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"open",children:"Open"}),i.jsx("option",{value:"in-progress",children:"In Progress"}),i.jsx("option",{value:"resolved",children:"Resolved"}),i.jsx("option",{value:"closed",children:"Closed"})]})]}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs("select",{value:v,onChange:U=>y(U.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Severity"}),i.jsx("option",{value:"low",children:"Low"}),i.jsx("option",{value:"medium",children:"Medium"}),i.jsx("option",{value:"high",children:"High"}),i.jsx("option",{value:"critical",children:"Critical"})]})})]})]})}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Bug Report"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Severity"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Reporter"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Created"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Comments"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:F.map(U=>{var Y;return i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:U.title}),i.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[U.description.substring(0,100),"..."]}),i.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[i.jsx(sb,{size:12,className:"text-gray-400"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:U.category})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${W(U.severity)}`,children:U.severity})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs("span",{className:`flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full ${L(U.status)}`,children:[D(U.status),i.jsx("span",{className:"capitalize",children:U.status.replace("-"," ")})]})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(nr,{size:14,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:U.reporter_name})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(sr,{size:14,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(U.created_at).toLocaleDateString()})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(on,{size:14,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:((Y=U.comments)==null?void 0:Y.length)||0})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>{g(U),x(!0)},className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"View Details",children:i.jsx(Gt,{size:16})}),U.status!=="in-progress"&&i.jsx("button",{onClick:()=>_(U.id,"in-progress"),className:"p-2 text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors duration-200",title:"Mark as In Progress",children:i.jsx(qt,{size:16})}),U.status!=="resolved"&&i.jsx("button",{onClick:()=>_(U.id,"resolved"),className:"p-2 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Mark as Resolved",children:i.jsx(lt,{size:16})}),a("Admin")&&i.jsx("button",{onClick:()=>j(U.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",title:"Delete",children:i.jsx(Rt,{size:16})})]})})]},U.id)})})]})}),F.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ga,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No bug reports found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria."})]})]}),f&&k&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>x(!1)}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Ga,{className:"w-6 h-6 text-red-500"}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:k.title}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${W(k.severity)}`,children:k.severity}),i.jsxs("span",{className:`flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full ${L(k.status)}`,children:[D(k.status),i.jsx("span",{className:"capitalize",children:k.status.replace("-"," ")})]})]}),i.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Description"}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:k.description})]}),k.steps.length>0&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Steps to Reproduce"}),i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:k.steps.map((U,Y)=>i.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:U},Y))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[k.expected_behavior&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Expected Behavior"}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:k.expected_behavior})]}),k.actual_behavior&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Actual Behavior"}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:k.actual_behavior})]})]}),i.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[i.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[i.jsx(on,{className:"mr-2",size:18}),"Comments (",((t=k.comments)==null?void 0:t.length)||0,")"]}),i.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto mb-4",children:k.comments&&k.comments.length>0?k.comments.map((U,Y)=>i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-xs",children:U.author.charAt(0)})}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:U.author}),U.author_grade&&i.jsxs("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full flex items-center ${J(U.author_grade)}`,children:[i.jsx(Se,{size:10,className:"mr-1"}),U.author_grade]})]})]}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:X(U.created_at)})]}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:U.content})]},Y)):i.jsxs("div",{className:"text-center py-6",children:[i.jsx(on,{className:"mx-auto h-10 w-10 text-gray-400"}),i.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"No comments yet. Add a comment to communicate with the reporter."})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Add a Comment"}),i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("textarea",{value:w,onChange:U=>S(U.target.value),rows:3,className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Add your comment here..."}),i.jsxs("button",{onClick:b,disabled:!w.trim()||o,className:"flex-shrink-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Su,{size:16}),i.jsx("span",{children:"Send"})]})]})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Bug Information"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Category:"}),i.jsx("span",{className:"text-gray-900 dark:text-white capitalize",children:k.category})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Reporter:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:k.reporter_name})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Created:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(k.created_at).toLocaleDateString()})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Updated:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(k.updated_at).toLocaleDateString()})]})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Environment"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"OS:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:k.environment.os||"Not specified"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Version:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:k.environment.version||"Not specified"})]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Actions"}),i.jsxs("div",{className:"space-y-2",children:[k.status!=="in-progress"&&i.jsxs("button",{onClick:()=>{_(k.id,"in-progress"),x(!1)},className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors duration-200",children:[i.jsx(qt,{size:16}),i.jsx("span",{children:"Mark In Progress"})]}),k.status!=="resolved"&&i.jsxs("button",{onClick:()=>{_(k.id,"resolved"),x(!1)},className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors duration-200",children:[i.jsx(lt,{size:16}),i.jsx("span",{children:"Mark Resolved"})]}),k.status!=="closed"&&i.jsxs("button",{onClick:()=>{_(k.id,"closed"),x(!1)},className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors duration-200",children:[i.jsx(_e,{size:16}),i.jsx("span",{children:"Close Bug"})]})]})]})]})]})]})]})}),z&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:I}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"sm:flex sm:items-start",children:[i.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:i.jsx(Rt,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),i.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[i.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete Bug Report"}),i.jsx("div",{className:"mt-2",children:i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this bug report? This action cannot be undone."})})]})]}),i.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[i.jsx("button",{type:"button",onClick:()=>A(z),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),i.jsx("button",{type:"button",onClick:I,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]})},Z6=()=>{const{hasAccess:t}=ht(),[e,a]=T.useState(null),[r,s]=T.useState(null),[n,o]=T.useState(null),[l,c]=T.useState(!1),[d,u]=T.useState(!1),[h,p]=T.useState(Vt()),[m,v]=T.useState(null),[y,k]=T.useState(!1);T.useEffect(()=>{g(),f()},[h]);const g=()=>{u(!0);try{const I=xk();a(I)}catch(I){console.error("Failed to load IP statistics:",I),te.error("Failed to load IP protection statistics")}finally{u(!1)}},f=()=>{try{const I=Zt.getSecurityStats();v(I),k(Zt.getRateLimitStatus("login"))}catch(I){console.error("Failed to load security stats:",I)}},x=I=>{confirm(`Are you sure you want to unblock IP ${I}?`)&&(bk(I)?(Zt.unblockIP(I),te.ipUnblocked(I),g(),f(),r===I&&c(!1)):te.error("Failed to unblock IP"))},w=I=>{const z=yk(I);o(z),s(I),c(!0)},S=()=>{confirm("This will remove old IP records and sessions. Continue?")&&(ub(),g(),te.success("Old records cleaned up successfully"))},N=()=>{const I=!h;gk(I),p(I),I?te.success("IP Protection has been enabled","Protection Active"):te.warning("IP Protection has been disabled","Protection Inactive"),g()},_=()=>{const I=!y;Zt.toggleRateLimit("login",I),k(I),I?te.success("Login rate limiting has been enabled","Protection Active"):te.warning("Login rate limiting has been disabled","Protection Inactive"),f()},b=I=>{const z=new Date(I),$=Math.floor((new Date().getTime()-z.getTime())/1e3);return $<60?`${$}s ago`:$<3600?`${Math.floor($/60)}m ago`:$<86400?`${Math.floor($/3600)}h ago`:`${Math.floor($/86400)}d ago`},j=I=>{const z=new Date(I),$=new Date,W=z.getTime()-$.getTime();if(W<=0)return"Expired";const L=Math.floor(W/(1e3*60*60)),J=Math.floor(W%(1e3*60*60)/(1e3*60));return L>24?`${Math.floor(L/24)}d ${L%24}h`:`${L}h ${J}m`},A=I=>I.blockedUntil?new Date(I.blockedUntil)>new Date:!1;return t("Admin")?e?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"IP Protection Dashboard"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Monitor and manage IP-based protection for guest users."})]}),i.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[i.jsxs("button",{onClick:S,className:"flex items-center space-x-2 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(nt,{size:18}),i.jsx("span",{children:"Cleanup Old Records"})]}),i.jsxs("button",{onClick:g,disabled:d,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(so,{size:18,className:d?"animate-spin":""}),i.jsx("span",{children:"Refresh"})]})]})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`p-3 rounded-lg ${h?"bg-emerald-100 dark:bg-emerald-900/20":"bg-red-100 dark:bg-red-900/20"}`,children:i.jsx(Se,{className:`w-6 h-6 ${h?"text-emerald-500":"text-red-500"}`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"IP Protection System"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:h?"Protection is active - Guest IPs will be blocked for 3 days after session expiry":"Protection is disabled - Guest IPs will not be blocked after session expiry"})]})]}),i.jsx("button",{onClick:N,className:`mt-4 sm:mt-0 flex items-center space-x-2 px-6 py-3 ${h?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700"} text-white rounded-lg font-medium transition-colors duration-200`,children:h?i.jsxs(i.Fragment,{children:[i.jsx(Cu,{size:20}),i.jsx("span",{children:"Protection Enabled"})]}):i.jsxs(i.Fragment,{children:[i.jsx(ql,{size:20}),i.jsx("span",{children:"Protection Disabled"})]})})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`p-3 rounded-lg ${y?"bg-emerald-100 dark:bg-emerald-900/20":"bg-red-100 dark:bg-red-900/20"}`,children:i.jsx(Ui,{className:`w-6 h-6 ${y?"text-emerald-500":"text-red-500"}`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Login Rate Limiting"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:y?"Rate limiting is active - Too many login attempts will be temporarily blocked":"Rate limiting is disabled - No cooldown for failed login attempts"})]})]}),i.jsx("button",{onClick:_,className:`mt-4 sm:mt-0 flex items-center space-x-2 px-6 py-3 ${y?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700"} text-white rounded-lg font-medium transition-colors duration-200`,children:y?i.jsxs(i.Fragment,{children:[i.jsx(Cu,{size:20}),i.jsx("span",{children:"Rate Limiting Enabled"})]}):i.jsxs(i.Fragment,{children:[i.jsx(ql,{size:20}),i.jsx("span",{children:"Rate Limiting Disabled"})]})})]})}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-6",children:[{title:"Tracked IPs",value:e.totalTrackedIPs,icon:Xa,color:"bg-blue-500",description:"Total IPs in system"},{title:"Blocked IPs",value:e.blockedIPs,icon:os,color:"bg-red-500",description:"Currently blocked"},{title:"Sessions Today",value:e.guestSessionsToday,icon:va,color:"bg-emerald-500",description:"Guest sessions today"},{title:"Unique IPs Today",value:e.uniqueIPsToday,icon:Vl,color:"bg-purple-500",description:"Different IPs today"}].map((I,z)=>{const $=I.icon;return i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:I.title}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:I.value}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:I.description})]}),i.jsx("div",{className:`p-3 rounded-lg ${I.color} bg-opacity-10`,children:i.jsx($,{className:`w-6 h-6 ${I.color.replace("bg-","text-")}`})})]})},z)})}),m&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Qh,{className:"w-5 h-5 text-blue-500"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Security Settings"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Rate Limiting Configuration"}),i.jsx("div",{className:"space-y-3",children:Object.entries(m.rateLimitConfigs||{}).map(([I,z])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:I}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[z.maxRequests," requests / ",Math.round(z.windowMs/1e3),"s"]})]}),i.jsx("button",{onClick:()=>{Zt.toggleRateLimit(I,!z.enabled),f(),I==="login"&&k(!z.enabled)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${z.enabled?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${z.enabled?"translate-x-6":"translate-x-1"}`})})]},I))})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Security Statistics"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Events"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m.totalEvents})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Blocked Requests"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m.blockedRequests})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Critical Events"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m.criticalEvents})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Recent Events (1h)"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m.recentEvents})]})]})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(Se,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Security Configuration"}),i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["You can enable or disable various security features above. Login rate limiting is currently",i.jsx("span",{className:`font-medium ${y?" text-emerald-600 dark:text-emerald-400":" text-red-600 dark:text-red-400"}`,children:y?" enabled":" disabled"}),"."]})]})]})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"IP Records"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Recent IP addresses and their protection status"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"IP Address"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Attempts"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Last Session"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Block Expires"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.records.map(I=>{const z=A(I);return i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xa,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:I.ip})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"flex items-center space-x-2",children:z?i.jsxs(i.Fragment,{children:[i.jsx(os,{size:16,className:"text-red-500"}),i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400 rounded-full",children:"Blocked"})]}):i.jsxs(i.Fragment,{children:[i.jsx(lt,{size:16,className:"text-emerald-500"}),i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400 rounded-full",children:"Active"})]})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(nt,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:I.attemptCount})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(qt,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:b(I.lastGuestSession)})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:I.blockedUntil?i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(sr,{size:16,className:"text-amber-500"}),i.jsx("span",{className:"text-sm text-amber-600 dark:text-amber-400",children:j(I.blockedUntil)})]}):i.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>w(I.ip),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"View Details",children:i.jsx(Gt,{size:16})}),z&&i.jsx("button",{onClick:()=>x(I.ip),className:"p-2 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Unblock IP",children:i.jsx($m,{size:16})})]})})]},I.ip)})})]})}),e.records.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Se,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No IP records"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"IP records will appear here as guest sessions are created."})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Guest Sessions"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Latest guest sessions and their details"})]}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[e.recentSessions.map((I,z)=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:`p-2 rounded-lg ${I.expired?"bg-red-100 dark:bg-red-900/20":"bg-emerald-100 dark:bg-emerald-900/20"}`,children:I.expired?i.jsx(_e,{className:"w-5 h-5 text-red-500"}):i.jsx(lt,{className:"w-5 h-5 text-emerald-500"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:I.ip}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Started: ",b(I.startTime),I.endTime&&`  Ended: ${b(I.endTime)}`]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${I.expired?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400"}`,children:I.expired?"Expired":"Active"}),i.jsx("button",{onClick:()=>w(I.ip),className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:i.jsx(Gt,{size:14})})]})]},I.id)),e.recentSessions.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(va,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No recent sessions"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Guest sessions will appear here as they are created."})]})]})})]}),l&&n&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>c(!1)}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Se,{className:"w-6 h-6 text-blue-500"}),i.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["IP Details: ",n.ip]})]}),i.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Status"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current Status"}),i.jsx("div",{className:"flex items-center space-x-2 mt-1",children:A(n)?i.jsxs(i.Fragment,{children:[i.jsx(os,{size:16,className:"text-red-500"}),i.jsx("span",{className:"text-red-600 dark:text-red-400 font-medium",children:"Blocked"})]}):i.jsxs(i.Fragment,{children:[i.jsx(lt,{size:16,className:"text-emerald-500"}),i.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:"Active"})]})})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Block Expires"}),i.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:n.blockedUntil?j(n.blockedUntil):"Not blocked"})]})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Activity"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Attempts"}),i.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:n.attemptCount})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last Session"}),i.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:b(n.lastGuestSession)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"First Attempt"}),i.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:b(n.firstAttempt)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Location"}),i.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:n.location||"Unknown"})]})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Technical Details"}),i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"User Agent"}),i.jsx("p",{className:"text-xs text-gray-900 dark:text-white font-mono mt-1 break-all",children:n.userAgent||"Not available"})]})})]}),A(n)&&i.jsx("div",{className:"flex justify-end space-x-3",children:i.jsxs("button",{onClick:()=>{x(n.ip),c(!1)},className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors duration-200",children:[i.jsx($m,{size:16}),i.jsx("span",{children:"Unblock IP"})]})})]})]})]})})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Ka,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access IP protection dashboard."})]})})},eE=({isOpen:t,onClose:e})=>{const{signIn:a,signInAsGuest:r,loading:s,error:n}=ht(),[o,l]=T.useState("signin"),[c,d]=T.useState({email:"",password:"",adminToken:""}),[u,h]=T.useState(null),[p,m]=T.useState(""),[v,y]=T.useState(!1),[k,g]=T.useState(Vt()),[f,x]=T.useState(null),[w,S]=T.useState(null);T.useEffect(()=>{t&&(_(),N())},[t]),T.useEffect(()=>{g(Vt())},[t,o]),T.useEffect(()=>{n&&S(n)},[n]);const N=()=>{const z=localStorage.getItem("login_cooldown");if(z)try{const{until:$}=JSON.parse(z),W=Date.now();if($>W){x(Math.ceil(($-W)/1e3));const L=setInterval(()=>{x(J=>J===null||J<=1?(clearInterval(L),localStorage.removeItem("login_cooldown"),null):J-1)},1e3);return()=>clearInterval(L)}else localStorage.removeItem("login_cooldown")}catch($){console.error("Failed to parse login cooldown:",$),localStorage.removeItem("login_cooldown")}},_=async()=>{y(!0);try{const z=await ep();m(z);const $=Wl(z);h($)}catch(z){console.error("Failed to check IP status:",z)}finally{y(!1)}};if(!t)return null;const b=async z=>{z.preventDefault(),S(null);try{if(f!==null){I();return}if(o==="guest"){const $=Wl(p);if($.blocked){h($);return}await r()}else await a(c.email,c.password,c.adminToken);e()}catch($){if(S($.message||"Authentication failed"),console.error("Auth error:",$),$.message&&$.message.includes("Rate limit exceeded")){const W=$.message.match(/(\d+) seconds/);if(W&&W[1]){const L=parseInt(W[1],10),J=Math.min(30,L),D=Date.now()+J*1e3;localStorage.setItem("login_cooldown",JSON.stringify({until:D})),x(J)}}}},j=c.email.includes("admin")||c.adminToken,A=async(z,$,W)=>{try{if(S(null),f!==null){I();return}await a(z,$,W),e()}catch(L){if(S(L instanceof Error?L.message:"Quick login failed"),console.error("Quick login error:",L),L instanceof Error&&L.message.includes("Rate limit exceeded")){const J=L.message.match(/(\d+) seconds/);if(J&&J[1]){const D=parseInt(J[1],10),F=Math.min(30,D),B=Date.now()+F*1e3;localStorage.setItem("login_cooldown",JSON.stringify({until:B})),x(F)}}}},I=()=>{S(`Too many login attempts. Please try again in ${f} seconds.`)};return i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:e}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:o==="guest"?"Guest Access":"Sign In"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),w&&i.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(It,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",id:"login-error",children:w})]})}),f!==null&&i.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(qt,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["Too many login attempts. Please try again in ",f," seconds."]})]})}),i.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>l("signin"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors duration-200 ${o==="signin"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Sign In"}),i.jsx("button",{onClick:()=>l("guest"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors duration-200 ${o==="guest"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Guest (5 min)"})]}),o==="guest"?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(qt,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"5-Minute Guest Access"}),i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Get temporary access to download test clients and view patch notes. Your session will expire after 5 minutes."})]})]})}),i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(Se,{className:"text-amber-600 dark:text-amber-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h4",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:["IP Protection ",k?"Active":"Inactive"]}),k?i.jsx(Cu,{className:"w-5 h-5 text-emerald-500"}):i.jsx(ql,{className:"w-5 h-5 text-red-500"})]}),i.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:k?"To prevent abuse, your IP address will be blocked for 3 days after your guest session expires.":"IP protection is currently disabled. Your IP will not be blocked after session expiry."}),p&&i.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[i.jsx(Xa,{size:14,className:"text-amber-600 dark:text-amber-400"}),i.jsxs("span",{className:"text-xs font-mono text-amber-800 dark:text-amber-200",children:["Your IP: ",p]})]})]})]})}),(u==null?void 0:u.blocked)&&i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(It,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Access Restricted"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:u.reason}),u.unblockTime&&i.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2",children:["Block expires: ",new Date(u.unblockTime).toLocaleString()]})]})]})}),i.jsxs("button",{onClick:b,disabled:s||v||(u==null?void 0:u.blocked)||!1||f!==null,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(qt,{size:18}),i.jsx("span",{children:s?"Creating Guest Session...":v?"Checking IP Status...":u!=null&&u.blocked?"IP Blocked":f!==null?`Try again in ${f}s`:"Start Guest Session"})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Quick Login (Demo):"}),i.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[i.jsxs("button",{onClick:()=>A("admin@prodomo.local","admin123","T0KEN"),disabled:s||f!==null,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-red-100 hover:bg-red-200 dark:bg-red-900/20 dark:hover:bg-red-900/30 text-red-800 dark:text-red-200 rounded-lg text-sm font-medium transition-colors duration-200 disabled:opacity-50",children:[i.jsx(Se,{size:16}),i.jsx("span",{children:s?"Signing in...":f!==null?`Cooldown: ${f}s`:"Admin Login"})]}),i.jsxs("button",{onClick:()=>A("support@prodomo.local","support123"),disabled:s||f!==null,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-amber-100 hover:bg-amber-200 dark:bg-amber-900/20 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-200 rounded-lg text-sm font-medium transition-colors duration-200 disabled:opacity-50",children:[i.jsx(Pr,{size:16}),i.jsx("span",{children:s?"Signing in...":f!==null?`Cooldown: ${f}s`:"Support Login"})]}),i.jsxs("button",{onClick:()=>A("v4@prodomo.local","v4pass"),disabled:s||f!==null,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-lg text-sm font-medium transition-colors duration-200 disabled:opacity-50",children:[i.jsx(nn,{size:16}),i.jsx("span",{children:s?"Signing in...":f!==null?`Cooldown: ${f}s`:"V4 User Login"})]}),i.jsxs("button",{onClick:()=>A("v5@prodomo.local","v5pass"),disabled:s||f!==null,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-purple-100 hover:bg-purple-200 dark:bg-purple-900/20 dark:hover:bg-purple-900/30 text-purple-800 dark:text-purple-200 rounded-lg text-sm font-medium transition-colors duration-200 disabled:opacity-50",children:[i.jsx(nn,{size:16}),i.jsx("span",{children:s?"Signing in...":f!==null?`Cooldown: ${f}s`:"V5 User Login"})]})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Or sign in manually"})})]}),i.jsxs("form",{onSubmit:b,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),i.jsxs("div",{className:"relative",children:[i.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"email",value:c.email,onChange:z=>d({...c,email:z.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"password",value:c.password,onChange:z=>d({...c,password:z.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password",required:!0})]})]}),j&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Token"}),i.jsxs("div",{className:"relative",children:[i.jsx(Se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"password",value:c.adminToken,onChange:z=>d({...c,adminToken:z.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter admin token (T0KEN)",required:!0})]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Admin accounts require a special token for security"})]}),i.jsx("button",{type:"submit",disabled:s||f!==null,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:i.jsx("span",{children:s?"Signing in...":f!==null?`Try again in ${f}s`:"Sign In"})}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Only admins can create new accounts. Contact an administrator for access."})})]})]})]})]})})},tE=()=>{const{user:t,timeRemaining:e,signOut:a}=ht(),r=Vt();if(!(t!=null&&t.is_guest)||e===null)return null;const s=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3),o=e<6e4;return i.jsx("div",{className:`fixed top-4 right-4 z-40 px-4 py-3 rounded-lg shadow-lg border ${o?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200"}`,children:i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[o?i.jsx(Ka,{className:"w-4 h-4"}):i.jsx(qt,{className:"w-4 h-4"}),i.jsxs("span",{className:"text-sm font-medium",children:["Guest Session: ",s,":",n.toString().padStart(2,"0")]}),i.jsx("button",{onClick:a,className:"text-xs underline hover:no-underline",children:"End Session"})]}),i.jsx("div",{className:"flex items-center space-x-2 text-xs",children:r?i.jsxs(i.Fragment,{children:[i.jsx(Se,{className:"w-3 h-3"}),i.jsx("span",{className:"text-amber-700 dark:text-amber-300",children:"IP will be blocked for 3 days after session expires"})]}):i.jsxs(i.Fragment,{children:[i.jsx(ql,{className:"w-3 h-3"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"IP protection is disabled"})]})})]})})},aE=()=>{const{isAuthenticated:t,user:e}=ht(),{initializeCleanData:a}=Kt(),[r,s]=T.useState("dashboard"),[n,o]=T.useState(!1),[l,c]=T.useState(void 0),[d,u]=T.useState(!1);T.useEffect(()=>{d||(localStorage.getItem("prodomo_users")||(console.log("Initializing clean data..."),a()),u(!0))},[d,a]),T.useEffect(()=>{const v=y=>{y.detail&&y.detail.userId&&c(y.detail.userId)};return document.addEventListener("viewProfile",v),()=>{document.removeEventListener("viewProfile",v)}},[]);const h=v=>{c(v),s("profile")},p=()=>{c(void 0),s("dashboard")},m=()=>{switch(r){case"dashboard":return i.jsx(sg,{activeSection:r,setActiveSection:s});case"downloads":return i.jsx(Fj,{});case"documentation":return i.jsx($j,{});case"file-manager":return i.jsx(B_,{});case"patch-notes":return i.jsx(Uj,{});case"analytics":return i.jsx(J6,{});case"user-management":return i.jsx(Y6,{onViewProfile:h});case"activity-logs":return i.jsx(K6,{});case"bug-report":return i.jsx(X6,{});case"bug-management":return i.jsx(Q6,{});case"ip-protection":return i.jsx(Z6,{});case"profile":return i.jsx(Bj,{userId:l,onBack:l?p:void 0});case"settings":return i.jsx(qj,{});default:return i.jsx(sg,{activeSection:r,setActiveSection:s})}};return t?i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[i.jsxs("div",{className:"flex",children:[i.jsx(Rj,{activeSection:r,setActiveSection:s}),i.jsx("main",{className:"flex-1 lg:ml-64",children:i.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:m()})})]}),i.jsx(tE,{})]}):i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"max-w-md w-full mx-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-8 text-center",children:[i.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full w-16 h-16 mx-auto mb-6 flex items-center justify-center",children:i.jsx(Nu,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome to Prodomo"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Access server downloads, patch notes, and more. Sign in to continue or try our 5-minute guest access."}),i.jsxs("button",{onClick:()=>o(!0),className:"w-full flex items-center justify-center space-x-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Nu,{size:20}),i.jsx("span",{children:"Get Started"})]}),i.jsxs("div",{className:"mt-6 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[i.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200 font-medium",children:[" IP Protection ",Vt()?"Active":"Inactive"]}),i.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-300 mt-1",children:["Guest accounts expire after 5 minutes. ",Vt()?"Your IP will be blocked for 3 days after session expiry to prevent abuse.":"IP protection is currently disabled."]})]})]})})}),i.jsx(eE,{isOpen:n,onClose:()=>o(!1)})]})};function rE(){return i.jsx(pk,{children:i.jsx(Aj,{children:i.jsx(aE,{})})})}const z0=localStorage.getItem("prodomo_theme");z0!==null?JSON.parse(z0)?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.documentElement.classList.add("dark");setTimeout(()=>{document.documentElement.classList.add("theme-transition")},100);Kx(document.getElementById("root")).render(i.jsx(T.StrictMode,{children:i.jsx(rE,{})}));
