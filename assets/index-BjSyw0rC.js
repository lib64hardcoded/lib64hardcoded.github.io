(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(a){if(a.ep)return;a.ep=!0;const n=r(a);fetch(a.href,n)}})();(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();var gv=Object.defineProperty,fv=(t,e,r)=>e in t?gv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,q=(t,e,r)=>fv(t,typeof e!="symbol"?e+"":e,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();var bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function xv(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),r}var z0={exports:{}},ic={},L0={exports:{}},ge={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Zi=Symbol.for("react.element"),bv=Symbol.for("react.portal"),yv=Symbol.for("react.fragment"),vv=Symbol.for("react.strict_mode"),wv=Symbol.for("react.profiler"),kv=Symbol.for("react.provider"),jv=Symbol.for("react.context"),_v=Symbol.for("react.forward_ref"),Nv=Symbol.for("react.suspense"),Sv=Symbol.for("react.memo"),Cv=Symbol.for("react.lazy"),Ep=Symbol.iterator;function Mv(t){return t===null||typeof t!="object"?null:(t=Ep&&t[Ep]||t["@@iterator"],typeof t=="function"?t:null)}var R0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$0=Object.assign,F0={};function jn(t,e,r){this.props=t,this.context=e,this.refs=F0,this.updater=r||R0}jn.prototype.isReactComponent={};jn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function U0(){}U0.prototype=jn.prototype;function sh(t,e,r){this.props=t,this.context=e,this.refs=F0,this.updater=r||R0}var ah=sh.prototype=new U0;ah.constructor=sh;$0(ah,jn.prototype);ah.isPureReactComponent=!0;var Pp=Array.isArray,B0=Object.prototype.hasOwnProperty,nh={current:null},q0={key:!0,ref:!0,__self:!0,__source:!0};function V0(t,e,r){var s,a={},n=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(n=""+e.key),e)B0.call(e,s)&&!q0.hasOwnProperty(s)&&(a[s]=e[s]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:Zi,type:t,key:n,ref:o,props:a,_owner:nh.current}}function Ev(t,e){return{$$typeof:Zi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ih(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zi}function Pv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Tp=/\/+/g;function zc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Pv(""+t.key):e.toString(36)}function tl(t,e,r,s,a){var n=typeof t;(n==="undefined"||n==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(n){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zi:case bv:o=!0}}if(o)return o=t,a=a(o),t=s===""?"."+zc(o,0):s,Pp(a)?(r="",t!=null&&(r=t.replace(Tp,"$&/")+"/"),tl(a,e,r,"",function(d){return d})):a!=null&&(ih(a)&&(a=Ev(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Tp,"$&/")+"/")+t)),e.push(a)),1;if(o=0,s=s===""?".":s+":",Pp(t))for(var l=0;l<t.length;l++){n=t[l];var c=s+zc(n,l);o+=tl(n,e,r,c,a)}else if(c=Mv(t),typeof c=="function")for(t=c.call(t),l=0;!(n=t.next()).done;)n=n.value,c=s+zc(n,l++),o+=tl(n,e,r,c,a);else if(n==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function go(t,e,r){if(t==null)return t;var s=[],a=0;return tl(t,s,"","",function(n){return e.call(r,n,a++)}),s}function Tv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},rl={transition:null},Dv={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:rl,ReactCurrentOwner:nh};function W0(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:go,forEach:function(t,e,r){go(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return go(t,function(){e++}),e},toArray:function(t){return go(t,function(e){return e})||[]},only:function(t){if(!ih(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=jn;ge.Fragment=yv;ge.Profiler=wv;ge.PureComponent=sh;ge.StrictMode=vv;ge.Suspense=Nv;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dv;ge.act=W0;ge.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=$0({},t.props),a=t.key,n=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(n=e.ref,o=nh.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)B0.call(e,c)&&!q0.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:Zi,type:t.type,key:a,ref:n,props:s,_owner:o}};ge.createContext=function(t){return t={$$typeof:jv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kv,_context:t},t.Consumer=t};ge.createElement=V0;ge.createFactory=function(t){var e=V0.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:_v,render:t}};ge.isValidElement=ih;ge.lazy=function(t){return{$$typeof:Cv,_payload:{_status:-1,_result:t},_init:Tv}};ge.memo=function(t,e){return{$$typeof:Sv,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=rl.transition;rl.transition={};try{t()}finally{rl.transition=e}};ge.unstable_act=W0;ge.useCallback=function(t,e){return Nt.current.useCallback(t,e)};ge.useContext=function(t){return Nt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Nt.current.useEffect(t,e)};ge.useId=function(){return Nt.current.useId()};ge.useImperativeHandle=function(t,e,r){return Nt.current.useImperativeHandle(t,e,r)};ge.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Nt.current.useMemo(t,e)};ge.useReducer=function(t,e,r){return Nt.current.useReducer(t,e,r)};ge.useRef=function(t){return Nt.current.useRef(t)};ge.useState=function(t){return Nt.current.useState(t)};ge.useSyncExternalStore=function(t,e,r){return Nt.current.useSyncExternalStore(t,e,r)};ge.useTransition=function(){return Nt.current.useTransition()};ge.version="18.3.1";L0.exports=ge;var T=L0.exports;const oh=rh(T);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Ov=T,Iv=Symbol.for("react.element"),Av=Symbol.for("react.fragment"),zv=Object.prototype.hasOwnProperty,Lv=Ov.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rv={key:!0,ref:!0,__self:!0,__source:!0};function H0(t,e,r){var s,a={},n=null,o=null;r!==void 0&&(n=""+r),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)zv.call(e,s)&&!Rv.hasOwnProperty(s)&&(a[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)a[s]===void 0&&(a[s]=e[s]);return{$$typeof:Iv,type:t,key:n,ref:o,props:a,_owner:Lv.current}}ic.Fragment=Av;ic.jsx=H0;ic.jsxs=H0;z0.exports=ic;var i=z0.exports,J0={exports:{}},Yt={},Y0={exports:{}},G0={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(t){function e($,B){var Q=$.length;$.push(B);e:for(;0<Q;){var U=Q-1>>>1,G=$[U];if(0<a(G,B))$[U]=B,$[Q]=G,Q=U;else break e}}function r($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var B=$[0],Q=$.pop();if(Q!==B){$[0]=Q;e:for(var U=0,G=$.length,M=G>>>1;U<M;){var O=2*(U+1)-1,R=$[O],D=O+1,E=$[D];if(0>a(R,Q))D<G&&0>a(E,R)?($[U]=E,$[D]=Q,U=D):($[U]=R,$[O]=Q,U=O);else if(D<G&&0>a(E,Q))$[U]=E,$[D]=Q,U=D;else break e}}return B}function a($,B){var Q=$.sortIndex-B.sortIndex;return Q!==0?Q:$.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var n=performance;t.unstable_now=function(){return n.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,v=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x($){for(var B=r(d);B!==null;){if(B.callback===null)s(d);else if(B.startTime<=$)s(d),B.sortIndex=B.expirationTime,e(c,B);else break;B=r(d)}}function w($){if(y=!1,x($),!v)if(r(c)!==null)v=!0,Y(S);else{var B=r(d);B!==null&&P(w,B.startTime-$)}}function S($,B){v=!1,y&&(y=!1,g(b),b=-1),m=!0;var Q=p;try{for(x(B),h=r(c);h!==null&&(!(h.expirationTime>B)||$&&!I());){var U=h.callback;if(typeof U=="function"){h.callback=null,p=h.priorityLevel;var G=U(h.expirationTime<=B);B=t.unstable_now(),typeof G=="function"?h.callback=G:h===r(c)&&s(c),x(B)}else s(c);h=r(c)}if(h!==null)var M=!0;else{var O=r(d);O!==null&&P(w,O.startTime-B),M=!1}return M}finally{h=null,p=Q,m=!1}}var N=!1,_=null,b=-1,j=5,z=-1;function I(){return!(t.unstable_now()-z<j)}function A(){if(_!==null){var $=t.unstable_now();z=$;var B=!0;try{B=_(!0,$)}finally{B?F():(N=!1,_=null)}}else N=!1}var F;if(typeof f=="function")F=function(){f(A)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,L=H.port2;H.port1.onmessage=A,F=function(){L.postMessage(null)}}else F=function(){k(A,0)};function Y($){_=$,N||(N=!0,F())}function P($,B){b=k(function(){$(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,Y(S))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var Q=p;p=B;try{return $()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,B){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=p;p=$;try{return B()}finally{p=Q}},t.unstable_scheduleCallback=function($,B,Q){var U=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?U+Q:U):Q=U,$){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=Q+G,$={id:u++,callback:B,priorityLevel:$,startTime:Q,expirationTime:G,sortIndex:-1},Q>U?($.sortIndex=Q,e(d,$),r(c)===null&&$===r(d)&&(y?(g(b),b=-1):y=!0,P(w,Q-U))):($.sortIndex=G,e(c,$),v||m||(v=!0,Y(S))),$},t.unstable_shouldYield=I,t.unstable_wrapCallback=function($){var B=p;return function(){var Q=p;p=B;try{return $.apply(this,arguments)}finally{p=Q}}}})(G0);Y0.exports=G0;var $v=Y0.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Fv=T,Ht=$v;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K0=new Set,_i={};function ka(t,e){dn(t,e),dn(t+"Capture",e)}function dn(t,e){for(_i[t]=e,t=0;t<e.length;t++)K0.add(e[t])}var es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Td=Object.prototype.hasOwnProperty,Uv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dp={},Op={};function Bv(t){return Td.call(Op,t)?!0:Td.call(Dp,t)?!1:Uv.test(t)?Op[t]=!0:(Dp[t]=!0,!1)}function qv(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Vv(t,e,r,s){if(e===null||typeof e>"u"||qv(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,r,s,a,n,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=n,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var lh=/[\-:]([a-z])/g;function ch(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lh,ch);ut[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lh,ch);ut[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lh,ch);ut[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function dh(t,e,r,s){var a=ut.hasOwnProperty(e)?ut[e]:null;(a!==null?a.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Vv(e,r,a,s)&&(r=null),s||a===null?Bv(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,s=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var is=Fv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fo=Symbol.for("react.element"),Ua=Symbol.for("react.portal"),Ba=Symbol.for("react.fragment"),uh=Symbol.for("react.strict_mode"),Dd=Symbol.for("react.profiler"),Q0=Symbol.for("react.provider"),X0=Symbol.for("react.context"),hh=Symbol.for("react.forward_ref"),Od=Symbol.for("react.suspense"),Id=Symbol.for("react.suspense_list"),ph=Symbol.for("react.memo"),ms=Symbol.for("react.lazy"),Z0=Symbol.for("react.offscreen"),Ip=Symbol.iterator;function Dn(t){return t===null||typeof t!="object"?null:(t=Ip&&t[Ip]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,Lc;function Gn(t){if(Lc===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Lc=e&&e[1]||""}return`
`+Lc+t}var Rc=!1;function $c(t,e){if(!t||Rc)return"";Rc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),n=s.stack.split(`
`),o=a.length-1,l=n.length-1;1<=o&&0<=l&&a[o]!==n[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==n[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==n[l]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Rc=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Gn(t):""}function Wv(t){switch(t.tag){case 5:return Gn(t.type);case 16:return Gn("Lazy");case 13:return Gn("Suspense");case 19:return Gn("SuspenseList");case 0:case 2:case 15:return t=$c(t.type,!1),t;case 11:return t=$c(t.type.render,!1),t;case 1:return t=$c(t.type,!0),t;default:return""}}function Ad(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ba:return"Fragment";case Ua:return"Portal";case Dd:return"Profiler";case uh:return"StrictMode";case Od:return"Suspense";case Id:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X0:return(t.displayName||"Context")+".Consumer";case Q0:return(t._context.displayName||"Context")+".Provider";case hh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ph:return e=t.displayName||null,e!==null?e:Ad(t.type)||"Memo";case ms:e=t._payload,t=t._init;try{return Ad(t(e))}catch{}}return null}function Hv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ad(e);case 8:return e===uh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ef(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jv(t){var e=ef(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,n=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,n.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xo(t){t._valueTracker||(t._valueTracker=Jv(t))}function tf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=ef(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function yl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zd(t,e){var r=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ap(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=zs(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rf(t,e){e=e.checked,e!=null&&dh(t,"checked",e,!1)}function Ld(t,e){rf(t,e);var r=zs(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rd(t,e.type,r):e.hasOwnProperty("defaultValue")&&Rd(t,e.type,zs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zp(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Rd(t,e,r){(e!=="number"||yl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Kn=Array.isArray;function Za(t,e,r,s){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&s&&(t[r].defaultSelected=!0)}else{for(r=""+zs(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function $d(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lp(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Z(92));if(Kn(r)){if(1<r.length)throw Error(Z(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:zs(r)}}function sf(t,e){var r=zs(e.value),s=zs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function Rp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function af(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?af(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bo,nf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bo=bo||document.createElement("div"),bo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ni(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yv=["Webkit","ms","Moz","O"];Object.keys(ni).forEach(function(t){Yv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ni[e]=ni[t]})});function of(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ni.hasOwnProperty(t)&&ni[t]?(""+e).trim():e+"px"}function lf(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=of(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,a):t[r]=a}}var Gv=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ud(t,e){if(e){if(Gv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function Bd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=null;function mh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vd=null,en=null,tn=null;function $p(t){if(t=ro(t)){if(typeof Vd!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=uc(e),Vd(t.stateNode,t.type,e))}}function cf(t){en?tn?tn.push(t):tn=[t]:en=t}function df(){if(en){var t=en,e=tn;if(tn=en=null,$p(t),e)for(t=0;t<e.length;t++)$p(e[t])}}function uf(t,e){return t(e)}function hf(){}var Fc=!1;function pf(t,e,r){if(Fc)return t(e,r);Fc=!0;try{return uf(t,e,r)}finally{Fc=!1,(en!==null||tn!==null)&&(hf(),df())}}function Si(t,e){var r=t.stateNode;if(r===null)return null;var s=uc(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Z(231,e,typeof r));return r}var Wd=!1;if(es)try{var On={};Object.defineProperty(On,"passive",{get:function(){Wd=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{Wd=!1}function Kv(t,e,r,s,a,n,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(u){this.onError(u)}}var ii=!1,vl=null,wl=!1,Hd=null,Qv={onError:function(t){ii=!0,vl=t}};function Xv(t,e,r,s,a,n,o,l,c){ii=!1,vl=null,Kv.apply(Qv,arguments)}function Zv(t,e,r,s,a,n,o,l,c){if(Xv.apply(this,arguments),ii){if(ii){var d=vl;ii=!1,vl=null}else throw Error(Z(198));wl||(wl=!0,Hd=d)}}function ja(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function mf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fp(t){if(ja(t)!==t)throw Error(Z(188))}function ew(t){var e=t.alternate;if(!e){if(e=ja(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var r=t,s=e;;){var a=r.return;if(a===null)break;var n=a.alternate;if(n===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===n.child){for(n=a.child;n;){if(n===r)return Fp(a),t;if(n===s)return Fp(a),e;n=n.sibling}throw Error(Z(188))}if(r.return!==s.return)r=a,s=n;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,s=n;break}if(l===s){o=!0,s=a,r=n;break}l=l.sibling}if(!o){for(l=n.child;l;){if(l===r){o=!0,r=n,s=a;break}if(l===s){o=!0,s=n,r=a;break}l=l.sibling}if(!o)throw Error(Z(189))}}if(r.alternate!==s)throw Error(Z(190))}if(r.tag!==3)throw Error(Z(188));return r.stateNode.current===r?t:e}function gf(t){return t=ew(t),t!==null?ff(t):null}function ff(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ff(t);if(e!==null)return e;t=t.sibling}return null}var xf=Ht.unstable_scheduleCallback,Up=Ht.unstable_cancelCallback,tw=Ht.unstable_shouldYield,rw=Ht.unstable_requestPaint,He=Ht.unstable_now,sw=Ht.unstable_getCurrentPriorityLevel,gh=Ht.unstable_ImmediatePriority,bf=Ht.unstable_UserBlockingPriority,kl=Ht.unstable_NormalPriority,aw=Ht.unstable_LowPriority,yf=Ht.unstable_IdlePriority,oc=null,Dr=null;function nw(t){if(Dr&&typeof Dr.onCommitFiberRoot=="function")try{Dr.onCommitFiberRoot(oc,t,void 0,(t.current.flags&128)===128)}catch{}}var xr=Math.clz32?Math.clz32:lw,iw=Math.log,ow=Math.LN2;function lw(t){return t>>>=0,t===0?32:31-(iw(t)/ow|0)|0}var yo=64,vo=4194304;function Qn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jl(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,a=t.suspendedLanes,n=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?s=Qn(l):(n&=o,n!==0&&(s=Qn(n)))}else o=r&~a,o!==0?s=Qn(o):n!==0&&(s=Qn(n));if(s===0)return 0;if(e!==0&&e!==s&&!(e&a)&&(a=s&-s,n=e&-e,a>=n||a===16&&(n&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-xr(e),a=1<<r,s|=t[r],e&=~a;return s}function cw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dw(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,n=t.pendingLanes;0<n;){var o=31-xr(n),l=1<<o,c=a[o];c===-1?(!(l&r)||l&s)&&(a[o]=cw(l,e)):c<=e&&(t.expiredLanes|=l),n&=~l}}function Jd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vf(){var t=yo;return yo<<=1,!(yo&4194240)&&(yo=64),t}function Uc(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function eo(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xr(e),t[e]=r}function uw(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-xr(r),n=1<<a;e[a]=0,s[a]=-1,t[a]=-1,r&=~n}}function fh(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-xr(r),a=1<<s;a&e|t[s]&e&&(t[s]|=e),r&=~a}}var Ne=0;function wf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kf,xh,jf,_f,Nf,Yd=!1,wo=[],Ns=null,Ss=null,Cs=null,Ci=new Map,Mi=new Map,xs=[],hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bp(t,e){switch(t){case"focusin":case"focusout":Ns=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":Ci.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mi.delete(e.pointerId)}}function In(t,e,r,s,a,n){return t===null||t.nativeEvent!==n?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:n,targetContainers:[a]},e!==null&&(e=ro(e),e!==null&&xh(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function pw(t,e,r,s,a){switch(e){case"focusin":return Ns=In(Ns,t,e,r,s,a),!0;case"dragenter":return Ss=In(Ss,t,e,r,s,a),!0;case"mouseover":return Cs=In(Cs,t,e,r,s,a),!0;case"pointerover":var n=a.pointerId;return Ci.set(n,In(Ci.get(n)||null,t,e,r,s,a)),!0;case"gotpointercapture":return n=a.pointerId,Mi.set(n,In(Mi.get(n)||null,t,e,r,s,a)),!0}return!1}function Sf(t){var e=aa(t.target);if(e!==null){var r=ja(e);if(r!==null){if(e=r.tag,e===13){if(e=mf(r),e!==null){t.blockedOn=e,Nf(t.priority,function(){jf(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Gd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);qd=s,r.target.dispatchEvent(s),qd=null}else return e=ro(r),e!==null&&xh(e),t.blockedOn=r,!1;e.shift()}return!0}function qp(t,e,r){sl(t)&&r.delete(e)}function mw(){Yd=!1,Ns!==null&&sl(Ns)&&(Ns=null),Ss!==null&&sl(Ss)&&(Ss=null),Cs!==null&&sl(Cs)&&(Cs=null),Ci.forEach(qp),Mi.forEach(qp)}function An(t,e){t.blockedOn===e&&(t.blockedOn=null,Yd||(Yd=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,mw)))}function Ei(t){function e(a){return An(a,t)}if(0<wo.length){An(wo[0],t);for(var r=1;r<wo.length;r++){var s=wo[r];s.blockedOn===t&&(s.blockedOn=null)}}for(Ns!==null&&An(Ns,t),Ss!==null&&An(Ss,t),Cs!==null&&An(Cs,t),Ci.forEach(e),Mi.forEach(e),r=0;r<xs.length;r++)s=xs[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<xs.length&&(r=xs[0],r.blockedOn===null);)Sf(r),r.blockedOn===null&&xs.shift()}var rn=is.ReactCurrentBatchConfig,_l=!0;function gw(t,e,r,s){var a=Ne,n=rn.transition;rn.transition=null;try{Ne=1,bh(t,e,r,s)}finally{Ne=a,rn.transition=n}}function fw(t,e,r,s){var a=Ne,n=rn.transition;rn.transition=null;try{Ne=4,bh(t,e,r,s)}finally{Ne=a,rn.transition=n}}function bh(t,e,r,s){if(_l){var a=Gd(t,e,r,s);if(a===null)Qc(t,e,s,Nl,r),Bp(t,s);else if(pw(a,t,e,r,s))s.stopPropagation();else if(Bp(t,s),e&4&&-1<hw.indexOf(t)){for(;a!==null;){var n=ro(a);if(n!==null&&kf(n),n=Gd(t,e,r,s),n===null&&Qc(t,e,s,Nl,r),n===a)break;a=n}a!==null&&s.stopPropagation()}else Qc(t,e,s,null,r)}}var Nl=null;function Gd(t,e,r,s){if(Nl=null,t=mh(s),t=aa(t),t!==null)if(e=ja(t),e===null)t=null;else if(r=e.tag,r===13){if(t=mf(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nl=t,null}function Cf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sw()){case gh:return 1;case bf:return 4;case kl:case aw:return 16;case yf:return 536870912;default:return 16}default:return 16}}var vs=null,yh=null,al=null;function Mf(){if(al)return al;var t,e=yh,r=e.length,s,a="value"in vs?vs.value:vs.textContent,n=a.length;for(t=0;t<r&&e[t]===a[t];t++);var o=r-t;for(s=1;s<=o&&e[r-s]===a[n-s];s++);return al=a.slice(t,1<s?1-s:void 0)}function nl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ko(){return!0}function Vp(){return!1}function Gt(t){function e(r,s,a,n,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=n,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(n):n[l]);return this.isDefaultPrevented=(n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1)?ko:Vp,this.isPropagationStopped=Vp,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ko)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ko)},persist:function(){},isPersistent:ko}),e}var _n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vh=Gt(_n),to=Be({},_n,{view:0,detail:0}),xw=Gt(to),Bc,qc,zn,lc=Be({},to,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zn&&(zn&&t.type==="mousemove"?(Bc=t.screenX-zn.screenX,qc=t.screenY-zn.screenY):qc=Bc=0,zn=t),Bc)},movementY:function(t){return"movementY"in t?t.movementY:qc}}),Wp=Gt(lc),bw=Be({},lc,{dataTransfer:0}),yw=Gt(bw),vw=Be({},to,{relatedTarget:0}),Vc=Gt(vw),ww=Be({},_n,{animationName:0,elapsedTime:0,pseudoElement:0}),kw=Gt(ww),jw=Be({},_n,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_w=Gt(jw),Nw=Be({},_n,{data:0}),Hp=Gt(Nw),Sw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ew(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mw[t])?!!e[t]:!1}function wh(){return Ew}var Pw=Be({},to,{key:function(t){if(t.key){var e=Sw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wh,charCode:function(t){return t.type==="keypress"?nl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Tw=Gt(Pw),Dw=Be({},lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jp=Gt(Dw),Ow=Be({},to,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wh}),Iw=Gt(Ow),Aw=Be({},_n,{propertyName:0,elapsedTime:0,pseudoElement:0}),zw=Gt(Aw),Lw=Be({},lc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rw=Gt(Lw),$w=[9,13,27,32],kh=es&&"CompositionEvent"in window,oi=null;es&&"documentMode"in document&&(oi=document.documentMode);var Fw=es&&"TextEvent"in window&&!oi,Ef=es&&(!kh||oi&&8<oi&&11>=oi),Yp=" ",Gp=!1;function Pf(t,e){switch(t){case"keyup":return $w.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qa=!1;function Uw(t,e){switch(t){case"compositionend":return Tf(e);case"keypress":return e.which!==32?null:(Gp=!0,Yp);case"textInput":return t=e.data,t===Yp&&Gp?null:t;default:return null}}function Bw(t,e){if(qa)return t==="compositionend"||!kh&&Pf(t,e)?(t=Mf(),al=yh=vs=null,qa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ef&&e.locale!=="ko"?null:e.data;default:return null}}var qw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qw[t.type]:e==="textarea"}function Df(t,e,r,s){cf(s),e=Sl(e,"onChange"),0<e.length&&(r=new vh("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var li=null,Pi=null;function Vw(t){qf(t,0)}function cc(t){var e=Ha(t);if(tf(e))return t}function Ww(t,e){if(t==="change")return e}var Of=!1;if(es){var Wc;if(es){var Hc="oninput"in document;if(!Hc){var Qp=document.createElement("div");Qp.setAttribute("oninput","return;"),Hc=typeof Qp.oninput=="function"}Wc=Hc}else Wc=!1;Of=Wc&&(!document.documentMode||9<document.documentMode)}function Xp(){li&&(li.detachEvent("onpropertychange",If),Pi=li=null)}function If(t){if(t.propertyName==="value"&&cc(Pi)){var e=[];Df(e,Pi,t,mh(t)),pf(Vw,e)}}function Hw(t,e,r){t==="focusin"?(Xp(),li=e,Pi=r,li.attachEvent("onpropertychange",If)):t==="focusout"&&Xp()}function Jw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cc(Pi)}function Yw(t,e){if(t==="click")return cc(e)}function Gw(t,e){if(t==="input"||t==="change")return cc(e)}function Kw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wr=typeof Object.is=="function"?Object.is:Kw;function Ti(t,e){if(wr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Td.call(e,a)||!wr(t[a],e[a]))return!1}return!0}function Zp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function em(t,e){var r=Zp(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zp(r)}}function Af(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Af(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zf(){for(var t=window,e=yl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=yl(t.document)}return e}function jh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Qw(t){var e=zf(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Af(r.ownerDocument.documentElement,r)){if(s!==null&&jh(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,n=Math.min(s.start,a);s=s.end===void 0?n:Math.min(s.end,a),!t.extend&&n>s&&(a=s,s=n,n=a),a=em(r,n);var o=em(r,s);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),n>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xw=es&&"documentMode"in document&&11>=document.documentMode,Va=null,Kd=null,ci=null,Qd=!1;function tm(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Qd||Va==null||Va!==yl(s)||(s=Va,"selectionStart"in s&&jh(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ci&&Ti(ci,s)||(ci=s,s=Sl(Kd,"onSelect"),0<s.length&&(e=new vh("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=Va)))}function jo(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Wa={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionend:jo("Transition","TransitionEnd")},Jc={},Lf={};es&&(Lf=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function dc(t){if(Jc[t])return Jc[t];if(!Wa[t])return t;var e=Wa[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Lf)return Jc[t]=e[r];return t}var Rf=dc("animationend"),$f=dc("animationiteration"),Ff=dc("animationstart"),Uf=dc("transitionend"),Bf=new Map,rm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $s(t,e){Bf.set(t,e),ka(e,[t])}for(var Yc=0;Yc<rm.length;Yc++){var Gc=rm[Yc],Zw=Gc.toLowerCase(),e1=Gc[0].toUpperCase()+Gc.slice(1);$s(Zw,"on"+e1)}$s(Rf,"onAnimationEnd");$s($f,"onAnimationIteration");$s(Ff,"onAnimationStart");$s("dblclick","onDoubleClick");$s("focusin","onFocus");$s("focusout","onBlur");$s(Uf,"onTransitionEnd");dn("onMouseEnter",["mouseout","mouseover"]);dn("onMouseLeave",["mouseout","mouseover"]);dn("onPointerEnter",["pointerout","pointerover"]);dn("onPointerLeave",["pointerout","pointerover"]);ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ka("onBeforeInput",["compositionend","keypress","textInput","paste"]);ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xn));function sm(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,Zv(s,e,void 0,t),t.currentTarget=null}function qf(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],a=s.event;s=s.listeners;e:{var n=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==n&&a.isPropagationStopped())break e;sm(a,l,d),n=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==n&&a.isPropagationStopped())break e;sm(a,l,d),n=c}}}if(wl)throw t=Hd,wl=!1,Hd=null,t}function Pe(t,e){var r=e[ru];r===void 0&&(r=e[ru]=new Set);var s=t+"__bubble";r.has(s)||(Vf(e,t,2,!1),r.add(s))}function Kc(t,e,r){var s=0;e&&(s|=4),Vf(r,t,s,e)}var _o="_reactListening"+Math.random().toString(36).slice(2);function Di(t){if(!t[_o]){t[_o]=!0,K0.forEach(function(r){r!=="selectionchange"&&(t1.has(r)||Kc(r,!1,t),Kc(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_o]||(e[_o]=!0,Kc("selectionchange",!1,e))}}function Vf(t,e,r,s){switch(Cf(e)){case 1:var a=gw;break;case 4:a=fw;break;default:a=bh}r=a.bind(null,e,r,t),a=void 0,!Wd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function Qc(t,e,r,s,a){var n=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=aa(l),o===null)return;if(c=o.tag,c===5||c===6){s=n=o;continue e}l=l.parentNode}}s=s.return}pf(function(){var d=n,u=mh(r),h=[];e:{var p=Bf.get(t);if(p!==void 0){var m=vh,v=t;switch(t){case"keypress":if(nl(r)===0)break e;case"keydown":case"keyup":m=Tw;break;case"focusin":v="focus",m=Vc;break;case"focusout":v="blur",m=Vc;break;case"beforeblur":case"afterblur":m=Vc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Wp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=yw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Iw;break;case Rf:case $f:case Ff:m=kw;break;case Uf:m=zw;break;case"scroll":m=xw;break;case"wheel":m=Rw;break;case"copy":case"cut":case"paste":m=_w;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Jp}var y=(e&4)!==0,k=!y&&t==="scroll",g=y?p!==null?p+"Capture":null:p;y=[];for(var f=d,x;f!==null;){x=f;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,g!==null&&(w=Si(f,g),w!=null&&y.push(Oi(f,w,x)))),k)break;f=f.return}0<y.length&&(p=new m(p,v,null,r,u),h.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&r!==qd&&(v=r.relatedTarget||r.fromElement)&&(aa(v)||v[ts]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=d,v=v?aa(v):null,v!==null&&(k=ja(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=d),m!==v)){if(y=Wp,w="onMouseLeave",g="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(y=Jp,w="onPointerLeave",g="onPointerEnter",f="pointer"),k=m==null?p:Ha(m),x=v==null?p:Ha(v),p=new y(w,f+"leave",m,r,u),p.target=k,p.relatedTarget=x,w=null,aa(u)===d&&(y=new y(g,f+"enter",v,r,u),y.target=x,y.relatedTarget=k,w=y),k=w,m&&v)t:{for(y=m,g=v,f=0,x=y;x;x=Da(x))f++;for(x=0,w=g;w;w=Da(w))x++;for(;0<f-x;)y=Da(y),f--;for(;0<x-f;)g=Da(g),x--;for(;f--;){if(y===g||g!==null&&y===g.alternate)break t;y=Da(y),g=Da(g)}y=null}else y=null;m!==null&&am(h,p,m,y,!1),v!==null&&k!==null&&am(h,k,v,y,!0)}}e:{if(p=d?Ha(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=Ww;else if(Kp(p))if(Of)S=Gw;else{S=Jw;var N=Hw}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=Yw);if(S&&(S=S(t,d))){Df(h,S,r,u);break e}N&&N(t,p,d),t==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&Rd(p,"number",p.value)}switch(N=d?Ha(d):window,t){case"focusin":(Kp(N)||N.contentEditable==="true")&&(Va=N,Kd=d,ci=null);break;case"focusout":ci=Kd=Va=null;break;case"mousedown":Qd=!0;break;case"contextmenu":case"mouseup":case"dragend":Qd=!1,tm(h,r,u);break;case"selectionchange":if(Xw)break;case"keydown":case"keyup":tm(h,r,u)}var _;if(kh)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qa?Pf(t,r)&&(b="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(b="onCompositionStart");b&&(Ef&&r.locale!=="ko"&&(qa||b!=="onCompositionStart"?b==="onCompositionEnd"&&qa&&(_=Mf()):(vs=u,yh="value"in vs?vs.value:vs.textContent,qa=!0)),N=Sl(d,b),0<N.length&&(b=new Hp(b,t,null,r,u),h.push({event:b,listeners:N}),_?b.data=_:(_=Tf(r),_!==null&&(b.data=_)))),(_=Fw?Uw(t,r):Bw(t,r))&&(d=Sl(d,"onBeforeInput"),0<d.length&&(u=new Hp("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=_))}qf(h,e)})}function Oi(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Sl(t,e){for(var r=e+"Capture",s=[];t!==null;){var a=t,n=a.stateNode;a.tag===5&&n!==null&&(a=n,n=Si(t,r),n!=null&&s.unshift(Oi(t,n,a)),n=Si(t,e),n!=null&&s.push(Oi(t,n,a))),t=t.return}return s}function Da(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function am(t,e,r,s,a){for(var n=e._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,a?(c=Si(r,n),c!=null&&o.unshift(Oi(r,c,l))):a||(c=Si(r,n),c!=null&&o.push(Oi(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var r1=/\r\n?/g,s1=/\u0000|\uFFFD/g;function nm(t){return(typeof t=="string"?t:""+t).replace(r1,`
`).replace(s1,"")}function No(t,e,r){if(e=nm(e),nm(t)!==e&&r)throw Error(Z(425))}function Cl(){}var Xd=null,Zd=null;function eu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tu=typeof setTimeout=="function"?setTimeout:void 0,a1=typeof clearTimeout=="function"?clearTimeout:void 0,im=typeof Promise=="function"?Promise:void 0,n1=typeof queueMicrotask=="function"?queueMicrotask:typeof im<"u"?function(t){return im.resolve(null).then(t).catch(i1)}:tu;function i1(t){setTimeout(function(){throw t})}function Xc(t,e){var r=e,s=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){t.removeChild(a),Ei(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Ei(e)}function Ms(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function om(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Nn=Math.random().toString(36).slice(2),Er="__reactFiber$"+Nn,Ii="__reactProps$"+Nn,ts="__reactContainer$"+Nn,ru="__reactEvents$"+Nn,o1="__reactListeners$"+Nn,l1="__reactHandles$"+Nn;function aa(t){var e=t[Er];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ts]||r[Er]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=om(t);t!==null;){if(r=t[Er])return r;t=om(t)}return e}t=r,r=t.parentNode}return null}function ro(t){return t=t[Er]||t[ts],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ha(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function uc(t){return t[Ii]||null}var su=[],Ja=-1;function Fs(t){return{current:t}}function Oe(t){0>Ja||(t.current=su[Ja],su[Ja]=null,Ja--)}function Ee(t,e){Ja++,su[Ja]=t.current,t.current=e}var Ls={},wt=Fs(Ls),At=Fs(!1),pa=Ls;function un(t,e){var r=t.type.contextTypes;if(!r)return Ls;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var a={},n;for(n in r)a[n]=e[n];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function zt(t){return t=t.childContextTypes,t!=null}function Ml(){Oe(At),Oe(wt)}function lm(t,e,r){if(wt.current!==Ls)throw Error(Z(168));Ee(wt,e),Ee(At,r)}function Wf(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in e))throw Error(Z(108,Hv(t)||"Unknown",a));return Be({},r,s)}function El(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ls,pa=wt.current,Ee(wt,t),Ee(At,At.current),!0}function cm(t,e,r){var s=t.stateNode;if(!s)throw Error(Z(169));r?(t=Wf(t,e,pa),s.__reactInternalMemoizedMergedChildContext=t,Oe(At),Oe(wt),Ee(wt,t)):Oe(At),Ee(At,r)}var Wr=null,hc=!1,Zc=!1;function Hf(t){Wr===null?Wr=[t]:Wr.push(t)}function c1(t){hc=!0,Hf(t)}function Us(){if(!Zc&&Wr!==null){Zc=!0;var t=0,e=Ne;try{var r=Wr;for(Ne=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}Wr=null,hc=!1}catch(a){throw Wr!==null&&(Wr=Wr.slice(t+1)),xf(gh,Us),a}finally{Ne=e,Zc=!1}}return null}var Ya=[],Ga=0,Pl=null,Tl=0,er=[],tr=0,ma=null,Yr=1,Gr="";function Ks(t,e){Ya[Ga++]=Tl,Ya[Ga++]=Pl,Pl=t,Tl=e}function Jf(t,e,r){er[tr++]=Yr,er[tr++]=Gr,er[tr++]=ma,ma=t;var s=Yr;t=Gr;var a=32-xr(s)-1;s&=~(1<<a),r+=1;var n=32-xr(e)+a;if(30<n){var o=a-a%5;n=(s&(1<<o)-1).toString(32),s>>=o,a-=o,Yr=1<<32-xr(e)+a|r<<a|s,Gr=n+t}else Yr=1<<n|r<<a|s,Gr=t}function _h(t){t.return!==null&&(Ks(t,1),Jf(t,1,0))}function Nh(t){for(;t===Pl;)Pl=Ya[--Ga],Ya[Ga]=null,Tl=Ya[--Ga],Ya[Ga]=null;for(;t===ma;)ma=er[--tr],er[tr]=null,Gr=er[--tr],er[tr]=null,Yr=er[--tr],er[tr]=null}var Wt=null,Bt=null,Ae=!1,fr=null;function Yf(t,e){var r=rr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function dm(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,Bt=Ms(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ma!==null?{id:Yr,overflow:Gr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=rr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Wt=t,Bt=null,!0):!1;default:return!1}}function au(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nu(t){if(Ae){var e=Bt;if(e){var r=e;if(!dm(t,e)){if(au(t))throw Error(Z(418));e=Ms(r.nextSibling);var s=Wt;e&&dm(t,e)?Yf(s,r):(t.flags=t.flags&-4097|2,Ae=!1,Wt=t)}}else{if(au(t))throw Error(Z(418));t.flags=t.flags&-4097|2,Ae=!1,Wt=t}}}function um(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function So(t){if(t!==Wt)return!1;if(!Ae)return um(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eu(t.type,t.memoizedProps)),e&&(e=Bt)){if(au(t))throw Gf(),Error(Z(418));for(;e;)Yf(t,e),e=Ms(e.nextSibling)}if(um(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Bt=Ms(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=Wt?Ms(t.stateNode.nextSibling):null;return!0}function Gf(){for(var t=Bt;t;)t=Ms(t.nextSibling)}function hn(){Bt=Wt=null,Ae=!1}function Sh(t){fr===null?fr=[t]:fr.push(t)}var d1=is.ReactCurrentBatchConfig;function Ln(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Z(309));var s=r.stateNode}if(!s)throw Error(Z(147,t));var a=s,n=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===n?e.ref:(e=function(o){var l=a.refs;o===null?delete l[n]:l[n]=o},e._stringRef=n,e)}if(typeof t!="string")throw Error(Z(284));if(!r._owner)throw Error(Z(290,t))}return t}function Co(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hm(t){var e=t._init;return e(t._payload)}function Kf(t){function e(g,f){if(t){var x=g.deletions;x===null?(g.deletions=[f],g.flags|=16):x.push(f)}}function r(g,f){if(!t)return null;for(;f!==null;)e(g,f),f=f.sibling;return null}function s(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function a(g,f){return g=Ds(g,f),g.index=0,g.sibling=null,g}function n(g,f,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<f?(g.flags|=2,f):x):(g.flags|=2,f)):(g.flags|=1048576,f)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,f,x,w){return f===null||f.tag!==6?(f=id(x,g.mode,w),f.return=g,f):(f=a(f,x),f.return=g,f)}function c(g,f,x,w){var S=x.type;return S===Ba?u(g,f,x.props.children,w,x.key):f!==null&&(f.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ms&&hm(S)===f.type)?(w=a(f,x.props),w.ref=Ln(g,f,x),w.return=g,w):(w=hl(x.type,x.key,x.props,null,g.mode,w),w.ref=Ln(g,f,x),w.return=g,w)}function d(g,f,x,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==x.containerInfo||f.stateNode.implementation!==x.implementation?(f=od(x,g.mode,w),f.return=g,f):(f=a(f,x.children||[]),f.return=g,f)}function u(g,f,x,w,S){return f===null||f.tag!==7?(f=da(x,g.mode,w,S),f.return=g,f):(f=a(f,x),f.return=g,f)}function h(g,f,x){if(typeof f=="string"&&f!==""||typeof f=="number")return f=id(""+f,g.mode,x),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case fo:return x=hl(f.type,f.key,f.props,null,g.mode,x),x.ref=Ln(g,null,f),x.return=g,x;case Ua:return f=od(f,g.mode,x),f.return=g,f;case ms:var w=f._init;return h(g,w(f._payload),x)}if(Kn(f)||Dn(f))return f=da(f,g.mode,x,null),f.return=g,f;Co(g,f)}return null}function p(g,f,x,w){var S=f!==null?f.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:l(g,f,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case fo:return x.key===S?c(g,f,x,w):null;case Ua:return x.key===S?d(g,f,x,w):null;case ms:return S=x._init,p(g,f,S(x._payload),w)}if(Kn(x)||Dn(x))return S!==null?null:u(g,f,x,w,null);Co(g,x)}return null}function m(g,f,x,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(x)||null,l(f,g,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fo:return g=g.get(w.key===null?x:w.key)||null,c(f,g,w,S);case Ua:return g=g.get(w.key===null?x:w.key)||null,d(f,g,w,S);case ms:var N=w._init;return m(g,f,x,N(w._payload),S)}if(Kn(w)||Dn(w))return g=g.get(x)||null,u(f,g,w,S,null);Co(f,w)}return null}function v(g,f,x,w){for(var S=null,N=null,_=f,b=f=0,j=null;_!==null&&b<x.length;b++){_.index>b?(j=_,_=null):j=_.sibling;var z=p(g,_,x[b],w);if(z===null){_===null&&(_=j);break}t&&_&&z.alternate===null&&e(g,_),f=n(z,f,b),N===null?S=z:N.sibling=z,N=z,_=j}if(b===x.length)return r(g,_),Ae&&Ks(g,b),S;if(_===null){for(;b<x.length;b++)_=h(g,x[b],w),_!==null&&(f=n(_,f,b),N===null?S=_:N.sibling=_,N=_);return Ae&&Ks(g,b),S}for(_=s(g,_);b<x.length;b++)j=m(_,g,b,x[b],w),j!==null&&(t&&j.alternate!==null&&_.delete(j.key===null?b:j.key),f=n(j,f,b),N===null?S=j:N.sibling=j,N=j);return t&&_.forEach(function(I){return e(g,I)}),Ae&&Ks(g,b),S}function y(g,f,x,w){var S=Dn(x);if(typeof S!="function")throw Error(Z(150));if(x=S.call(x),x==null)throw Error(Z(151));for(var N=S=null,_=f,b=f=0,j=null,z=x.next();_!==null&&!z.done;b++,z=x.next()){_.index>b?(j=_,_=null):j=_.sibling;var I=p(g,_,z.value,w);if(I===null){_===null&&(_=j);break}t&&_&&I.alternate===null&&e(g,_),f=n(I,f,b),N===null?S=I:N.sibling=I,N=I,_=j}if(z.done)return r(g,_),Ae&&Ks(g,b),S;if(_===null){for(;!z.done;b++,z=x.next())z=h(g,z.value,w),z!==null&&(f=n(z,f,b),N===null?S=z:N.sibling=z,N=z);return Ae&&Ks(g,b),S}for(_=s(g,_);!z.done;b++,z=x.next())z=m(_,g,b,z.value,w),z!==null&&(t&&z.alternate!==null&&_.delete(z.key===null?b:z.key),f=n(z,f,b),N===null?S=z:N.sibling=z,N=z);return t&&_.forEach(function(A){return e(g,A)}),Ae&&Ks(g,b),S}function k(g,f,x,w){if(typeof x=="object"&&x!==null&&x.type===Ba&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case fo:e:{for(var S=x.key,N=f;N!==null;){if(N.key===S){if(S=x.type,S===Ba){if(N.tag===7){r(g,N.sibling),f=a(N,x.props.children),f.return=g,g=f;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ms&&hm(S)===N.type){r(g,N.sibling),f=a(N,x.props),f.ref=Ln(g,N,x),f.return=g,g=f;break e}r(g,N);break}else e(g,N);N=N.sibling}x.type===Ba?(f=da(x.props.children,g.mode,w,x.key),f.return=g,g=f):(w=hl(x.type,x.key,x.props,null,g.mode,w),w.ref=Ln(g,f,x),w.return=g,g=w)}return o(g);case Ua:e:{for(N=x.key;f!==null;){if(f.key===N)if(f.tag===4&&f.stateNode.containerInfo===x.containerInfo&&f.stateNode.implementation===x.implementation){r(g,f.sibling),f=a(f,x.children||[]),f.return=g,g=f;break e}else{r(g,f);break}else e(g,f);f=f.sibling}f=od(x,g.mode,w),f.return=g,g=f}return o(g);case ms:return N=x._init,k(g,f,N(x._payload),w)}if(Kn(x))return v(g,f,x,w);if(Dn(x))return y(g,f,x,w);Co(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,f!==null&&f.tag===6?(r(g,f.sibling),f=a(f,x),f.return=g,g=f):(r(g,f),f=id(x,g.mode,w),f.return=g,g=f),o(g)):r(g,f)}return k}var pn=Kf(!0),Qf=Kf(!1),Dl=Fs(null),Ol=null,Ka=null,Ch=null;function Mh(){Ch=Ka=Ol=null}function Eh(t){var e=Dl.current;Oe(Dl),t._currentValue=e}function iu(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function sn(t,e){Ol=t,Ch=Ka=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function ir(t){var e=t._currentValue;if(Ch!==t)if(t={context:t,memoizedValue:e,next:null},Ka===null){if(Ol===null)throw Error(Z(308));Ka=t,Ol.dependencies={lanes:0,firstContext:t}}else Ka=Ka.next=t;return e}var na=null;function Ph(t){na===null?na=[t]:na.push(t)}function Xf(t,e,r,s){var a=e.interleaved;return a===null?(r.next=r,Ph(e)):(r.next=a.next,a.next=r),e.interleaved=r,rs(t,s)}function rs(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var gs=!1;function Th(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Es(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,xe&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,rs(t,r)}return a=s.interleaved,a===null?(e.next=e,Ph(s)):(e.next=a.next,a.next=e),s.interleaved=e,rs(t,r)}function il(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,fh(t,r)}}function pm(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,n=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};n===null?a=n=o:n=n.next=o,r=r.next}while(r!==null);n===null?a=n=e:n=n.next=e}else a=n=e;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:n,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Il(t,e,r,s){var a=t.updateQueue;gs=!1;var n=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?n=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(n!==null){var h=a.baseState;o=0,u=d=c=null,l=n;do{var p=l.lane,m=l.eventTime;if((s&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,y=l;switch(p=e,m=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(m,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(m,h,p):v,p==null)break e;h=Be({},h,p);break e;case 2:gs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=a.effects,p===null?a.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,o|=p;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;p=l,l=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else n===null&&(a.shared.lanes=0);fa|=o,t.lanes=o,t.memoizedState=h}}function mm(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(Z(191,a));a.call(s)}}}var so={},Or=Fs(so),Ai=Fs(so),zi=Fs(so);function ia(t){if(t===so)throw Error(Z(174));return t}function Dh(t,e){switch(Ee(zi,e),Ee(Ai,t),Ee(Or,so),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fd(e,t)}Oe(Or),Ee(Or,e)}function mn(){Oe(Or),Oe(Ai),Oe(zi)}function ex(t){ia(zi.current);var e=ia(Or.current),r=Fd(e,t.type);e!==r&&(Ee(Ai,t),Ee(Or,r))}function Oh(t){Ai.current===t&&(Oe(Or),Oe(Ai))}var $e=Fs(0);function Al(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ed=[];function Ih(){for(var t=0;t<ed.length;t++)ed[t]._workInProgressVersionPrimary=null;ed.length=0}var ol=is.ReactCurrentDispatcher,td=is.ReactCurrentBatchConfig,ga=0,Ue=null,Ze=null,at=null,zl=!1,di=!1,Li=0,u1=0;function pt(){throw Error(Z(321))}function Ah(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!wr(t[r],e[r]))return!1;return!0}function zh(t,e,r,s,a,n){if(ga=n,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ol.current=t===null||t.memoizedState===null?g1:f1,t=r(s,a),di){n=0;do{if(di=!1,Li=0,25<=n)throw Error(Z(301));n+=1,at=Ze=null,e.updateQueue=null,ol.current=x1,t=r(s,a)}while(di)}if(ol.current=Ll,e=Ze!==null&&Ze.next!==null,ga=0,at=Ze=Ue=null,zl=!1,e)throw Error(Z(300));return t}function Lh(){var t=Li!==0;return Li=0,t}function Cr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Ue.memoizedState=at=t:at=at.next=t,at}function or(){if(Ze===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=at===null?Ue.memoizedState:at.next;if(e!==null)at=e,Ze=t;else{if(t===null)throw Error(Z(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},at===null?Ue.memoizedState=at=t:at=at.next=t}return at}function Ri(t,e){return typeof e=="function"?e(t):e}function rd(t){var e=or(),r=e.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=t;var s=Ze,a=s.baseQueue,n=r.pending;if(n!==null){if(a!==null){var o=a.next;a.next=n.next,n.next=o}s.baseQueue=a=n,r.pending=null}if(a!==null){n=a.next,s=s.baseState;var l=o=null,c=null,d=n;do{var u=d.lane;if((ga&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,Ue.lanes|=u,fa|=u}d=d.next}while(d!==null&&d!==n);c===null?o=s:c.next=l,wr(s,e.memoizedState)||(Ot=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}if(t=r.interleaved,t!==null){a=t;do n=a.lane,Ue.lanes|=n,fa|=n,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function sd(t){var e=or(),r=e.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=t;var s=r.dispatch,a=r.pending,n=e.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do n=t(n,o.action),o=o.next;while(o!==a);wr(n,e.memoizedState)||(Ot=!0),e.memoizedState=n,e.baseQueue===null&&(e.baseState=n),r.lastRenderedState=n}return[n,s]}function tx(){}function rx(t,e){var r=Ue,s=or(),a=e(),n=!wr(s.memoizedState,a);if(n&&(s.memoizedState=a,Ot=!0),s=s.queue,Rh(nx.bind(null,r,s,t),[t]),s.getSnapshot!==e||n||at!==null&&at.memoizedState.tag&1){if(r.flags|=2048,$i(9,ax.bind(null,r,s,a,e),void 0,null),it===null)throw Error(Z(349));ga&30||sx(r,e,a)}return a}function sx(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function ax(t,e,r,s){e.value=r,e.getSnapshot=s,ix(e)&&ox(t)}function nx(t,e,r){return r(function(){ix(e)&&ox(t)})}function ix(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!wr(t,r)}catch{return!0}}function ox(t){var e=rs(t,1);e!==null&&br(e,t,1,-1)}function gm(t){var e=Cr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:t},e.queue=t,t=t.dispatch=m1.bind(null,Ue,t),[e.memoizedState,t]}function $i(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function lx(){return or().memoizedState}function ll(t,e,r,s){var a=Cr();Ue.flags|=t,a.memoizedState=$i(1|e,r,void 0,s===void 0?null:s)}function pc(t,e,r,s){var a=or();s=s===void 0?null:s;var n=void 0;if(Ze!==null){var o=Ze.memoizedState;if(n=o.destroy,s!==null&&Ah(s,o.deps)){a.memoizedState=$i(e,r,n,s);return}}Ue.flags|=t,a.memoizedState=$i(1|e,r,n,s)}function fm(t,e){return ll(8390656,8,t,e)}function Rh(t,e){return pc(2048,8,t,e)}function cx(t,e){return pc(4,2,t,e)}function dx(t,e){return pc(4,4,t,e)}function ux(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hx(t,e,r){return r=r!=null?r.concat([t]):null,pc(4,4,ux.bind(null,e,t),r)}function $h(){}function px(t,e){var r=or();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Ah(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function mx(t,e){var r=or();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Ah(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function gx(t,e,r){return ga&21?(wr(r,e)||(r=vf(),Ue.lanes|=r,fa|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=r)}function h1(t,e){var r=Ne;Ne=r!==0&&4>r?r:4,t(!0);var s=td.transition;td.transition={};try{t(!1),e()}finally{Ne=r,td.transition=s}}function fx(){return or().memoizedState}function p1(t,e,r){var s=Ts(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},xx(t))bx(e,r);else if(r=Xf(t,e,r,s),r!==null){var a=_t();br(r,t,s,a),yx(r,e,s)}}function m1(t,e,r){var s=Ts(t),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(xx(t))bx(e,a);else{var n=t.alternate;if(t.lanes===0&&(n===null||n.lanes===0)&&(n=e.lastRenderedReducer,n!==null))try{var o=e.lastRenderedState,l=n(o,r);if(a.hasEagerState=!0,a.eagerState=l,wr(l,o)){var c=e.interleaved;c===null?(a.next=a,Ph(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=Xf(t,e,a,s),r!==null&&(a=_t(),br(r,t,s,a),yx(r,e,s))}}function xx(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function bx(t,e){di=zl=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function yx(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,fh(t,r)}}var Ll={readContext:ir,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},g1={readContext:ir,useCallback:function(t,e){return Cr().memoizedState=[t,e===void 0?null:e],t},useContext:ir,useEffect:fm,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ll(4194308,4,ux.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ll(4194308,4,t,e)},useInsertionEffect:function(t,e){return ll(4,2,t,e)},useMemo:function(t,e){var r=Cr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=Cr();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=p1.bind(null,Ue,t),[s.memoizedState,t]},useRef:function(t){var e=Cr();return t={current:t},e.memoizedState=t},useState:gm,useDebugValue:$h,useDeferredValue:function(t){return Cr().memoizedState=t},useTransition:function(){var t=gm(!1),e=t[0];return t=h1.bind(null,t[1]),Cr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=Ue,a=Cr();if(Ae){if(r===void 0)throw Error(Z(407));r=r()}else{if(r=e(),it===null)throw Error(Z(349));ga&30||sx(s,e,r)}a.memoizedState=r;var n={value:r,getSnapshot:e};return a.queue=n,fm(nx.bind(null,s,n,t),[t]),s.flags|=2048,$i(9,ax.bind(null,s,n,r,e),void 0,null),r},useId:function(){var t=Cr(),e=it.identifierPrefix;if(Ae){var r=Gr,s=Yr;r=(s&~(1<<32-xr(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=Li++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=u1++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},f1={readContext:ir,useCallback:px,useContext:ir,useEffect:Rh,useImperativeHandle:hx,useInsertionEffect:cx,useLayoutEffect:dx,useMemo:mx,useReducer:rd,useRef:lx,useState:function(){return rd(Ri)},useDebugValue:$h,useDeferredValue:function(t){var e=or();return gx(e,Ze.memoizedState,t)},useTransition:function(){var t=rd(Ri)[0],e=or().memoizedState;return[t,e]},useMutableSource:tx,useSyncExternalStore:rx,useId:fx,unstable_isNewReconciler:!1},x1={readContext:ir,useCallback:px,useContext:ir,useEffect:Rh,useImperativeHandle:hx,useInsertionEffect:cx,useLayoutEffect:dx,useMemo:mx,useReducer:sd,useRef:lx,useState:function(){return sd(Ri)},useDebugValue:$h,useDeferredValue:function(t){var e=or();return Ze===null?e.memoizedState=t:gx(e,Ze.memoizedState,t)},useTransition:function(){var t=sd(Ri)[0],e=or().memoizedState;return[t,e]},useMutableSource:tx,useSyncExternalStore:rx,useId:fx,unstable_isNewReconciler:!1};function hr(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function ou(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:Be({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var mc={isMounted:function(t){return(t=t._reactInternals)?ja(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=_t(),a=Ts(t),n=Zr(s,a);n.payload=e,r!=null&&(n.callback=r),e=Es(t,n,a),e!==null&&(br(e,t,a,s),il(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=_t(),a=Ts(t),n=Zr(s,a);n.tag=1,n.payload=e,r!=null&&(n.callback=r),e=Es(t,n,a),e!==null&&(br(e,t,a,s),il(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=_t(),s=Ts(t),a=Zr(r,s);a.tag=2,e!=null&&(a.callback=e),e=Es(t,a,s),e!==null&&(br(e,t,s,r),il(e,t,s))}};function xm(t,e,r,s,a,n,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,n,o):e.prototype&&e.prototype.isPureReactComponent?!Ti(r,s)||!Ti(a,n):!0}function vx(t,e,r){var s=!1,a=Ls,n=e.contextType;return typeof n=="object"&&n!==null?n=ir(n):(a=zt(e)?pa:wt.current,s=e.contextTypes,n=(s=s!=null)?un(t,a):Ls),e=new e(r,n),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mc,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=n),e}function bm(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&mc.enqueueReplaceState(e,e.state,null)}function lu(t,e,r,s){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},Th(t);var n=e.contextType;typeof n=="object"&&n!==null?a.context=ir(n):(n=zt(e)?pa:wt.current,a.context=un(t,n)),a.state=t.memoizedState,n=e.getDerivedStateFromProps,typeof n=="function"&&(ou(t,e,n,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&mc.enqueueReplaceState(a,a.state,null),Il(t,r,a,s),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function gn(t,e){try{var r="",s=e;do r+=Wv(s),s=s.return;while(s);var a=r}catch(n){a=`
Error generating stack: `+n.message+`
`+n.stack}return{value:t,source:e,stack:a,digest:null}}function ad(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function cu(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var b1=typeof WeakMap=="function"?WeakMap:Map;function wx(t,e,r){r=Zr(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){$l||($l=!0,bu=s),cu(t,e)},r}function kx(t,e,r){r=Zr(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var a=e.value;r.payload=function(){return s(a)},r.callback=function(){cu(t,e)}}var n=t.stateNode;return n!==null&&typeof n.componentDidCatch=="function"&&(r.callback=function(){cu(t,e),typeof s!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function ym(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new b1;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(r)||(a.add(r),t=D1.bind(null,t,e,r),e.then(t,t))}function vm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wm(t,e,r,s,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Zr(-1,1),e.tag=2,Es(r,e,1))),r.lanes|=1),t)}var y1=is.ReactCurrentOwner,Ot=!1;function jt(t,e,r,s){e.child=t===null?Qf(e,null,r,s):pn(e,t.child,r,s)}function km(t,e,r,s,a){r=r.render;var n=e.ref;return sn(e,a),s=zh(t,e,r,s,n,a),r=Lh(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,ss(t,e,a)):(Ae&&r&&_h(e),e.flags|=1,jt(t,e,s,a),e.child)}function jm(t,e,r,s,a){if(t===null){var n=r.type;return typeof n=="function"&&!Jh(n)&&n.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=n,jx(t,e,n,s,a)):(t=hl(r.type,null,s,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(n=t.child,!(t.lanes&a)){var o=n.memoizedProps;if(r=r.compare,r=r!==null?r:Ti,r(o,s)&&t.ref===e.ref)return ss(t,e,a)}return e.flags|=1,t=Ds(n,s),t.ref=e.ref,t.return=e,e.child=t}function jx(t,e,r,s,a){if(t!==null){var n=t.memoizedProps;if(Ti(n,s)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=s=n,(t.lanes&a)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,ss(t,e,a)}return du(t,e,r,s,a)}function _x(t,e,r){var s=e.pendingProps,a=s.children,n=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Xa,Ut),Ut|=r;else{if(!(r&1073741824))return t=n!==null?n.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(Xa,Ut),Ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=n!==null?n.baseLanes:r,Ee(Xa,Ut),Ut|=s}else n!==null?(s=n.baseLanes|r,e.memoizedState=null):s=r,Ee(Xa,Ut),Ut|=s;return jt(t,e,a,r),e.child}function Nx(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function du(t,e,r,s,a){var n=zt(r)?pa:wt.current;return n=un(e,n),sn(e,a),r=zh(t,e,r,s,n,a),s=Lh(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,ss(t,e,a)):(Ae&&s&&_h(e),e.flags|=1,jt(t,e,r,a),e.child)}function _m(t,e,r,s,a){if(zt(r)){var n=!0;El(e)}else n=!1;if(sn(e,a),e.stateNode===null)cl(t,e),vx(e,r,s),lu(e,r,s,a),s=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=ir(d):(d=zt(r)?pa:wt.current,d=un(e,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&bm(e,o,s,d),gs=!1;var p=e.memoizedState;o.state=p,Il(e,s,o,a),c=e.memoizedState,l!==s||p!==c||At.current||gs?(typeof u=="function"&&(ou(e,r,u,s),c=e.memoizedState),(l=gs||xm(e,r,l,s,p,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,Zf(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:hr(e.type,l),o.props=d,h=e.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ir(c):(c=zt(r)?pa:wt.current,c=un(e,c));var m=r.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==c)&&bm(e,o,s,c),gs=!1,p=e.memoizedState,o.state=p,Il(e,s,o,a);var v=e.memoizedState;l!==h||p!==v||At.current||gs?(typeof m=="function"&&(ou(e,r,m,s),v=e.memoizedState),(d=gs||xm(e,r,d,s,p,v,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=v),o.props=s,o.state=v,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),s=!1)}return uu(t,e,r,s,n,a)}function uu(t,e,r,s,a,n){Nx(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return a&&cm(e,r,!1),ss(t,e,n);s=e.stateNode,y1.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=pn(e,t.child,null,n),e.child=pn(e,null,l,n)):jt(t,e,l,n),e.memoizedState=s.state,a&&cm(e,r,!0),e.child}function Sx(t){var e=t.stateNode;e.pendingContext?lm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lm(t,e.context,!1),Dh(t,e.containerInfo)}function Nm(t,e,r,s,a){return hn(),Sh(a),e.flags|=256,jt(t,e,r,s),e.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function pu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Cx(t,e,r){var s=e.pendingProps,a=$e.current,n=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(n=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Ee($e,a&1),t===null)return nu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,n?(s=e.mode,n=e.child,o={mode:"hidden",children:o},!(s&1)&&n!==null?(n.childLanes=0,n.pendingProps=o):n=xc(o,s,0,null),t=da(t,s,r,null),n.return=e,t.return=e,n.sibling=t,e.child=n,e.child.memoizedState=pu(r),e.memoizedState=hu,t):Fh(e,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return v1(t,e,o,s,l,a,r);if(n){n=s.fallback,o=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==a?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Ds(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?n=Ds(l,n):(n=da(n,o,r,null),n.flags|=2),n.return=e,s.return=e,s.sibling=n,e.child=s,s=n,n=e.child,o=t.child.memoizedState,o=o===null?pu(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},n.memoizedState=o,n.childLanes=t.childLanes&~r,e.memoizedState=hu,s}return n=t.child,t=n.sibling,s=Ds(n,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function Fh(t,e){return e=xc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mo(t,e,r,s){return s!==null&&Sh(s),pn(e,t.child,null,r),t=Fh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function v1(t,e,r,s,a,n,o){if(r)return e.flags&256?(e.flags&=-257,s=ad(Error(Z(422))),Mo(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(n=s.fallback,a=e.mode,s=xc({mode:"visible",children:s.children},a,0,null),n=da(n,a,o,null),n.flags|=2,s.return=e,n.return=e,s.sibling=n,e.child=s,e.mode&1&&pn(e,t.child,null,o),e.child.memoizedState=pu(o),e.memoizedState=hu,n);if(!(e.mode&1))return Mo(t,e,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,n=Error(Z(419)),s=ad(n,s,void 0),Mo(t,e,o,s)}if(l=(o&t.childLanes)!==0,Ot||l){if(s=it,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==n.retryLane&&(n.retryLane=a,rs(t,a),br(s,t,a,-1))}return Hh(),s=ad(Error(Z(421))),Mo(t,e,o,s)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=O1.bind(null,t),a._reactRetry=e,null):(t=n.treeContext,Bt=Ms(a.nextSibling),Wt=e,Ae=!0,fr=null,t!==null&&(er[tr++]=Yr,er[tr++]=Gr,er[tr++]=ma,Yr=t.id,Gr=t.overflow,ma=e),e=Fh(e,s.children),e.flags|=4096,e)}function Sm(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),iu(t.return,e,r)}function nd(t,e,r,s,a){var n=t.memoizedState;n===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(n.isBackwards=e,n.rendering=null,n.renderingStartTime=0,n.last=s,n.tail=r,n.tailMode=a)}function Mx(t,e,r){var s=e.pendingProps,a=s.revealOrder,n=s.tail;if(jt(t,e,s.children,r),s=$e.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sm(t,r,e);else if(t.tag===19)Sm(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Ee($e,s),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&Al(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),nd(e,!1,a,r,n);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&Al(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}nd(e,!0,r,null,n);break;case"together":nd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ss(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),fa|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,r=Ds(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ds(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function w1(t,e,r){switch(e.tag){case 3:Sx(e),hn();break;case 5:ex(e);break;case 1:zt(e.type)&&El(e);break;case 4:Dh(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,a=e.memoizedProps.value;Ee(Dl,s._currentValue),s._currentValue=a;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Ee($e,$e.current&1),e.flags|=128,null):r&e.child.childLanes?Cx(t,e,r):(Ee($e,$e.current&1),t=ss(t,e,r),t!==null?t.sibling:null);Ee($e,$e.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return Mx(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ee($e,$e.current),s)break;return null;case 22:case 23:return e.lanes=0,_x(t,e,r)}return ss(t,e,r)}var Ex,mu,Px,Tx;Ex=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mu=function(){};Px=function(t,e,r,s){var a=t.memoizedProps;if(a!==s){t=e.stateNode,ia(Or.current);var n=null;switch(r){case"input":a=zd(t,a),s=zd(t,s),n=[];break;case"select":a=Be({},a,{value:void 0}),s=Be({},s,{value:void 0}),n=[];break;case"textarea":a=$d(t,a),s=$d(t,s),n=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Cl)}Ud(r,s);var o;r=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(_i.hasOwnProperty(d)?n||(n=[]):(n=n||[]).push(d,null));for(d in s){var c=s[d];if(l=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(n||(n=[]),n.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(n=n||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(n=n||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(_i.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Pe("scroll",t),n||l===c||(n=[])):(n=n||[]).push(d,c))}r&&(n=n||[]).push("style",r);var d=n;(e.updateQueue=d)&&(e.flags|=4)}};Tx=function(t,e,r,s){r!==s&&(e.flags|=4)};function Rn(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function k1(t,e,r){var s=e.pendingProps;switch(Nh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return zt(e.type)&&Ml(),mt(e),null;case 3:return s=e.stateNode,mn(),Oe(At),Oe(wt),Ih(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(So(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fr!==null&&(wu(fr),fr=null))),mu(t,e),mt(e),null;case 5:Oh(e);var a=ia(zi.current);if(r=e.type,t!==null&&e.stateNode!=null)Px(t,e,r,s,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(Z(166));return mt(e),null}if(t=ia(Or.current),So(e)){s=e.stateNode,r=e.type;var n=e.memoizedProps;switch(s[Er]=e,s[Ii]=n,t=(e.mode&1)!==0,r){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(a=0;a<Xn.length;a++)Pe(Xn[a],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":Ap(s,n),Pe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!n.multiple},Pe("invalid",s);break;case"textarea":Lp(s,n),Pe("invalid",s)}Ud(r,n),a=null;for(var o in n)if(n.hasOwnProperty(o)){var l=n[o];o==="children"?typeof l=="string"?s.textContent!==l&&(n.suppressHydrationWarning!==!0&&No(s.textContent,l,t),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(n.suppressHydrationWarning!==!0&&No(s.textContent,l,t),a=["children",""+l]):_i.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Pe("scroll",s)}switch(r){case"input":xo(s),zp(s,n,!0);break;case"textarea":xo(s),Rp(s);break;case"select":case"option":break;default:typeof n.onClick=="function"&&(s.onclick=Cl)}s=a,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=af(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(r,{is:s.is}):(t=o.createElement(r),r==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,r),t[Er]=e,t[Ii]=s,Ex(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bd(r,s),r){case"dialog":Pe("cancel",t),Pe("close",t),a=s;break;case"iframe":case"object":case"embed":Pe("load",t),a=s;break;case"video":case"audio":for(a=0;a<Xn.length;a++)Pe(Xn[a],t);a=s;break;case"source":Pe("error",t),a=s;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),a=s;break;case"details":Pe("toggle",t),a=s;break;case"input":Ap(t,s),a=zd(t,s),Pe("invalid",t);break;case"option":a=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},a=Be({},s,{value:void 0}),Pe("invalid",t);break;case"textarea":Lp(t,s),a=$d(t,s),Pe("invalid",t);break;default:a=s}Ud(r,a),l=a;for(n in l)if(l.hasOwnProperty(n)){var c=l[n];n==="style"?lf(t,c):n==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&nf(t,c)):n==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ni(t,c):typeof c=="number"&&Ni(t,""+c):n!=="suppressContentEditableWarning"&&n!=="suppressHydrationWarning"&&n!=="autoFocus"&&(_i.hasOwnProperty(n)?c!=null&&n==="onScroll"&&Pe("scroll",t):c!=null&&dh(t,n,c,o))}switch(r){case"input":xo(t),zp(t,s,!1);break;case"textarea":xo(t),Rp(t);break;case"option":s.value!=null&&t.setAttribute("value",""+zs(s.value));break;case"select":t.multiple=!!s.multiple,n=s.value,n!=null?Za(t,!!s.multiple,n,!1):s.defaultValue!=null&&Za(t,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Cl)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)Tx(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Z(166));if(r=ia(zi.current),ia(Or.current),So(e)){if(s=e.stateNode,r=e.memoizedProps,s[Er]=e,(n=s.nodeValue!==r)&&(t=Wt,t!==null))switch(t.tag){case 3:No(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&No(s.nodeValue,r,(t.mode&1)!==0)}n&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Er]=e,e.stateNode=s}return mt(e),null;case 13:if(Oe($e),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Bt!==null&&e.mode&1&&!(e.flags&128))Gf(),hn(),e.flags|=98560,n=!1;else if(n=So(e),s!==null&&s.dehydrated!==null){if(t===null){if(!n)throw Error(Z(318));if(n=e.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Z(317));n[Er]=e}else hn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),n=!1}else fr!==null&&(wu(fr),fr=null),n=!0;if(!n)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?tt===0&&(tt=3):Hh())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return mn(),mu(t,e),t===null&&Di(e.stateNode.containerInfo),mt(e),null;case 10:return Eh(e.type._context),mt(e),null;case 17:return zt(e.type)&&Ml(),mt(e),null;case 19:if(Oe($e),n=e.memoizedState,n===null)return mt(e),null;if(s=(e.flags&128)!==0,o=n.rendering,o===null)if(s)Rn(n,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Al(t),o!==null){for(e.flags|=128,Rn(n,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)n=r,t=s,n.flags&=14680066,o=n.alternate,o===null?(n.childLanes=0,n.lanes=t,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,t=o.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ee($e,$e.current&1|2),e.child}t=t.sibling}n.tail!==null&&He()>fn&&(e.flags|=128,s=!0,Rn(n,!1),e.lanes=4194304)}else{if(!s)if(t=Al(o),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Rn(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!Ae)return mt(e),null}else 2*He()-n.renderingStartTime>fn&&r!==1073741824&&(e.flags|=128,s=!0,Rn(n,!1),e.lanes=4194304);n.isBackwards?(o.sibling=e.child,e.child=o):(r=n.last,r!==null?r.sibling=o:e.child=o,n.last=o)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=He(),e.sibling=null,r=$e.current,Ee($e,s?r&1|2:r&1),e):(mt(e),null);case 22:case 23:return Wh(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Ut&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function j1(t,e){switch(Nh(e),e.tag){case 1:return zt(e.type)&&Ml(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mn(),Oe(At),Oe(wt),Ih(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Oh(e),null;case 13:if(Oe($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));hn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe($e),null;case 4:return mn(),null;case 10:return Eh(e.type._context),null;case 22:case 23:return Wh(),null;case 24:return null;default:return null}}var Eo=!1,xt=!1,_1=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Qa(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){qe(t,e,s)}else r.current=null}function Dx(t,e,r){try{r()}catch(s){qe(t,e,s)}}var Cm=!1;function N1(t,e){if(Xd=_l,t=zf(),jh(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,n=s.focusNode;s=s.focusOffset;try{r.nodeType,n.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=t,p=null;t:for(;;){for(var m;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==n||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===r&&++d===a&&(l=o),p===n&&++u===s&&(c=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Zd={focusedElem:t,selectionRange:r},_l=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,k=v.memoizedState,g=e.stateNode,f=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:hr(e.type,y),k);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(w){qe(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return v=Cm,Cm=!1,v}function ui(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var n=a.destroy;a.destroy=void 0,n!==void 0&&Dx(e,r,n)}a=a.next}while(a!==s)}}function gc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function gu(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Ox(t){var e=t.alternate;e!==null&&(t.alternate=null,Ox(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Er],delete e[Ii],delete e[ru],delete e[o1],delete e[l1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ix(t){return t.tag===5||t.tag===3||t.tag===4}function Mm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ix(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fu(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Cl));else if(s!==4&&(t=t.child,t!==null))for(fu(t,e,r),t=t.sibling;t!==null;)fu(t,e,r),t=t.sibling}function xu(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(xu(t,e,r),t=t.sibling;t!==null;)xu(t,e,r),t=t.sibling}var ot=null,pr=!1;function ds(t,e,r){for(r=r.child;r!==null;)Ax(t,e,r),r=r.sibling}function Ax(t,e,r){if(Dr&&typeof Dr.onCommitFiberUnmount=="function")try{Dr.onCommitFiberUnmount(oc,r)}catch{}switch(r.tag){case 5:xt||Qa(r,e);case 6:var s=ot,a=pr;ot=null,ds(t,e,r),ot=s,pr=a,ot!==null&&(pr?(t=ot,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ot.removeChild(r.stateNode));break;case 18:ot!==null&&(pr?(t=ot,r=r.stateNode,t.nodeType===8?Xc(t.parentNode,r):t.nodeType===1&&Xc(t,r),Ei(t)):Xc(ot,r.stateNode));break;case 4:s=ot,a=pr,ot=r.stateNode.containerInfo,pr=!0,ds(t,e,r),ot=s,pr=a;break;case 0:case 11:case 14:case 15:if(!xt&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var n=a,o=n.destroy;n=n.tag,o!==void 0&&(n&2||n&4)&&Dx(r,e,o),a=a.next}while(a!==s)}ds(t,e,r);break;case 1:if(!xt&&(Qa(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){qe(r,e,l)}ds(t,e,r);break;case 21:ds(t,e,r);break;case 22:r.mode&1?(xt=(s=xt)||r.memoizedState!==null,ds(t,e,r),xt=s):ds(t,e,r);break;default:ds(t,e,r)}}function Em(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new _1),e.forEach(function(s){var a=I1.bind(null,t,s);r.has(s)||(r.add(s),s.then(a,a))})}}function dr(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var n=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ot=l.stateNode,pr=!1;break e;case 3:ot=l.stateNode.containerInfo,pr=!0;break e;case 4:ot=l.stateNode.containerInfo,pr=!0;break e}l=l.return}if(ot===null)throw Error(Z(160));Ax(n,o,a),ot=null,pr=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){qe(a,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zx(e,t),e=e.sibling}function zx(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dr(e,t),jr(t),s&4){try{ui(3,t,t.return),gc(3,t)}catch(y){qe(t,t.return,y)}try{ui(5,t,t.return)}catch(y){qe(t,t.return,y)}}break;case 1:dr(e,t),jr(t),s&512&&r!==null&&Qa(r,r.return);break;case 5:if(dr(e,t),jr(t),s&512&&r!==null&&Qa(r,r.return),t.flags&32){var a=t.stateNode;try{Ni(a,"")}catch(y){qe(t,t.return,y)}}if(s&4&&(a=t.stateNode,a!=null)){var n=t.memoizedProps,o=r!==null?r.memoizedProps:n,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&n.type==="radio"&&n.name!=null&&rf(a,n),Bd(l,o);var d=Bd(l,n);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?lf(a,h):u==="dangerouslySetInnerHTML"?nf(a,h):u==="children"?Ni(a,h):dh(a,u,h,d)}switch(l){case"input":Ld(a,n);break;case"textarea":sf(a,n);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!n.multiple;var m=n.value;m!=null?Za(a,!!n.multiple,m,!1):p!==!!n.multiple&&(n.defaultValue!=null?Za(a,!!n.multiple,n.defaultValue,!0):Za(a,!!n.multiple,n.multiple?[]:"",!1))}a[Ii]=n}catch(y){qe(t,t.return,y)}}break;case 6:if(dr(e,t),jr(t),s&4){if(t.stateNode===null)throw Error(Z(162));a=t.stateNode,n=t.memoizedProps;try{a.nodeValue=n}catch(y){qe(t,t.return,y)}}break;case 3:if(dr(e,t),jr(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Ei(e.containerInfo)}catch(y){qe(t,t.return,y)}break;case 4:dr(e,t),jr(t);break;case 13:dr(e,t),jr(t),a=t.child,a.flags&8192&&(n=a.memoizedState!==null,a.stateNode.isHidden=n,!n||a.alternate!==null&&a.alternate.memoizedState!==null||(qh=He())),s&4&&Em(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(xt=(d=xt)||u,dr(e,t),xt=d):dr(e,t),jr(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(ae=t,u=t.child;u!==null;){for(h=ae=u;ae!==null;){switch(p=ae,m=p.child,p.tag){case 0:case 11:case 14:case 15:ui(4,p,p.return);break;case 1:Qa(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){s=p,r=p.return;try{e=s,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){qe(s,r,y)}}break;case 5:Qa(p,p.return);break;case 22:if(p.memoizedState!==null){Tm(h);continue}}m!==null?(m.return=p,ae=m):Tm(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(n=a.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=of("display",o))}catch(y){qe(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){qe(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:dr(e,t),jr(t),s&4&&Em(t);break;case 21:break;default:dr(e,t),jr(t)}}function jr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Ix(r)){var s=r;break e}r=r.return}throw Error(Z(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Ni(a,""),s.flags&=-33);var n=Mm(t);xu(t,n,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Mm(t);fu(t,l,o);break;default:throw Error(Z(161))}}catch(c){qe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function S1(t,e,r){ae=t,Lx(t)}function Lx(t,e,r){for(var s=(t.mode&1)!==0;ae!==null;){var a=ae,n=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||Eo;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||xt;l=Eo;var d=xt;if(Eo=o,(xt=c)&&!d)for(ae=a;ae!==null;)o=ae,c=o.child,o.tag===22&&o.memoizedState!==null?Dm(a):c!==null?(c.return=o,ae=c):Dm(a);for(;n!==null;)ae=n,Lx(n),n=n.sibling;ae=a,Eo=l,xt=d}Pm(t)}else a.subtreeFlags&8772&&n!==null?(n.return=a,ae=n):Pm(t)}}function Pm(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xt||gc(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!xt)if(r===null)s.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:hr(e.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var n=e.updateQueue;n!==null&&mm(e,n,s);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}mm(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ei(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}xt||e.flags&512&&gu(e)}catch(p){qe(e,e.return,p)}}if(e===t){ae=null;break}if(r=e.sibling,r!==null){r.return=e.return,ae=r;break}ae=e.return}}function Tm(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ae=r;break}ae=e.return}}function Dm(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{gc(4,e)}catch(c){qe(e,r,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var a=e.return;try{s.componentDidMount()}catch(c){qe(e,a,c)}}var n=e.return;try{gu(e)}catch(c){qe(e,n,c)}break;case 5:var o=e.return;try{gu(e)}catch(c){qe(e,o,c)}}}catch(c){qe(e,e.return,c)}if(e===t){ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ae=l;break}ae=e.return}}var C1=Math.ceil,Rl=is.ReactCurrentDispatcher,Uh=is.ReactCurrentOwner,nr=is.ReactCurrentBatchConfig,xe=0,it=null,Xe=null,ct=0,Ut=0,Xa=Fs(0),tt=0,Fi=null,fa=0,fc=0,Bh=0,hi=null,Pt=null,qh=0,fn=1/0,qr=null,$l=!1,bu=null,Ps=null,Po=!1,ws=null,Fl=0,pi=0,yu=null,dl=-1,ul=0;function _t(){return xe&6?He():dl!==-1?dl:dl=He()}function Ts(t){return t.mode&1?xe&2&&ct!==0?ct&-ct:d1.transition!==null?(ul===0&&(ul=vf()),ul):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:Cf(t.type)),t):1}function br(t,e,r,s){if(50<pi)throw pi=0,yu=null,Error(Z(185));eo(t,r,s),(!(xe&2)||t!==it)&&(t===it&&(!(xe&2)&&(fc|=r),tt===4&&bs(t,ct)),Lt(t,s),r===1&&xe===0&&!(e.mode&1)&&(fn=He()+500,hc&&Us()))}function Lt(t,e){var r=t.callbackNode;dw(t,e);var s=jl(t,t===it?ct:0);if(s===0)r!==null&&Up(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&Up(r),e===1)t.tag===0?c1(Om.bind(null,t)):Hf(Om.bind(null,t)),n1(function(){!(xe&6)&&Us()}),r=null;else{switch(wf(s)){case 1:r=gh;break;case 4:r=bf;break;case 16:r=kl;break;case 536870912:r=yf;break;default:r=kl}r=Wx(r,Rx.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Rx(t,e){if(dl=-1,ul=0,xe&6)throw Error(Z(327));var r=t.callbackNode;if(an()&&t.callbackNode!==r)return null;var s=jl(t,t===it?ct:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Ul(t,s);else{e=s;var a=xe;xe|=2;var n=Fx();(it!==t||ct!==e)&&(qr=null,fn=He()+500,ca(t,e));do try{P1();break}catch(l){$x(t,l)}while(!0);Mh(),Rl.current=n,xe=a,Xe!==null?e=0:(it=null,ct=0,e=tt)}if(e!==0){if(e===2&&(a=Jd(t),a!==0&&(s=a,e=vu(t,a))),e===1)throw r=Fi,ca(t,0),bs(t,s),Lt(t,He()),r;if(e===6)bs(t,s);else{if(a=t.current.alternate,!(s&30)&&!M1(a)&&(e=Ul(t,s),e===2&&(n=Jd(t),n!==0&&(s=n,e=vu(t,n))),e===1))throw r=Fi,ca(t,0),bs(t,s),Lt(t,He()),r;switch(t.finishedWork=a,t.finishedLanes=s,e){case 0:case 1:throw Error(Z(345));case 2:Qs(t,Pt,qr);break;case 3:if(bs(t,s),(s&130023424)===s&&(e=qh+500-He(),10<e)){if(jl(t,0)!==0)break;if(a=t.suspendedLanes,(a&s)!==s){_t(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=tu(Qs.bind(null,t,Pt,qr),e);break}Qs(t,Pt,qr);break;case 4:if(bs(t,s),(s&4194240)===s)break;for(e=t.eventTimes,a=-1;0<s;){var o=31-xr(s);n=1<<o,o=e[o],o>a&&(a=o),s&=~n}if(s=a,s=He()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*C1(s/1960))-s,10<s){t.timeoutHandle=tu(Qs.bind(null,t,Pt,qr),s);break}Qs(t,Pt,qr);break;case 5:Qs(t,Pt,qr);break;default:throw Error(Z(329))}}}return Lt(t,He()),t.callbackNode===r?Rx.bind(null,t):null}function vu(t,e){var r=hi;return t.current.memoizedState.isDehydrated&&(ca(t,e).flags|=256),t=Ul(t,e),t!==2&&(e=Pt,Pt=r,e!==null&&wu(e)),t}function wu(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function M1(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],n=a.getSnapshot;a=a.value;try{if(!wr(n(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bs(t,e){for(e&=~Bh,e&=~fc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-xr(e),s=1<<r;t[r]=-1,e&=~s}}function Om(t){if(xe&6)throw Error(Z(327));an();var e=jl(t,0);if(!(e&1))return Lt(t,He()),null;var r=Ul(t,e);if(t.tag!==0&&r===2){var s=Jd(t);s!==0&&(e=s,r=vu(t,s))}if(r===1)throw r=Fi,ca(t,0),bs(t,e),Lt(t,He()),r;if(r===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qs(t,Pt,qr),Lt(t,He()),null}function Vh(t,e){var r=xe;xe|=1;try{return t(e)}finally{xe=r,xe===0&&(fn=He()+500,hc&&Us())}}function xa(t){ws!==null&&ws.tag===0&&!(xe&6)&&an();var e=xe;xe|=1;var r=nr.transition,s=Ne;try{if(nr.transition=null,Ne=1,t)return t()}finally{Ne=s,nr.transition=r,xe=e,!(xe&6)&&Us()}}function Wh(){Ut=Xa.current,Oe(Xa)}function ca(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,a1(r)),Xe!==null)for(r=Xe.return;r!==null;){var s=r;switch(Nh(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ml();break;case 3:mn(),Oe(At),Oe(wt),Ih();break;case 5:Oh(s);break;case 4:mn();break;case 13:Oe($e);break;case 19:Oe($e);break;case 10:Eh(s.type._context);break;case 22:case 23:Wh()}r=r.return}if(it=t,Xe=t=Ds(t.current,null),ct=Ut=e,tt=0,Fi=null,Bh=fc=fa=0,Pt=hi=null,na!==null){for(e=0;e<na.length;e++)if(r=na[e],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,n=r.pending;if(n!==null){var o=n.next;n.next=a,s.next=o}r.pending=s}na=null}return t}function $x(t,e){do{var r=Xe;try{if(Mh(),ol.current=Ll,zl){for(var s=Ue.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}zl=!1}if(ga=0,at=Ze=Ue=null,di=!1,Li=0,Uh.current=null,r===null||r.return===null){tt=1,Fi=e,Xe=null;break}e:{var n=t,o=r.return,l=r,c=e;if(e=ct,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=vm(o);if(m!==null){m.flags&=-257,wm(m,o,l,n,e),m.mode&1&&ym(n,d,e),e=m,c=d;var v=e.updateQueue;if(v===null){var y=new Set;y.add(c),e.updateQueue=y}else v.add(c);break e}else{if(!(e&1)){ym(n,d,e),Hh();break e}c=Error(Z(426))}}else if(Ae&&l.mode&1){var k=vm(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),wm(k,o,l,n,e),Sh(gn(c,l));break e}}n=c=gn(c,l),tt!==4&&(tt=2),hi===null?hi=[n]:hi.push(n),n=o;do{switch(n.tag){case 3:n.flags|=65536,e&=-e,n.lanes|=e;var g=wx(n,c,e);pm(n,g);break e;case 1:l=c;var f=n.type,x=n.stateNode;if(!(n.flags&128)&&(typeof f.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ps===null||!Ps.has(x)))){n.flags|=65536,e&=-e,n.lanes|=e;var w=kx(n,l,e);pm(n,w);break e}}n=n.return}while(n!==null)}Bx(r)}catch(S){e=S,Xe===r&&r!==null&&(Xe=r=r.return);continue}break}while(!0)}function Fx(){var t=Rl.current;return Rl.current=Ll,t===null?Ll:t}function Hh(){(tt===0||tt===3||tt===2)&&(tt=4),it===null||!(fa&268435455)&&!(fc&268435455)||bs(it,ct)}function Ul(t,e){var r=xe;xe|=2;var s=Fx();(it!==t||ct!==e)&&(qr=null,ca(t,e));do try{E1();break}catch(a){$x(t,a)}while(!0);if(Mh(),xe=r,Rl.current=s,Xe!==null)throw Error(Z(261));return it=null,ct=0,tt}function E1(){for(;Xe!==null;)Ux(Xe)}function P1(){for(;Xe!==null&&!tw();)Ux(Xe)}function Ux(t){var e=Vx(t.alternate,t,Ut);t.memoizedProps=t.pendingProps,e===null?Bx(t):Xe=e,Uh.current=null}function Bx(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=j1(r,e),r!==null){r.flags&=32767,Xe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Xe=null;return}}else if(r=k1(r,e,Ut),r!==null){Xe=r;return}if(e=e.sibling,e!==null){Xe=e;return}Xe=e=t}while(e!==null);tt===0&&(tt=5)}function Qs(t,e,r){var s=Ne,a=nr.transition;try{nr.transition=null,Ne=1,T1(t,e,r,s)}finally{nr.transition=a,Ne=s}return null}function T1(t,e,r,s){do an();while(ws!==null);if(xe&6)throw Error(Z(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var n=r.lanes|r.childLanes;if(uw(t,n),t===it&&(Xe=it=null,ct=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Po||(Po=!0,Wx(kl,function(){return an(),null})),n=(r.flags&15990)!==0,r.subtreeFlags&15990||n){n=nr.transition,nr.transition=null;var o=Ne;Ne=1;var l=xe;xe|=4,Uh.current=null,N1(t,r),zx(r,t),Qw(Zd),_l=!!Xd,Zd=Xd=null,t.current=r,S1(r),rw(),xe=l,Ne=o,nr.transition=n}else t.current=r;if(Po&&(Po=!1,ws=t,Fl=a),n=t.pendingLanes,n===0&&(Ps=null),nw(r.stateNode),Lt(t,He()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],s(a.value,{componentStack:a.stack,digest:a.digest});if($l)throw $l=!1,t=bu,bu=null,t;return Fl&1&&t.tag!==0&&an(),n=t.pendingLanes,n&1?t===yu?pi++:(pi=0,yu=t):pi=0,Us(),null}function an(){if(ws!==null){var t=wf(Fl),e=nr.transition,r=Ne;try{if(nr.transition=null,Ne=16>t?16:t,ws===null)var s=!1;else{if(t=ws,ws=null,Fl=0,xe&6)throw Error(Z(331));var a=xe;for(xe|=4,ae=t.current;ae!==null;){var n=ae,o=n.child;if(ae.flags&16){var l=n.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ae=d;ae!==null;){var u=ae;switch(u.tag){case 0:case 11:case 15:ui(8,u,n)}var h=u.child;if(h!==null)h.return=u,ae=h;else for(;ae!==null;){u=ae;var p=u.sibling,m=u.return;if(Ox(u),u===d){ae=null;break}if(p!==null){p.return=m,ae=p;break}ae=m}}}var v=n.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var k=y.sibling;y.sibling=null,y=k}while(y!==null)}}ae=n}}if(n.subtreeFlags&2064&&o!==null)o.return=n,ae=o;else e:for(;ae!==null;){if(n=ae,n.flags&2048)switch(n.tag){case 0:case 11:case 15:ui(9,n,n.return)}var g=n.sibling;if(g!==null){g.return=n.return,ae=g;break e}ae=n.return}}var f=t.current;for(ae=f;ae!==null;){o=ae;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ae=x;else e:for(o=f;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:gc(9,l)}}catch(S){qe(l,l.return,S)}if(l===o){ae=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,ae=w;break e}ae=l.return}}if(xe=a,Us(),Dr&&typeof Dr.onPostCommitFiberRoot=="function")try{Dr.onPostCommitFiberRoot(oc,t)}catch{}s=!0}return s}finally{Ne=r,nr.transition=e}}return!1}function Im(t,e,r){e=gn(r,e),e=wx(t,e,1),t=Es(t,e,1),e=_t(),t!==null&&(eo(t,1,e),Lt(t,e))}function qe(t,e,r){if(t.tag===3)Im(t,t,r);else for(;e!==null;){if(e.tag===3){Im(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ps===null||!Ps.has(s))){t=gn(r,t),t=kx(e,t,1),e=Es(e,t,1),t=_t(),e!==null&&(eo(e,1,t),Lt(e,t));break}}e=e.return}}function D1(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&r,it===t&&(ct&r)===r&&(tt===4||tt===3&&(ct&130023424)===ct&&500>He()-qh?ca(t,0):Bh|=r),Lt(t,e)}function qx(t,e){e===0&&(t.mode&1?(e=vo,vo<<=1,!(vo&130023424)&&(vo=4194304)):e=1);var r=_t();t=rs(t,e),t!==null&&(eo(t,e,r),Lt(t,r))}function O1(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),qx(t,r)}function I1(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(Z(314))}s!==null&&s.delete(e),qx(t,r)}var Vx;Vx=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)Ot=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ot=!1,w1(t,e,r);Ot=!!(t.flags&131072)}else Ot=!1,Ae&&e.flags&1048576&&Jf(e,Tl,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;cl(t,e),t=e.pendingProps;var a=un(e,wt.current);sn(e,r),a=zh(null,e,s,t,a,r);var n=Lh();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zt(s)?(n=!0,El(e)):n=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Th(e),a.updater=mc,e.stateNode=a,a._reactInternals=e,lu(e,s,t,r),e=uu(null,e,s,!0,n,r)):(e.tag=0,Ae&&n&&_h(e),jt(null,e,a,r),e=e.child),e;case 16:s=e.elementType;e:{switch(cl(t,e),t=e.pendingProps,a=s._init,s=a(s._payload),e.type=s,a=e.tag=z1(s),t=hr(s,t),a){case 0:e=du(null,e,s,t,r);break e;case 1:e=_m(null,e,s,t,r);break e;case 11:e=km(null,e,s,t,r);break e;case 14:e=jm(null,e,s,hr(s.type,t),r);break e}throw Error(Z(306,s,""))}return e;case 0:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:hr(s,a),du(t,e,s,a,r);case 1:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:hr(s,a),_m(t,e,s,a,r);case 3:e:{if(Sx(e),t===null)throw Error(Z(387));s=e.pendingProps,n=e.memoizedState,a=n.element,Zf(t,e),Il(e,s,null,r);var o=e.memoizedState;if(s=o.element,n.isDehydrated)if(n={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=n,e.memoizedState=n,e.flags&256){a=gn(Error(Z(423)),e),e=Nm(t,e,s,r,a);break e}else if(s!==a){a=gn(Error(Z(424)),e),e=Nm(t,e,s,r,a);break e}else for(Bt=Ms(e.stateNode.containerInfo.firstChild),Wt=e,Ae=!0,fr=null,r=Qf(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hn(),s===a){e=ss(t,e,r);break e}jt(t,e,s,r)}e=e.child}return e;case 5:return ex(e),t===null&&nu(e),s=e.type,a=e.pendingProps,n=t!==null?t.memoizedProps:null,o=a.children,eu(s,a)?o=null:n!==null&&eu(s,n)&&(e.flags|=32),Nx(t,e),jt(t,e,o,r),e.child;case 6:return t===null&&nu(e),null;case 13:return Cx(t,e,r);case 4:return Dh(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=pn(e,null,s,r):jt(t,e,s,r),e.child;case 11:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:hr(s,a),km(t,e,s,a,r);case 7:return jt(t,e,e.pendingProps,r),e.child;case 8:return jt(t,e,e.pendingProps.children,r),e.child;case 12:return jt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,a=e.pendingProps,n=e.memoizedProps,o=a.value,Ee(Dl,s._currentValue),s._currentValue=o,n!==null)if(wr(n.value,o)){if(n.children===a.children&&!At.current){e=ss(t,e,r);break e}}else for(n=e.child,n!==null&&(n.return=e);n!==null;){var l=n.dependencies;if(l!==null){o=n.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(n.tag===1){c=Zr(-1,r&-r),c.tag=2;var d=n.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}n.lanes|=r,c=n.alternate,c!==null&&(c.lanes|=r),iu(n.return,r,e),l.lanes|=r;break}c=c.next}}else if(n.tag===10)o=n.type===e.type?null:n.child;else if(n.tag===18){if(o=n.return,o===null)throw Error(Z(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),iu(o,r,e),o=n.sibling}else o=n.child;if(o!==null)o.return=n;else for(o=n;o!==null;){if(o===e){o=null;break}if(n=o.sibling,n!==null){n.return=o.return,o=n;break}o=o.return}n=o}jt(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,s=e.pendingProps.children,sn(e,r),a=ir(a),s=s(a),e.flags|=1,jt(t,e,s,r),e.child;case 14:return s=e.type,a=hr(s,e.pendingProps),a=hr(s.type,a),jm(t,e,s,a,r);case 15:return jx(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:hr(s,a),cl(t,e),e.tag=1,zt(s)?(t=!0,El(e)):t=!1,sn(e,r),vx(e,s,a),lu(e,s,a,r),uu(null,e,s,!0,t,r);case 19:return Mx(t,e,r);case 22:return _x(t,e,r)}throw Error(Z(156,e.tag))};function Wx(t,e){return xf(t,e)}function A1(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(t,e,r,s){return new A1(t,e,r,s)}function Jh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function z1(t){if(typeof t=="function")return Jh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hh)return 11;if(t===ph)return 14}return 2}function Ds(t,e){var r=t.alternate;return r===null?(r=rr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function hl(t,e,r,s,a,n){var o=2;if(s=t,typeof t=="function")Jh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ba:return da(r.children,a,n,e);case uh:o=8,a|=8;break;case Dd:return t=rr(12,r,e,a|2),t.elementType=Dd,t.lanes=n,t;case Od:return t=rr(13,r,e,a),t.elementType=Od,t.lanes=n,t;case Id:return t=rr(19,r,e,a),t.elementType=Id,t.lanes=n,t;case Z0:return xc(r,a,n,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q0:o=10;break e;case X0:o=9;break e;case hh:o=11;break e;case ph:o=14;break e;case ms:o=16,s=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=rr(o,r,e,a),e.elementType=t,e.type=s,e.lanes=n,e}function da(t,e,r,s){return t=rr(7,t,s,e),t.lanes=r,t}function xc(t,e,r,s){return t=rr(22,t,s,e),t.elementType=Z0,t.lanes=r,t.stateNode={isHidden:!1},t}function id(t,e,r){return t=rr(6,t,null,e),t.lanes=r,t}function od(t,e,r){return e=rr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function L1(t,e,r,s,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uc(0),this.expirationTimes=Uc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uc(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Yh(t,e,r,s,a,n,o,l,c){return t=new L1(t,e,r,l,c),e===1?(e=1,n===!0&&(e|=8)):e=0,n=rr(3,null,null,e),t.current=n,n.stateNode=t,n.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Th(n),t}function R1(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ua,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function Hx(t){if(!t)return Ls;t=t._reactInternals;e:{if(ja(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var r=t.type;if(zt(r))return Wf(t,r,e)}return e}function Jx(t,e,r,s,a,n,o,l,c){return t=Yh(r,s,!0,t,a,n,o,l,c),t.context=Hx(null),r=t.current,s=_t(),a=Ts(r),n=Zr(s,a),n.callback=e??null,Es(r,n,a),t.current.lanes=a,eo(t,a,s),Lt(t,s),t}function bc(t,e,r,s){var a=e.current,n=_t(),o=Ts(a);return r=Hx(r),e.context===null?e.context=r:e.pendingContext=r,e=Zr(n,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Es(a,e,o),t!==null&&(br(t,a,o,n),il(t,a,o)),o}function Bl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Am(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Gh(t,e){Am(t,e),(t=t.alternate)&&Am(t,e)}function $1(){return null}var Yx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kh(t){this._internalRoot=t}yc.prototype.render=Kh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));bc(t,e,null,null)};yc.prototype.unmount=Kh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xa(function(){bc(null,t,null,null)}),e[ts]=null}};function yc(t){this._internalRoot=t}yc.prototype.unstable_scheduleHydration=function(t){if(t){var e=_f();t={blockedOn:null,target:t,priority:e};for(var r=0;r<xs.length&&e!==0&&e<xs[r].priority;r++);xs.splice(r,0,t),r===0&&Sf(t)}};function Qh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zm(){}function F1(t,e,r,s,a){if(a){if(typeof s=="function"){var n=s;s=function(){var d=Bl(o);n.call(d)}}var o=Jx(e,s,t,0,null,!1,!1,"",zm);return t._reactRootContainer=o,t[ts]=o.current,Di(t.nodeType===8?t.parentNode:t),xa(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var d=Bl(c);l.call(d)}}var c=Yh(t,0,!1,null,null,!1,!1,"",zm);return t._reactRootContainer=c,t[ts]=c.current,Di(t.nodeType===8?t.parentNode:t),xa(function(){bc(e,c,r,s)}),c}function wc(t,e,r,s,a){var n=r._reactRootContainer;if(n){var o=n;if(typeof a=="function"){var l=a;a=function(){var c=Bl(o);l.call(c)}}bc(e,o,t,a)}else o=F1(r,e,t,a,s);return Bl(o)}kf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Qn(e.pendingLanes);r!==0&&(fh(e,r|1),Lt(e,He()),!(xe&6)&&(fn=He()+500,Us()))}break;case 13:xa(function(){var s=rs(t,1);if(s!==null){var a=_t();br(s,t,1,a)}}),Gh(t,1)}};xh=function(t){if(t.tag===13){var e=rs(t,134217728);if(e!==null){var r=_t();br(e,t,134217728,r)}Gh(t,134217728)}};jf=function(t){if(t.tag===13){var e=Ts(t),r=rs(t,e);if(r!==null){var s=_t();br(r,t,e,s)}Gh(t,e)}};_f=function(){return Ne};Nf=function(t,e){var r=Ne;try{return Ne=t,e()}finally{Ne=r}};Vd=function(t,e,r){switch(e){case"input":if(Ld(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var a=uc(s);if(!a)throw Error(Z(90));tf(s),Ld(s,a)}}}break;case"textarea":sf(t,r);break;case"select":e=r.value,e!=null&&Za(t,!!r.multiple,e,!1)}};uf=Vh;hf=xa;var U1={usingClientEntryPoint:!1,Events:[ro,Ha,uc,cf,df,Vh]},$n={findFiberByHostInstance:aa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B1={bundleType:$n.bundleType,version:$n.version,rendererPackageName:$n.rendererPackageName,rendererConfig:$n.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:is.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gf(t),t===null?null:t.stateNode},findFiberByHostInstance:$n.findFiberByHostInstance||$1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var To=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!To.isDisabled&&To.supportsFiber)try{oc=To.inject(B1),Dr=To}catch{}}Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U1;Yt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qh(e))throw Error(Z(200));return R1(t,e,null,r)};Yt.createRoot=function(t,e){if(!Qh(t))throw Error(Z(299));var r=!1,s="",a=Yx;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Yh(t,1,!1,null,null,r,!1,s,a),t[ts]=e.current,Di(t.nodeType===8?t.parentNode:t),new Kh(e)};Yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=gf(e),t=t===null?null:t.stateNode,t};Yt.flushSync=function(t){return xa(t)};Yt.hydrate=function(t,e,r){if(!vc(e))throw Error(Z(200));return wc(null,t,e,!0,r)};Yt.hydrateRoot=function(t,e,r){if(!Qh(t))throw Error(Z(405));var s=r!=null&&r.hydratedSources||null,a=!1,n="",o=Yx;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(n=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Jx(e,null,t,1,r??null,a,!1,n,o),t[ts]=e.current,Di(t),s)for(t=0;t<s.length;t++)r=s[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new yc(e)};Yt.render=function(t,e,r){if(!vc(e))throw Error(Z(200));return wc(null,t,e,!1,r)};Yt.unmountComponentAtNode=function(t){if(!vc(t))throw Error(Z(40));return t._reactRootContainer?(xa(function(){wc(null,null,t,!1,function(){t._reactRootContainer=null,t[ts]=null})}),!0):!1};Yt.unstable_batchedUpdates=Vh;Yt.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!vc(r))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return wc(t,e,r,!1,s)};Yt.version="18.3.1-next-f1338f8080-20240426";function Gx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gx)}catch(t){console.error(t)}}Gx(),J0.exports=Yt;var q1=J0.exports,Kx,Lm=q1;Kx=Lm.createRoot,Lm.hydrateRoot;/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var V1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const W1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),se=(t,e)=>{const r=T.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>T.createElement("svg",{ref:u,...V1,width:a,height:a,stroke:s,strokeWidth:o?Number(n)*24/Number(a):n,className:["lucide",`lucide-${W1(t)}`,l].join(" "),...d},[...e.map(([h,p])=>T.createElement(h,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nt=se("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const It=se("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Kr=se("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const H1=se("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Do=se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const oa=se("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Qx=se("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ba=se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ku=se("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Jr=se("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const as=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const J1=se("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const lt=se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ju=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const qt=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Y1=se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const G1=se("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Xx=se("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const dt=se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Zx=se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const kc=se("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Jt=se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const yr=se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const K1=se("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const _a=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const eb=se("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Q1=se("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Qr=se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const _u=se("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const X1=se("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Os=se("Headset",[["path",{d:"M3 11h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5Zm0 0a9 9 0 1 1 18 0m0 0v5a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3Z",key:"12oyoe"}],["path",{d:"M21 16v2a4 4 0 0 1-4 4h-5",key:"1x7m43"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Z1=se("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ek=se("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const tk=se("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Rm=se("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const rk=se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ui=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Nu=se("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const tb=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nn=se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sk=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const on=se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const rb=se("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ak=se("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ir=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ao=se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nk=se("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Is=se("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Na=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Su=se("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ya=se("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Xh=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Se=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ik=se("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sr=se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const $m=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ok=se("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sb=se("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ab=se("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ql=se("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Cu=se("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Rt=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Vl=se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Fm=se("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Zh=se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const lk=se("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ck=se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ns=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const vr=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const dk=se("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Mu=se("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const uk=se("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const _e=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var nb={exports:{}};(function(t,e){(function(r,s){t.exports=s(r)})(typeof bt<"u"?bt:window||bt.window||bt.global,function(r){var s={},a="iziToast";document.querySelector("body");var n=!!/Mobi/.test(navigator.userAgent),o=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),l=typeof InstallTrigger<"u",c="ontouchstart"in document.documentElement,d=["bottomRight","bottomLeft","bottomCenter","topRight","topLeft","topCenter","center"],u={info:{color:"blue",icon:"ico-info"},success:{color:"green",icon:"ico-success"},warning:{color:"orange",icon:"ico-warning"},error:{color:"red",icon:"ico-error"},question:{color:"yellow",icon:"ico-question"}},h=568,p={};s.children={};var m={id:null,class:"",title:"",titleColor:"",titleSize:"",titleLineHeight:"",message:"",messageColor:"",messageSize:"",messageLineHeight:"",backgroundColor:"",theme:"light",color:"",icon:"",iconText:"",iconColor:"",iconUrl:null,image:"",imageWidth:50,maxWidth:null,zindex:null,layout:1,balloon:!1,close:!0,closeOnEscape:!1,closeOnClick:!1,displayMode:0,position:"bottomRight",target:"",targetFirst:!0,timeout:5e3,rtl:!1,animateInside:!0,drag:!0,pauseOnHover:!0,resetOnHover:!1,progressBar:!0,progressBarColor:"",progressBarEasing:"linear",overlay:!1,overlayClose:!1,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInUp",transitionOut:"fadeOut",transitionInMobile:"fadeInUp",transitionOutMobile:"fadeOutDown",buttons:{},inputs:{},onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){}};if("remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof window.CustomEvent!="function"){var v=function(N,_){_=_||{bubbles:!1,cancelable:!1,detail:void 0};var b=document.createEvent("CustomEvent");return b.initCustomEvent(N,_.bubbles,_.cancelable,_.detail),b};v.prototype=window.Event.prototype,window.CustomEvent=v}var y=function(N,_,b){if(Object.prototype.toString.call(N)==="[object Object]")for(var j in N)Object.prototype.hasOwnProperty.call(N,j)&&_.call(b,N[j],j,N);else if(N)for(var z=0,I=N.length;z<I;z++)_.call(b,N[z],z,N)},k=function(N,_){var b={};return y(N,function(j,z){b[z]=N[z]}),y(_,function(j,z){b[z]=_[z]}),b},g=function(N){var _=document.createDocumentFragment(),b=document.createElement("div");for(b.innerHTML=N;b.firstChild;)_.appendChild(b.firstChild);return _},f=function(N){var _=btoa(encodeURIComponent(N));return _.replace(/=/g,"")},x=function(N){return N.substring(0,1)=="#"||N.substring(0,3)=="rgb"||N.substring(0,3)=="hsl"},w=function(N){try{return btoa(atob(N))==N}catch{return!1}},S=function(){return{move:function(N,_,b,j){var z,I=.3,A=180;j!==0&&(N.classList.add(a+"-dragged"),N.style.transform="translateX("+j+"px)",j>0?(z=(A-j)/A,z<I&&_.hide(k(b,{transitionOut:"fadeOutRight",transitionOutMobile:"fadeOutRight"}),N,"drag")):(z=(A+j)/A,z<I&&_.hide(k(b,{transitionOut:"fadeOutLeft",transitionOutMobile:"fadeOutLeft"}),N,"drag")),N.style.opacity=z,z<I&&((o||l)&&(N.style.left=j+"px"),N.parentNode.style.opacity=I,this.stopMoving(N,null)))},startMoving:function(N,_,b,j){j=j||window.event;var z=c?j.touches[0].clientX:j.clientX,I=N.style.transform.replace("px)","");I=I.replace("translateX(","");var A=z-I;b.transitionIn&&N.classList.remove(b.transitionIn),b.transitionInMobile&&N.classList.remove(b.transitionInMobile),N.style.transition="",c?document.ontouchmove=function(F){F.preventDefault(),F=F||window.event;var H=F.touches[0].clientX,L=H-A;S.move(N,_,b,L)}:document.onmousemove=function(F){F.preventDefault(),F=F||window.event;var H=F.clientX,L=H-A;S.move(N,_,b,L)}},stopMoving:function(N,_){c?document.ontouchmove=function(){}:document.onmousemove=function(){},N.style.opacity="",N.style.transform="",N.classList.contains(a+"-dragged")&&(N.classList.remove(a+"-dragged"),N.style.transition="transform 0.4s ease, opacity 0.4s ease",setTimeout(function(){N.style.transition=""},400))}}}();return s.setSetting=function(N,_,b){s.children[N][_]=b},s.getSetting=function(N,_){return s.children[N][_]},s.destroy=function(){y(document.querySelectorAll("."+a+"-overlay"),function(N,_){N.remove()}),y(document.querySelectorAll("."+a+"-wrapper"),function(N,_){N.remove()}),y(document.querySelectorAll("."+a),function(N,_){N.remove()}),this.children={},document.removeEventListener(a+"-opened",{},!1),document.removeEventListener(a+"-opening",{},!1),document.removeEventListener(a+"-closing",{},!1),document.removeEventListener(a+"-closed",{},!1),document.removeEventListener("keyup",{},!1),p={}},s.settings=function(N){s.destroy(),p=N,m=k(m,N||{})},y(u,function(N,_){s[_]=function(b){var j=k(p,b||{});j=k(N,j||{}),this.show(j)}}),s.progress=function(N,_,b){var j=this,z=_.getAttribute("data-iziToast-ref"),I=k(this.children[z],N||{}),A=_.querySelector("."+a+"-progressbar div");return{start:function(){typeof I.time.REMAINING>"u"&&(_.classList.remove(a+"-reseted"),A!==null&&(A.style.transition="width "+I.timeout+"ms "+I.progressBarEasing,A.style.width="0%"),I.time.START=new Date().getTime(),I.time.END=I.time.START+I.timeout,I.time.TIMER=setTimeout(function(){clearTimeout(I.time.TIMER),_.classList.contains(a+"-closing")||(j.hide(I,_,"timeout"),typeof b=="function"&&b.apply(j))},I.timeout),j.setSetting(z,"time",I.time))},pause:function(){if(typeof I.time.START<"u"&&!_.classList.contains(a+"-paused")&&!_.classList.contains(a+"-reseted")){if(_.classList.add(a+"-paused"),I.time.REMAINING=I.time.END-new Date().getTime(),clearTimeout(I.time.TIMER),j.setSetting(z,"time",I.time),A!==null){var F=window.getComputedStyle(A),H=F.getPropertyValue("width");A.style.transition="none",A.style.width=H}typeof b=="function"&&setTimeout(function(){b.apply(j)},10)}},resume:function(){typeof I.time.REMAINING<"u"?(_.classList.remove(a+"-paused"),A!==null&&(A.style.transition="width "+I.time.REMAINING+"ms "+I.progressBarEasing,A.style.width="0%"),I.time.END=new Date().getTime()+I.time.REMAINING,I.time.TIMER=setTimeout(function(){clearTimeout(I.time.TIMER),_.classList.contains(a+"-closing")||(j.hide(I,_,"timeout"),typeof b=="function"&&b.apply(j))},I.time.REMAINING),j.setSetting(z,"time",I.time)):this.start()},reset:function(){clearTimeout(I.time.TIMER),delete I.time.REMAINING,j.setSetting(z,"time",I.time),_.classList.add(a+"-reseted"),_.classList.remove(a+"-paused"),A!==null&&(A.style.transition="none",A.style.width="100%"),typeof b=="function"&&setTimeout(function(){b.apply(j)},10)}}},s.hide=function(N,_,b){typeof _!="object"&&(_=document.querySelector(_));var j=this,z=k(this.children[_.getAttribute("data-iziToast-ref")],N||{});z.closedBy=b||null,delete z.time.REMAINING,_.classList.add(a+"-closing"),function(){var F=document.querySelector("."+a+"-overlay");if(F!==null){var H=F.getAttribute("data-iziToast-ref");H=H.split(",");var L=H.indexOf(String(z.ref));L!==-1&&H.splice(L,1),F.setAttribute("data-iziToast-ref",H.join()),H.length===0&&(F.classList.remove("fadeIn"),F.classList.add("fadeOut"),setTimeout(function(){F.remove()},700))}}(),z.transitionIn&&_.classList.remove(z.transitionIn),z.transitionInMobile&&_.classList.remove(z.transitionInMobile),n||window.innerWidth<=h?z.transitionOutMobile&&_.classList.add(z.transitionOutMobile):z.transitionOut&&_.classList.add(z.transitionOut);var I=_.parentNode.offsetHeight;_.parentNode.style.height=I+"px",_.style.pointerEvents="none",(!n||window.innerWidth>h)&&(_.parentNode.style.transitionDelay="0.2s");try{var A=new CustomEvent(a+"-closing",{detail:z,bubbles:!0,cancelable:!0});document.dispatchEvent(A)}catch(F){console.warn(F)}setTimeout(function(){_.parentNode.style.height="0px",_.parentNode.style.overflow="",setTimeout(function(){delete j.children[z.ref],_.parentNode.remove();try{var F=new CustomEvent(a+"-closed",{detail:z,bubbles:!0,cancelable:!0});document.dispatchEvent(F)}catch(H){console.warn(H)}typeof z.onClosed<"u"&&z.onClosed.apply(null,[z,_,b])},1e3)},200),typeof z.onClosing<"u"&&z.onClosing.apply(null,[z,_,b])},s.show=function(N){var _=this,b=k(p,N||{});if(b=k(m,b),b.time={},b.id===null&&(b.id=f(b.title+b.message+b.color)),b.displayMode===1||b.displayMode=="once")try{if(document.querySelectorAll("."+a+"#"+b.id).length>0)return!1}catch{console.warn("["+a+"] Could not find an element with this selector: #"+b.id+". Try to set an valid id.")}if(b.displayMode===2||b.displayMode=="replace")try{y(document.querySelectorAll("."+a+"#"+b.id),function(A,F){_.hide(b,A,"replaced")})}catch{console.warn("["+a+"] Could not find an element with this selector: #"+b.id+". Try to set an valid id.")}b.ref=new Date().getTime()+Math.floor(Math.random()*1e7+1),s.children[b.ref]=b;var j={body:document.querySelector("body"),overlay:document.createElement("div"),toast:document.createElement("div"),toastBody:document.createElement("div"),toastTexts:document.createElement("div"),toastCapsule:document.createElement("div"),cover:document.createElement("div"),buttons:document.createElement("div"),inputs:document.createElement("div"),icon:b.iconUrl?document.createElement("img"):document.createElement("i"),wrapper:null};j.toast.setAttribute("data-iziToast-ref",b.ref),j.toast.appendChild(j.toastBody),j.toastCapsule.appendChild(j.toast),function(){if(j.toast.classList.add(a),j.toast.classList.add(a+"-opening"),j.toastCapsule.classList.add(a+"-capsule"),j.toastBody.classList.add(a+"-body"),j.toastTexts.classList.add(a+"-texts"),n||window.innerWidth<=h?b.transitionInMobile&&j.toast.classList.add(b.transitionInMobile):b.transitionIn&&j.toast.classList.add(b.transitionIn),b.class){var A=b.class.split(" ");y(A,function(F,H){j.toast.classList.add(F)})}b.id&&(j.toast.id=b.id),b.rtl&&(j.toast.classList.add(a+"-rtl"),j.toast.setAttribute("dir","rtl")),b.layout>1&&j.toast.classList.add(a+"-layout"+b.layout),b.balloon&&j.toast.classList.add(a+"-balloon"),b.maxWidth&&(isNaN(b.maxWidth)?j.toast.style.maxWidth=b.maxWidth:j.toast.style.maxWidth=b.maxWidth+"px"),(b.theme!==""||b.theme!=="light")&&j.toast.classList.add(a+"-theme-"+b.theme),b.color&&(x(b.color)?j.toast.style.background=b.color:j.toast.classList.add(a+"-color-"+b.color)),b.backgroundColor&&(j.toast.style.background=b.backgroundColor,b.balloon&&(j.toast.style.borderColor=b.backgroundColor))}(),function(){b.image&&(j.cover.classList.add(a+"-cover"),j.cover.style.width=b.imageWidth+"px",w(b.image.replace(/ /g,""))?j.cover.style.backgroundImage="url(data:image/png;base64,"+b.image.replace(/ /g,"")+")":j.cover.style.backgroundImage="url("+b.image+")",b.rtl?j.toastBody.style.marginRight=b.imageWidth+10+"px":j.toastBody.style.marginLeft=b.imageWidth+10+"px",j.toast.appendChild(j.cover))}(),function(){b.close?(j.buttonClose=document.createElement("button"),j.buttonClose.type="button",j.buttonClose.classList.add(a+"-close"),j.buttonClose.addEventListener("click",function(A){A.target,_.hide(b,j.toast,"button")}),j.toast.appendChild(j.buttonClose)):b.rtl?j.toast.style.paddingLeft="18px":j.toast.style.paddingRight="18px"}(),function(){b.progressBar&&(j.progressBar=document.createElement("div"),j.progressBarDiv=document.createElement("div"),j.progressBar.classList.add(a+"-progressbar"),j.progressBarDiv.style.background=b.progressBarColor,j.progressBar.appendChild(j.progressBarDiv),j.toast.appendChild(j.progressBar)),b.timeout&&(b.pauseOnHover&&!b.resetOnHover&&(j.toast.addEventListener("mouseenter",function(A){_.progress(b,j.toast).pause()}),j.toast.addEventListener("mouseleave",function(A){_.progress(b,j.toast).resume()})),b.resetOnHover&&(j.toast.addEventListener("mouseenter",function(A){_.progress(b,j.toast).reset()}),j.toast.addEventListener("mouseleave",function(A){_.progress(b,j.toast).start()})))}(),function(){b.iconUrl?(j.icon.setAttribute("class",a+"-icon"),j.icon.setAttribute("src",b.iconUrl)):b.icon&&(j.icon.setAttribute("class",a+"-icon "+b.icon),b.iconText&&j.icon.appendChild(document.createTextNode(b.iconText)),b.iconColor&&(j.icon.style.color=b.iconColor)),(b.icon||b.iconUrl)&&(b.rtl?j.toastBody.style.paddingRight="33px":j.toastBody.style.paddingLeft="33px",j.toastBody.appendChild(j.icon))}(),function(){b.title.length>0&&(j.strong=document.createElement("strong"),j.strong.classList.add(a+"-title"),j.strong.appendChild(g(b.title)),j.toastTexts.appendChild(j.strong),b.titleColor&&(j.strong.style.color=b.titleColor),b.titleSize&&(isNaN(b.titleSize)?j.strong.style.fontSize=b.titleSize:j.strong.style.fontSize=b.titleSize+"px"),b.titleLineHeight&&(isNaN(b.titleSize)?j.strong.style.lineHeight=b.titleLineHeight:j.strong.style.lineHeight=b.titleLineHeight+"px")),b.message.length>0&&(j.p=document.createElement("p"),j.p.classList.add(a+"-message"),j.p.appendChild(g(b.message)),j.toastTexts.appendChild(j.p),b.messageColor&&(j.p.style.color=b.messageColor),b.messageSize&&(isNaN(b.titleSize)?j.p.style.fontSize=b.messageSize:j.p.style.fontSize=b.messageSize+"px"),b.messageLineHeight&&(isNaN(b.titleSize)?j.p.style.lineHeight=b.messageLineHeight:j.p.style.lineHeight=b.messageLineHeight+"px")),b.title.length>0&&b.message.length>0&&(b.rtl?j.strong.style.marginLeft="10px":b.layout!==2&&!b.rtl&&(j.strong.style.marginRight="10px"))}(),j.toastBody.appendChild(j.toastTexts);var z;(function(){b.inputs.length>0&&(j.inputs.classList.add(a+"-inputs"),y(b.inputs,function(A,F){j.inputs.appendChild(g(A[0])),z=j.inputs.childNodes,z[F].classList.add(a+"-inputs-child"),A[3]&&setTimeout(function(){z[F].focus()},300),z[F].addEventListener(A[1],function(H){var L=A[2];return L(_,j.toast,this,H)})}),j.toastBody.appendChild(j.inputs))})(),function(){b.buttons.length>0&&(j.buttons.classList.add(a+"-buttons"),y(b.buttons,function(A,F){j.buttons.appendChild(g(A[0]));var H=j.buttons.childNodes;H[F].classList.add(a+"-buttons-child"),A[2]&&setTimeout(function(){H[F].focus()},300),H[F].addEventListener("click",function(L){L.preventDefault();var Y=A[1];return Y(_,j.toast,this,L,z)})})),j.toastBody.appendChild(j.buttons)}(),b.message.length>0&&(b.inputs.length>0||b.buttons.length>0)&&(j.p.style.marginBottom="0"),(b.inputs.length>0||b.buttons.length>0)&&(b.rtl?j.toastTexts.style.marginLeft="10px":j.toastTexts.style.marginRight="10px",b.inputs.length>0&&b.buttons.length>0&&(b.rtl?j.inputs.style.marginLeft="8px":j.inputs.style.marginRight="8px")),function(){j.toastCapsule.style.visibility="hidden",setTimeout(function(){var A=j.toast.offsetHeight,F=j.toast.currentStyle||window.getComputedStyle(j.toast),H=F.marginTop;H=H.split("px"),H=parseInt(H[0]);var L=F.marginBottom;L=L.split("px"),L=parseInt(L[0]),j.toastCapsule.style.visibility="",j.toastCapsule.style.height=A+L+H+"px",setTimeout(function(){j.toastCapsule.style.height="auto",b.target&&(j.toastCapsule.style.overflow="visible")},500),b.timeout&&_.progress(b,j.toast).start()},100)}(),function(){var A=b.position;if(b.target)j.wrapper=document.querySelector(b.target),j.wrapper.classList.add(a+"-target"),b.targetFirst?j.wrapper.insertBefore(j.toastCapsule,j.wrapper.firstChild):j.wrapper.appendChild(j.toastCapsule);else{if(d.indexOf(b.position)==-1){console.warn("["+a+`] Incorrect position.
It can be  `+d);return}n||window.innerWidth<=h?b.position=="bottomLeft"||b.position=="bottomRight"||b.position=="bottomCenter"?A=a+"-wrapper-bottomCenter":b.position=="topLeft"||b.position=="topRight"||b.position=="topCenter"?A=a+"-wrapper-topCenter":A=a+"-wrapper-center":A=a+"-wrapper-"+A,j.wrapper=document.querySelector("."+a+"-wrapper."+A),j.wrapper||(j.wrapper=document.createElement("div"),j.wrapper.classList.add(a+"-wrapper"),j.wrapper.classList.add(A),document.body.appendChild(j.wrapper)),b.position=="topLeft"||b.position=="topCenter"||b.position=="topRight"?j.wrapper.insertBefore(j.toastCapsule,j.wrapper.firstChild):j.wrapper.appendChild(j.toastCapsule)}isNaN(b.zindex)?console.warn("["+a+"] Invalid zIndex."):j.wrapper.style.zIndex=b.zindex}(),function(){b.overlay&&(document.querySelector("."+a+"-overlay.fadeIn")!==null?(j.overlay=document.querySelector("."+a+"-overlay"),j.overlay.setAttribute("data-iziToast-ref",j.overlay.getAttribute("data-iziToast-ref")+","+b.ref),!isNaN(b.zindex)&&b.zindex!==null&&(j.overlay.style.zIndex=b.zindex-1)):(j.overlay.classList.add(a+"-overlay"),j.overlay.classList.add("fadeIn"),j.overlay.style.background=b.overlayColor,j.overlay.setAttribute("data-iziToast-ref",b.ref),!isNaN(b.zindex)&&b.zindex!==null&&(j.overlay.style.zIndex=b.zindex-1),document.querySelector("body").appendChild(j.overlay)),b.overlayClose?(j.overlay.removeEventListener("click",{}),j.overlay.addEventListener("click",function(A){_.hide(b,j.toast,"overlay")})):j.overlay.removeEventListener("click",{}))}(),function(){if(b.animateInside){j.toast.classList.add(a+"-animateInside");var A=[200,100,300];(b.transitionIn=="bounceInLeft"||b.transitionIn=="bounceInRight")&&(A=[400,200,400]),b.title.length>0&&setTimeout(function(){j.strong.classList.add("slideIn")},A[0]),b.message.length>0&&setTimeout(function(){j.p.classList.add("slideIn")},A[1]),(b.icon||b.iconUrl)&&setTimeout(function(){j.icon.classList.add("revealIn")},A[2]);var F=150;b.buttons.length>0&&j.buttons&&setTimeout(function(){y(j.buttons.childNodes,function(H,L){setTimeout(function(){H.classList.add("revealIn")},F),F=F+150})},b.inputs.length>0?150:0),b.inputs.length>0&&j.inputs&&(F=150,y(j.inputs.childNodes,function(H,L){setTimeout(function(){H.classList.add("revealIn")},F),F=F+150}))}}(),b.onOpening.apply(null,[b,j.toast]);try{var I=new CustomEvent(a+"-opening",{detail:b,bubbles:!0,cancelable:!0});document.dispatchEvent(I)}catch(A){console.warn(A)}setTimeout(function(){j.toast.classList.remove(a+"-opening"),j.toast.classList.add(a+"-opened");try{var A=new CustomEvent(a+"-opened",{detail:b,bubbles:!0,cancelable:!0});document.dispatchEvent(A)}catch(F){console.warn(F)}b.onOpened.apply(null,[b,j.toast])},1e3),b.drag&&(c?(j.toast.addEventListener("touchstart",function(A){S.startMoving(this,_,b,A)},!1),j.toast.addEventListener("touchend",function(A){S.stopMoving(this,A)},!1)):(j.toast.addEventListener("mousedown",function(A){A.preventDefault(),S.startMoving(this,_,b,A)},!1),j.toast.addEventListener("mouseup",function(A){A.preventDefault(),S.stopMoving(this,A)},!1))),b.closeOnEscape&&document.addEventListener("keyup",function(A){A=A||window.event,A.keyCode==27&&_.hide(b,j.toast,"esc")}),b.closeOnClick&&j.toast.addEventListener("click",function(A){_.hide(b,j.toast,"toast")}),_.toast=j.toast},s})})(nb);var hk=nb.exports;const Qe=rh(hk);Qe.settings({timeout:4e3,resetOnHover:!0,transitionIn:"flipInX",transitionOut:"flipOutX",position:"topRight"});const te={success:(t,e)=>{Qe.success({title:e||"Success",message:t,color:"green",icon:"ico-success"})},error:(t,e)=>{Qe.error({title:e||"Error",message:t,color:"red",icon:"ico-error"})},warning:(t,e)=>{Qe.warning({title:e||"Warning",message:t,color:"yellow",icon:"ico-warning"})},info:(t,e)=>{Qe.info({title:e||"Info",message:t,color:"blue",icon:"ico-info"})},download:t=>{Qe.success({title:"Download Started",message:`${t} download has begun`,color:"green",icon:"ico-success",timeout:3e3})},upload:t=>{Qe.success({title:"Upload Complete",message:`${t} has been uploaded successfully`,color:"green",icon:"ico-success"})},login:t=>{Qe.success({title:"Welcome Back",message:`Hello ${t}! You've successfully signed in.`,color:"green",icon:"ico-success",timeout:3e3})},logout:()=>{Qe.info({title:"Goodbye",message:"You have been signed out successfully",color:"blue",icon:"ico-info",timeout:2e3})},userCreated:(t,e)=>{Qe.success({title:"User Created",message:`${t} has been created and credentials sent to ${e}`,color:"green",icon:"ico-success",timeout:5e3})},themeChanged:t=>{Qe.info({title:"Theme Changed",message:`Switched to ${t} mode`,color:"blue",icon:"ico-info",timeout:2e3})},fileDeleted:t=>{Qe.warning({title:"File Deleted",message:`${t} has been removed`,color:"yellow",icon:"ico-warning",timeout:3e3})},userBlocked:t=>{Qe.warning({title:"User Blocked",message:`${t} has been temporarily blocked`,color:"yellow",icon:"ico-warning"})},userUnblocked:t=>{Qe.success({title:"User Unblocked",message:`${t} has been unblocked`,color:"green",icon:"ico-success"})},gradeUpdated:(t,e)=>{Qe.info({title:"Grade Updated",message:`${t} is now ${e}`,color:"blue",icon:"ico-info"})},patchNotePublished:t=>{Qe.success({title:"Patch Note Published",message:`Version ${t} patch notes are now live`,color:"green",icon:"ico-success"})},guestSession:t=>{Qe.info({title:"Guest Session",message:`Welcome! Your session expires in ${t}`,color:"blue",icon:"ico-info",timeout:5e3})},sessionExpiring:()=>{Qe.warning({title:"Session Expiring",message:"Your guest session will expire in 1 minute",color:"yellow",icon:"ico-warning",timeout:1e4})},ipBlocked:t=>{Qe.warning({title:"IP Protection Active",message:`Your IP has been blocked for ${t} to prevent guest session abuse`,color:"yellow",icon:"ico-warning",timeout:8e3})},ipUnblocked:t=>{Qe.success({title:"IP Unblocked",message:`IP address ${t} has been manually unblocked`,color:"green",icon:"ico-success"})}},ib=T.createContext(void 0),ob=()=>{const t=T.useContext(ib);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},pk=({children:t})=>{const[e,r]=T.useState(()=>{const a=localStorage.getItem("prodomo_theme");return a!==null?JSON.parse(a):window.matchMedia("(prefers-color-scheme: dark)").matches});T.useEffect(()=>{localStorage.setItem("prodomo_theme",JSON.stringify(e));const a=document.documentElement;e?a.classList.add("dark"):a.classList.remove("dark"),console.log("ThemeContext: Theme applied:",e?"dark":"light")},[e]),T.useEffect(()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),n=o=>{localStorage.getItem("prodomo_theme")===null&&r(o.matches)};return a.addEventListener?a.addEventListener("change",n):a.addListener(n),()=>{a.removeEventListener?a.removeEventListener("change",n):a.removeListener(n)}},[]);const s=()=>{console.log("ThemeContext: Toggling theme from",e?"dark":"light","to",e?"light":"dark"),r(!e),setTimeout(()=>{te.themeChanged(e?"light":"dark")},100)};return i.jsx(ib.Provider,{value:{isDark:e,toggleTheme:s},children:t})},lb="prodomo_ip_records",cb="prodomo_guest_sessions",db="prodomo_ip_protection_enabled",mk=3*24*60*60*1e3,Um=3,Vt=()=>{try{const t=localStorage.getItem(db);return t===null?!0:t==="true"}catch(t){return console.error("Failed to check IP protection status:",t),!0}},gk=t=>{try{localStorage.setItem(db,t.toString()),console.log(`IP Protection ${t?"enabled":"disabled"}`)}catch(e){console.error("Failed to set IP protection status:",e)}},ep=async()=>{try{const t=document.createElement("canvas"),e=t.getContext("2d");if(e){e.textBaseline="top",e.font="14px Arial",e.fillText("IP fingerprint",2,2);const r=t.toDataURL();let s=0;for(let c=0;c<r.length;c++){const d=r.charCodeAt(c);s=(s<<5)-s+d,s=s&s}const a=Math.abs(s)%256,n=Math.abs(s>>8)%256,o=Math.abs(s>>16)%256,l=Math.abs(s>>24)%256;return`${a}.${n}.${o}.${l}`}return"192.168.1."+(Math.floor(Math.random()*254)+1)}catch(t){return console.error("Failed to get IP:",t),"192.168.1."+(Math.floor(Math.random()*254)+1)}},Sa=()=>{try{const t=localStorage.getItem(lb);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to load IP records:",t),[]}},no=t=>{try{localStorage.setItem(lb,JSON.stringify(t))}catch(e){console.error("Failed to save IP records:",e)}},xn=()=>{try{const t=localStorage.getItem(cb);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to load guest sessions:",t),[]}},Wl=t=>{try{localStorage.setItem(cb,JSON.stringify(t))}catch(e){console.error("Failed to save guest sessions:",e)}},Hl=t=>{if(!Vt())return{blocked:!1};const e=Sa(),r=e.find(a=>a.ip===t);if(!r)return{blocked:!1};if(r.blockedUntil){const a=new Date(r.blockedUntil),n=new Date;if(n<a)return{blocked:!0,reason:`IP blocked due to guest session abuse. ${Math.ceil((a.getTime()-n.getTime())/36e5)} hours remaining.`,unblockTime:r.blockedUntil};r.blockedUntil=void 0,r.attemptCount=0,no(e)}const s=new Date(Date.now()-24*60*60*1e3);return xn().filter(a=>a.ip===t&&new Date(a.startTime)>s).length>=Um?{blocked:!0,reason:`Maximum ${Um} guest sessions per day exceeded. Try again tomorrow.`}:{blocked:!1}},fk=async t=>{try{const e=await ep(),r=navigator.userAgent,s=Hl(e);if(s.blocked)return{success:!1,error:s.reason};const a={id:`guest_session_${Date.now()}`,ip:e,userAgent:r,startTime:new Date().toISOString(),expired:!1,userId:t},n=xn();n.push(a),Wl(n);const o=Sa();let l=o.find(c=>c.ip===e);return l?(l.lastGuestSession=new Date().toISOString(),l.attemptCount+=1,l.userAgent=r):(l={ip:e,lastGuestSession:new Date().toISOString(),attemptCount:1,firstAttempt:new Date().toISOString(),userAgent:r,location:"Unknown"},o.push(l)),no(o),console.log(" Guest session registered for IP:",e),{success:!0}}catch(e){return console.error("Failed to register guest session:",e),{success:!1,error:"Failed to register guest session"}}},Bm=async t=>{try{if(!Vt()){const o=xn(),l=o.find(c=>c.userId===t&&!c.expired);l&&(l.expired=!0,l.endTime=new Date().toISOString(),Wl(o));return}const e=await ep(),r=xn(),s=r.find(o=>o.userId===t&&!o.expired);s&&(s.expired=!0,s.endTime=new Date().toISOString(),Wl(r));const a=Sa();let n=a.find(o=>o.ip===e);if(n){const o=new Date(Date.now()+mk);n.blockedUntil=o.toISOString(),n.lastGuestSession=new Date().toISOString(),no(a),console.log(" IP blocked for 3 days:",e,"until:",o.toLocaleString())}}catch(e){console.error("Failed to expire guest session:",e)}},xk=()=>{const t=Sa(),e=xn(),r=new Date,s=t.filter(o=>o.blockedUntil?new Date(o.blockedUntil)>r:!1),a=e.filter(o=>{const l=new Date(o.startTime),c=new Date(r.getTime()-24*60*60*1e3);return l>c}),n=new Set(a.map(o=>o.ip)).size;return{totalTrackedIPs:t.length,blockedIPs:s.length,guestSessionsToday:a.length,uniqueIPsToday:n,records:t.slice(0,10),recentSessions:e.slice(-10),protectionEnabled:Vt()}},ub=()=>{try{const t=new Date(Date.now()-2592e6),e=Sa(),r=e.filter(n=>new Date(n.lastGuestSession)>t||n.blockedUntil&&new Date(n.blockedUntil)>new Date);r.length!==e.length&&(no(r),console.log(" Cleaned up",e.length-r.length,"old IP records"));const s=xn(),a=s.filter(n=>new Date(n.startTime)>t);a.length!==s.length&&(Wl(a),console.log(" Cleaned up",s.length-a.length,"old guest sessions"))}catch(t){console.error("Failed to cleanup old records:",t)}},bk=t=>{try{const e=Sa(),r=e.find(s=>s.ip===t);return r?(r.blockedUntil=void 0,r.attemptCount=0,no(e),console.log(" Force unblocked IP:",t),!0):!1}catch(e){return console.error("Failed to force unblock IP:",e),!1}},yk=t=>Sa().find(e=>e.ip===t)||null;class vk{constructor(){this.rateLimits=new Map,this.securityEvents=[],this.ddosMetrics={requestsPerSecond:0,uniqueIPs:0,suspiciousPatterns:0,blockedRequests:0,totalRequests:0},this.configs={login:{windowMs:15*60*1e3,maxRequests:5,blockDuration:30*1e3,enabled:!1},api:{windowMs:60*1e3,maxRequests:100,blockDuration:5*60*1e3,enabled:!0},download:{windowMs:60*1e3,maxRequests:10,blockDuration:10*60*1e3,enabled:!0},guest:{windowMs:24*60*60*1e3,maxRequests:3,blockDuration:24*60*60*1e3,enabled:!0},upload:{windowMs:60*1e3,maxRequests:5,blockDuration:15*60*1e3,enabled:!0},bruteforce:{windowMs:5*60*1e3,maxRequests:10,blockDuration:60*60*1e3,enabled:!0}},this.loadFromStorage(),this.startCleanupInterval(),this.startMetricsCollection()}async getUserIP(){try{const e=[()=>this.getIPFromWebRTC(),()=>this.getIPFromFingerprint(),()=>this.getIPFromHeaders()];for(const r of e)try{const s=await r();if(s&&this.isValidIP(s))return s}catch(s){console.warn("IP detection method failed:",s)}return this.generateConsistentIP()}catch(e){return console.error("Failed to get IP:",e),this.generateConsistentIP()}}async getIPFromWebRTC(){return new Promise((e,r)=>{const s=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});s.createDataChannel(""),s.onicecandidate=a=>{if(a.candidate){const n=a.candidate.candidate.match(/(\d+\.\d+\.\d+\.\d+)/);n&&(s.close(),e(n[1]))}},s.createOffer().then(a=>s.setLocalDescription(a)),setTimeout(()=>{s.close(),r(new Error("WebRTC IP detection timeout"))},3e3)})}async getIPFromFingerprint(){const e=document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("Canvas not supported");r.textBaseline="top",r.font="14px Arial",r.fillText("Security fingerprint",2,2);const s=e.toDataURL(),a=navigator.userAgent,n=`${window.screen.width}x${window.screen.height}`,o=Intl.DateTimeFormat().resolvedOptions().timeZone,l=s+a+n+o;let c=0;for(let m=0;m<l.length;m++){const v=l.charCodeAt(m);c=(c<<5)-c+v,c=c&c}const d=Math.abs(c)%256,u=Math.abs(c>>8)%256,h=Math.abs(c>>16)%256,p=Math.abs(c>>24)%256;return`${d}.${u}.${h}.${p}`}async getIPFromHeaders(){const e={"X-Forwarded-For":"203.0.113."+(Math.floor(Math.random()*254)+1),"X-Real-IP":"198.51.100."+(Math.floor(Math.random()*254)+1)};return e["X-Forwarded-For"]||e["X-Real-IP"]}generateConsistentIP(){const e=localStorage.getItem("security_consistent_ip");if(e)return e;const r=`192.168.1.${Math.floor(Math.random()*254)+1}`;return localStorage.setItem("security_consistent_ip",r),r}isValidIP(e){return/^(\d{1,3}\.){3}\d{1,3}$/.test(e)?e.split(".").map(Number).every(r=>r>=0&&r<=255):!1}toggleRateLimit(e,r){return this.configs[e]?(this.configs[e].enabled=r,this.saveToStorage(),!0):!1}getRateLimitStatus(e){var r;return((r=this.configs[e])==null?void 0:r.enabled)||!1}async checkRateLimit(e,r){const s=r||await this.getUserIP(),a=this.configs[e]||this.configs.api;if(!a.enabled)return{allowed:!0};const n=`${s}:${e}`,o=Date.now();let l=this.rateLimits.get(n);if(l||(l={count:0,firstRequest:o,blocked:!1},this.rateLimits.set(n,l)),l.blocked&&l.blockedUntil&&o<l.blockedUntil){const c=Math.ceil((l.blockedUntil-o)/1e3);return this.logSecurityEvent("rate_limit",s,`Rate limit exceeded for ${e}`,"medium",!0),{allowed:!1,reason:"Rate limit exceeded",retryAfter:c}}return o-l.firstRequest>a.windowMs&&(l.count=0,l.firstRequest=o,l.blocked=!1,l.blockedUntil=void 0),l.count++,l.count>a.maxRequests?(l.blocked=!0,l.blockedUntil=o+a.blockDuration,this.logSecurityEvent("rate_limit",s,`Rate limit exceeded for ${e} (${l.count} requests)`,"high",!0),{allowed:!1,reason:"Rate limit exceeded",retryAfter:Math.ceil(a.blockDuration/1e3)}):(this.rateLimits.set(n,l),this.saveToStorage(),{allowed:!0})}async detectDDoS(){const e=Date.now(),r=e-1e3,s=e-6e4,a=this.securityEvents.filter(p=>new Date(p.timestamp).getTime()>r),n=this.securityEvents.filter(p=>new Date(p.timestamp).getTime()>s),o=a.length,l=new Set(n.map(p=>p.ip)).size,c=this.detectSuspiciousPatterns(n),d=n.filter(p=>p.blocked).length;this.ddosMetrics={requestsPerSecond:o,uniqueIPs:l,suspiciousPatterns:c,blockedRequests:d,totalRequests:n.length};const u=o>50||l<5&&n.length>100||c>10;let h="low";return o>100||c>20?h="critical":o>75||c>15?h="high":(o>50||c>10)&&(h="medium"),u&&(this.logSecurityEvent("ddos_attempt","multiple",`DDoS detected: ${o} req/s`,h,!0),this.activateEmergencyMode()),{isDDoS:u,severity:h,metrics:this.ddosMetrics}}detectSuspiciousPatterns(e){let r=0;const s=e.reduce((n,o)=>(n[o.ip]=(n[o.ip]||0)+1,n),{});Object.values(s).forEach(n=>{n>20&&r++});const a=e.sort((n,o)=>new Date(n.timestamp).getTime()-new Date(o.timestamp).getTime());for(let n=1;n<a.length;n++)new Date(a[n].timestamp).getTime()-new Date(a[n-1].timestamp).getTime()<100&&a[n].ip===a[n-1].ip&&r++;return r}activateEmergencyMode(){console.warn(" EMERGENCY MODE ACTIVATED - DDoS DETECTED"),Object.keys(this.configs).forEach(e=>{this.configs[e].maxRequests=Math.floor(this.configs[e].maxRequests*.1),this.configs[e].blockDuration*=2}),te.error("DDoS attack detected! Emergency protection activated.","Security Alert"),setTimeout(()=>{this.deactivateEmergencyMode()},10*60*1e3)}deactivateEmergencyMode(){console.log(" Emergency mode deactivated"),this.configs={login:{windowMs:15*60*1e3,maxRequests:5,blockDuration:30*1e3,enabled:!1},api:{windowMs:60*1e3,maxRequests:100,blockDuration:5*60*1e3,enabled:!0},download:{windowMs:60*1e3,maxRequests:10,blockDuration:10*60*1e3,enabled:!0},guest:{windowMs:24*60*60*1e3,maxRequests:3,blockDuration:24*60*60*1e3,enabled:!0},upload:{windowMs:60*1e3,maxRequests:5,blockDuration:15*60*1e3,enabled:!0},bruteforce:{windowMs:5*60*1e3,maxRequests:10,blockDuration:60*60*1e3,enabled:!0}},te.success("Emergency protection deactivated. Normal operation resumed.","Security Status")}async checkBruteForce(e,r){const s=`bruteforce:${e}:${r}`;return this.checkRateLimit("bruteforce",s)}logSecurityEvent(e,r,s,a,n=!1){const o={id:`sec_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:e,ip:r,timestamp:new Date().toISOString(),details:s,severity:a,blocked:n};this.securityEvents.unshift(o),this.securityEvents.length>1e3&&(this.securityEvents=this.securityEvents.slice(0,1e3)),this.saveToStorage(),console.log(` Security Event [${a.toUpperCase()}]: ${s}`)}getSecurityStats(){const e=Date.now(),r=e-60*60*1e3,s=e-24*60*60*1e3,a=this.securityEvents.filter(o=>new Date(o.timestamp).getTime()>r),n=this.securityEvents.filter(o=>new Date(o.timestamp).getTime()>s);return{totalEvents:this.securityEvents.length,recentEvents:a.length,dailyEvents:n.length,blockedRequests:this.securityEvents.filter(o=>o.blocked).length,criticalEvents:this.securityEvents.filter(o=>o.severity==="critical").length,ddosMetrics:this.ddosMetrics,rateLimitedIPs:Array.from(this.rateLimits.entries()).filter(([o,l])=>l.blocked).map(([o,l])=>({key:o,blockedUntil:l.blockedUntil,count:l.count})),rateLimitConfigs:this.configs}}getSecurityEvents(e=50){return this.securityEvents.slice(0,e)}clearSecurityEvents(){this.securityEvents=[],this.saveToStorage()}unblockIP(e){let r=!1;for(const[s,a]of this.rateLimits.entries())s.startsWith(e+":")&&(a.blocked=!1,a.blockedUntil=void 0,a.count=0,r=!0);return r&&(this.saveToStorage(),this.logSecurityEvent("rate_limit",e,"IP manually unblocked by admin","low",!1)),r}blockIP(e,r=60*60*1e3){const s=Date.now();let a=!1;return Object.keys(this.configs).forEach(n=>{const o=`${e}:${n}`;this.rateLimits.set(o,{count:999,firstRequest:s,blocked:!0,blockedUntil:s+r}),a=!0}),a&&(this.saveToStorage(),this.logSecurityEvent("rate_limit",e,`IP manually blocked by admin for ${r/1e3}s`,"high",!0)),a}saveToStorage(){try{const e={rateLimits:Array.from(this.rateLimits.entries()),securityEvents:this.securityEvents.slice(0,500),ddosMetrics:this.ddosMetrics,configs:this.configs};localStorage.setItem("security_manager_data",JSON.stringify(e))}catch(e){console.error("Failed to save security data:",e)}}loadFromStorage(){try{const e=localStorage.getItem("security_manager_data");if(e){const r=JSON.parse(e);this.rateLimits=new Map(r.rateLimits||[]),this.securityEvents=r.securityEvents||[],this.ddosMetrics=r.ddosMetrics||this.ddosMetrics,r.configs&&Object.keys(r.configs).forEach(s=>{this.configs[s]&&(this.configs[s]={...this.configs[s],...r.configs[s],enabled:r.configs[s].hasOwnProperty("enabled")?r.configs[s].enabled:this.configs[s].enabled})})}}catch(e){console.error("Failed to load security data:",e)}}startCleanupInterval(){setInterval(()=>{const e=Date.now();for(const[s,a]of this.rateLimits.entries())a.blockedUntil&&e>a.blockedUntil&&(a.blocked=!1,a.blockedUntil=void 0),e-a.firstRequest>24*60*60*1e3&&this.rateLimits.delete(s);const r=e-24*60*60*1e3;this.securityEvents=this.securityEvents.filter(s=>new Date(s.timestamp).getTime()>r),this.saveToStorage()},5*60*1e3)}startMetricsCollection(){setInterval(()=>{this.detectDDoS()},1e3)}}const Zt=new vk,ld=t=>t?t.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim().substring(0,1e3):"",io=function(t,e,r){let s=Promise.resolve();function a(n){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n}return s.then(n=>{for(const o of n||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},wk=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>io(async()=>{const{default:s}=await Promise.resolve().then(()=>Sn);return{default:s}}).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class tp extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class kk extends tp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class jk extends tp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class _k extends tp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Eu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Eu||(Eu={}));var Nk=function(t,e,r,s){function a(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):a(u.value).then(l,c)}d((s=s.apply(t,[])).next())})};class Sk{constructor(e,{headers:r={},customFetch:s,region:a=Eu.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=wk(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var s;return Nk(this,void 0,void 0,function*(){try{const{headers:a,method:n,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(v=>{throw new kk(v)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new jk(u);if(!u.ok)throw new _k(u);let p=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield u.json():p==="application/octet-stream"?m=yield u.blob():p==="text/event-stream"?m=u:p==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(a){return{data:null,error:a}}})}}var Tt={},rp={},jc={},oo={},_c={},Nc={},Ck=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bn=Ck();const Mk=bn.fetch,hb=bn.fetch.bind(bn),pb=bn.Headers,Ek=bn.Request,Pk=bn.Response,Sn=Object.freeze(Object.defineProperty({__proto__:null,Headers:pb,Request:Ek,Response:Pk,default:hb,fetch:Mk},Symbol.toStringTag,{value:"Module"})),Tk=xv(Sn);var Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});let Dk=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Sc.default=Dk;var mb=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nc,"__esModule",{value:!0});const Ok=mb(Tk),Ik=mb(Sc);let Ak=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Ok.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var n,o,l;let c=null,d=null,u=null,h=a.status,p=a.statusText;if(a.ok){if(this.method!=="HEAD"){const y=await a.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=y:d=JSON.parse(y))}const m=(n=this.headers.Prefer)===null||n===void 0?void 0:n.match(/count=(exact|planned|estimated)/),v=(o=a.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");m&&v&&v.length>1&&(u=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,u=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const m=await a.text();try{c=JSON.parse(m),Array.isArray(c)&&a.status===404&&(d=[],c=null,h=200,p="OK")}catch{a.status===404&&m===""?(h=204,p="No Content"):c={message:m}}if(c&&this.isMaybeSingle&&!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows")&&(c=null,h=200,p="OK"),c&&this.shouldThrowOnError)throw new Ik.default(c)}return{error:c,data:d,count:u,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(a=>{var n,o,l;return{error:{message:`${(n=a==null?void 0:a.name)!==null&&n!==void 0?n:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(o=a==null?void 0:a.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=a==null?void 0:a.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}};Nc.default=Ak;var zk=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_c,"__esModule",{value:!0});const Lk=zk(Nc);let Rk=class extends Lk.default{select(t){let e=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const n=a?`${a}.order`:"order",o=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(n,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:n="text"}={}){var o;const l=[t?"analyze":null,e?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${n}; for="${c}"; options=${l};`,n==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};_c.default=Rk;var $k=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oo,"__esModule",{value:!0});const Fk=$k(_c);let Uk=class extends Fk.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const n=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${a}fts${n}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};oo.default=Uk;var Bk=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jc,"__esModule",{value:!0});const Fn=Bk(oo);let qk=class{constructor(t,{headers:e={},schema:r,fetch:s}){this.url=t,this.headers=e,this.schema=r,this.fetch=s}select(t,{head:e=!1,count:r}={}){const s=e?"HEAD":"GET";let a=!1;const n=(t??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",n),r&&(this.headers.Prefer=`count=${r}`),new Fn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:r=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),e&&a.push(`count=${e}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const n=t.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(n.length>0){const o=[...new Set(n)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Fn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){const n="POST",o=[`resolution=${r?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),a||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const l=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Fn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),e&&s.push(`count=${e}`),this.headers.Prefer=s.join(","),new Fn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const e="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Fn.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};jc.default=qk;var Cc={},Mc={};Object.defineProperty(Mc,"__esModule",{value:!0});Mc.version=void 0;Mc.version="0.0.0-automated";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.DEFAULT_HEADERS=void 0;const Vk=Mc;Cc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Vk.version}`};var gb=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rp,"__esModule",{value:!0});const Wk=gb(jc),Hk=gb(oo),Jk=Cc;let Yk=class fb{constructor(e,{headers:r={},schema:s,fetch:a}={}){this.url=e,this.headers=Object.assign(Object.assign({},Jk.DEFAULT_HEADERS),r),this.schemaName=s,this.fetch=a}from(e){const r=new URL(`${this.url}/${e}`);return new Wk.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new fb(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:a=!1,count:n}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;s||a?(o=s?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=r);const d=Object.assign({},this.headers);return n&&(d.Prefer=`count=${n}`),new Hk.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};rp.default=Yk;var Cn=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.PostgrestError=Tt.PostgrestBuilder=Tt.PostgrestTransformBuilder=Tt.PostgrestFilterBuilder=Tt.PostgrestQueryBuilder=Tt.PostgrestClient=void 0;const xb=Cn(rp);Tt.PostgrestClient=xb.default;const bb=Cn(jc);Tt.PostgrestQueryBuilder=bb.default;const yb=Cn(oo);Tt.PostgrestFilterBuilder=yb.default;const vb=Cn(_c);Tt.PostgrestTransformBuilder=vb.default;const wb=Cn(Nc);Tt.PostgrestBuilder=wb.default;const kb=Cn(Sc);Tt.PostgrestError=kb.default;var Gk=Tt.default={PostgrestClient:xb.default,PostgrestQueryBuilder:bb.default,PostgrestFilterBuilder:yb.default,PostgrestTransformBuilder:vb.default,PostgrestBuilder:wb.default,PostgrestError:kb.default};const{PostgrestClient:Kk,PostgrestQueryBuilder:aM,PostgrestFilterBuilder:nM,PostgrestTransformBuilder:iM,PostgrestBuilder:oM,PostgrestError:lM}=Gk;function Qk(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Xk=Qk(),Zk="2.11.15",e2=`realtime-js/${Zk}`,t2="1.0.0",jb=1e4,r2=1e3;var mi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(mi||(mi={}));var gt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(gt||(gt={}));var mr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(mr||(mr={}));var Pu;(function(t){t.websocket="websocket"})(Pu||(Pu={}));var ra;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ra||(ra={}));class s2{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const a=r.getUint8(1),n=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+a));o=o+a;const c=s.decode(e.slice(o,o+n));o=o+n;const d=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class _b{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Me;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Me||(Me={}));const qm=(t,e,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((n,o)=>(n[o]=a2(o,t,e,a),n),{})},a2=(t,e,r,s)=>{const a=e.find(l=>l.name===t),n=a==null?void 0:a.type,o=r[t];return n&&!s.includes(n)?Nb(n,o):Tu(o)},Nb=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return l2(e,r)}switch(t){case Me.bool:return n2(e);case Me.float4:case Me.float8:case Me.int2:case Me.int4:case Me.int8:case Me.numeric:case Me.oid:return i2(e);case Me.json:case Me.jsonb:return o2(e);case Me.timestamp:return c2(e);case Me.abstime:case Me.date:case Me.daterange:case Me.int4range:case Me.int8range:case Me.money:case Me.reltime:case Me.text:case Me.time:case Me.timestamptz:case Me.timetz:case Me.tsrange:case Me.tstzrange:return Tu(e);default:return Tu(e)}},Tu=t=>t,n2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},i2=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},o2=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},l2=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let a;const n=t.slice(1,r);try{a=JSON.parse("["+n+"]")}catch{a=n?n.split(","):[]}return a.map(o=>Nb(e,o))}return t},c2=t=>typeof t=="string"?t.replace(" ","T"):t,Sb=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class cd{constructor(e,r,s={},a=jb){this.channel=e,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Vm;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Vm||(Vm={}));class gi{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:n,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gi.syncState(this.state,a,n,o),this.pendingDiffs.forEach(c=>{this.state=gi.syncDiff(this.state,c,n,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:n,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=gi.syncDiff(this.state,a,n,o),l())}),this.onJoin((a,n,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:n,newPresences:o})}),this.onLeave((a,n,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:n,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,a){const n=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(n,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=n[d];if(h){const p=u.map(k=>k.presence_ref),m=h.map(k=>k.presence_ref),v=u.filter(k=>m.indexOf(k.presence_ref)<0),y=h.filter(k=>p.indexOf(k.presence_ref)<0);v.length>0&&(l[d]=v),y.length>0&&(c[d]=y)}else l[d]=u}),this.syncDiff(n,{joins:l,leaves:c},s,a)}static syncDiff(e,r,s,a){const{joins:n,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(n,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),p=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...p)}s(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,a(l,d,c),d.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const a=e[s];return"metas"in a?r[s]=a.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):r[s]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Wm;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Wm||(Wm={}));var Hm;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Hm||(Hm={}));var Vr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Vr||(Vr={}));class sp{constructor(e,r={config:{}},s){this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new cd(this,mr.join,this.params,this.timeout),this.rejoinTimer=new _b(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mr.reply,{},(a,n)=>{this._trigger(this._replyEventName(n),a)}),this.presence=new gi(this),this.broadcastEndpointURL=Sb(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==gt.closed){const{config:{broadcast:n,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(Vr.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Vr.CLOSED));const c={},d={broadcast:n,presence:o,postgres_changes:(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(Vr.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(h=p==null?void 0:p.length)!==null&&h!==void 0?h:0,v=[];for(let y=0;y<m;y++){const k=p[y],{filter:{event:g,schema:f,table:x,filter:w}}=k,S=u&&u[y];if(S&&S.event===g&&S.schema===f&&S.table===x&&S.filter===w)v.push(Object.assign(Object.assign({},k),{id:S.id}));else{this.unsubscribe(),this.state=gt.errored,e==null||e(Vr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Vr.SUBSCRIBED);return}}).receive("error",u=>{this.state=gt.errored,e==null||e(Vr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Vr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this._on(e,r,s)}async send(e,r={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:n,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var o,l,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&n("ok"),d.receive("ok",()=>n("ok")),d.receive("error",()=>n("error")),d.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=gt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new cd(this,mr.leave,{},e),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,s){const a=new AbortController,n=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(n),o}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new cd(this,e,r,s);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var a,n;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=mr;if(s&&[l,c,d,u].indexOf(o)>=0&&s!==this._joinRef())return;let h=this._onMessage(o,r,s);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var m,v,y;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((y=(v=p.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(p=>p.callback(h,s)):(n=this.bindings[o])===null||n===void 0||n.filter(p=>{var m,v,y,k,g,f;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const x=p.id,w=(m=p.filter)===null||m===void 0?void 0:m.event;return x&&((v=r.ids)===null||v===void 0?void 0:v.includes(x))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const x=(g=(k=p==null?void 0:p.filter)===null||k===void 0?void 0:k.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return x==="*"||x===((f=r==null?void 0:r.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:v,table:y,commit_timestamp:k,type:g,errors:f}=m;h=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:k,eventType:g,new:{},old:{},errors:f}),this._getPayloadRecords(m))}p.callback(h,s)})}_isClosed(){return this.state===gt.closed}_isJoined(){return this.state===gt.joined}_isJoining(){return this.state===gt.joining}_isLeaving(){return this.state===gt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const a=e.toLocaleLowerCase(),n={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(n):this.bindings[a]=[n],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(a=>{var n;return!(((n=a.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===s&&sp.isEqual(a.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(mr.close,{},e)}_onError(e){this._on(mr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=qm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=qm(e.columns,e.old_record)),r}}const Jm=()=>{},d2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class u2{constructor(e,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jb,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jm,this.ref=0,this.logger=Jm,this.conn=null,this.sendBuffer=[],this.serializer=new s2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...l)=>io(async()=>{const{default:c}=await Promise.resolve().then(()=>Sn);return{default:c}}).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Pu.websocket}`,this.httpEndpoint=Sb(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(n,o)=>o(JSON.stringify(n)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new _b(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Xk),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:t2}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case mi.connecting:return ra.Connecting;case mi.open:return ra.Open;case mi.closing:return ra.Closing;default:return ra.Closed}}isConnected(){return this.connectionState()===ra.Open}channel(e,r={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(n=>n.topic===s);if(a)return a;{const n=new sp(`realtime:${e}`,r,this);return this.channels.push(n),n}}push(e){const{topic:r,event:s,payload:a,ref:n}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${n})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:e2};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(mr.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(r2,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:s,event:a,payload:n,ref:o}=r;s==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${s} ${a} ${o&&"("+o+")"||""}`,n),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(a,n,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(mr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${s}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([d2],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class ap extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function st(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class h2 extends ap{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Du extends ap{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var p2=function(t,e,r,s){function a(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):a(u.value).then(l,c)}d((s=s.apply(t,[])).next())})};const Cb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>io(async()=>{const{default:s}=await Promise.resolve().then(()=>Sn);return{default:s}}).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},m2=()=>p2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield io(()=>Promise.resolve().then(()=>Sn))).Response:Response}),Ou=t=>{if(Array.isArray(t))return t.map(r=>Ou(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));e[a]=Ou(s)}),e};var Ca=function(t,e,r,s){function a(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):a(u.value).then(l,c)}d((s=s.apply(t,[])).next())})};const dd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),g2=(t,e,r)=>Ca(void 0,void 0,void 0,function*(){const s=yield m2();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{e(new h2(dd(a),t.status||500))}).catch(a=>{e(new Du(dd(a),a))}):e(new Du(dd(t),t))}),f2=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(a.body=JSON.stringify(s)),Object.assign(Object.assign({},a),r))};function lo(t,e,r,s,a,n){return Ca(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,f2(e,s,a,n)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>g2(c,l,s))})})}function Jl(t,e,r,s){return Ca(this,void 0,void 0,function*(){return lo(t,"GET",e,r,s)})}function fs(t,e,r,s,a){return Ca(this,void 0,void 0,function*(){return lo(t,"POST",e,s,a,r)})}function x2(t,e,r,s,a){return Ca(this,void 0,void 0,function*(){return lo(t,"PUT",e,s,a,r)})}function b2(t,e,r,s){return Ca(this,void 0,void 0,function*(){return lo(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Mb(t,e,r,s,a){return Ca(this,void 0,void 0,function*(){return lo(t,"DELETE",e,s,a,r)})}var Mt=function(t,e,r,s){function a(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):a(u.value).then(l,c)}d((s=s.apply(t,[])).next())})};const y2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ym={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class v2{constructor(e,r={},s,a){this.url=e,this.headers=r,this.bucketId=s,this.fetch=Cb(a)}uploadOrUpdate(e,r,s,a){return Mt(this,void 0,void 0,function*(){try{let n;const o=Object.assign(Object.assign({},Ym),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(n=new FormData,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c)),n.append("",s)):typeof FormData<"u"&&s instanceof FormData?(n=s,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c))):(n=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:n,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),p=yield h.json();return h.ok?{data:{path:d,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(n){if(st(n))return{data:null,error:n};throw n}})}upload(e,r,s){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,a){return Mt(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),o=this._getFinalPath(n),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:Ym.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),p=yield h.json();return h.ok?{data:{path:n,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if(st(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Mt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const n=yield fs(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(this.url+n.url),l=o.searchParams.get("token");if(!l)throw new ap("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(s){if(st(s))return{data:null,error:s};throw s}})}update(e,r,s){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return Mt(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(st(a))return{data:null,error:a};throw a}})}copy(e,r,s){return Mt(this,void 0,void 0,function*(){try{return{data:{path:(yield fs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(st(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,s){return Mt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),n=yield fs(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${o}`)},{data:n,error:null}}catch(a){if(st(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,s){return Mt(this,void 0,void 0,function*(){try{const a=yield fs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),n=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${n}`):null})),error:null}}catch(a){if(st(a))return{data:null,error:a};throw a}})}download(e,r){return Mt(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),n=a?`?${a}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Jl(this.fetch,`${this.url}/${s}/${o}${n}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(st(o))return{data:null,error:o};throw o}})}info(e){return Mt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield Jl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ou(s),error:null}}catch(s){if(st(s))return{data:null,error:s};throw s}})}exists(e){return Mt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield b2(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(st(s)&&s instanceof Du){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),a=[],n=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";n!==""&&a.push(n);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&a.push(l);let c=a.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${c}`)}}}remove(e){return Mt(this,void 0,void 0,function*(){try{return{data:yield Mb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}})}list(e,r,s){return Mt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},y2),r),{prefix:e||""});return{data:yield fs(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(st(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const w2="2.7.1",k2={"X-Client-Info":`storage-js/${w2}`};var Oa=function(t,e,r,s){function a(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):a(u.value).then(l,c)}d((s=s.apply(t,[])).next())})};class j2{constructor(e,r={},s){this.url=e,this.headers=Object.assign(Object.assign({},k2),r),this.fetch=Cb(s)}listBuckets(){return Oa(this,void 0,void 0,function*(){try{return{data:yield Jl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(st(e))return{data:null,error:e};throw e}})}getBucket(e){return Oa(this,void 0,void 0,function*(){try{return{data:yield Jl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Oa(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(st(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return Oa(this,void 0,void 0,function*(){try{return{data:yield x2(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(st(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Oa(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Oa(this,void 0,void 0,function*(){try{return{data:yield Mb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}})}}class _2 extends j2{constructor(e,r={},s){super(e,r,s)}from(e){return new v2(this.url,this.headers,e,this.fetch)}}const N2="2.50.2";let Zn="";typeof Deno<"u"?Zn="deno":typeof document<"u"?Zn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zn="react-native":Zn="node";const S2={"X-Client-Info":`supabase-js-${Zn}/${N2}`},C2={headers:S2},M2={schema:"public"},E2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},P2={};var T2=function(t,e,r,s){function a(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):a(u.value).then(l,c)}d((s=s.apply(t,[])).next())})};const D2=t=>{let e;return t?e=t:typeof fetch>"u"?e=hb:e=fetch,(...r)=>e(...r)},O2=()=>typeof Headers>"u"?pb:Headers,I2=(t,e,r)=>{const s=D2(r),a=O2();return(n,o)=>T2(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(n,Object.assign(Object.assign({},o),{headers:d}))})};var A2=function(t,e,r,s){function a(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):a(u.value).then(l,c)}d((s=s.apply(t,[])).next())})};function z2(t){return t.endsWith("/")?t:t+"/"}function L2(t,e){var r,s;const{db:a,auth:n,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,p={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),n),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>A2(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}const Eb="2.70.0",Fa=30*1e3,Iu=3,ud=Iu*Fa,R2="http://localhost:9999",$2="supabase.auth.token",F2={"X-Client-Info":`gotrue-js/${Eb}`},Au="X-Supabase-Api-Version",Pb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},U2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,B2=6e5;class np extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function le(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class q2 extends np{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function V2(t){return le(t)&&t.name==="AuthApiError"}class Tb extends np{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Bs extends np{constructor(e,r,s,a){super(e,s,a),this.name=r,this.status=s}}class ps extends Bs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function W2(t){return le(t)&&t.name==="AuthSessionMissingError"}class Oo extends Bs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Io extends Bs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ao extends Bs{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function H2(t){return le(t)&&t.name==="AuthImplicitGrantRedirectError"}class Gm extends Bs{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zu extends Bs{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function hd(t){return le(t)&&t.name==="AuthRetryableFetchError"}class Km extends Bs{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class fi extends Bs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qm=` 	
\r=`.split(""),J2=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Qm.length;e+=1)t[Qm[e].charCodeAt(0)]=-2;for(let e=0;e<Yl.length;e+=1)t[Yl[e].charCodeAt(0)]=e;return t})();function Xm(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Yl[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Yl[s]),e.queuedBits-=6}}function Db(t,e,r){const s=J2[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Zm(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},n=o=>{K2(o,s,r)};for(let o=0;o<t.length;o+=1)Db(t.charCodeAt(o),a,n);return e.join("")}function Y2(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function G2(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Y2(s,e)}}function K2(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Q2(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Db(t.charCodeAt(a),r,s);return new Uint8Array(e)}function X2(t){const e=[];return G2(t,r=>e.push(r)),new Uint8Array(e)}function Z2(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>Xm(a,r,s)),Xm(null,r,s),e.join("")}function ej(t){return Math.round(Date.now()/1e3)+t}function tj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ur=()=>typeof window<"u"&&typeof document<"u",Hs={tested:!1,writable:!1},xi=()=>{if(!ur())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Hs.tested)return Hs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Hs.tested=!0,Hs.writable=!0}catch{Hs.tested=!0,Hs.writable=!1}return Hs.writable};function rj(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return r.searchParams.forEach((s,a)=>{e[a]=s}),e}const Ob=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>io(async()=>{const{default:s}=await Promise.resolve().then(()=>Sn);return{default:s}}).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},sj=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ib=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},zo=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Lo=async(t,e)=>{await t.removeItem(e)};class Ec{constructor(){this.promise=new Ec.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Ec.promiseConstructor=Promise;function pd(t){const e=t.split(".");if(e.length!==3)throw new fi("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!U2.test(e[r]))throw new fi("JWT not in base64url format");return{header:JSON.parse(Zm(e[0])),payload:JSON.parse(Zm(e[1])),signature:Q2(e[2]),raw:{header:e[0],payload:e[1]}}}async function aj(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function nj(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const n=await t(a);if(!e(a,null,n)){r(n);return}}catch(n){if(!e(a,n)){s(n);return}}})()})}function ij(t){return("0"+t.toString(16)).substr(-2)}function oj(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length;let s="";for(let a=0;a<56;a++)s+=e.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,ij).join("")}async function lj(t){const e=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",e),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function cj(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const e=await lj(t);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ia(t,e,r=!1){const s=oj();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await Ib(t,`${e}-code-verifier`,a);const n=await cj(s);return[n,s===n?"plain":"s256"]}const dj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uj(t){const e=t.headers.get(Au);if(!e||!e.match(dj))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function hj(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function pj(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Aa(t){if(!mj.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var gj=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r};const Xs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fj=[502,503,504];async function eg(t){var e;if(!sj(t))throw new zu(Xs(t),0);if(fj.includes(t.status))throw new zu(Xs(t),t.status);let r;try{r=await t.json()}catch(n){throw new Tb(Xs(n),n)}let s;const a=uj(t);if(a&&a.getTime()>=Pb["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Km(Xs(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new ps}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0))throw new Km(Xs(r),t.status,r.weak_password.reasons);throw new q2(Xs(r),t.status||500,s)}const xj=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function me(t,e,r,s){var a;const n=Object.assign({},s==null?void 0:s.headers);n[Au]||(n[Au]=Pb["2024-01-01"].name),s!=null&&s.jwt&&(n.Authorization=`Bearer ${s.jwt}`);const o=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await bj(t,e,r+l,{headers:n,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function bj(t,e,r,s,a,n){const o=xj(e,s,a,n);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new zu(Xs(c),0)}if(l.ok||await eg(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await eg(c)}}function Fr(t){var e;let r=null;kj(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=ej(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function tg(t){const e=Fr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ys(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function yj(t){return{data:t,error:null}}function vj(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:n}=t,o=gj(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:n},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function wj(t){return t}function kj(t){return t.access_token&&t.refresh_token&&t.expires_in}const md=["global","local","others"];var jj=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r};class _j{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=Ob(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=md[0]){if(md.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${md.join(", ")}`);try{return await me(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ys})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=jj(e,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:vj,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(le(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ys})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,a,n,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(n=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&n!==void 0?n:""},xform:wj});if(u.error)throw u.error;const h=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);d[`${k}Page`]=y}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(le(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Aa(e);try{return await me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ys})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Aa(e);try{return await me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ys})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){Aa(e);try{return await me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ys})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Aa(e.userId);try{const{data:r,error:s}=await me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(le(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Aa(e.userId),Aa(e.id);try{return{data:await me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}}const Nj={getItem:t=>xi()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{xi()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{xi()&&globalThis.localStorage.removeItem(t)}};function rg(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Sj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const za={debug:!!(globalThis&&xi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ab extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Cj extends Ab{}async function Mj(t,e,r){za.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),za.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){za.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{za.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw za.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Cj(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(za.debug)try{const n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Sj();const Ej={url:R2,storageKey:$2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:F2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function sg(t,e,r){return await r()}class Bi{constructor(e){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Bi.nextInstanceID,Bi.nextInstanceID+=1,this.instanceID>0&&ur()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Ej),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new _j({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Ob(a.fetch),this.lock=a.lock||sg,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ur()&&!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks?this.lock=Mj:this.lock=sg,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:xi()?this.storage=Nj:(this.memoryStorage={},this.storage=rg(this.memoryStorage)):(this.memoryStorage={},this.storage=rg(this.memoryStorage)),ur()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Eb}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=rj(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),ur()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:n}=await this._getSessionFromURL(r,s);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),H2(n)){const c=(e=n.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:n}}return await this._removeSession(),{error:n}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return le(r)?{error:r}:{error:new Tb("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,a;try{const n=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Fr}),{data:o,error:l}=n;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(le(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var r,s,a;try{let n;if("email"in e){const{email:u,password:h,options:p}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await Ia(this.storage,this.storageKey)),n=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:v},xform:Fr})}else if("phone"in e){const{phone:u,password:h,options:p}=e;n=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(a=p==null?void 0:p.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Fr})}else throw new Io("You must provide either an email or phone number and a password");const{data:o,error:l}=n;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let r;if("email"in e){const{email:n,password:o,options:l}=e;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tg})}else if("phone"in e){const{phone:n,password:o,options:l}=e;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tg})}else throw new Io("You must provide either an email or phone number and a password");const{data:s,error:a}=r;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Oo}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,a,n;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,s,a,n,o,l,c,d,u,h,p,m;let v,y;if("message"in e)v=e.message,y=e.signature;else{const{chain:k,wallet:g,statement:f,options:x}=e;let w;if(ur())if(typeof g=="object")w=g;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))w=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}const S=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const N=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),f?{statement:f}:null));let _;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")_=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)_=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)v=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),y=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${S.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(a=(s=x==null?void 0:x.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((n=x==null?void 0:x.signInWithSolana)===null||n===void 0)&&n.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((d=x==null?void 0:x.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(u=x==null?void 0:x.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const N=await w.signMessage(new TextEncoder().encode(v),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=N}}try{const{data:k,error:g}=await me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Z2(y)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Fr});if(g)throw g;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new Oo}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:g})}catch(k){if(le(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const r=await zo(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:n,error:o}=await me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Fr});if(await Lo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new Oo}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:a??null}),error:o})}catch(n){if(le(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:r,provider:s,token:a,access_token:n,nonce:o}=e,l=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:n,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Fr}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Oo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,a,n,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ia(this.storage,this.storageKey));const{error:h}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Io("You must provide either an email or phone number.")}catch(l){if(le(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,s;try{let a,n;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,n=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:a,xform:Fr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(le(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var r,s,a;try{let n=null,o=null;return this.flowType==="pkce"&&([n,o]=await Ia(this.storage,this.storageKey)),await me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:o}),headers:this.headers,xform:yj})}catch(n){if(le(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new ps;const{error:a}=await me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(le(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:n}=e,{error:o}=await me(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},redirectTo:n==null?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:a,options:n}=e,{data:o,error:l}=await me(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Io("You must provide either an email or phone number and a type")}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await zo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<ud:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:e},error:null}}const{session:a,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ys}):await this._useSession(async r=>{var s,a,n;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ps}:await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0,xform:ys})})}catch(r){if(le(r))return W2(r)&&(await this._removeSession(),await Lo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:a,error:n}=s;if(n)throw n;if(!a.session)throw new ps;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Ia(this.storage,this.storageKey));const{data:d,error:u}=await me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:ys});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ps;const r=Date.now()/1e3;let s=r,a=!0,n=null;const{payload:o}=pd(e.access_token);if(o.exp&&(s=o.exp,a=s<=r),a){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};n=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;n={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(r){if(le(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new ps;const{session:a,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!ur())throw new Ao("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ao(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Gm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ao("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Gm("No code detected.");const{data:f,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:n,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!n||!l||!o||!d)throw new Ao("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let p=u+h;c&&(p=parseInt(c));const m=p-u;m*1e3<=Fa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const v=p-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,u);const{data:y,error:k}=await this._getUser(n);if(k)throw k;const g={provider_token:s,provider_refresh_token:a,access_token:n,expires_in:h,expires_at:p,refresh_token:o,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(s){if(le(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await zo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:n}=r;if(n)return{error:n};const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(V2(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Lo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=tj(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,a;try{const{data:{session:n},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Ia(this.storage,this.storageKey,!0));try{return await me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(n){if(le(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:s,error:a}=await this._useSession(async n=>{var o,l,c,d,u;const{data:h,error:p}=n;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await me(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return ur()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(le(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,a;const{data:n,error:o}=r;if(o)throw o;return await me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=n.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await nj(async a=>(a>0&&await aj(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Fr})),(a,n)=>{const o=200*Math.pow(2,a);return n&&hd(n)&&Date.now()+o-s<Fa})}catch(s){if(this._debug(r,"error",s),le(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),ur()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await zo(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<ud;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${ud}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:n}=await this._callRefreshToken(s.refresh_token);n&&(console.error(n),hd(n)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",n),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new ps;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ec;const{data:n,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!n.session)throw new ps;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const l={session:n.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(n){if(this._debug(a,"error",n),le(n)){const o={session:null,error:n};return hd(n)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(n),n}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const n=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){n.push(c)}});if(await Promise.all(o),n.length>0){for(let l=0;l<n.length;l+=1)console.error(n[l]);throw n[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ib(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Lo(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ur()&&window!=null&&window.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Fa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Fa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Fa}ms, refresh threshold is ${Iu} ticks`),a<=Iu&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ab)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ur()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[n,o]=await Ia(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(s!=null&&s.queryParams){const n=new URLSearchParams(s.queryParams);a.push(n.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:a,error:n}=r;return n?{data:null,error:n}:await me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,a;const{data:n,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await me(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:n}=r;if(n)return{data:null,error:n};const{data:o,error:l}=await me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(le(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:n}=r;return n?{data:null,error:n}:await me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(le(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(e==null?void 0:e.factors)||[],a=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),n=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:a,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:a},error:n}=e;if(n)return{data:null,error:n};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=pd(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(u=>u.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(o=>o.kid===e);if(s||(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+B2>Date.now()))return s;const{data:a,error:n}=await me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;if(!a.keys||a.keys.length===0)throw new fi("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),s=a.keys.find(o=>o.kid===e),!s)throw new fi("No matching signing key found in JWKS");return s}async getClaims(e,r={keys:[]}){try{let s=e;if(!s){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};s=p.session.access_token}const{header:a,payload:n,signature:o,raw:{header:l,payload:c}}=pd(s);if(hj(n.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:n,header:a,signature:o},error:null}}const d=pj(a.alg),u=await this.fetchJwk(a.kid,r),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,X2(`${l}.${c}`)))throw new fi("Invalid JWT signature");return{data:{claims:n,header:a,signature:o},error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}}Bi.nextInstanceID=0;const Pj=Bi;class Tj extends Pj{constructor(e){super(e)}}var Dj=function(t,e,r,s){function a(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):a(u.value).then(l,c)}d((s=s.apply(t,[])).next())})};class Oj{constructor(e,r,s){var a,n,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=z2(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:M2,realtime:P2,auth:Object.assign(Object.assign({},E2),{storageKey:d}),global:C2},h=L2(s??{},u);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(n=h.global.headers)!==null&&n!==void 0?n:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=I2(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Kk(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Sk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new _2(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Dj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,storageKey:n,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Tj({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:n,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new u2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ij=(t,e,r)=>new Oj(t,e,r),zb="https://nsauxespetsxavgmsexh.supabase.co",Lb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5zYXV4ZXNwZXRzeGF2Z21zZXhoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEyMDk3MjMsImV4cCI6MjA2Njc4NTcyM30.k9920R_uqAV4zNYwGcHHUHDjsNTjSaIlYUnMoCtCgig";console.log("Supabase URL:",zb);console.log("Supabase Key exists:",!!Lb);const de=Ij(zb,Lb,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1}}),Aj=async()=>{try{console.log("Checking Supabase database...");const{data:t,error:e}=await de.from("users").select("id").limit(1);if(e)return console.error("Error checking users table:",e),!1;if(t&&t.length>0)return console.log("Database already has data"),!0;console.log("Database needs initialization, creating sample data...");const r=[{id:"11111111-1111-1111-1111-111111111111",name:"Admin User",email:"admin@prodomo.local",grade:"Admin",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1,admin_notes:"System administrator account"},{id:"22222222-2222-2222-2222-222222222222",name:"V4 User",email:"v4@prodomo.local",grade:"V4",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:5,is_guest:!1,is_blocked:!1,admin_notes:"Standard V4 user account"},{id:"33333333-3333-3333-3333-333333333333",name:"V5 User",email:"v5@prodomo.local",grade:"V5",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:12,is_guest:!1,is_blocked:!1,admin_notes:"Advanced V5 user account"},{id:"44444444-4444-4444-4444-444444444444",name:"Support User",email:"support@prodomo.local",grade:"Support",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:3,is_guest:!1,is_blocked:!1,admin_notes:"Support team member with bug management access"}],{error:s}=await de.from("users").insert(r);return s?(console.error("Error inserting default users:",s),!1):(console.log(" Database initialized with default users"),!0)}catch(t){return console.error("Failed to initialize database:",t),!1}},Rb=T.createContext(void 0),ht=()=>{const t=T.useContext(Rb);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},zj=({children:t})=>{const[e,r]=T.useState(null),[s,a]=T.useState(!1),[n,o]=T.useState(null),[l,c]=T.useState(null),[d,u]=T.useState(0),h=["Guest","V4","V5","Support","Admin"];T.useEffect(()=>{ub(),(async()=>{try{const g=localStorage.getItem("prodomo_current_user");if(g){const w=JSON.parse(g);if(w.is_guest&&w.guest_expires_at){const S=new Date(w.guest_expires_at).getTime();if(new Date().getTime()>S){localStorage.removeItem("prodomo_current_user");return}}r(w),console.log("AuthContext: Restored user session from localStorage:",w.name),await p(w);return}const{data:{session:f},error:x}=await de.auth.getSession();if(x){console.error("Error checking session:",x);return}if(f){const{data:w,error:S}=await de.from("users").select("*").eq("id",f.user.id);if(S){console.error("Error fetching user data:",S);return}w&&w.length>0&&(r(w[0]),localStorage.setItem("prodomo_current_user",JSON.stringify(w[0])),console.log("AuthContext: Restored user session from Supabase:",w[0].name))}}catch(g){console.error("AuthContext: Failed to check session:",g)}})()},[]),T.useEffect(()=>{let g;return e!=null&&e.is_guest&&e.guest_expires_at?g=setInterval(()=>{const f=new Date(e.guest_expires_at).getTime(),x=new Date().getTime(),w=Math.max(0,f-x);c(w),w<=6e4&&w>59e3&&te.sessionExpiring(),w<=0&&(console.log("AuthContext: Guest session expired"),Vt()&&Bm(e.id),y())},1e3):c(null),()=>{g&&clearInterval(g)}},[e]);const p=async g=>{try{const{data:f,error:x}=await de.from("users").select("id").eq("id",g.id);if(x){console.error("Error checking if user exists:",x);return}if(!f||f.length===0){const{error:w}=await de.from("users").insert({id:g.id,name:g.name,email:g.email,grade:g.grade,join_date:g.join_date,last_active:g.last_active,total_downloads:g.total_downloads,is_guest:g.is_guest||!1,guest_expires_at:g.guest_expires_at||null,is_blocked:g.is_blocked||!1,blocked_until:g.blocked_until||null,admin_notes:g.admin_notes||null});w?console.error("Error creating user in database:",w):console.log("User created in database:",g.name)}else{const{error:w}=await de.from("users").update({last_active:new Date().toISOString()}).eq("id",g.id);w&&console.error("Error updating user last_active:",w)}}catch(f){console.error("Error ensuring user exists in database:",f)}},m=async(g,f,x)=>{try{if(Zt.getRateLimitStatus("login")){const b=await Zt.checkRateLimit("login");if(!b.allowed)throw new Error(`Rate limit exceeded. Please try again in ${b.retryAfter} seconds.`)}console.log("AuthContext: Sign in attempt for:",g),a(!0),o(null);const w=ld(g),S=ld(f),N=x?ld(x):void 0;if((w.includes("admin")||N)&&N!=="T0KEN")throw u(b=>b+1),new Error("Invalid admin token");let _=null;if(w==="admin@prodomo.local"&&S==="admin123")_={id:"11111111-1111-1111-1111-111111111111",name:"Admin User",email:"admin@prodomo.local",grade:"Admin",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1};else if(w==="v4@prodomo.local"&&S==="v4pass")_={id:"22222222-2222-2222-2222-222222222222",name:"V4 User",email:"v4@prodomo.local",grade:"V4",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1};else if(w==="v5@prodomo.local"&&S==="v5pass")_={id:"33333333-3333-3333-3333-333333333333",name:"V5 User",email:"v5@prodomo.local",grade:"V5",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1};else if(w==="support@prodomo.local"&&S==="support123")_={id:"44444444-4444-4444-4444-444444444444",name:"Support User",email:"support@prodomo.local",grade:"Support",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1};else throw u(b=>b+1),new Error("Invalid credentials");if(!_)throw new Error("User not found");await p(_),localStorage.setItem("prodomo_current_user",JSON.stringify(_)),r(_),u(0),o(null),te.login(_.name),console.log("AuthContext: Sign in successful")}catch(w){if(console.error("AuthContext: Sign in error:",w),o(w instanceof Error?w.message:"Failed to sign in"),d>=5&&Zt.getRateLimitStatus("login")){const S=await Zt.getUserIP();Zt.blockIP(S,15*60*1e3),te.error("Too many failed login attempts. Your IP has been temporarily blocked.","Security Alert"),u(0)}throw w}finally{a(!1)}},v=async()=>{try{const g=await Zt.checkRateLimit("guest");console.log("AuthContext: Creating guest session"),a(!0),o(null);const f=await Zt.getUserIP(),x=Hl(f);if(x.blocked)throw new Error(x.reason||"IP is blocked from creating guest sessions");const w=crypto.randomUUID(),S=new Date(Date.now()+5*60*1e3),N={id:w,name:"Guest User",email:`${w}@temp.local`,grade:"Guest",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!0,guest_expires_at:S.toISOString(),is_blocked:!1},_=await fk(w);if(!_.success)throw new Error(_.error||"Failed to create guest session");await p(N);try{const b="prodomo_users",j=localStorage.getItem(b),z=j?JSON.parse(j):[];z.push(N),localStorage.setItem(b,JSON.stringify(z)),localStorage.setItem("prodomo_current_user",JSON.stringify(N)),console.log("Guest user stored in localStorage")}catch(b){console.error("Failed to store guest user in localStorage:",b)}r(N),o(null),te.guestSession("5 minutes"),Vt()?te.info("Your IP will be blocked for 3 days after this session expires","IP Protection Active"):te.info("IP protection is currently disabled","Protection Status"),console.log("AuthContext: Guest session created with IP protection status:",Vt()?"enabled":"disabled")}catch(g){throw console.error("AuthContext: Guest sign in error:",g),o(g instanceof Error?g.message:"Failed to create guest session"),g instanceof Error&&(g.message.includes("blocked")||g.message.includes("exceeded"))&&te.error(g.message,"Access Restricted"),g}finally{a(!1)}},y=async()=>{try{if(console.log("AuthContext: Signing out user"),e!=null&&e.is_guest){Vt()?(await Bm(e.id),te.warning("Guest session ended. Your IP is now blocked for 3 days.","IP Protection Applied")):te.info("Guest session ended.","Session Expired");try{await de.from("users").delete().eq("id",e.id),console.log("Guest user removed from database")}catch(g){console.error("Failed to delete guest user from database:",g)}try{const g="prodomo_users",f=localStorage.getItem(g);if(f){const x=JSON.parse(f).filter(w=>w.id!==e.id);localStorage.setItem(g,JSON.stringify(x))}}catch(g){console.error("Failed to delete guest user from localStorage:",g)}}else te.logout();localStorage.removeItem("prodomo_current_user");try{await de.auth.signOut()}catch(g){console.error("Error signing out from Supabase:",g)}r(null),c(null),o(null),console.log("AuthContext: Sign out complete")}catch(g){console.error("AuthContext: Error signing out:",g)}},k=g=>{if(!e)return!1;if(g==="Support"&&e.grade==="Support"||e.grade==="Admin"||e.grade==="Support"&&(g==="V4"||g==="V5"||g==="Guest"))return!0;const f=h.indexOf(e.grade),x=h.indexOf(g);return f>=x};return i.jsx(Rb.Provider,{value:{user:e,loading:s,error:n,signIn:m,signInAsGuest:v,signOut:y,isAuthenticated:!!e,hasAccess:k,timeRemaining:l},children:t})},$b=()=>{const{user:t}=ht(),[e,r]=T.useState([]),[s,a]=T.useState(0),n=()=>`prodomo_notifications_${(t==null?void 0:t.id)||"guest"}`;T.useEffect(()=>{if(t){const c=localStorage.getItem(n());if(c)try{const d=JSON.parse(c);r(d),a(d.filter(u=>!u.read).length)}catch(d){console.error("Failed to parse notifications:",d)}}},[t]);const o=c=>{t&&(localStorage.setItem(n(),JSON.stringify(c)),r(c),a(c.filter(d=>!d.read).length))},l=c=>{const d={...c,id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,created_at:new Date().toISOString(),read:!1},u=[d,...e].slice(0,50);o(u),console.log("Notification added:",d)};return{notifications:e,unreadCount:s,addNotification:l,markAsRead:c=>{const d=e.map(u=>u.id===c?{...u,read:!0}:u);o(d)},markAllAsRead:()=>{const c=e.map(d=>({...d,read:!0}));o(c)},removeNotification:c=>{const d=e.filter(u=>u.id!==c);o(d)},clearAll:()=>{o([])},addBugStatusNotification:(c,d,u,h,p)=>{if((t==null?void 0:t.id)!==p)return;let m="",v="info";switch(u){case"in-progress":m=`Your bug report "${c}" is now being worked on by our team.`,v="info";break;case"resolved":m=`Great news! Your bug report "${c}" has been resolved.`,v="success";break;case"closed":m=`Your bug report "${c}" has been closed.`,v="info";break;default:m=`Your bug report "${c}" status changed from ${d} to ${u}.`,v="info"}l({title:"Bug Report Update",message:m,type:v,related_id:h,action_url:"/bug-report"})}}},Lj=()=>{const{notifications:t,unreadCount:e,markAsRead:r,markAllAsRead:s,removeNotification:a,clearAll:n}=$b(),[o,l]=T.useState(!1),c=T.useRef(null),d=T.useRef(null);T.useEffect(()=>{const m=v=>{c.current&&!c.current.contains(v.target)&&l(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const u=m=>{switch(m){case"success":return i.jsx(lt,{size:16,className:"text-emerald-500"});case"warning":return i.jsx(Kr,{size:16,className:"text-amber-500"});case"error":return i.jsx(uk,{size:16,className:"text-red-500"});default:return i.jsx(ek,{size:16,className:"text-blue-500"})}},h=m=>{const v=new Date(m),y=Math.floor((new Date().getTime()-v.getTime())/1e3);return y<60?`${y}s ago`:y<3600?`${Math.floor(y/60)}m ago`:y<86400?`${Math.floor(y/3600)}h ago`:`${Math.floor(y/86400)}d ago`},p=m=>{m.read||r(m.id),m.action_url&&console.log("Navigate to:",m.action_url)};return i.jsxs("div",{className:"relative",ref:c,children:[i.jsxs("button",{ref:d,onClick:()=>l(!o),className:"relative p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[i.jsx(ba,{size:18}),e>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium animate-pulse",children:e>9?"9+":e})]}),o&&i.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-96 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-[100] max-h-96 overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notifications"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[e>0&&i.jsx("button",{onClick:s,className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200 rounded",title:"Mark all as read",children:i.jsx(J1,{size:16})}),t.length>0&&i.jsx("button",{onClick:n,className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200 rounded",title:"Clear all",children:i.jsx(Rt,{size:16})}),i.jsx("button",{onClick:()=>l(!1),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 rounded",children:i.jsx(_e,{size:16})})]})]}),e>0&&i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e," unread notification",e!==1?"s":""]})]}),i.jsx("div",{className:"max-h-80 overflow-y-auto",children:t.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(ba,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No notifications"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You're all caught up! "})]}):i.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(m=>i.jsx("div",{className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 cursor-pointer relative group ${m.read?"":"bg-blue-50 dark:bg-blue-900/10 border-l-4 border-blue-500"}`,onClick:()=>p(m),children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:u(m.type)}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1 pr-2",children:[i.jsx("p",{className:`text-sm font-medium ${m.read?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:m.title}),i.jsx("p",{className:`text-sm mt-1 break-words ${m.read?"text-gray-500 dark:text-gray-400":"text-gray-700 dark:text-gray-300"}`,children:m.message}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:h(m.created_at)})]}),i.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 ml-2",children:[!m.read&&i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),i.jsx("button",{onClick:v=>{v.stopPropagation(),a(m.id)},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200 rounded opacity-0 group-hover:opacity-100",children:i.jsx(_e,{size:12})})]})]})})]})},m.id))})}),t.length>0&&i.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:i.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400",children:"Notifications are stored locally and will persist across sessions"})})]})]})},Rj=({activeSection:t,setActiveSection:e})=>{const{isDark:r,toggleTheme:s}=ob(),{user:a,hasAccess:n,signOut:o,timeRemaining:l}=ht(),[c,d]=T.useState(!1),[u,h]=T.useState(!1),p=T.useRef(null),m=[{id:"dashboard",label:"Dashboard",icon:Z1,requiresAccess:"Guest"},{id:"downloads",label:"Downloads",icon:dt,requiresAccess:"Guest"},{id:"documentation",label:"Documentation",icon:ku,requiresAccess:"Guest"},{id:"patch-notes",label:"Patch Notes",icon:yr,requiresAccess:"Guest"},{id:"bug-report",label:"Bug Reports",icon:Jr,requiresAccess:"V4"},{id:"file-manager",label:"File Manager",icon:eb,requiresAccess:"Admin"},{id:"bug-management",label:"Bug Management",icon:Jr,requiresAccess:["Admin","Support"]},{id:"analytics",label:"Analytics",icon:Qx,requiresAccess:"Admin"},{id:"user-management",label:"User Management",icon:vr,requiresAccess:"Admin"},{id:"activity-logs",label:"Activity Logs",icon:nt,requiresAccess:"Admin"},{id:"ip-protection",label:"IP Protection",icon:Qr,requiresAccess:"Admin"}];T.useEffect(()=>{const N=_=>{p.current&&!p.current.contains(_.target)&&h(!1)};return document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[]);const v=N=>{switch(N){case"Admin":return"text-red-500 bg-red-100 dark:bg-red-900/20";case"Support":return"text-amber-500 bg-amber-100 dark:bg-amber-900/20";case"V5":return"text-purple-500 bg-purple-100 dark:bg-purple-900/20";case"V4":return"text-blue-500 bg-blue-100 dark:bg-blue-900/20";default:return"text-gray-500 bg-gray-100 dark:bg-gray-800"}},y=N=>{const _=Math.floor(N/6e4),b=Math.floor(N%6e4/1e3);return`${_}:${b.toString().padStart(2,"0")}`},k=async()=>{console.log("Sidebar: Sign out clicked"),h(!1);try{await o()}catch(N){console.error("Sidebar: Error signing out:",N)}},g=()=>{console.log("Sidebar: Theme toggle clicked"),s()},f=N=>{console.log("Sidebar: Navigation clicked:",N),e(N),window.innerWidth<1024&&d(!0)},x=()=>{console.log("Sidebar: User profile clicked"),e("profile"),h(!1),window.innerWidth<1024&&d(!0)},w=()=>{console.log("Sidebar: Settings clicked"),e("settings"),h(!1),window.innerWidth<1024&&d(!0)},S=N=>Array.isArray(N)?N.some(_=>n(_)):n(N);return a?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>d(!c),className:"lg:hidden fixed top-4 left-4 z-50 p-2 rounded-lg bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700",children:c?i.jsx(sk,{size:20,className:"text-gray-600 dark:text-gray-300"}):i.jsx(_e,{size:20,className:"text-gray-600 dark:text-gray-300"})}),i.jsx("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-white dark:bg-gray-800 shadow-xl transform transition-transform duration-300 ease-in-out border-r border-gray-200 dark:border-gray-700 ${c?"-translate-x-full lg:translate-x-0":"translate-x-0"}`,children:i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:i.jsx(ya,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Prodomo"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Server Dashboard"})]})]})}),i.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"relative",ref:p,children:[i.jsxs("button",{onClick:()=>h(!u),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 group",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:a.name.charAt(0)})}),i.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-emerald-500 border-2 border-white dark:border-gray-800 rounded-full"})]}),i.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[i.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-200",children:[a.name,a.is_guest&&i.jsx("span",{className:"ml-1 text-xs text-blue-600 dark:text-blue-400",children:"(Guest)"})]}),i.jsx("div",{className:"flex flex-wrap items-center gap-2",children:a.grade==="Support"?i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:`text-xs px-2 py-1 rounded-full flex items-center ${v("V4")}`,children:[i.jsx(Se,{size:10,className:"mr-1"}),"V4"]}),i.jsxs("span",{className:`text-xs px-2 py-1 rounded-full flex items-center ${v("Support")}`,children:[i.jsx(Os,{size:10,className:"mr-1"}),"Support"]})]}):i.jsxs("span",{className:`text-xs px-2 py-1 rounded-full flex items-center ${v(a.grade)}`,children:[i.jsx(Se,{size:10,className:"mr-1"}),a.grade]})}),a.is_guest&&l&&i.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[i.jsx(qt,{size:12,className:"text-amber-500"}),i.jsx("span",{className:"text-xs text-amber-600 dark:text-amber-400",children:y(l)})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("div",{onClick:N=>N.stopPropagation(),children:i.jsx(Lj,{})}),i.jsx(ju,{size:16,className:`text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-all duration-200 ${u?"rotate-180":""}`})]})]}),u&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-[70] overflow-hidden",children:[i.jsxs("button",{onClick:x,className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx(ns,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"View Profile"})]}),!a.is_guest&&i.jsxs("button",{onClick:w,className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx(Xh,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Settings"})]}),i.jsxs("button",{onClick:g,className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[r?i.jsx(sb,{size:16,className:"text-amber-400"}):i.jsx(rb,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r?"Light Mode":"Dark Mode"})]}),i.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700",children:i.jsxs("button",{onClick:k,className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors duration-200",children:[i.jsx(tb,{size:16,className:"text-red-500"}),i.jsx("span",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:"Sign Out"})]})})]})]})}),i.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:m.map(N=>{if(!S(N.requiresAccess))return null;const _=t===N.id,b=N.icon;return i.jsxs("button",{onClick:()=>f(N.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-all duration-200 ${_?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border-r-2 border-blue-600":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[i.jsx(b,{size:20}),i.jsx("span",{className:"font-medium",children:N.label})]},N.id)})})]})}),!c&&i.jsx("div",{className:"lg:hidden fixed inset-0 z-30 bg-black bg-opacity-50",onClick:()=>d(!0)})]}):null},Kt=()=>{const[t,e]=T.useState(!1),[r,s]=T.useState(null),[a,n]=T.useState(!1);T.useEffect(()=>{(async()=>{try{const M=await Aj();n(M),M||(console.error("Failed to initialize database"),s("Failed to connect to database"))}catch(M){console.error("Database initialization error:",M),s("Database initialization error")}})()},[]);const o=()=>{try{const M=[{id:"11111111-1111-1111-1111-111111111111",name:"Admin User",email:"admin@prodomo.local",grade:"Admin",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1,admin_notes:"System administrator account"},{id:"22222222-2222-2222-2222-222222222222",name:"V4 User",email:"v4@prodomo.local",grade:"V4",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:5,is_guest:!1,is_blocked:!1,admin_notes:"Standard V4 user account"},{id:"33333333-3333-3333-3333-333333333333",name:"V5 User",email:"v5@prodomo.local",grade:"V5",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:12,is_guest:!1,is_blocked:!1,admin_notes:"Advanced V5 user account"},{id:"44444444-4444-4444-4444-444444444444",name:"Support User",email:"support@prodomo.local",grade:"Support",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:3,is_guest:!1,is_blocked:!1,admin_notes:"Support team member with bug management access"}];localStorage.setItem("prodomo_users",JSON.stringify(M));const O=[{id:crypto.randomUUID(),name:"Prodomo Server",version:"2.1.4",description:"Latest stable release of Prodomo Server with enhanced security features and performance improvements.",file_url:"https://example.com/download/prodomo-server-2.1.4.zip",file_size:52428800,file_type:"server",min_grade:"V4",status:"active",download_count:1247,changelog:["Enhanced security protocols","Improved performance by 25%","Fixed memory leak issues","Added new configuration options","Updated dependencies"],created_by:"11111111-1111-1111-1111-111111111111",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:crypto.randomUUID(),name:"Prodomo Server Beta",version:"2.2.0-beta",description:"Beta version with experimental features. Use at your own risk in production environments.",file_url:"https://example.com/download/prodomo-server-2.2.0-beta.zip",file_size:55574528,file_type:"server",min_grade:"V5",status:"beta",download_count:89,changelog:["New experimental API endpoints","Advanced caching mechanisms","Improved logging system","Beta WebSocket support"],created_by:"11111111-1111-1111-1111-111111111111",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:crypto.randomUUID(),name:"Security Plugin",version:"1.0.2",description:"Essential security plugin for enhanced server protection and monitoring.",file_url:"https://example.com/download/security-plugin-1.0.2.zip",file_size:5242880,file_type:"plugin",min_grade:"V4",status:"active",download_count:456,changelog:["Fixed vulnerability in authentication","Added brute force protection","Improved logging capabilities"],created_by:"11111111-1111-1111-1111-111111111111",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];localStorage.setItem("prodomo_server_files",JSON.stringify(O));const R=[{id:crypto.randomUUID(),version:"2.1.4",title:"Security and Performance Update",content:`## What's New in v2.1.4

### Security Enhancements
- Implemented advanced encryption for data transmission
- Added multi-factor authentication support
- Enhanced input validation and sanitization
- Updated security protocols to prevent common vulnerabilities

### Performance Improvements
- Optimized database queries for 25% faster response times
- Reduced memory usage by 15%
- Improved caching mechanisms
- Enhanced connection pooling

### Bug Fixes
- Fixed critical memory leak in long-running processes
- Resolved issue with concurrent user sessions
- Fixed configuration file parsing errors
- Corrected timezone handling in logs

### New Features
- Added real-time monitoring dashboard
- Implemented automatic backup system
- New configuration management interface
- Enhanced logging with structured output

### Breaking Changes
- Updated API endpoints (see migration guide)
- Changed default configuration format
- Minimum system requirements updated

For detailed migration instructions, please refer to our documentation.`,status:"published",author_id:"11111111-1111-1111-1111-111111111111",author_name:"Admin User",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];localStorage.setItem("prodomo_patch_notes",JSON.stringify(R)),console.log("Initialized clean data in localStorage")}catch(M){console.error("Failed to initialize clean data:",M)}},l=async()=>{try{e(!0);const{data:M,error:O}=await de.from("users").select("*").order("created_at",{ascending:!1});if(O){console.error("Failed to fetch users from Supabase:",O);const R=localStorage.getItem("prodomo_users");return R?JSON.parse(R):[]}return M||[]}catch(M){console.error("Error fetching users:",M);const O=localStorage.getItem("prodomo_users");return O?JSON.parse(O):[]}finally{e(!1)}},c=async(M,O)=>{e(!0),s(null);try{const{error:R}=await de.from("users").update({...O,updated_at:new Date().toISOString()}).eq("id",M);if(R){console.error("Error updating user in Supabase:",R);const D=localStorage.getItem("prodomo_users");if(D){const E=JSON.parse(D),V=E.findIndex(X=>X.id===M);if(V!==-1){E[V]={...E[V],...O,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_users",JSON.stringify(E));const X=localStorage.getItem("prodomo_current_user");if(X){const C=JSON.parse(X);C.id===M&&localStorage.setItem("prodomo_current_user",JSON.stringify({...C,...O}))}return!0}}return s("Failed to update user"),!1}return!0}catch(R){return console.error("Error updating user:",R),s("Failed to update user"),!1}finally{e(!1)}},d=async(M,O)=>c(M,{grade:O}),u=async(M,O)=>c(M,{admin_notes:O}),h=async(M,O)=>{const R={"30m":18e5,"1d":864e5,"7d":6048e5,"30d":2592e6}[O]||18e5,D=new Date(Date.now()+R).toISOString();return c(M,{is_blocked:!0,blocked_until:D})},p=async M=>c(M,{is_blocked:!1,blocked_until:void 0}),m=async M=>{e(!0),s(null);try{const O=crypto.randomUUID(),R={id:O,name:M.name,email:M.email,grade:M.grade,join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1},{error:D}=await de.from("users").insert([R]);if(D){console.error("Error creating user in Supabase:",D);const E=localStorage.getItem("prodomo_users"),V=E?JSON.parse(E):[];V.push(R),localStorage.setItem("prodomo_users",JSON.stringify(V));const X=JSON.parse(localStorage.getItem("prodomo_passwords")||"{}");return X[O]=M.password,localStorage.setItem("prodomo_passwords",JSON.stringify(X)),!0}return!0}catch(O){return console.error("Error creating user:",O),s("Failed to create user"),!1}finally{e(!1)}},v=async M=>{e(!0),s(null);try{const{error:O}=await de.from("users").delete().eq("id",M);if(O){console.error("Error deleting user from Supabase:",O);const R=localStorage.getItem("prodomo_users");if(R){const D=JSON.parse(R).filter(V=>V.id!==M);localStorage.setItem("prodomo_users",JSON.stringify(D));const E=JSON.parse(localStorage.getItem("prodomo_passwords")||"{}");return E[M]&&(delete E[M],localStorage.setItem("prodomo_passwords",JSON.stringify(E))),!0}return s("Failed to delete user"),!1}return!0}catch(O){return console.error("Error deleting user:",O),s("Failed to delete user"),!1}finally{e(!1)}},y=M=>{const O={"11111111-1111-1111-1111-111111111111":"admin123","22222222-2222-2222-2222-222222222222":"v4pass","33333333-3333-3333-3333-333333333333":"v5pass","44444444-4444-4444-4444-444444444444":"support123"};if(O[M])return O[M];try{return JSON.parse(localStorage.getItem("prodomo_passwords")||"{}")[M]||null}catch(R){return console.error("Error getting user password:",R),null}},k=async()=>{try{e(!0);const{data:M,error:O}=await de.from("server_files").select("*").order("created_at",{ascending:!1});if(O){console.error("Failed to fetch files from Supabase:",O);const R=localStorage.getItem("prodomo_server_files");return R?JSON.parse(R):[]}return M||[]}catch(M){console.error("Error fetching server files:",M);const O=localStorage.getItem("prodomo_server_files");return O?JSON.parse(O):[]}finally{e(!1)}},g=async M=>{e(!0),s(null);try{const{error:O}=await de.from("server_files").insert([M]);if(O){console.error("Error creating file in Supabase:",O);const R=localStorage.getItem("prodomo_server_files"),D=R?JSON.parse(R):[],E={...M,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return D.push(E),localStorage.setItem("prodomo_server_files",JSON.stringify(D)),!0}return!0}catch(O){return console.error("Error creating file:",O),s("Failed to create file"),!1}finally{e(!1)}},f=async(M,O)=>{e(!0),s(null);try{const{error:R}=await de.from("server_files").update({...O,updated_at:new Date().toISOString()}).eq("id",M);if(R){console.error("Error updating file in Supabase:",R);const D=localStorage.getItem("prodomo_server_files");if(D){const E=JSON.parse(D),V=E.findIndex(X=>X.id===M);if(V!==-1)return E[V]={...E[V],...O,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_server_files",JSON.stringify(E)),!0}return s("Failed to update file"),!1}return!0}catch(R){return console.error("Error updating file:",R),s("Failed to update file"),!1}finally{e(!1)}},x=async M=>{e(!0),s(null);try{const{error:O}=await de.from("server_files").delete().eq("id",M);if(O){console.error("Error deleting file from Supabase:",O);const R=localStorage.getItem("prodomo_server_files");if(R){const D=JSON.parse(R).filter(E=>E.id!==M);return localStorage.setItem("prodomo_server_files",JSON.stringify(D)),!0}return s("Failed to delete file"),!1}return!0}catch(O){return console.error("Error deleting file:",O),s("Failed to delete file"),!1}finally{e(!1)}},w=async(M,O,R)=>{e(!0),s(null);try{const{data:D,error:E}=await de.storage.from(O).upload(R,M);if(E)return console.error("Error uploading file to Supabase:",E),`https://example.com/storage/${O}/${R}`;const{data:V}=de.storage.from(O).getPublicUrl(R);return V.publicUrl}catch(D){return console.error("Error uploading file:",D),s("Failed to upload file"),`https://example.com/storage/${O}/${R}`}finally{e(!1)}},S=async()=>{try{e(!0);const{data:M,error:O}=await de.from("patch_notes").select("*").order("created_at",{ascending:!1});if(O){console.error("Failed to fetch patch notes from Supabase:",O);const R=localStorage.getItem("prodomo_patch_notes");return R?JSON.parse(R):[]}return M||[]}catch(M){console.error("Error fetching patch notes:",M);const O=localStorage.getItem("prodomo_patch_notes");return O?JSON.parse(O):[]}finally{e(!1)}},N=async M=>{e(!0),s(null);try{const{error:O}=await de.from("patch_notes").insert([M]);if(O){console.error("Error creating patch note in Supabase:",O);const R=localStorage.getItem("prodomo_patch_notes"),D=R?JSON.parse(R):[],E={...M,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return D.push(E),localStorage.setItem("prodomo_patch_notes",JSON.stringify(D)),!0}return!0}catch(O){return console.error("Error creating patch note:",O),s("Failed to create patch note"),!1}finally{e(!1)}},_=async(M,O)=>{e(!0),s(null);try{const{error:R}=await de.from("patch_notes").update({...O,updated_at:new Date().toISOString()}).eq("id",M);if(R){console.error("Error updating patch note in Supabase:",R);const D=localStorage.getItem("prodomo_patch_notes");if(D){const E=JSON.parse(D),V=E.findIndex(X=>X.id===M);if(V!==-1)return E[V]={...E[V],...O,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_patch_notes",JSON.stringify(E)),!0}return s("Failed to update patch note"),!1}return!0}catch(R){return console.error("Error updating patch note:",R),s("Failed to update patch note"),!1}finally{e(!1)}},b=async M=>{e(!0),s(null);try{const{error:O}=await de.from("patch_notes").delete().eq("id",M);if(O){console.error("Error deleting patch note from Supabase:",O);const R=localStorage.getItem("prodomo_patch_notes");if(R){const D=JSON.parse(R).filter(E=>E.id!==M);return localStorage.setItem("prodomo_patch_notes",JSON.stringify(D)),!0}return s("Failed to delete patch note"),!1}return!0}catch(O){return console.error("Error deleting patch note:",O),s("Failed to delete patch note"),!1}finally{e(!1)}},j=async M=>{try{if(M.user_id){const{data:R,error:D}=await de.from("users").select("id").eq("id",M.user_id);if(D||!R||R.length===0){console.error("User does not exist in database, cannot log activity:",M.user_id);const E=localStorage.getItem("prodomo_activity_logs"),V=E?JSON.parse(E):[],X={...M,id:crypto.randomUUID(),created_at:new Date().toISOString()};return V.push(X),localStorage.setItem("prodomo_activity_logs",JSON.stringify(V)),!0}}const{error:O}=await de.from("activity_logs").insert([M]);if(O){console.error("Error logging activity to Supabase:",O);const R=localStorage.getItem("prodomo_activity_logs"),D=R?JSON.parse(R):[],E={...M,id:crypto.randomUUID(),created_at:new Date().toISOString()};D.push(E),localStorage.setItem("prodomo_activity_logs",JSON.stringify(D))}return!0}catch(O){console.error("Error logging activity:",O);try{const R=localStorage.getItem("prodomo_activity_logs"),D=R?JSON.parse(R):[],E={...M,id:crypto.randomUUID(),created_at:new Date().toISOString()};D.push(E),localStorage.setItem("prodomo_activity_logs",JSON.stringify(D))}catch(R){console.error("Failed to log activity to localStorage:",R)}return!1}},z=async(M=100)=>{try{e(!0);const{data:O,error:R}=await de.from("activity_logs").select("*").order("created_at",{ascending:!1}).limit(M);if(R){console.error("Failed to fetch activity logs from Supabase:",R);const D=localStorage.getItem("prodomo_activity_logs");return D?JSON.parse(D).slice(0,M):[]}return O||[]}catch(O){console.error("Error fetching activity logs:",O);const R=localStorage.getItem("prodomo_activity_logs");return R?JSON.parse(R).slice(0,M):[]}finally{e(!1)}},I=async M=>{try{if(M.user_id){const{data:R,error:D}=await de.from("users").select("id").eq("id",M.user_id);if(D||!R||R.length===0){console.error("User does not exist in database, cannot log download:",M.user_id);const E=localStorage.getItem("prodomo_download_logs"),V=E?JSON.parse(E):[],X={...M,id:crypto.randomUUID(),created_at:new Date().toISOString()};if(V.push(X),localStorage.setItem("prodomo_download_logs",JSON.stringify(V)),M.user_id){const C=localStorage.getItem("prodomo_users");if(C){const K=JSON.parse(C),J=K.findIndex(ne=>ne.id===M.user_id);if(J!==-1){K[J].total_downloads=(K[J].total_downloads||0)+1,localStorage.setItem("prodomo_users",JSON.stringify(K));const ne=localStorage.getItem("prodomo_current_user");if(ne){const fe=JSON.parse(ne);fe.id===M.user_id&&(fe.total_downloads=(fe.total_downloads||0)+1,localStorage.setItem("prodomo_current_user",JSON.stringify(fe)))}}}}return!0}}const{error:O}=await de.from("download_logs").insert([M]);if(O){console.error("Error logging download to Supabase:",O);const R=localStorage.getItem("prodomo_download_logs"),D=R?JSON.parse(R):[],E={...M,id:crypto.randomUUID(),created_at:new Date().toISOString()};D.push(E),localStorage.setItem("prodomo_download_logs",JSON.stringify(D))}try{if(M.user_id){const{data:R,error:D}=await de.from("users").select("total_downloads").eq("id",M.user_id);if(!D&&R&&R.length>0){const E=(R[0].total_downloads||0)+1;await de.from("users").update({total_downloads:E}).eq("id",M.user_id)}else{const E=localStorage.getItem("prodomo_users");if(E){const V=JSON.parse(E),X=V.findIndex(C=>C.id===M.user_id);if(X!==-1){V[X].total_downloads=(V[X].total_downloads||0)+1,localStorage.setItem("prodomo_users",JSON.stringify(V));const C=localStorage.getItem("prodomo_current_user");if(C){const K=JSON.parse(C);K.id===M.user_id&&(K.total_downloads=(K.total_downloads||0)+1,localStorage.setItem("prodomo_current_user",JSON.stringify(K)))}}}}}}catch(R){console.error("Failed to update user download count:",R)}return!0}catch(O){console.error("Error logging download:",O);try{const R=localStorage.getItem("prodomo_download_logs"),D=R?JSON.parse(R):[],E={...M,id:crypto.randomUUID(),created_at:new Date().toISOString()};if(D.push(E),localStorage.setItem("prodomo_download_logs",JSON.stringify(D)),M.user_id){const V=localStorage.getItem("prodomo_users");if(V){const X=JSON.parse(V),C=X.findIndex(K=>K.id===M.user_id);if(C!==-1){X[C].total_downloads=(X[C].total_downloads||0)+1,localStorage.setItem("prodomo_users",JSON.stringify(X));const K=localStorage.getItem("prodomo_current_user");if(K){const J=JSON.parse(K);J.id===M.user_id&&(J.total_downloads=(J.total_downloads||0)+1,localStorage.setItem("prodomo_current_user",JSON.stringify(J)))}}}}}catch(R){console.error("Failed to log download to localStorage:",R)}return!1}},A=async(M=100)=>{try{e(!0);const{data:O,error:R}=await de.from("download_logs").select("*").order("created_at",{ascending:!1}).limit(M);if(R){console.error("Failed to fetch download logs from Supabase:",R);const D=localStorage.getItem("prodomo_download_logs");return D?JSON.parse(D).slice(0,M):[]}return O||[]}catch(O){console.error("Error fetching download logs:",O);const R=localStorage.getItem("prodomo_download_logs");return R?JSON.parse(R).slice(0,M):[]}finally{e(!1)}},F=async()=>{try{e(!0);const{data:M,error:O}=await de.from("documentation").select("*").order("order_index",{ascending:!0});if(O){console.error("Failed to fetch documentation from Supabase:",O);const R=localStorage.getItem("prodomo_documentation");return R?JSON.parse(R):[]}return M||[]}catch(M){console.error("Error fetching documentation:",M);const O=localStorage.getItem("prodomo_documentation");return O?JSON.parse(O):[]}finally{e(!1)}},H=async M=>{e(!0),s(null);try{const{error:O}=await de.from("documentation").insert([M]);if(O){console.error("Error creating documentation in Supabase:",O);const R=localStorage.getItem("prodomo_documentation"),D=R?JSON.parse(R):[],E={...M,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return D.push(E),localStorage.setItem("prodomo_documentation",JSON.stringify(D)),!0}return!0}catch(O){return console.error("Error creating documentation:",O),s("Failed to create documentation"),!1}finally{e(!1)}},L=async(M,O)=>{e(!0),s(null);try{const{error:R}=await de.from("documentation").update({...O,updated_at:new Date().toISOString()}).eq("id",M);if(R){console.error("Error updating documentation in Supabase:",R);const D=localStorage.getItem("prodomo_documentation");if(D){const E=JSON.parse(D),V=E.findIndex(X=>X.id===M);if(V!==-1)return E[V]={...E[V],...O,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_documentation",JSON.stringify(E)),!0}return s("Failed to update documentation"),!1}return!0}catch(R){return console.error("Error updating documentation:",R),s("Failed to update documentation"),!1}finally{e(!1)}},Y=async M=>{e(!0),s(null);try{const{error:O}=await de.from("documentation").delete().eq("id",M);if(O){console.error("Error deleting documentation from Supabase:",O);const R=localStorage.getItem("prodomo_documentation");if(R){const D=JSON.parse(R).filter(E=>E.id!==M);return localStorage.setItem("prodomo_documentation",JSON.stringify(D)),!0}return s("Failed to delete documentation"),!1}return!0}catch(O){return console.error("Error deleting documentation:",O),s("Failed to delete documentation"),!1}finally{e(!1)}},P=async()=>{try{e(!0);const{data:M,error:O}=await de.from("bug_reports").select("*").order("created_at",{ascending:!1});if(O){console.error("Failed to fetch bug reports from Supabase:",O);const R=localStorage.getItem("prodomo_bug_reports");return R?JSON.parse(R):[]}return M||[]}catch(M){console.error("Error fetching bug reports:",M);const O=localStorage.getItem("prodomo_bug_reports");return O?JSON.parse(O):[]}finally{e(!1)}},$=async M=>{e(!0),s(null);try{if(M.reporter_id){const{data:D,error:E}=await de.from("users").select("id").eq("id",M.reporter_id);if(E||!D||D.length===0){console.error("User does not exist in database, cannot create bug report:",M.reporter_id);const V=localStorage.getItem("prodomo_bug_reports"),X=V?JSON.parse(V):[],C={...M,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return X.push(C),localStorage.setItem("prodomo_bug_reports",JSON.stringify(X)),!0}}const O={title:M.title,description:M.description,severity:M.severity,category:M.category,status:M.status,reporter_id:M.reporter_id,reporter_name:M.reporter_name,steps:M.steps,expected_behavior:M.expected_behavior,actual_behavior:M.actual_behavior,environment:M.environment,attachments:M.attachments,comments:M.comments||[]},{error:R}=await de.from("bug_reports").insert([O]);if(R){console.error("Error creating bug report in Supabase:",R);const D=localStorage.getItem("prodomo_bug_reports"),E=D?JSON.parse(D):[],V={...O,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return E.push(V),localStorage.setItem("prodomo_bug_reports",JSON.stringify(E)),!0}return!0}catch(O){return console.error("Error creating bug report:",O),s("Failed to create bug report"),!1}finally{e(!1)}},B=async(M,O)=>{e(!0),s(null);try{const{error:R}=await de.from("bug_reports").update({...O,updated_at:new Date().toISOString()}).eq("id",M);if(R){console.error("Error updating bug report in Supabase:",R);const D=localStorage.getItem("prodomo_bug_reports");if(D){const E=JSON.parse(D),V=E.findIndex(X=>X.id===M);if(V!==-1)return E[V]={...E[V],...O,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_bug_reports",JSON.stringify(E)),!0}return s("Failed to update bug report"),!1}return!0}catch(R){return console.error("Error updating bug report:",R),s("Failed to update bug report"),!1}finally{e(!1)}},Q=async M=>{e(!0),s(null);try{const{error:O}=await de.from("bug_reports").delete().eq("id",M);if(O){console.error("Error deleting bug report from Supabase:",O);const R=localStorage.getItem("prodomo_bug_reports");if(R){const D=JSON.parse(R).filter(E=>E.id!==M);return localStorage.setItem("prodomo_bug_reports",JSON.stringify(D)),!0}return s("Failed to delete bug report"),!1}return!0}catch(O){return console.error("Error deleting bug report:",O),s("Failed to delete bug report"),!1}finally{e(!1)}},U=async(M,O=30)=>{try{e(!0);let R=de.from("system_metrics").select("*").order("created_at",{ascending:!1}).limit(O);M&&(R=R.eq("metric_type",M));const{data:D,error:E}=await R;return E?(console.error("Failed to fetch system metrics from Supabase:",E),G(M,O)):D&&D.length>0?D:G(M,O)}catch(R){return console.error("Error fetching system metrics:",R),G(M,O)}finally{e(!1)}},G=(M,O=30)=>{const R=[],D=M?[M]:["downloads","users","storage","bandwidth"];for(const E of D)for(let V=0;V<O;V++){const X=new Date;X.setDate(X.getDate()-V);let C;switch(E){case"downloads":C=1e3+Math.floor(Math.random()*1e3);break;case"users":C=40+Math.floor(Math.random()*20);break;case"storage":C=1500+Math.floor(Math.random()*1e3);break;case"bandwidth":C=800+Math.floor(Math.random()*500);break;default:C=Math.floor(Math.random()*1e3)}R.push({id:crypto.randomUUID(),metric_type:E,value:C,date:X.toISOString().split("T")[0],created_at:X.toISOString()})}return R};return{loading:t,error:r,setError:s,dbInitialized:a,initializeCleanData:o,getUsers:l,updateUser:c,updateUserGrade:d,updateUserNotes:u,blockUser:h,unblockUser:p,createUser:m,deleteUser:v,getUserPassword:y,getServerFiles:k,createServerFile:g,updateServerFile:f,deleteServerFile:x,uploadFile:w,getPatchNotes:S,createPatchNote:N,updatePatchNote:_,deletePatchNote:b,logActivity:j,getActivityLogs:z,logDownload:I,getDownloadLogs:A,getDocumentation:F,createDocumentation:H,updateDocumentation:L,deleteDocumentation:Y,getBugReports:P,createBugReport:$,updateBugReport:B,deleteBugReport:Q,getSystemMetrics:U,getFileRequirements:()=>[{id:"1",label:"Operating System",value:"FreeBSD 12.0+"},{id:"2",label:"Memory",value:"4 GB RAM"},{id:"3",label:"Storage",value:"10 GB available space"},{id:"4",label:"Network",value:"Broadband connection"},{id:"5",label:"Processor",value:"x64 compatible"}],updateFileRequirements:M=>!0}},Ma=()=>{const{user:t}=ht(),{logActivity:e}=Kt(),r=async(s,a)=>{if(t)try{await e({user_id:t.id,user_name:t.name,action:s,details:a||"",ip_address:"Unknown"})}catch(n){console.error("Failed to log activity:",n)}};return{logFileUpload:(s,a)=>r(`Uploaded ${a}`,`File: ${s}`),logFileDownload:(s,a)=>r("Downloaded file",`${s} v${a}`),logFileDelete:s=>r("Deleted file",`File: ${s}`),logUserCreation:(s,a)=>r("Created user account",`User: ${s} (${a})`),logUserGradeUpdate:(s,a,n)=>r("Updated user grade",`${s}: ${a}  ${n}`),logUserBlock:(s,a)=>r("Blocked user",`${s} for ${a}`),logUserUnblock:s=>r("Unblocked user",`User: ${s}`),logUserDelete:s=>r("Deleted user account",`User: ${s}`),logPatchNoteCreate:(s,a)=>r("Created patch note",`v${s}: ${a}`),logPatchNoteUpdate:(s,a)=>r("Updated patch note",`v${s}: ${a}`),logPatchNoteDelete:s=>r("Deleted patch note",`Version: ${s}`),logPatchNotePublish:s=>r("Published patch note",`Version: ${s}`),logLogin:(s="email")=>r("Signed in",`Method: ${s}`),logLogout:()=>r("Signed out",""),logThemeChange:s=>r("Changed theme",`Theme: ${s}`),logProfileUpdate:s=>r("Updated profile",s),logSettingsChange:(s,a)=>r("Changed setting",`${s}: ${a}`),logSystemAction:(s,a)=>r(s,a),logBugReportSubmit:s=>r("Submitted bug report",`Bug: ${s}`),logBugStatusUpdate:(s,a,n)=>r("Updated bug status",`${s}: ${a}  ${n}`)}},ag=({activeSection:t,setActiveSection:e})=>{const{user:r,hasAccess:s}=ht(),{getActivityLogs:a,getDownloadLogs:n,getUsers:o,getServerFiles:l}=Kt(),{logSystemAction:c}=Ma(),[d,u]=T.useState(null),[h,p]=T.useState([]),[m,v]=T.useState({cpu:46,memory:68,storage:32,network:89,status:"healthy"}),[y,k]=T.useState({totalDownloads:0,activeUsers:0,serverUptime:"99.9%",totalFiles:0}),[g,f]=T.useState(!0);T.useEffect(()=>{x();const P=setInterval(w,3e4);return()=>clearInterval(P)},[]);const x=async()=>{f(!0);try{const[P,$,B,Q]=await Promise.all([a(20),n(100),o(),l()]),U=$.length,G=new Set($.map(E=>E.user_id)).size,M=Q.length,O=`${(99.5+Math.random()*.5).toFixed(1)}%`;k({totalDownloads:U,activeUsers:G,serverUptime:O,totalFiles:M});let R=P;s("Admin")||(R=P.filter(E=>!E.action.includes("[ADMIN]")));const D=[...R.map(E=>({...E,type:"activity"})),...$.slice(0,5).map(E=>({...E,type:"download",action:`Downloaded ${E.file_name} v${E.file_version}`,details:`File: ${E.file_name}`}))].sort((E,V)=>new Date(V.created_at).getTime()-new Date(E.created_at).getTime()).slice(0,10).map(E=>{const V=B.find(X=>X.id===E.user_id);return{...E,user_avatar:V==null?void 0:V.avatar_url,user_grade:V==null?void 0:V.grade,is_guest:(V==null?void 0:V.is_guest)||!1}}).filter(E=>!E.is_guest);p(D)}catch(P){console.error("Failed to load dashboard data:",P)}finally{f(!1)}},w=()=>{v(P=>({cpu:Math.round(Math.max(20,Math.min(90,P.cpu+(Math.random()-.5)*10))),memory:Math.round(Math.max(30,Math.min(85,P.memory+(Math.random()-.5)*8))),storage:Math.round(Math.max(15,Math.min(95,P.storage+(Math.random()-.5)*3))),network:Math.round(Math.max(70,Math.min(100,P.network+(Math.random()-.5)*5))),status:P.cpu>80||P.memory>80?"warning":P.cpu>90||P.memory>90?"critical":"healthy"}))},S=[{title:"Total Downloads",value:y.totalDownloads.toLocaleString(),change:"+12%",changeType:"positive",icon:dt,color:"bg-blue-500"},{title:"Active Users",value:y.activeUsers.toLocaleString(),change:"+5%",changeType:"positive",icon:vr,color:"bg-emerald-500"},{title:"Server Uptime",value:y.serverUptime,change:"+0.1%",changeType:"positive",icon:ya,color:"bg-purple-500"},{title:"Total Files",value:y.totalFiles.toString(),change:`${y.totalFiles} available`,changeType:"positive",icon:yr,color:"bg-amber-500"}],N=[{id:"downloads",title:"Latest Downloads",description:"View and download server files",icon:dt,color:"blue",action:()=>{console.log("Dashboard: Navigating to downloads"),e("downloads"),te.info("Navigating to Downloads section"),c("Accessed downloads via quick action")},requiresAccess:"Guest"},{id:"server-status",title:"Server Status",description:"Check system health and uptime",icon:nt,color:"emerald",action:()=>{console.log("Dashboard: Checking server status"),te.success("Server Status: All systems operational","System Health"),c("Checked server status via quick action")},requiresAccess:"Guest"},{id:"documentation",title:"Documentation",description:"Browse guides and tutorials",icon:yr,color:"indigo",action:()=>{console.log("Dashboard: Navigating to documentation"),e("documentation"),te.info("Navigating to Documentation"),c("Accessed documentation via quick action")},requiresAccess:"Guest"},{id:"user-management",title:"User Management",description:"Manage user accounts and permissions",icon:vr,color:"purple",action:()=>{console.log("Dashboard: Navigating to user management"),s("Admin")?(e("user-management"),te.info("Navigating to User Management"),c("Accessed user management via quick action")):te.warning("Admin access required for user management")},requiresAccess:"Admin"},{id:"analytics",title:"Analytics",description:"View system metrics and reports",icon:Qx,color:"amber",action:()=>{console.log("Dashboard: Navigating to analytics"),s("Admin")?(e("analytics"),te.info("Navigating to Analytics dashboard"),c("Accessed analytics via quick action")):te.warning("Admin access required for analytics")},requiresAccess:"Admin"},{id:"file-manager",title:"File Manager",description:"Upload and manage server files",icon:eb,color:"red",action:()=>{console.log("Dashboard: Navigating to file manager"),s("Admin")?(e("file-manager"),te.info("Navigating to File Manager"),c("Accessed file manager via quick action")):te.warning("Admin access required for file management")},requiresAccess:"Admin"}],_=async P=>{console.log("Dashboard: Quick action clicked:",P.id),u(P.id),setTimeout(()=>u(null),200);try{await P.action()}catch($){console.error("Dashboard: Quick action error:",$),te.error("Failed to execute action")}},b=()=>{console.log("Dashboard: View all activity clicked"),s("Admin")?(e("activity-logs"),te.info("Navigating to Activity Logs")):te.warning("Admin access required for activity logs")},j=P=>{console.log("Dashboard: Viewing profile for user:",P),e("profile");const $=new CustomEvent("viewProfile",{detail:{userId:P}});document.dispatchEvent($)},z=P=>P.type==="download"?i.jsx(dt,{size:16,className:"text-blue-500"}):P.action.includes("login")||P.action.includes("Sign")?i.jsx(Nu,{size:16,className:"text-emerald-500"}):P.action.includes("logout")||P.action.includes("out")?i.jsx(tb,{size:16,className:"text-red-500"}):P.action.includes("profile")||P.action.includes("Updated")?i.jsx(ns,{size:16,className:"text-purple-500"}):P.action.includes("upload")||P.action.includes("Upload")?i.jsx(Zh,{size:16,className:"text-indigo-500"}):P.action.includes("patch")||P.action.includes("note")?i.jsx(yr,{size:16,className:"text-amber-500"}):P.action.includes("user")||P.action.includes("User")?i.jsx(vr,{size:16,className:"text-cyan-500"}):P.action.includes("grade")||P.action.includes("Grade")?i.jsx(Se,{size:16,className:"text-orange-500"}):P.action.includes("edit")||P.action.includes("Edit")?i.jsx(sr,{size:16,className:"text-pink-500"}):i.jsx(nt,{size:16,className:"text-gray-500"}),I=P=>{switch(P){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},A=P=>{const $=new Date(P),B=Math.floor((new Date().getTime()-$.getTime())/1e3);return B<60?`${B}s ago`:B<3600?`${Math.floor(B/60)}m ago`:B<86400?`${Math.floor(B/3600)}h ago`:`${Math.floor(B/86400)}d ago`},F=(P,$)=>{const B="flex flex-col items-center p-6 rounded-xl border-2 transition-all duration-200 cursor-pointer group",Q=$?"scale-95 shadow-lg":"";switch(P){case"blue":return`${B} ${Q} border-blue-200 dark:border-blue-800 hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:shadow-md`;case"emerald":return`${B} ${Q} border-emerald-200 dark:border-emerald-800 hover:border-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 hover:shadow-md`;case"purple":return`${B} ${Q} border-purple-200 dark:border-purple-800 hover:border-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:shadow-md`;case"amber":return`${B} ${Q} border-amber-200 dark:border-amber-800 hover:border-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20 hover:shadow-md`;case"indigo":return`${B} ${Q} border-indigo-200 dark:border-indigo-800 hover:border-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 hover:shadow-md`;case"red":return`${B} ${Q} border-red-200 dark:border-red-800 hover:border-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:shadow-md`;default:return`${B} ${Q} border-gray-200 dark:border-gray-700 hover:border-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:shadow-md`}},H=P=>{switch(P){case"blue":return"text-blue-500 group-hover:text-blue-600";case"emerald":return"text-emerald-500 group-hover:text-emerald-600";case"purple":return"text-purple-500 group-hover:text-purple-600";case"amber":return"text-amber-500 group-hover:text-amber-600";case"indigo":return"text-indigo-500 group-hover:text-indigo-600";case"red":return"text-red-500 group-hover:text-red-600";default:return"text-gray-500 group-hover:text-gray-600"}},L=(P,$)=>$==="network"?P>=80?"text-emerald-500":P>=60?"text-amber-500":"text-red-500":P<=50?"text-emerald-500":P<=75?"text-amber-500":"text-red-500",Y=(P,$)=>$==="network"?P>=80?"bg-emerald-500":P>=60?"bg-amber-500":"bg-red-500":P<=50?"bg-emerald-500":P<=75?"bg-amber-500":"bg-red-500";return r?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["Welcome back, ",r.name,"!"]}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Here's what's happening with your Prodomo server today."})]}),i.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-4",children:[i.jsxs("button",{onClick:x,disabled:g,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:[i.jsx(nt,{size:16,className:g?"animate-spin":""}),i.jsx("span",{className:"text-sm",children:"Refresh"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[i.jsx(qt,{size:16}),i.jsxs("span",{children:["Last updated: ",new Date().toLocaleTimeString()]})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:S.map((P,$)=>{const B=P.icon;return i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow duration-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:P.title}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:P.value}),i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx(Vl,{size:14,className:`${P.changeType==="positive"?"text-emerald-500":"text-red-500"} mr-1`}),i.jsx("span",{className:`text-sm font-medium ${P.changeType==="positive"?"text-emerald-600":"text-red-600"}`,children:P.change}),i.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:P.title==="Total Files"?"":"vs last month"})]})]}),i.jsx("div",{className:`p-3 rounded-lg ${P.color} bg-opacity-10`,children:i.jsx(B,{className:`w-6 h-6 ${P.color.replace("bg-","text-")}`})})]})},$)})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Latest user actions and system events"})]}),i.jsxs("div",{className:"p-6",children:[g?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-4",children:[h.map((P,$)=>i.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx("button",{onClick:()=>j(P.user_id),className:"flex-shrink-0 hover:scale-105 transition-transform duration-200",children:P.user_avatar?i.jsx("img",{src:P.user_avatar,alt:P.user_name,className:"w-8 h-8 rounded-full object-cover"}):i.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-xs",children:P.user_name.charAt(0)})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>j(P.user_id),className:"text-sm font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:P.user_name}),P.user_grade&&i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${I(P.user_grade)}`,children:P.user_grade})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[z(P),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:A(P.created_at)})]})]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:P.action}),P.details&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:P.details})]})]},$)),h.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(nt,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No recent activity"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"User activity will appear here as it happens."})]})]}),i.jsx("button",{onClick:b,className:"w-full mt-4 px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:"View all activity"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ya,{className:"w-5 h-5 text-blue-500"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"System Health"})]}),i.jsx("div",{className:`px-2 py-1 text-xs font-medium rounded-full ${m.status==="healthy"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400":m.status==="warning"?"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:m.status})]})}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(G1,{size:16,className:L(m.cpu,"cpu")}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"CPU Usage"})]}),i.jsxs("span",{className:`text-sm font-medium ${L(m.cpu,"cpu")}`,children:[m.cpu,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${Y(m.cpu,"cpu")}`,style:{width:`${m.cpu}%`}})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xx,{size:16,className:L(m.memory,"memory")}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Memory"})]}),i.jsxs("span",{className:`text-sm font-medium ${L(m.memory,"memory")}`,children:[m.memory,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${Y(m.memory,"memory")}`,style:{width:`${m.memory}%`}})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_u,{size:16,className:L(m.storage,"storage")}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Storage"})]}),i.jsxs("span",{className:`text-sm font-medium ${L(m.storage,"storage")}`,children:[m.storage,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${Y(m.storage,"storage")}`,style:{width:`${m.storage}%`}})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Mu,{size:16,className:L(m.network,"network")}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Network"})]}),i.jsxs("span",{className:`text-sm font-medium ${L(m.network,"network")}`,children:[m.network,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${Y(m.network,"network")}`,style:{width:`${m.network}%`}})})]}),i.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Status"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[m.status==="healthy"?i.jsx(lt,{size:16,className:"text-emerald-500"}):m.status==="warning"?i.jsx(Kr,{size:16,className:"text-amber-500"}):i.jsx(_e,{size:16,className:"text-red-500"}),i.jsx("span",{className:`text-sm font-medium capitalize ${m.status==="healthy"?"text-emerald-600 dark:text-emerald-400":m.status==="warning"?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400"}`,children:m.status})]})]}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[m.status==="healthy"&&"All systems operating normally",m.status==="warning"&&"Some metrics need attention",m.status==="critical"&&"Immediate action required"]})]})]})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Quick Actions"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Common tasks and shortcuts"})]}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:N.filter(P=>s(P.requiresAccess)).map(P=>{const $=P.icon,B=d===P.id;return i.jsxs("button",{onClick:()=>_(P),className:F(P.color,B),title:P.description,children:[i.jsx($,{className:`w-8 h-8 mb-3 ${H(P.color)}`}),i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white text-center",children:P.title}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1",children:P.description})]},P.id)})})})]})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})},$j=()=>{const{hasAccess:t,user:e}=ht(),{getServerFiles:r,logDownload:s,getFileRequirements:a,updateFileRequirements:n}=Kt(),{logFileDownload:o}=Ma(),[l,c]=T.useState(""),[d,u]=T.useState("all"),[h,p]=T.useState([]),[m,v]=T.useState(!0),[y,k]=T.useState(null),[g,f]=T.useState(!1),[x,w]=T.useState([]),[S,N]=T.useState(!1),[_,b]=T.useState([]);T.useEffect(()=>{j(),z()},[]);const j=async()=>{v(!0);const D=await r();p(D),v(!1)},z=()=>{const D=a();w(D)},I=async D=>{if(e)try{await s({user_id:e.id,user_name:e.name,file_id:D.id,file_name:D.name,file_version:D.version,ip_address:"Unknown",user_agent:navigator.userAgent}),await o(D.name,D.version),te.download(`${D.name} v${D.version}`),A(D),window.open(D.file_url,"_blank")}catch(E){console.error("Download error:",E),te.error("Failed to initiate download")}},A=D=>{try{const E=localStorage.getItem("prodomo_users");if(!E)return;JSON.parse(E).filter(V=>V.grade==="Admin").forEach(V=>{if(V.id===(e==null?void 0:e.id))return;const X=`prodomo_notifications_${V.id}`,C=JSON.parse(localStorage.getItem(X)||"[]"),K=[{id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:"New Download",message:`${e==null?void 0:e.name} downloaded ${D.name} v${D.version}`,type:"info",read:!1,created_at:new Date().toISOString(),related_id:D.id,action_url:"/downloads"},...C].slice(0,50);localStorage.setItem(X,JSON.stringify(K))}),console.log("Download notification created for admins")}catch(E){console.error("Failed to create download notification:",E)}},F=D=>{console.log("Downloads: Viewing details for file:",D.name),k(D),f(!0)},H=()=>{b([...x]),N(!0)},L=()=>{n(_)?(w(_),N(!1),te.success("System requirements updated successfully")):te.error("Failed to update requirements")},Y=()=>{b([]),N(!1)},P=()=>{const D={id:Date.now().toString(),label:"New Requirement",value:"Enter value"};b([..._,D])},$=(D,E,V)=>{b(X=>X.map(C=>C.id===D?{...C,[E]:V}:C))},B=D=>{b(E=>E.filter(V=>V.id!==D))},Q=D=>{switch(D){case"active":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400";case"beta":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"deprecated":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},U=D=>{switch(D){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},G=D=>{if(D===0)return"0 Bytes";const E=1024,V=["Bytes","KB","MB","GB"],X=Math.floor(Math.log(D)/Math.log(E));return parseFloat((D/Math.pow(E,X)).toFixed(2))+" "+V[X]},M=D=>{switch(D){case"server":return"";case"plugin":return"";case"archive":return"";case"documentation":return"";default:return""}},O=D=>{if(!e)return!1;if(e.grade==="Admin")return!0;if(e.grade==="Support")return D.min_grade==="Guest"||D.min_grade==="V4";const E=["Guest","V4","V5","Support","Admin"],V=E.indexOf(e.grade),X=E.indexOf(D.min_grade);return V>=X},R=h.filter(D=>{const E=D.name.toLowerCase().includes(l.toLowerCase())||D.description.toLowerCase().includes(l.toLowerCase()),V=d==="all"||D.status===d,X=O(D);return E&&V&&X});return m?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Server Downloads"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Download the latest Prodomo server versions and updates."})]}),t("Admin")&&i.jsxs("button",{onClick:H,className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(sr,{size:18}),i.jsx("span",{children:"Edit Requirements"})]})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search versions...",value:l,onChange:D=>c(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_a,{className:"text-gray-400 w-5 h-5"}),i.jsxs("select",{value:d,onChange:D=>u(D.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"beta",children:"Beta"}),i.jsx("option",{value:"deprecated",children:"Deprecated"})]})]})]})}),e&&i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(Se,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Your Access Level"}),i.jsx("div",{className:"flex items-center space-x-2 mt-1",children:e.grade==="Support"?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U("V4")}`,children:"V4"}),i.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U("Support")}`,children:[i.jsx(Os,{size:12,className:"inline mr-1"}),"Support"]}),i.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:"You have V4 download access and Support privileges for bug management"})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U(e.grade)}`,children:e.grade}),i.jsxs("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:["You can download files marked for ",e.grade," access or lower"]})]})})]})]})}),i.jsxs("div",{className:"space-y-4",children:[R.map(D=>i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-200",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("span",{className:"text-2xl",children:M(D.file_type)}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:D.name}),i.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 rounded-full",children:["v",D.version]}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Q(D.status)}`,children:D.status}),i.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U(D.min_grade)}`,children:[D.min_grade,"+ Required"]})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:D.description}),i.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(as,{size:16}),i.jsx("span",{children:new Date(D.created_at).toLocaleDateString()})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(dt,{size:16}),i.jsxs("span",{children:[D.download_count.toLocaleString()," downloads"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(yr,{size:16}),i.jsx("span",{children:G(D.file_size)})]})]}),D.changelog&&D.changelog.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsxs("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2 flex items-center",children:[i.jsx($m,{size:14,className:"mr-1 text-amber-500"}),"What's New:"]}),i.jsxs("ul",{className:"space-y-1",children:[D.changelog.slice(0,2).map((E,V)=>i.jsxs("li",{className:"flex items-start space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[i.jsx(lt,{size:14,className:"text-emerald-500 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:E})]},V)),D.changelog.length>2&&i.jsxs("li",{className:"text-sm text-blue-600 dark:text-blue-400 ml-6",children:["+",D.changelog.length-2," more changes"]})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row lg:flex-col space-y-2 sm:space-y-0 sm:space-x-2 lg:space-x-0 lg:space-y-2 lg:ml-6",children:[O(D)?i.jsxs("button",{onClick:()=>I(D),className:"flex items-center justify-center space-x-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(dt,{size:18}),i.jsx("span",{children:"Download"})]}):i.jsxs("div",{className:"flex items-center justify-center space-x-2 px-6 py-3 bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 rounded-lg",children:[i.jsx(Ui,{size:18}),i.jsxs("span",{children:["Requires ",D.min_grade]})]}),i.jsxs("button",{onClick:()=>F(D),className:"flex items-center justify-center space-x-2 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx(Jt,{size:18}),i.jsx("span",{children:"View Details"})]})]})]}),D.status==="deprecated"&&i.jsx("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(It,{className:"text-amber-600 dark:text-amber-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Deprecated Version"}),i.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:"This version is no longer actively maintained. Consider upgrading to a newer stable release."})]})]})})]})},D.id)),R.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(yr,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No versions found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria or access level."})]})]}),S&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:Y}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Edit System Requirements"}),i.jsx("button",{onClick:Y,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:_.map((D,E)=>i.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[i.jsx("input",{type:"text",value:D.label,onChange:V=>$(D.id,"label",V.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Requirement name"}),i.jsx("input",{type:"text",value:D.value,onChange:V=>$(D.id,"value",V.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Requirement value"})]}),i.jsx("button",{onClick:()=>B(D.id),className:"p-2 text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors duration-200",children:i.jsx(Rt,{size:16})})]},D.id))}),i.jsx("div",{className:"mt-4",children:i.jsxs("button",{onClick:P,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:[i.jsx(Ir,{size:16}),i.jsx("span",{children:"Add Requirement"})]})}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:Y,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:L,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Is,{size:18}),i.jsx("span",{children:"Save Requirements"})]})]})]})]})}),g&&y&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>f(!1)}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("span",{className:"text-3xl",children:M(y.file_type)}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[y.name," v",y.version]}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:y.description})]})]}),i.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl p-6",children:[i.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[i.jsx($m,{className:"mr-2 text-amber-500",size:20}),"What's New in v",y.version]}),y.changelog&&y.changelog.length>0?i.jsx("ul",{className:"space-y-3",children:y.changelog.map((D,E)=>i.jsxs("li",{className:"flex items-start space-x-3",children:[i.jsx(lt,{size:16,className:"text-emerald-500 mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:D})]},E))}):i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No changelog available for this version."})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-6",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"File Information"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"File Type"}),i.jsx("p",{className:"text-gray-900 dark:text-white capitalize",children:y.file_type})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"File Size"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:G(y.file_size)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Q(y.status)}`,children:y.status})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Access Level"}),i.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${U(y.min_grade)}`,children:[y.min_grade,"+"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Downloads"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:y.download_count.toLocaleString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Release Date"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(y.created_at).toLocaleDateString()})]})]})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:[i.jsxs("h4",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-4 flex items-center",children:[i.jsx(ba,{className:"mr-2 text-blue-500",size:20}),"Download Notifications"]}),i.jsx("p",{className:"text-blue-800 dark:text-blue-200 mb-4",children:"Admins will be notified when users download this file. This helps track usage and identify popular files."}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(lt,{size:16,className:"text-blue-600 dark:text-blue-400"}),i.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"Notifications are automatically sent to admins"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Download Options"}),O(y)?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>{I(y),f(!1)},className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(dt,{size:18}),i.jsx("span",{children:"Download Now"})]}),i.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(y.file_url),te.success("Download link copied to clipboard")},className:"w-full flex items-center justify-center space-x-2 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx(Zx,{size:18}),i.jsx("span",{children:"Copy Link"})]})]}):i.jsxs("div",{className:"text-center py-4",children:[i.jsx(Ui,{className:"mx-auto w-12 h-12 text-gray-400 mb-3"}),i.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:[y.min_grade," access required"]})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-6",children:[i.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[i.jsx(Se,{size:18,className:"mr-2"}),"System Requirements"]}),i.jsx("div",{className:"space-y-2 text-sm",children:x.map(D=>i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[D.label,":"]}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:D.value})]},D.id))})]})]})]})]})]})})]})},Fj=()=>{const{user:t,hasAccess:e}=ht(),{getDocumentation:r,createDocumentation:s,updateDocumentation:a,deleteDocumentation:n,loading:o}=Kt(),[l,c]=T.useState([]),[d,u]=T.useState("v4"),[h,p]=T.useState("all"),[m,v]=T.useState(""),[y,k]=T.useState(!1),[g,f]=T.useState(null),[x,w]=T.useState(null),[S,N]=T.useState(!0),[_,b]=T.useState(!1),[j,z]=T.useState(new Set),[I,A]=T.useState(null),[F,H]=T.useState({title:"",slug:"",content:"",category:"info",version_type:"v4",status:"draft",meta_description:"",tags:[],order_index:0}),L=[{id:"info",label:"Information",icon:""},{id:"installation",label:"Installation",icon:""},{id:"features",label:"Features",icon:""},{id:"api",label:"API Reference",icon:""},{id:"troubleshooting",label:"Troubleshooting",icon:""},{id:"pricing",label:"Pricing",icon:""},{id:"about",label:"About",icon:""},{id:"tos",label:"Terms of Service",icon:""},{id:"changelog",label:"Changelog",icon:""},{id:"partners",label:"Partners",icon:""}];T.useEffect(()=>{Y()},[]),T.useEffect(()=>{const C=P();C.length>0&&!x&&w(C[0])},[d,l]),T.useEffect(()=>{if(x){const C=O(x.content);C.length>0&&j.size===0&&z(new Set([C[0].id]))}},[x==null?void 0:x.content]);const Y=async()=>{const C=await r();c(C);const K=C.filter(J=>J.status==="published");K.length>0&&!x&&w(K[0])},P=()=>l.filter(C=>{const K=C.version_type===d,J=h==="all"||C.category===h,ne=C.title.toLowerCase().includes(m.toLowerCase())||C.content.toLowerCase().includes(m.toLowerCase()),fe=C.status==="published"||e("Admin")||(t==null?void 0:t.grade)==="Support";return K&&J&&ne&&fe}).sort((C,K)=>C.order_index-K.order_index),$=C=>{f(C),H({title:C.title,slug:C.slug,content:C.content,category:C.category,version_type:C.version_type,status:C.status,meta_description:C.meta_description||"",tags:C.tags||[],order_index:C.order_index}),k(!0)},B=async()=>{if(!t)return;let C=!1;g?C=await a(g.id,F):C=await s({...F,author_id:t.id,author_name:t.name}),C&&(await Y(),Q())},Q=()=>{k(!1),f(null),H({title:"",slug:"",content:"",category:"info",version_type:"v4",status:"draft",meta_description:"",tags:[],order_index:0})},U=async C=>{A(C)},G=async C=>{l.find(K=>K.id===C)&&(await n(C)&&(await Y(),(x==null?void 0:x.id)===C&&w(null)),A(null))},M=()=>{A(null)},O=C=>C.split(/(?=^##\s)/m).filter(K=>K.trim()).map((K,J)=>{var ne;const fe=K.trim().split(`
`),kt=((ne=fe[0])==null?void 0:ne.replace(/^##\s*/,""))||`Section ${J+1}`,$t=fe.slice(1).join(`
`).trim(),Ct=kt.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),Ft=$t.length>800||/installation|configuration|troubleshooting|api|advanced|technical|setup|deployment/i.test(kt);return{id:Ct,title:kt,content:$t,shouldBeSpoiler:Ft,readingTime:Math.ceil($t.length/1e3)}}),R=C=>{const K=new Set(j);K.has(C)?K.delete(C):K.add(C),z(K)},D=C=>{const K=document.getElementById(C);K&&(K.scrollIntoView({behavior:"smooth",block:"start"}),j.has(C)||R(C))},E=C=>{const K=O(C);return i.jsx("div",{className:"space-y-6",children:K.map((J,ne)=>{const fe=j.has(J.id);return i.jsx("div",{id:J.id,className:"scroll-mt-4",children:J.shouldBeSpoiler?i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[i.jsxs("button",{onClick:()=>R(J.id),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[fe?i.jsx(kc,{className:"w-5 h-5 text-gray-500"}):i.jsx(Jt,{className:"w-5 h-5 text-gray-500"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white text-left",children:J.title})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[J.readingTime," min read"]}),i.jsx(ju,{className:`w-5 h-5 text-gray-500 transition-transform duration-200 ${fe?"rotate-180":""}`})]})]}),fe&&i.jsx("div",{className:"p-6 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:i.jsx("div",{className:"prose dark:prose-invert max-w-none",children:i.jsx("div",{className:"whitespace-pre-wrap",children:J.content})})}),!fe&&i.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[J.content.substring(0,150),"..."]})})]}):i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:J.title}),i.jsx("div",{className:"prose dark:prose-invert max-w-none",children:i.jsx("div",{className:"whitespace-pre-wrap",children:J.content})})]})},J.id)})})},V=C=>{const K=O(C);return i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[i.jsxs("button",{onClick:()=>b(!_),className:"flex items-center justify-between w-full mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(rk,{className:"w-4 h-4 text-gray-500"}),i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Table of Contents"})]}),i.jsx(ju,{className:`w-4 h-4 text-gray-500 transition-transform duration-200 ${_?"rotate-180":""}`})]}),!_&&i.jsx("div",{className:"space-y-2",children:K.map((J,ne)=>i.jsxs("button",{onClick:()=>D(J.id),className:"flex items-center justify-between w-full text-left p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 group",children:[i.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[i.jsx(X1,{className:"w-3 h-3 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate group-hover:text-blue-600 dark:group-hover:text-blue-400",children:J.title})]}),i.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0 ml-2",children:[J.shouldBeSpoiler&&i.jsx(Jt,{className:"w-3 h-3 text-gray-400"}),i.jsxs("span",{className:"text-xs text-gray-400",children:[J.readingTime,"m"]})]})]},J.id))})]})},X=()=>e("Admin")||(t==null?void 0:t.grade)==="Support";return e("Guest")?i.jsxs("div",{className:"h-screen flex bg-gray-50 dark:bg-gray-900",children:[i.jsx("div",{className:`${S?"w-80":"w-0"} transition-all duration-300 overflow-hidden border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800`,children:i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Documentation"}),X()&&i.jsxs("button",{onClick:()=>k(!0),className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors duration-200",children:[i.jsx(Ir,{size:14}),i.jsx("span",{children:"Add"})]})]}),i.jsxs("div",{className:"flex space-x-1 mb-4 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>u("v4"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors duration-200 ${d==="v4"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"V4 Docs"}),i.jsx("button",{onClick:()=>u("v5"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors duration-200 ${d==="v5"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"V5 Docs"})]}),i.jsxs("div",{className:"relative mb-4",children:[i.jsx(Na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Search documentation...",value:m,onChange:C=>v(C.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(_a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsxs("select",{value:h,onChange:C=>p(C.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Categories"}),L.map(C=>i.jsxs("option",{value:C.id,children:[C.icon," ",C.label]},C.id))]})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i.jsxs("div",{className:"space-y-2",children:[P().map(C=>{var K,J;return i.jsx("button",{onClick:()=>w(C),className:`w-full text-left p-3 rounded-lg border transition-all duration-200 ${(x==null?void 0:x.id)===C.id?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:`font-medium text-sm mb-1 truncate ${(x==null?void 0:x.id)===C.id?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white"}`,children:C.title}),i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded",children:[(K=L.find(ne=>ne.id===C.category))==null?void 0:K.icon," ",(J=L.find(ne=>ne.id===C.category))==null?void 0:J.label]}),C.status==="draft"&&i.jsx("span",{className:"text-xs px-2 py-1 bg-amber-100 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400 rounded",children:"Draft"})]}),C.meta_description&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:C.meta_description})]}),X()&&i.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[i.jsx("button",{onClick:ne=>{ne.stopPropagation(),$(C)},className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:i.jsx(sr,{size:12})}),i.jsx("button",{onClick:ne=>{ne.stopPropagation(),U(C.id)},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:i.jsx(Rt,{size:12})})]})]})},C.id)}),P().length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(ku,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No documentation found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria."})]})]})})]})}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>N(!S),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:i.jsx(ku,{size:20})}),x&&i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:x.title}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(ns,{size:14}),i.jsx("span",{children:x.author_name})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(as,{size:14}),i.jsx("span",{children:new Date(x.updated_at).toLocaleDateString()})]}),x.tags&&x.tags.length>0&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(ab,{size:14}),i.jsx("span",{children:x.tags.join(", ")})]})]})]})]}),x&&X()&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("button",{onClick:()=>$(x),className:"flex items-center space-x-2 px-3 py-2 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:[i.jsx(sr,{size:16}),i.jsx("span",{children:"Edit"})]}),i.jsxs("button",{onClick:()=>U(x.id),className:"flex items-center space-x-2 px-3 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:[i.jsx(Rt,{size:16}),i.jsx("span",{children:"Delete"})]})]})]})}),i.jsx("div",{className:"flex-1 overflow-hidden",children:x?i.jsxs("div",{className:"h-full flex",children:[i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:E(x.content)})}),i.jsx("div",{className:"w-64 border-l border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-4 overflow-y-auto",children:V(x.content)})]}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"text-center",children:[i.jsx(yr,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Select Documentation"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Choose a document from the sidebar to start reading."})]})})})]}),y&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:Q}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:g?"Edit Documentation":"Create New Documentation"}),i.jsx("button",{onClick:Q,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),i.jsx("input",{type:"text",value:F.title,onChange:C=>H({...F,title:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Documentation title"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Slug"}),i.jsx("input",{type:"text",value:F.slug,onChange:C=>H({...F,slug:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"url-friendly-slug"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),i.jsx("select",{value:F.category,onChange:C=>H({...F,category:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:L.map(C=>i.jsxs("option",{value:C.id,children:[C.icon," ",C.label]},C.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Version"}),i.jsxs("select",{value:F.version_type,onChange:C=>H({...F,version_type:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"v4",children:"V4"}),i.jsx("option",{value:"v5",children:"V5"}),i.jsx("option",{value:"general",children:"General"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),i.jsxs("select",{value:F.status,onChange:C=>H({...F,status:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Meta Description"}),i.jsx("textarea",{value:F.meta_description,onChange:C=>H({...F,meta_description:C.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Brief description for search engines..."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content (Markdown supported)"}),i.jsx("textarea",{value:F.content,onChange:C=>H({...F,content:C.target.value}),rows:20,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:`Write your documentation content here...

Use ## for section headers to create automatic spoilers and table of contents.

## Installation
This section will automatically become a spoiler if it's long enough.

## Getting Started
Regular sections work normally.

## Advanced Configuration
Technical sections are automatically collapsed.`}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[" ",i.jsx("strong",{children:"Tip:"})," Use ## headers to create sections. Long sections (800+ chars) or technical sections will automatically become spoilers."]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:Q,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:B,disabled:o,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Is,{size:18}),i.jsx("span",{children:o?"Saving...":"Save"})]})]})]})]})}),I&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:M}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"sm:flex sm:items-start",children:[i.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:i.jsx(Rt,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),i.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[i.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete Documentation"}),i.jsx("div",{className:"mt-2",children:i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this documentation? This action cannot be undone."})})]})]}),i.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[i.jsx("button",{type:"button",onClick:()=>G(I),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),i.jsx("button",{type:"button",onClick:M,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(It,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Required"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Please sign in to access the documentation."})]})})},Uj=()=>{const{user:t,hasAccess:e}=ht(),{getPatchNotes:r,createPatchNote:s,updatePatchNote:a,deletePatchNote:n,loading:o}=Kt(),{logPatchNoteCreate:l,logPatchNoteUpdate:c,logPatchNoteDelete:d,logPatchNotePublish:u}=Ma(),[h,p]=T.useState(!1),[m,v]=T.useState(null),[y,k]=T.useState([]),[g,f]=T.useState(null),[x,w]=T.useState({version:"",title:"",content:"",status:"draft"});T.useEffect(()=>{S()},[]);const S=async()=>{const P=await r();k(P)},N=P=>{v(P),w({version:P.version,title:P.title,content:P.content,status:P.status}),p(!0)},_=async()=>{if(!t)return;let P=!1;m==null||m.status;const $=x.status==="published"&&(m==null?void 0:m.status)!=="published";m?(P=await a(m.id,x),P&&(await c(x.version,x.title),$&&(await u(x.version),te.patchNotePublished(x.version),F("New Patch Notes Published",`Version ${x.version} patch notes are now available: ${x.title}`,"success")))):(P=await s({...x,author_id:t.id,author_name:t.name}),P&&(await l(x.version,x.title),x.status==="published"&&(await u(x.version),te.patchNotePublished(x.version),F("New Patch Notes Published",`Version ${x.version} patch notes are now available: ${x.title}`,"success")))),P&&(await S(),b())},b=()=>{p(!1),v(null),w({version:"",title:"",content:"",status:"draft"})},j=async P=>{y.find($=>$.id===P)&&f(P)},z=async P=>{const $=y.find(B=>B.id===P);$&&(await n(P)?(await d($.version),await S(),te.warning(`Patch note for version ${$.version} deleted`)):te.error("Failed to delete patch note"),f(null))},I=()=>{f(null)},A=async P=>{const $=y.find(B=>B.id===P);!$||$.status==="published"||await a(P,{status:"published"})&&(await u($.version),await S(),te.patchNotePublished($.version),F("New Patch Notes Published",`Version ${$.version} patch notes are now available: ${$.title}`,"success"))},F=(P,$,B)=>{try{const Q=localStorage.getItem("prodomo_users");if(!Q)return;JSON.parse(Q).forEach(U=>{const G=`prodomo_notifications_${U.id}`,M=JSON.parse(localStorage.getItem(G)||"[]"),O=[{id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:P,message:$,type:B,read:!1,created_at:new Date().toISOString(),related_id:"patch_notes",action_url:"/patch-notes"},...M].slice(0,50);localStorage.setItem(G,JSON.stringify(O))}),console.log("Global notification created for all users:",P)}catch(Q){console.error("Failed to create global notification:",Q)}},H=P=>P==="published"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400":"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400",L=()=>e("Admin")||(t==null?void 0:t.grade)==="Support",Y=y.filter(P=>e("Admin")||(t==null?void 0:t.grade)==="Support"?!0:P.status==="published");return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Patch Notes"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:L()?"Create and manage patch notes for server updates.":"View the latest server updates and changes."})]}),L()&&i.jsxs("button",{onClick:()=>p(!0),className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ir,{size:18}),i.jsx("span",{children:"New Patch Note"})]})]}),h&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:b}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:m?"Edit Patch Note":"Create New Patch Note"}),i.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Version"}),i.jsx("input",{type:"text",value:x.version,onChange:P=>w({...x,version:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 2.1.4"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),i.jsxs("select",{value:x.status,onChange:P=>w({...x,status:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"})]}),x.status==="published"&&i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[i.jsx(ba,{className:"inline-block w-3 h-3 mr-1"}),"Publishing will notify all users"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),i.jsx("input",{type:"text",value:x.title,onChange:P=>w({...x,title:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter patch note title"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content (Markdown supported)"}),i.jsx("textarea",{value:x.content,onChange:P=>w({...x,content:P.target.value}),rows:12,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"Enter patch note content using Markdown..."})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:b,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:_,disabled:o,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Is,{size:18}),i.jsx("span",{children:o?"Saving...":"Save"})]})]})]})]})}),g&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:I}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"sm:flex sm:items-start",children:[i.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:i.jsx(Rt,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),i.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[i.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete Patch Note"}),i.jsx("div",{className:"mt-2",children:i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this patch note? This action cannot be undone."})})]})]}),i.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[i.jsx("button",{type:"button",onClick:()=>z(g),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),i.jsx("button",{type:"button",onClick:I,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})}),i.jsxs("div",{className:"space-y-4",children:[Y.map(P=>i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:P.title}),i.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 rounded-full",children:["v",P.version]}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${H(P.status)}`,children:P.status})]}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(ns,{size:16}),i.jsx("span",{children:P.author_name}),P.author_name.includes("Admin")&&i.jsxs("span",{className:"ml-1 px-1.5 py-0.5 text-xs font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400 flex items-center",children:[i.jsx(Se,{size:10,className:"mr-0.5"}),"Admin"]}),P.author_name.includes("Support")&&i.jsxs("span",{className:"ml-1 px-1.5 py-0.5 text-xs font-medium rounded-full bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400 flex items-center",children:[i.jsx(Os,{size:10,className:"mr-0.5"}),"Support"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(as,{size:16}),i.jsxs("span",{children:["Created ",new Date(P.created_at).toLocaleDateString()]})]}),P.updated_at!==P.created_at&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(sr,{size:16}),i.jsxs("span",{children:["Updated ",new Date(P.updated_at).toLocaleDateString()]})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[L()&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>N(P),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:i.jsx(sr,{size:18})}),P.status==="draft"&&i.jsx("button",{onClick:()=>A(P.id),className:"p-2 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Publish",children:i.jsx(ba,{size:18})}),i.jsx("button",{onClick:()=>j(P.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:i.jsx(Rt,{size:18})})]}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/patch-notes?v=${P.version}`),te.success("Link copied to clipboard")},className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"Copy link",children:i.jsx(Zx,{size:18})})]})]}),i.jsx("div",{className:"prose dark:prose-invert max-w-none",children:i.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:i.jsx("pre",{className:"whitespace-pre-wrap font-mono text-sm text-gray-900 dark:text-gray-100 overflow-x-auto",children:P.content})})}),i.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[i.jsx(dt,{size:16,className:"text-blue-500"}),i.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Related Downloads"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("button",{onClick:()=>{te.info("Navigating to Downloads section")},className:"flex items-center space-x-2 px-3 py-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg text-sm transition-colors duration-200",children:[i.jsx(dt,{size:14}),i.jsxs("span",{children:["Download v",P.version]})]}),i.jsxs("button",{onClick:()=>{te.info("Navigating to Documentation")},className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm transition-colors duration-200",children:[i.jsx(Jt,{size:14}),i.jsx("span",{children:"View Documentation"})]})]})]})]})},P.id)),Y.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(yr,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No patch notes"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:L()?"Get started by creating your first patch note.":"Patch notes will appear here when they are published."}),L()&&i.jsxs("button",{onClick:()=>p(!0),className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ir,{size:18}),i.jsx("span",{children:"Create Patch Note"})]})]})]})]})},Bj=({userId:t,onBack:e})=>{var r;const{user:s,hasAccess:a}=ht(),{getUsers:n,updateUser:o,updateUserNotes:l,getActivityLogs:c,getDownloadLogs:d,updateUserGrade:u,loading:h}=Kt(),[p,m]=T.useState(null),[v,y]=T.useState([]),[k,g]=T.useState(null),[f,x]=T.useState(""),[w,S]=T.useState("all"),[N,_]=T.useState(!1),[b,j]=T.useState(!1),[z,I]=T.useState(!0),[A,F]=T.useState(""),[H,L]=T.useState(!1),[Y,P]=T.useState(new Set),[$,B]=T.useState(new Set),[Q,U]=T.useState({name:"",email:""}),[G,M]=T.useState(!0),[O,R]=T.useState(null),[D,E]=T.useState([]),[V,X]=T.useState(!1),[C,K]=T.useState("");if(s!=null&&s.is_guest)return i.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:i.jsx("div",{className:"text-center max-w-md mx-auto",children:i.jsxs("div",{className:"p-8 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl shadow-lg",children:[i.jsx(Kr,{className:"mx-auto h-16 w-16 text-amber-500 mb-6"}),i.jsx("h3",{className:"text-xl font-bold text-amber-900 dark:text-amber-100 mb-3",children:"Access Restricted"}),i.jsx("p",{className:"text-amber-800 dark:text-amber-200 mb-6 leading-relaxed",children:"You are a guest user, you cannot view profiles."}),i.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 rounded-lg p-4 mb-6",children:i.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:[i.jsx("strong",{children:"Guest limitations:"}),i.jsx("br",{})," Cannot view your own profile",i.jsx("br",{})," Cannot view other users' profiles",i.jsx("br",{})," Profile access requires V4+ membership"]})}),e&&i.jsxs("button",{onClick:e,className:"flex items-center space-x-2 mx-auto px-6 py-3 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-colors duration-200 shadow-md hover:shadow-lg",children:[i.jsx(Do,{size:18}),i.jsx("span",{children:"Go Back to Dashboard"})]})]})})});T.useEffect(()=>{if(k){const ee=`prodomo_hidden_activities_${k}`,oe=`prodomo_deleted_activities_${k}`;try{const pe=localStorage.getItem(ee),cs=localStorage.getItem(oe);if(pe){const Ws=JSON.parse(pe);P(new Set(Ws))}else P(new Set);if(cs){const Ws=JSON.parse(cs);B(new Set(Ws))}else B(new Set)}catch(pe){console.error("Failed to load activity states:",pe),P(new Set),B(new Set)}}},[k]);const J=(ee,oe)=>{if(k){const pe=`prodomo_hidden_activities_${k}`,cs=`prodomo_deleted_activities_${k}`;try{localStorage.setItem(pe,JSON.stringify(Array.from(ee))),localStorage.setItem(cs,JSON.stringify(Array.from(oe)))}catch(Ws){console.error("Failed to save activity states:",Ws)}}};T.useEffect(()=>{t?g(t):s!=null&&s.id&&g(s.id)},[t,s==null?void 0:s.id]),T.useEffect(()=>{k&&kt(k)},[k]),T.useEffect(()=>{a("Admin")&&fe()},[a]),T.useEffect(()=>{k&&ne(k)},[k]);const ne=async ee=>{try{M(!0);const[oe,pe]=await Promise.all([c(50),d(50)]),cs=oe.filter(Qt=>Qt.user_id===ee).map(Qt=>({...Qt,type:"activity"})),Ws=pe.filter(Qt=>Qt.user_id===ee).map(Qt=>({...Qt,type:"download",action:`Downloaded ${Qt.file_name} v${Qt.file_version}`,details:`File: ${Qt.file_name}`})),pv=[...cs,...Ws].sort((Qt,mv)=>new Date(mv.created_at).getTime()-new Date(Qt.created_at).getTime()).slice(0,20);E(pv)}catch(oe){console.error("Failed to load user activities:",oe)}finally{M(!1)}},fe=async()=>{try{M(!0);const ee=(await n()).filter(oe=>!oe.is_guest);y(ee)}catch(ee){console.error("Failed to load users:",ee),R("Failed to load users. Please try again.")}finally{M(!1)}},kt=async ee=>{try{M(!0),R(null);const oe=(await n()).find(pe=>pe.id===ee);oe?(m(oe),U({name:oe.name,email:oe.email}),oe.admin_notes&&F(oe.admin_notes),K(oe.grade)):(R("User not found"),console.error("User not found with ID:",ee))}catch(oe){console.error("Failed to load user data:",oe),R("Failed to load user data. Please try again.")}finally{M(!1)}},$t=async()=>{if(p!=null&&p.id)try{await o(p.id,Q)?(m({...p,...Q}),_(!1),te.success("Profile updated successfully")):te.error("Failed to update profile")}catch(ee){console.error("Failed to update profile:",ee),te.error("Failed to update profile")}},Ct=()=>{U({name:(p==null?void 0:p.name)||"",email:(p==null?void 0:p.email)||""}),_(!1)},Ft=async()=>{if(p!=null&&p.id)try{await l(p.id,A)?(m({...p,admin_notes:A}),j(!1),te.success("Admin notes updated successfully")):te.error("Failed to update admin notes")}catch(ee){console.error("Failed to update admin notes:",ee),te.error("Failed to update admin notes")}},W=()=>{F((p==null?void 0:p.admin_notes)||""),j(!1)},ce=()=>{F((p==null?void 0:p.admin_notes)||""),j(!0)},Ie=ee=>{const oe=new Set(Y);oe.add(ee),P(oe),J(oe,$),te.info("Activity hidden from user view")},qs=ee=>{const oe=new Set($);oe.add(ee),B(oe),J(Y,oe),te.warning("Activity deleted")},En=ee=>{const oe=new Set(Y),pe=new Set($);oe.delete(ee),pe.delete(ee),P(oe),B(pe),J(oe,pe),te.success("Activity restored")},re=()=>{p&&(K(p.grade),X(!0))},he=async()=>{if(!(!(p!=null&&p.id)||C===p.grade))try{await u(p.id,C)?(m({...p,grade:C}),X(!1),te.success(`User grade updated to ${C}`)):te.error("Failed to update user grade")}catch(ee){console.error("Failed to update user grade:",ee),te.error("Failed to update user grade")}},ze=()=>{X(!1)},Ke=ee=>ee.type==="download"?i.jsx(dt,{size:16,className:"text-blue-500"}):ee.action.includes("login")||ee.action.includes("Sign")?i.jsx(ns,{size:16,className:"text-emerald-500"}):ee.action.includes("profile")||ee.action.includes("Updated")?i.jsx(sr,{size:16,className:"text-purple-500"}):i.jsx(nt,{size:16,className:"text-gray-500"}),Le=ee=>{switch(ee){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400 border-red-200 dark:border-red-800";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400 border-amber-200 dark:border-amber-800";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400 border-purple-200 dark:border-purple-800";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 border-blue-200 dark:border-blue-800";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400 border-gray-200 dark:border-gray-700"}},Vs=ee=>{switch(ee){case"Admin":return"Full system access with management privileges";case"Support":return"Bug management access with V4 download permissions";case"V5":return"Advanced access with beta features";case"V4":return"Standard access with stable releases";default:return"Basic access to public releases"}},ls=v.filter(ee=>{const oe=ee.name.toLowerCase().includes(f.toLowerCase())||ee.email.toLowerCase().includes(f.toLowerCase()),pe=w==="all"||ee.grade===w;return oe&&pe}),Pn=[{label:"Total Downloads",value:((r=p==null?void 0:p.total_downloads)==null?void 0:r.toString())||"0",icon:dt},{label:"Account Age",value:p!=null&&p.join_date?`${Math.floor((new Date().getTime()-new Date(p.join_date).getTime())/(1e3*60*60*24))} days`:"0 days",icon:as},{label:"Last Active",value:p!=null&&p.last_active?new Date(p.last_active).toLocaleDateString():"Unknown",icon:nt},{label:"Grade Level",value:(p==null?void 0:p.grade)||"Guest",icon:(p==null?void 0:p.grade)==="Support"?Os:Se}],kr=(p==null?void 0:p.id)===(s==null?void 0:s.id),Lr=kr||a("Admin"),Rr=a("Admin"),Tn=ee=>{const oe=new Date(ee),pe=Math.floor((new Date().getTime()-oe.getTime())/1e3);return pe<60?`${pe}s ago`:pe<3600?`${Math.floor(pe/60)}m ago`:pe<86400?`${Math.floor(pe/3600)}h ago`:`${Math.floor(pe/86400)}d ago`};return G?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):O?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Kr,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Error Loading Profile"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:O}),e&&i.jsxs("button",{onClick:e,className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Do,{size:18}),i.jsx("span",{children:"Go Back"})]})]})}):p?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[e&&i.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:i.jsx(Do,{size:20})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:kr?"My Profile":`${p.name}'s Profile`}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:kr?"Manage your account settings and preferences.":"View and manage user account information."})]})]}),a("Admin")&&i.jsxs("button",{onClick:()=>L(!H),className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(vr,{size:18}),i.jsx("span",{children:H?"Hide User List":"View All Users"})]})]}),a("Admin")&&H&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Select User to View"}),i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search users...",value:f,onChange:ee=>x(ee.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_a,{className:"text-gray-400 w-5 h-5"}),i.jsxs("select",{value:w,onChange:ee=>S(ee.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Grades"}),i.jsx("option",{value:"Guest",children:"Guest"}),i.jsx("option",{value:"V4",children:"V4"}),i.jsx("option",{value:"V5",children:"V5"}),i.jsx("option",{value:"Support",children:"Support"}),i.jsx("option",{value:"Admin",children:"Admin"})]})]})]})]}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:ls.map(ee=>i.jsx("button",{onClick:()=>{g(ee.id),L(!1)},className:`p-4 rounded-lg border-2 transition-all duration-200 text-left ${ee.id===k?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-sm",children:ee.name.charAt(0)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:[ee.name,ee.id===(s==null?void 0:s.id)&&i.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400",children:"(You)"})]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:ee.email}),i.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:ee.grade==="Support"?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Le("V4")}`,children:"V4"}),i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Le("Support")}`,children:"Support"})]}):i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Le(ee.grade)}`,children:ee.grade})})]})]})},ee.id))})})]}),a("Admin")&&i.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-900/10 dark:to-yellow-900/10 border border-amber-200 dark:border-amber-800 rounded-xl shadow-sm",children:i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ok,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),i.jsx("h3",{className:"text-lg font-semibold text-amber-900 dark:text-amber-100",children:"Admin Notes"}),i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200 rounded-full",children:"Admin Only"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>I(!z),className:"p-1 text-amber-600 dark:text-amber-400 hover:text-amber-800 dark:hover:text-amber-200 transition-colors duration-200",title:z?"Hide notes":"Show notes",children:z?i.jsx(kc,{size:16}):i.jsx(Jt,{size:16})}),!b&&i.jsx("button",{onClick:ce,className:"p-1 text-amber-600 dark:text-amber-400 hover:text-amber-800 dark:hover:text-amber-200 transition-colors duration-200",title:"Edit notes",children:i.jsx(sr,{size:16})})]})]}),z&&i.jsx("div",{className:"space-y-3",children:b?i.jsxs("div",{className:"space-y-3",children:[i.jsx("textarea",{value:A,onChange:ee=>F(ee.target.value),rows:4,className:"w-full px-3 py-2 border border-amber-300 dark:border-amber-700 rounded-lg bg-white dark:bg-amber-900/20 text-amber-900 dark:text-amber-100 placeholder-amber-500 dark:placeholder-amber-400 focus:ring-2 focus:ring-amber-500 focus:border-transparent resize-none",placeholder:"Add admin notes about this user... (behavior, preferences, special requirements, etc.)"}),i.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[i.jsx("button",{onClick:W,className:"px-3 py-1 text-sm text-amber-700 dark:text-amber-300 hover:text-amber-900 dark:hover:text-amber-100 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:Ft,disabled:h,className:"flex items-center space-x-1 px-3 py-1 bg-amber-600 hover:bg-amber-700 disabled:bg-amber-400 text-white rounded-lg text-sm font-medium transition-colors duration-200",children:[i.jsx(Is,{size:14}),i.jsx("span",{children:h?"Saving...":"Save"})]})]})]}):i.jsx("div",{className:"bg-amber-100/50 dark:bg-amber-900/20 rounded-lg p-3 border border-amber-200 dark:border-amber-700",children:p.admin_notes?i.jsx("p",{className:"text-amber-900 dark:text-amber-100 text-sm leading-relaxed whitespace-pre-wrap",children:p.admin_notes}):i.jsxs("div",{className:"flex items-center space-x-2 text-amber-600 dark:text-amber-400",children:[i.jsx(Kr,{size:16}),i.jsx("p",{className:"text-sm italic",children:"No admin notes for this user. Click the edit button to add notes."})]})})})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto",children:i.jsx("span",{className:"text-2xl font-bold text-white",children:p.name.charAt(0)})}),i.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-900 dark:text-white",children:p.name}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:p.email})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:p.grade==="Support"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`inline-flex items-center px-3 py-2 rounded-lg border ${Le("V4")}`,children:[i.jsx(Se,{size:16,className:"mr-2"}),i.jsx("span",{className:"font-medium",children:"V4 Access"})]}),i.jsxs("div",{className:`inline-flex items-center px-3 py-2 rounded-lg border ${Le("Support")}`,children:[i.jsx(Os,{size:16,className:"mr-2"}),i.jsx("span",{className:"font-medium",children:"Support Access"})]})]}):i.jsxs("div",{className:`inline-flex items-center px-3 py-2 rounded-lg border ${Le(p.grade)}`,children:[p.grade==="Admin"?i.jsx(Se,{size:16,className:"mr-2"}):p.grade==="Support"?i.jsx(Os,{size:16,className:"mr-2"}):i.jsx(Se,{size:16,className:"mr-2"}),i.jsxs("span",{className:"font-medium",children:[p.grade," Access"]})]})}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 text-center",children:Vs(p.grade)})]}),i.jsx("div",{className:"space-y-4",children:Pn.map((ee,oe)=>{const pe=ee.icon;return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(pe,{size:18,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:ee.label})]}),i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:ee.value})]},oe)})}),a("Admin")&&!kr&&i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("button",{onClick:re,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(sr,{size:16}),i.jsx("span",{children:"Change Access Level"})]})})]})}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Account Information"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:Lr?"Update personal information and contact details.":"View account information."})]}),Lr&&!N?i.jsxs("button",{onClick:()=>_(!0),className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:[i.jsx(sr,{size:16}),i.jsx("span",{children:"Edit"})]}):Lr&&N?i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("button",{onClick:Ct,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:[i.jsx(_e,{size:16}),i.jsx("span",{children:"Cancel"})]}),i.jsxs("button",{onClick:$t,disabled:h,className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Is,{size:16}),i.jsx("span",{children:h?"Saving...":"Save"})]})]}):null]})}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),N&&Lr?i.jsx("input",{type:"text",value:Q.name,onChange:ee=>U({...Q,name:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):i.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsx(ns,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:p.name})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),N&&Lr?i.jsx("input",{type:"email",value:Q.email,onChange:ee=>U({...Q,email:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):i.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsx(nn,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:p.email})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Member Since"}),i.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsx(as,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(p.join_date).toLocaleDateString()})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Active"}),i.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsx(qt,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(p.last_active).toLocaleDateString()})]})]})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:kr?"Your recent actions and downloads.":`${p.name}'s recent activity.`})]}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"space-y-4",children:D.length>0?D.map(ee=>{const oe=Y.has(ee.id),pe=$.has(ee.id);return(pe||oe)&&!Rr?null:i.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-lg transition-all duration-200 ${pe?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":oe?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800":"hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:Ke(ee)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("p",{className:`text-sm ${pe?"text-red-700 dark:text-red-300 line-through":oe?"text-amber-700 dark:text-amber-300":"text-gray-900 dark:text-white"}`,children:[ee.action,pe&&Rr&&i.jsx("span",{className:"ml-2 text-xs",children:"(Deleted by admin)"}),oe&&Rr&&i.jsx("span",{className:"ml-2 text-xs",children:"(Hidden from user)"})]}),ee.details&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:ee.details}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:Tn(ee.created_at)})]}),Rr&&!kr&&i.jsxs("div",{className:"flex items-center space-x-1",children:[!pe&&!oe&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ie(ee.id),className:"p-1 text-amber-500 hover:text-amber-700 dark:hover:text-amber-400 transition-colors duration-200",title:"Hide from user",children:i.jsx(dk,{size:14})}),i.jsx("button",{onClick:()=>qs(ee.id),className:"p-1 text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors duration-200",title:"Delete activity",children:i.jsx(Rt,{size:14})})]}),(pe||oe)&&i.jsx("button",{onClick:()=>En(ee.id),className:"p-1 text-emerald-500 hover:text-emerald-700 dark:hover:text-emerald-400 transition-colors duration-200",title:"Restore activity",children:i.jsx(nk,{size:14})})]})]},ee.id)}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(nt,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No recent activity"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Activity will appear here as it happens."})]})})})]})]})]}),V&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:ze}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Change Access Level"}),i.jsx("button",{onClick:ze,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:p.name.charAt(0)})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:p.name}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.email})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Access Level"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:p.grade==="Support"?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Le("V4")}`,children:"V4"}),i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Le("Support")}`,children:"Support"})]}):i.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Le(p.grade)}`,children:p.grade})}),i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Access Level"}),i.jsxs("select",{value:C,onChange:ee=>K(ee.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"V4",children:"V4 - Standard access"}),i.jsx("option",{value:"V5",children:"V5 - Advanced features"}),i.jsx("option",{value:"Support",children:"Support - Bug management access"}),i.jsx("option",{value:"Admin",children:"Admin - Full system access"})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(Se,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Access Level Information"}),i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:[C==="Admin"&&"Admin users have full access to all system features and management capabilities.",C==="Support"&&"Support users have V4 download access plus the ability to manage and respond to bug reports.",C==="V5"&&"V5 users have access to advanced features and beta versions.",C==="V4"&&"V4 users have standard access to stable releases."]})]})]})})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:ze,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:he,disabled:h||C===p.grade,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Is,{size:18}),i.jsx("span",{children:h?"Saving...":"Save Changes"})]})]})]})]})})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Kr,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"User Not Found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"The requested user profile could not be found."}),e&&i.jsxs("button",{onClick:e,className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Do,{size:18}),i.jsx("span",{children:"Go Back"})]})]})})},qj=()=>{const{isDark:t,toggleTheme:e}=ob(),[r,s]=T.useState({email:!0,push:!1,downloads:!0,security:!0,updates:!0}),[a,n]=T.useState(!1),[o,l]=T.useState({current:"",new:"",confirm:""}),[c,d]=T.useState({language:"en",timezone:"UTC",downloadPath:"/downloads",autoUpdate:!0,betaAccess:!1}),u=(v,y)=>{s(k=>({...k,[v]:y}))},h=(v,y)=>{d(k=>({...k,[v]:y}))},p=()=>{if(o.new!==o.confirm){alert("New passwords do not match!");return}alert("Password changed successfully!"),l({current:"",new:"",confirm:""})},m=()=>{alert("Settings saved successfully!")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Settings"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Manage your account preferences and system settings."})]}),i.jsxs("button",{onClick:m,className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Is,{size:18}),i.jsx("span",{children:"Save Changes"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:t?i.jsx(sb,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}):i.jsx(rb,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Appearance"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Customize your visual experience"})]})]})}),i.jsx("div",{className:"p-6 space-y-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Theme"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choose your preferred theme"})]}),i.jsx("button",{onClick:e,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${t?"bg-blue-600":"bg-gray-200"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${t?"translate-x-6":"translate-x-1"}`})})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/20 rounded-lg",children:i.jsx(ba,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notifications"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your notification preferences"})]})]})}),i.jsx("div",{className:"p-6 space-y-4",children:[{key:"email",label:"Email Notifications",desc:"Receive updates via email",icon:nn},{key:"push",label:"Push Notifications",desc:"Browser push notifications",icon:ik},{key:"downloads",label:"Download Alerts",desc:"Notify when downloads complete",icon:dt},{key:"security",label:"Security Alerts",desc:"Important security notifications",icon:Se},{key:"updates",label:"Update Notifications",desc:"New version announcements",icon:It}].map(v=>{const y=v.icon;return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(y,{size:16,className:"text-gray-400"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.label}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:v.desc})]})]}),i.jsx("button",{onClick:()=>u(v.key,!r[v.key]),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${r[v.key]?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${r[v.key]?"translate-x-6":"translate-x-1"}`})})]},v.key)})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/20 rounded-lg",children:i.jsx(Se,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Security"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your account security"})]})]})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:a?"text":"password",value:o.current,onChange:v=>l({...o,current:v.target.value}),className:"w-full px-3 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter current password"}),i.jsx("button",{type:"button",onClick:()=>n(!a),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:a?i.jsx(kc,{size:16,className:"text-gray-400"}):i.jsx(Jt,{size:16,className:"text-gray-400"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),i.jsx("input",{type:"password",value:o.new,onChange:v=>l({...o,new:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),i.jsx("input",{type:"password",value:o.confirm,onChange:v=>l({...o,confirm:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm new password"})]}),i.jsxs("button",{onClick:p,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ui,{size:16}),i.jsx("span",{children:"Change Password"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:i.jsx(Xh,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Preferences"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Customize your experience"})]})]})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Language"}),i.jsxs("select",{value:c.language,onChange:v=>h("language",v.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"en",children:"English"}),i.jsx("option",{value:"es",children:"Spanish"}),i.jsx("option",{value:"fr",children:"French"}),i.jsx("option",{value:"de",children:"German"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Timezone"}),i.jsxs("select",{value:c.timezone,onChange:v=>h("timezone",v.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"UTC",children:"UTC"}),i.jsx("option",{value:"EST",children:"Eastern Standard Time"}),i.jsx("option",{value:"PST",children:"Pacific Standard Time"}),i.jsx("option",{value:"CET",children:"Central European Time"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Default Download Path"}),i.jsx("input",{type:"text",value:c.downloadPath,onChange:v=>h("downloadPath",v.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Auto-update"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Automatically check for updates"})]}),i.jsx("button",{onClick:()=>h("autoUpdate",!c.autoUpdate),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${c.autoUpdate?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${c.autoUpdate?"translate-x-6":"translate-x-1"}`})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Beta Access"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Access to beta versions"})]}),i.jsx("button",{onClick:()=>h("betaAccess",!c.betaAccess),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${c.betaAccess?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${c.betaAccess?"translate-x-6":"translate-x-1"}`})})]})]})]})]})]})};var Fb={exports:{}},Vj="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Wj=Vj,Hj=Wj;function Ub(){}function Bb(){}Bb.resetWarningCache=Ub;var Jj=function(){function t(s,a,n,o,l,c){if(c!==Hj){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Bb,resetWarningCache:Ub};return r.PropTypes=r,r};Fb.exports=Jj();var Yj=Fb.exports;const Ce=rh(Yj);function Ea(t,e,r,s){function a(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):a(u.value).then(l,c)}d((s=s.apply(t,[])).next())})}const Gj=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function yn(t,e,r){const s=Kj(t),{webkitRelativePath:a}=t,n=typeof e=="string"?e:typeof a=="string"&&a.length>0?a:`./${t.name}`;return typeof s.path!="string"&&ng(s,"path",n),ng(s,"relativePath",n),s}function Kj(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),s=Gj.get(r);s&&Object.defineProperty(t,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return t}function ng(t,e,r){Object.defineProperty(t,e,{value:r,writable:!1,configurable:!1,enumerable:!0})}const Qj=[".DS_Store","Thumbs.db"];function Xj(t){return Ea(this,void 0,void 0,function*(){return Gl(t)&&Zj(t.dataTransfer)?s_(t.dataTransfer,t.type):e_(t)?t_(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?r_(t):[]})}function Zj(t){return Gl(t)}function e_(t){return Gl(t)&&Gl(t.target)}function Gl(t){return typeof t=="object"&&t!==null}function t_(t){return Lu(t.target.files).map(e=>yn(e))}function r_(t){return Ea(this,void 0,void 0,function*(){return(yield Promise.all(t.map(e=>e.getFile()))).map(e=>yn(e))})}function s_(t,e){return Ea(this,void 0,void 0,function*(){if(t.items){const r=Lu(t.items).filter(a=>a.kind==="file");if(e!=="drop")return r;const s=yield Promise.all(r.map(a_));return ig(qb(s))}return ig(Lu(t.files).map(r=>yn(r)))})}function ig(t){return t.filter(e=>Qj.indexOf(e.name)===-1)}function Lu(t){if(t===null)return[];const e=[];for(let r=0;r<t.length;r++){const s=t[r];e.push(s)}return e}function a_(t){if(typeof t.webkitGetAsEntry!="function")return og(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?Vb(e):og(t,e)}function qb(t){return t.reduce((e,r)=>[...e,...Array.isArray(r)?qb(r):[r]],[])}function og(t,e){return Ea(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const a=yield t.getAsFileSystemHandle();if(a===null)throw new Error(`${t} is not a File`);if(a!==void 0){const n=yield a.getFile();return n.handle=a,yn(n)}}const s=t.getAsFile();if(!s)throw new Error(`${t} is not a File`);return yn(s,(r=e==null?void 0:e.fullPath)!==null&&r!==void 0?r:void 0)})}function n_(t){return Ea(this,void 0,void 0,function*(){return t.isDirectory?Vb(t):i_(t)})}function Vb(t){const e=t.createReader();return new Promise((r,s)=>{const a=[];function n(){e.readEntries(o=>Ea(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(n_));a.push(l),n()}else try{const l=yield Promise.all(a);r(l)}catch(l){s(l)}}),o=>{s(o)})}n()})}function i_(t){return Ea(this,void 0,void 0,function*(){return new Promise((e,r)=>{t.file(s=>{const a=yn(s,t.fullPath);e(a)},s=>{r(s)})})})}var gd=function(t,e){if(t&&e){var r=Array.isArray(e)?e:e.split(",");if(r.length===0)return!0;var s=t.name||"",a=(t.type||"").toLowerCase(),n=a.replace(/\/.*$/,"");return r.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?s.toLowerCase().endsWith(l):l.endsWith("/*")?n===l.replace(/\/.*$/,""):a===l})}return!0};function lg(t){return c_(t)||l_(t)||Hb(t)||o_()}function o_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l_(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function c_(t){if(Array.isArray(t))return Ru(t)}function cg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function dg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cg(Object(r),!0).forEach(function(s){Wb(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cg(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Wb(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qi(t,e){return h_(t)||u_(t,e)||Hb(t,e)||d_()}function d_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hb(t,e){if(t){if(typeof t=="string")return Ru(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ru(t,e)}}function Ru(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function u_(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s=[],a=!0,n=!1,o,l;try{for(r=r.call(t);!(a=(o=r.next()).done)&&(s.push(o.value),!(e&&s.length===e));a=!0);}catch(c){n=!0,l=c}finally{try{!a&&r.return!=null&&r.return()}finally{if(n)throw l}}return s}}function h_(t){if(Array.isArray(t))return t}var p_=typeof gd=="function"?gd:gd.default,m_="file-invalid-type",g_="file-too-large",f_="file-too-small",x_="too-many-files",b_=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=t.split(","),r=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:m_,message:"File type must be ".concat(r)}},ug=function(t){return{code:g_,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},hg=function(t){return{code:f_,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},y_={code:x_,message:"Too many files"};function Jb(t,e){var r=t.type==="application/x-moz-file"||p_(t,e);return[r,r?null:b_(e)]}function Yb(t,e,r){if(sa(t.size))if(sa(e)&&sa(r)){if(t.size>r)return[!1,ug(r)];if(t.size<e)return[!1,hg(e)]}else{if(sa(e)&&t.size<e)return[!1,hg(e)];if(sa(r)&&t.size>r)return[!1,ug(r)]}return[!0,null]}function sa(t){return t!=null}function v_(t){var e=t.files,r=t.accept,s=t.minSize,a=t.maxSize,n=t.multiple,o=t.maxFiles,l=t.validator;return!n&&e.length>1||n&&o>=1&&e.length>o?!1:e.every(function(c){var d=Jb(c,r),u=qi(d,1),h=u[0],p=Yb(c,s,a),m=qi(p,1),v=m[0],y=l?l(c):null;return h&&v&&!y})}function Kl(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Ro(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function pg(t){t.preventDefault()}function w_(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function k_(t){return t.indexOf("Edge/")!==-1}function j_(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return w_(t)||k_(t)}function _r(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(s){for(var a=arguments.length,n=new Array(a>1?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];return e.some(function(l){return!Kl(s)&&l&&l.apply(void 0,[s].concat(n)),Kl(s)})}}function __(){return"showOpenFilePicker"in window}function N_(t){if(sa(t)){var e=Object.entries(t).filter(function(r){var s=qi(r,2),a=s[0],n=s[1],o=!0;return Gb(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(n)||!n.every(Kb))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(r,s){var a=qi(s,2),n=a[0],o=a[1];return dg(dg({},r),{},Wb({},n,o))},{});return[{description:"Files",accept:e}]}return t}function S_(t){if(sa(t))return Object.entries(t).reduce(function(e,r){var s=qi(r,2),a=s[0],n=s[1];return[].concat(lg(e),[a],lg(n))},[]).filter(function(e){return Gb(e)||Kb(e)}).join(",")}function C_(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function M_(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function Gb(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function Kb(t){return/^.*\.[\w]+$/.test(t)}var E_=["children"],P_=["open"],T_=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],D_=["refKey","onChange","onClick"];function O_(t){return z_(t)||A_(t)||Qb(t)||I_()}function I_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A_(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function z_(t){if(Array.isArray(t))return $u(t)}function fd(t,e){return $_(t)||R_(t,e)||Qb(t,e)||L_()}function L_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qb(t,e){if(t){if(typeof t=="string")return $u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $u(t,e)}}function $u(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function R_(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s=[],a=!0,n=!1,o,l;try{for(r=r.call(t);!(a=(o=r.next()).done)&&(s.push(o.value),!(e&&s.length===e));a=!0);}catch(c){n=!0,l=c}finally{try{!a&&r.return!=null&&r.return()}finally{if(n)throw l}}return s}}function $_(t){if(Array.isArray(t))return t}function mg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function Re(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mg(Object(r),!0).forEach(function(s){Fu(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mg(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Fu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ql(t,e){if(t==null)return{};var r=F_(t,e),s,a;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function F_(t,e){if(t==null)return{};var r={},s=Object.keys(t),a,n;for(n=0;n<s.length;n++)a=s[n],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}var ip=T.forwardRef(function(t,e){var r=t.children,s=Ql(t,E_),a=Zb(s),n=a.open,o=Ql(a,P_);return T.useImperativeHandle(e,function(){return{open:n}},[n]),oh.createElement(T.Fragment,null,r(Re(Re({},o),{},{open:n})))});ip.displayName="Dropzone";var Xb={disabled:!1,getFilesFromEvent:Xj,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};ip.defaultProps=Xb;ip.propTypes={children:Ce.func,accept:Ce.objectOf(Ce.arrayOf(Ce.string)),multiple:Ce.bool,preventDropOnDocument:Ce.bool,noClick:Ce.bool,noKeyboard:Ce.bool,noDrag:Ce.bool,noDragEventsBubbling:Ce.bool,minSize:Ce.number,maxSize:Ce.number,maxFiles:Ce.number,disabled:Ce.bool,getFilesFromEvent:Ce.func,onFileDialogCancel:Ce.func,onFileDialogOpen:Ce.func,useFsAccessApi:Ce.bool,autoFocus:Ce.bool,onDragEnter:Ce.func,onDragLeave:Ce.func,onDragOver:Ce.func,onDrop:Ce.func,onDropAccepted:Ce.func,onDropRejected:Ce.func,onError:Ce.func,validator:Ce.func};var Uu={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Zb(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Re(Re({},Xb),t),r=e.accept,s=e.disabled,a=e.getFilesFromEvent,n=e.maxSize,o=e.minSize,l=e.multiple,c=e.maxFiles,d=e.onDragEnter,u=e.onDragLeave,h=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,v=e.onDropRejected,y=e.onFileDialogCancel,k=e.onFileDialogOpen,g=e.useFsAccessApi,f=e.autoFocus,x=e.preventDropOnDocument,w=e.noClick,S=e.noKeyboard,N=e.noDrag,_=e.noDragEventsBubbling,b=e.onError,j=e.validator,z=T.useMemo(function(){return S_(r)},[r]),I=T.useMemo(function(){return N_(r)},[r]),A=T.useMemo(function(){return typeof k=="function"?k:gg},[k]),F=T.useMemo(function(){return typeof y=="function"?y:gg},[y]),H=T.useRef(null),L=T.useRef(null),Y=T.useReducer(U_,Uu),P=fd(Y,2),$=P[0],B=P[1],Q=$.isFocused,U=$.isFileDialogActive,G=T.useRef(typeof window<"u"&&window.isSecureContext&&g&&__()),M=function(){!G.current&&U&&setTimeout(function(){if(L.current){var re=L.current.files;re.length||(B({type:"closeDialog"}),F())}},300)};T.useEffect(function(){return window.addEventListener("focus",M,!1),function(){window.removeEventListener("focus",M,!1)}},[L,U,F,G]);var O=T.useRef([]),R=function(re){H.current&&H.current.contains(re.target)||(re.preventDefault(),O.current=[])};T.useEffect(function(){return x&&(document.addEventListener("dragover",pg,!1),document.addEventListener("drop",R,!1)),function(){x&&(document.removeEventListener("dragover",pg),document.removeEventListener("drop",R))}},[H,x]),T.useEffect(function(){return!s&&f&&H.current&&H.current.focus(),function(){}},[H,f,s]);var D=T.useCallback(function(re){b?b(re):console.error(re)},[b]),E=T.useCallback(function(re){re.preventDefault(),re.persist(),ce(re),O.current=[].concat(O_(O.current),[re.target]),Ro(re)&&Promise.resolve(a(re)).then(function(he){if(!(Kl(re)&&!_)){var ze=he.length,Ke=ze>0&&v_({files:he,accept:z,minSize:o,maxSize:n,multiple:l,maxFiles:c,validator:j}),Le=ze>0&&!Ke;B({isDragAccept:Ke,isDragReject:Le,isDragActive:!0,type:"setDraggedFiles"}),d&&d(re)}}).catch(function(he){return D(he)})},[a,d,D,_,z,o,n,l,c,j]),V=T.useCallback(function(re){re.preventDefault(),re.persist(),ce(re);var he=Ro(re);if(he&&re.dataTransfer)try{re.dataTransfer.dropEffect="copy"}catch{}return he&&h&&h(re),!1},[h,_]),X=T.useCallback(function(re){re.preventDefault(),re.persist(),ce(re);var he=O.current.filter(function(Ke){return H.current&&H.current.contains(Ke)}),ze=he.indexOf(re.target);ze!==-1&&he.splice(ze,1),O.current=he,!(he.length>0)&&(B({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ro(re)&&u&&u(re))},[H,u,_]),C=T.useCallback(function(re,he){var ze=[],Ke=[];re.forEach(function(Le){var Vs=Jb(Le,z),ls=fd(Vs,2),Pn=ls[0],kr=ls[1],Lr=Yb(Le,o,n),Rr=fd(Lr,2),Tn=Rr[0],ee=Rr[1],oe=j?j(Le):null;if(Pn&&Tn&&!oe)ze.push(Le);else{var pe=[kr,ee];oe&&(pe=pe.concat(oe)),Ke.push({file:Le,errors:pe.filter(function(cs){return cs})})}}),(!l&&ze.length>1||l&&c>=1&&ze.length>c)&&(ze.forEach(function(Le){Ke.push({file:Le,errors:[y_]})}),ze.splice(0)),B({acceptedFiles:ze,fileRejections:Ke,isDragReject:Ke.length>0,type:"setFiles"}),p&&p(ze,Ke,he),Ke.length>0&&v&&v(Ke,he),ze.length>0&&m&&m(ze,he)},[B,l,z,o,n,c,p,m,v,j]),K=T.useCallback(function(re){re.preventDefault(),re.persist(),ce(re),O.current=[],Ro(re)&&Promise.resolve(a(re)).then(function(he){Kl(re)&&!_||C(he,re)}).catch(function(he){return D(he)}),B({type:"reset"})},[a,C,D,_]),J=T.useCallback(function(){if(G.current){B({type:"openDialog"}),A();var re={multiple:l,types:I};window.showOpenFilePicker(re).then(function(he){return a(he)}).then(function(he){C(he,null),B({type:"closeDialog"})}).catch(function(he){C_(he)?(F(he),B({type:"closeDialog"})):M_(he)?(G.current=!1,L.current?(L.current.value=null,L.current.click()):D(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):D(he)});return}L.current&&(B({type:"openDialog"}),A(),L.current.value=null,L.current.click())},[B,A,F,g,C,D,I,l]),ne=T.useCallback(function(re){!H.current||!H.current.isEqualNode(re.target)||(re.key===" "||re.key==="Enter"||re.keyCode===32||re.keyCode===13)&&(re.preventDefault(),J())},[H,J]),fe=T.useCallback(function(){B({type:"focus"})},[]),kt=T.useCallback(function(){B({type:"blur"})},[]),$t=T.useCallback(function(){w||(j_()?setTimeout(J,0):J())},[w,J]),Ct=function(re){return s?null:re},Ft=function(re){return S?null:Ct(re)},W=function(re){return N?null:Ct(re)},ce=function(re){_&&re.stopPropagation()},Ie=T.useMemo(function(){return function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=re.refKey,ze=he===void 0?"ref":he,Ke=re.role,Le=re.onKeyDown,Vs=re.onFocus,ls=re.onBlur,Pn=re.onClick,kr=re.onDragEnter,Lr=re.onDragOver,Rr=re.onDragLeave,Tn=re.onDrop,ee=Ql(re,T_);return Re(Re(Fu({onKeyDown:Ft(_r(Le,ne)),onFocus:Ft(_r(Vs,fe)),onBlur:Ft(_r(ls,kt)),onClick:Ct(_r(Pn,$t)),onDragEnter:W(_r(kr,E)),onDragOver:W(_r(Lr,V)),onDragLeave:W(_r(Rr,X)),onDrop:W(_r(Tn,K)),role:typeof Ke=="string"&&Ke!==""?Ke:"presentation"},ze,H),!s&&!S?{tabIndex:0}:{}),ee)}},[H,ne,fe,kt,$t,E,V,X,K,S,N,s]),qs=T.useCallback(function(re){re.stopPropagation()},[]),En=T.useMemo(function(){return function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=re.refKey,ze=he===void 0?"ref":he,Ke=re.onChange,Le=re.onClick,Vs=Ql(re,D_),ls=Fu({accept:z,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ct(_r(Ke,K)),onClick:Ct(_r(Le,qs)),tabIndex:-1},ze,L);return Re(Re({},ls),Vs)}},[L,r,l,K,s]);return Re(Re({},$),{},{isFocused:Q&&!s,getRootProps:Ie,getInputProps:En,rootRef:H,inputRef:L,open:Ct(J)})}function U_(t,e){switch(e.type){case"focus":return Re(Re({},t),{},{isFocused:!0});case"blur":return Re(Re({},t),{},{isFocused:!1});case"openDialog":return Re(Re({},Uu),{},{isFileDialogActive:!0});case"closeDialog":return Re(Re({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Re(Re({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Re(Re({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Re({},Uu);default:return t}}function gg(){}const B_=()=>{const{user:t,hasAccess:e}=ht(),{getServerFiles:r,createServerFile:s,updateServerFile:a,deleteServerFile:n,uploadFile:o,loading:l,error:c,setError:d}=Kt(),{logFileUpload:u,logFileDelete:h}=Ma(),[p,m]=T.useState([]),[v,y]=T.useState(!1),[k,g]=T.useState(null),[f,x]=T.useState(null),[w,S]=T.useState({name:"",version:"",description:"",file_type:"server",min_grade:"Guest",status:"active",changelog:[""],file_url:"",upload_method:"direct",notify_users:!0}),[N,_]=T.useState(null);T.useEffect(()=>{b()},[]);const b=async()=>{const E=await r();m(E)},j=E=>{E.length>0&&(_(E[0]),S(V=>({...V,upload_method:"direct"})))},{getRootProps:z,getInputProps:I,isDragActive:A}=Zb({onDrop:j,accept:{"application/zip":[".zip"],"application/x-rar-compressed":[".rar"],"application/x-7z-compressed":[".7z"],"application/octet-stream":[".jar",".exe"],"text/plain":[".txt"],"application/pdf":[".pdf"]},maxFiles:1}),F=E=>{g(E),S({name:E.name,version:E.version,description:E.description,file_type:E.file_type,min_grade:E.min_grade,status:E.status,changelog:E.changelog||[""],file_url:E.file_url,upload_method:"external",notify_users:!0}),y(!0)},H=(E,V)=>{try{if(!w.notify_users)return;const X=localStorage.getItem("prodomo_users");if(!X)return;JSON.parse(X).forEach(C=>{const K=C.grade,J=E.min_grade,ne=["Guest","V4","V5","Admin"],fe=ne.indexOf(K),kt=ne.indexOf(J);if(fe<kt)return;const $t=`prodomo_notifications_${C.id}`,Ct=JSON.parse(localStorage.getItem($t)||"[]"),Ft=[{id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:V?"New File Available":"File Updated",message:V?`${E.name} v${E.version} is now available for download`:`${E.name} has been updated to v${E.version}`,type:"info",read:!1,created_at:new Date().toISOString(),related_id:E.id,action_url:"/downloads"},...Ct].slice(0,50);localStorage.setItem($t,JSON.stringify(Ft))}),console.log(`File ${V?"upload":"update"} notification created for users`)}catch(X){console.error("Failed to create file notification:",X)}},L=async()=>{try{let E=(k==null?void 0:k.file_url)||w.file_url,V=(k==null?void 0:k.file_size)||0;if(w.upload_method==="direct"&&N){const K=`${Date.now()}-${N.name}`,J=await o(N,"server-files",K);if(J)E=J,V=N.size,te.upload(N.name);else throw new Error("Failed to upload file")}else w.upload_method!=="direct"&&w.file_url&&(E=w.file_url,V=(k==null?void 0:k.file_size)||50*1024*1024);if(!E)throw new Error("Please provide a file or download URL");const X={...w,file_url:E,file_size:V,changelog:w.changelog.filter(K=>K.trim()!==""),created_by:(t==null?void 0:t.id)||"",download_count:(k==null?void 0:k.download_count)||0};let C=!1;if(k)C=await a(k.id,X),C&&(te.success(`${w.name} has been updated`),await u(w.name,"update"),H({...X,id:k.id},!1));else if(C=await s(X),C){te.success(`${w.name} has been uploaded`),await u(w.name,w.file_type);const K=(await r()).find(J=>J.name===w.name&&J.version===w.version);K&&H({...X,id:K.id},!0)}C&&(await b(),Y())}catch(E){const V=E instanceof Error?E.message:"An error occurred";d(V),te.error(V)}},Y=()=>{y(!1),g(null),_(null),S({name:"",version:"",description:"",file_type:"server",min_grade:"Guest",status:"active",changelog:[""],file_url:"",upload_method:"direct",notify_users:!0})},P=async E=>{x(E.id)},$=async E=>{const V=p.find(X=>X.id===E);V&&(await n(E)?(await b(),te.fileDeleted(V.name),await h(V.name)):te.error("Failed to delete file"),x(null))},B=()=>{x(null)},Q=()=>{S({...w,changelog:[...w.changelog,""]})},U=(E,V)=>{const X=[...w.changelog];X[E]=V,S({...w,changelog:X})},G=E=>{const V=w.changelog.filter((X,C)=>C!==E);S({...w,changelog:V})},M=E=>{switch(E){case"server":return i.jsx(ya,{className:"w-5 h-5 text-blue-500"});case"plugin":return i.jsx(ak,{className:"w-5 h-5 text-purple-500"});case"archive":return i.jsx(H1,{className:"w-5 h-5 text-amber-500"});case"documentation":return i.jsx(yr,{className:"w-5 h-5 text-emerald-500"});default:return i.jsx(K1,{className:"w-5 h-5 text-gray-500"})}},O=E=>{switch(E){case"active":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400";case"beta":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"deprecated":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},R=E=>{if(E===0)return"0 Bytes";const V=1024,X=["Bytes","KB","MB","GB"],C=Math.floor(Math.log(E)/Math.log(V));return parseFloat((E/Math.pow(V,C)).toFixed(2))+" "+X[C]},D=E=>{switch(E){case"google_drive":return i.jsx(Qr,{className:"w-5 h-5 text-blue-500"});case"mega":return i.jsx(Qr,{className:"w-5 h-5 text-red-500"});case"external":return i.jsx(Rm,{className:"w-5 h-5 text-purple-500"});default:return i.jsx(_u,{className:"w-5 h-5 text-gray-500"})}};return e("Admin")?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"File Manager"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Upload and manage server files, updates, and archives."})]}),i.jsxs("button",{onClick:()=>y(!0),className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ir,{size:18}),i.jsx("span",{children:"Add File"})]})]}),c&&i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(It,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:c})]}),i.jsx("button",{onClick:()=>d(null),className:"text-red-400 hover:text-red-600 dark:hover:text-red-300",children:i.jsx(_e,{size:16})})]})}),v&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:Y}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:k?"Edit File":"Upload New File"}),i.jsx("button",{onClick:Y,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Upload Method"}),i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[{id:"direct",label:"Direct Upload",icon:_u,desc:"Upload file directly"},{id:"google_drive",label:"Google Drive",icon:Qr,desc:"Share link from Google Drive"},{id:"mega",label:"MEGA",icon:Qr,desc:"Share link from MEGA"},{id:"external",label:"External Link",icon:Rm,desc:"Any external download link"}].map(E=>{const V=E.icon,X=w.upload_method===E.id;return i.jsxs("button",{type:"button",onClick:()=>S({...w,upload_method:E.id}),className:`p-4 rounded-lg border-2 transition-all duration-200 ${X?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[i.jsx(V,{className:`w-6 h-6 mx-auto mb-2 ${X?"text-blue-500":"text-gray-400"}`}),i.jsx("p",{className:`text-sm font-medium ${X?"text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300"}`,children:E.label}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:E.desc})]},E.id)})})]}),w.upload_method==="direct"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload File"}),i.jsxs("div",{...z(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors duration-200 ${A?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,children:[i.jsx("input",{...I()}),i.jsx(Zh,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),N?i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N.name}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:R(N.size)})]}):i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Drag and drop a file here, or click to select"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Supports: ZIP, RAR, 7Z, JAR, EXE, TXT, PDF"})]})]})]}):i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[w.upload_method==="google_drive"&&"Google Drive Share Link",w.upload_method==="mega"&&"MEGA Share Link",w.upload_method==="external"&&"External Download URL"]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"url",value:w.file_url,onChange:E=>S({...w,file_url:E.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:w.upload_method==="google_drive"?"https://drive.google.com/file/d/...":w.upload_method==="mega"?"https://mega.nz/file/...":"https://example.com/download/file.zip"}),i.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:D(w.upload_method)})]}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[w.upload_method==="google_drive"&&'Make sure the file is publicly accessible or shared with "Anyone with the link"',w.upload_method==="mega"&&"Use the public share link from MEGA",w.upload_method==="external"&&"Any direct download link that users can access"]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),i.jsx("input",{type:"text",value:w.name,onChange:E=>S({...w,name:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Prodomo Server"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Version"}),i.jsx("input",{type:"text",value:w.version,onChange:E=>S({...w,version:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 2.1.4"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"File Type"}),i.jsxs("select",{value:w.file_type,onChange:E=>S({...w,file_type:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"server",children:"Server"}),i.jsx("option",{value:"plugin",children:"Plugin"}),i.jsx("option",{value:"archive",children:"Archive"}),i.jsx("option",{value:"documentation",children:"Documentation"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Minimum Grade"}),i.jsxs("select",{value:w.min_grade,onChange:E=>S({...w,min_grade:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"Guest",children:"Guest"}),i.jsx("option",{value:"V4",children:"V4"}),i.jsx("option",{value:"V5",children:"V5"}),i.jsx("option",{value:"Admin",children:"Admin"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),i.jsxs("select",{value:w.status,onChange:E=>S({...w,status:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"beta",children:"Beta"}),i.jsx("option",{value:"deprecated",children:"Deprecated"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notification Settings"}),i.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[i.jsx("input",{type:"checkbox",id:"notify_users",checked:w.notify_users,onChange:E=>S({...w,notify_users:E.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsxs("label",{htmlFor:"notify_users",className:"text-sm text-gray-700 dark:text-gray-300",children:["Notify users about this ",k?"update":"new file"]})]}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center",children:[i.jsx(ba,{size:12,className:"mr-1 text-blue-500"}),"Users with appropriate access level will be notified"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),i.jsx("textarea",{value:w.description,onChange:E=>S({...w,description:E.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe this file..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Changelog"}),i.jsxs("div",{className:"space-y-2",children:[w.changelog.map((E,V)=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"text",value:E,onChange:X=>U(V,X.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"What's new in this version..."}),i.jsx("button",{type:"button",onClick:()=>G(V),className:"p-2 text-red-500 hover:text-red-700 dark:hover:text-red-400",children:i.jsx(_e,{size:16})})]},V)),i.jsxs("button",{type:"button",onClick:Q,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:[i.jsx(Ir,{size:16}),i.jsx("span",{children:"Add changelog item"})]})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:Y,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:L,disabled:l||!k&&w.upload_method==="direct"&&!N&&!w.file_url,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Is,{size:18}),i.jsx("span",{children:l?"Saving...":"Save"})]})]})]})]})}),f&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:B}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"sm:flex sm:items-start",children:[i.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:i.jsx(Rt,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),i.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[i.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete File"}),i.jsx("div",{className:"mt-2",children:i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this file? This action cannot be undone."})})]})]}),i.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[i.jsx("button",{type:"button",onClick:()=>$(f),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),i.jsx("button",{type:"button",onClick:B,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})}),i.jsxs("div",{className:"space-y-4",children:[p.map(E=>i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-200",children:i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[i.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded-lg",children:M(E.file_type)}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:E.name}),i.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 rounded-full",children:["v",E.version]}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O(E.status)}`,children:E.status})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:E.description}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[i.jsx("span",{children:R(E.file_size)}),i.jsxs("span",{children:[E.download_count," downloads"]}),i.jsxs("span",{children:["Min: ",E.min_grade]}),i.jsx("span",{children:new Date(E.created_at).toLocaleDateString()})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>F(E),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:i.jsx(sr,{size:18})}),i.jsx("button",{onClick:()=>P(E),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:i.jsx(Rt,{size:18})})]})]})})},E.id)),p.length===0&&!l&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Q1,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No files uploaded"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Get started by uploading your first server file."}),i.jsxs("button",{onClick:()=>y(!0),className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ir,{size:18}),i.jsx("span",{children:"Upload File"})]})]})]})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(It,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access file management."})]})})};/*!
* @kurkle/color v0.3.4
* https://github.com/kurkle/color#readme
* (c) 2024 Jukka Kurkela
* Released under the MIT License
*/function co(t){return t+.5|0}const ks=(t,e,r)=>Math.max(Math.min(t,r),e);function ei(t){return ks(co(t*2.55),0,255)}function As(t){return ks(co(t*255),0,255)}function Hr(t){return ks(co(t/2.55)/100,0,1)}function fg(t){return ks(co(t*100),0,100)}const Xt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Bu=[..."0123456789ABCDEF"],q_=t=>Bu[t&15],V_=t=>Bu[(t&240)>>4]+Bu[t&15],$o=t=>(t&240)>>4===(t&15),W_=t=>$o(t.r)&&$o(t.g)&&$o(t.b)&&$o(t.a);function H_(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&Xt[t[1]]*17,g:255&Xt[t[2]]*17,b:255&Xt[t[3]]*17,a:e===5?Xt[t[4]]*17:255}:(e===7||e===9)&&(r={r:Xt[t[1]]<<4|Xt[t[2]],g:Xt[t[3]]<<4|Xt[t[4]],b:Xt[t[5]]<<4|Xt[t[6]],a:e===9?Xt[t[7]]<<4|Xt[t[8]]:255})),r}const J_=(t,e)=>t<255?e(t):"";function Y_(t){var e=W_(t)?q_:V_;return t?"#"+e(t.r)+e(t.g)+e(t.b)+J_(t.a,e):void 0}const G_=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ey(t,e,r){const s=e*Math.min(r,1-r),a=(n,o=(n+t/30)%12)=>r-s*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function K_(t,e,r){const s=(a,n=(a+t/60)%6)=>r-r*e*Math.max(Math.min(n,4-n,1),0);return[s(5),s(3),s(1)]}function Q_(t,e,r){const s=ey(t,1,.5);let a;for(e+r>1&&(a=1/(e+r),e*=a,r*=a),a=0;a<3;a++)s[a]*=1-e-r,s[a]+=e;return s}function X_(t,e,r,s,a){return t===a?(e-r)/s+(e<r?6:0):e===a?(r-t)/s+2:(t-e)/s+4}function op(t){const e=t.r/255,r=t.g/255,s=t.b/255,a=Math.max(e,r,s),n=Math.min(e,r,s),o=(a+n)/2;let l,c,d;return a!==n&&(d=a-n,c=o>.5?d/(2-a-n):d/(a+n),l=X_(e,r,s,d,a),l=l*60+.5),[l|0,c||0,o]}function lp(t,e,r,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,s)).map(As)}function cp(t,e,r){return lp(ey,t,e,r)}function Z_(t,e,r){return lp(Q_,t,e,r)}function eN(t,e,r){return lp(K_,t,e,r)}function ty(t){return(t%360+360)%360}function tN(t){const e=G_.exec(t);let r=255,s;if(!e)return;e[5]!==s&&(r=e[6]?ei(+e[5]):As(+e[5]));const a=ty(+e[2]),n=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=Z_(a,n,o):e[1]==="hsv"?s=eN(a,n,o):s=cp(a,n,o),{r:s[0],g:s[1],b:s[2],a:r}}function rN(t,e){var r=op(t);r[0]=ty(r[0]+e),r=cp(r),t.r=r[0],t.g=r[1],t.b=r[2]}function sN(t){if(!t)return;const e=op(t),r=e[0],s=fg(e[1]),a=fg(e[2]);return t.a<255?`hsla(${r}, ${s}%, ${a}%, ${Hr(t.a)})`:`hsl(${r}, ${s}%, ${a}%)`}const xg={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},bg={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function aN(){const t={},e=Object.keys(bg),r=Object.keys(xg);let s,a,n,o,l;for(s=0;s<e.length;s++){for(o=l=e[s],a=0;a<r.length;a++)n=r[a],l=l.replace(n,xg[n]);n=parseInt(bg[o],16),t[l]=[n>>16&255,n>>8&255,n&255]}return t}let Fo;function nN(t){Fo||(Fo=aN(),Fo.transparent=[0,0,0,0]);const e=Fo[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const iN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function oN(t){const e=iN.exec(t);let r=255,s,a,n;if(e){if(e[7]!==s){const o=+e[7];r=e[8]?ei(o):ks(o*255,0,255)}return s=+e[1],a=+e[3],n=+e[5],s=255&(e[2]?ei(s):ks(s,0,255)),a=255&(e[4]?ei(a):ks(a,0,255)),n=255&(e[6]?ei(n):ks(n,0,255)),{r:s,g:a,b:n,a:r}}}function lN(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Hr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const xd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,La=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function cN(t,e,r){const s=La(Hr(t.r)),a=La(Hr(t.g)),n=La(Hr(t.b));return{r:As(xd(s+r*(La(Hr(e.r))-s))),g:As(xd(a+r*(La(Hr(e.g))-a))),b:As(xd(n+r*(La(Hr(e.b))-n))),a:t.a+r*(e.a-t.a)}}function Uo(t,e,r){if(t){let s=op(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*r,e===0?360:1)),s=cp(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function ry(t,e){return t&&Object.assign(e||{},t)}function yg(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=As(t[3]))):(e=ry(t,{r:0,g:0,b:0,a:1}),e.a=As(e.a)),e}function dN(t){return t.charAt(0)==="r"?oN(t):tN(t)}class Vi{constructor(e){if(e instanceof Vi)return e;const r=typeof e;let s;r==="object"?s=yg(e):r==="string"&&(s=H_(e)||nN(e)||dN(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=ry(this._rgb);return e&&(e.a=Hr(e.a)),e}set rgb(e){this._rgb=yg(e)}rgbString(){return this._valid?lN(this._rgb):void 0}hexString(){return this._valid?Y_(this._rgb):void 0}hslString(){return this._valid?sN(this._rgb):void 0}mix(e,r){if(e){const s=this.rgb,a=e.rgb;let n;const o=r===n?.5:r,l=2*o-1,c=s.a-a.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;n=1-d,s.r=255&d*s.r+n*a.r+.5,s.g=255&d*s.g+n*a.g+.5,s.b=255&d*s.b+n*a.b+.5,s.a=o*s.a+(1-o)*a.a,this.rgb=s}return this}interpolate(e,r){return e&&(this._rgb=cN(this._rgb,e._rgb,r)),this}clone(){return new Vi(this.rgb)}alpha(e){return this._rgb.a=As(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=co(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Uo(this._rgb,2,e),this}darken(e){return Uo(this._rgb,2,-e),this}saturate(e){return Uo(this._rgb,1,e),this}desaturate(e){return Uo(this._rgb,1,-e),this}rotate(e){return rN(this._rgb,e),this}}/*!
* Chart.js v4.5.0
* https://www.chartjs.org
* (c) 2025 Chart.js Contributors
* Released under the MIT License
*/function $r(){}const uN=(()=>{let t=0;return()=>t++})();function ve(t){return t==null}function et(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function be(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function lr(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Nr(t,e){return lr(t)?t:e}function ue(t,e){return typeof t>"u"?e:t}const hN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,sy=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Te(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function ke(t,e,r,s){let a,n,o;if(et(t))for(n=t.length,a=0;a<n;a++)e.call(r,t[a],a);else if(be(t))for(o=Object.keys(t),n=o.length,a=0;a<n;a++)e.call(r,t[o[a]],o[a])}function Xl(t,e){let r,s,a,n;if(!t||!e||t.length!==e.length)return!1;for(r=0,s=t.length;r<s;++r)if(a=t[r],n=e[r],a.datasetIndex!==n.datasetIndex||a.index!==n.index)return!1;return!0}function Zl(t){if(et(t))return t.map(Zl);if(be(t)){const e=Object.create(null),r=Object.keys(t),s=r.length;let a=0;for(;a<s;++a)e[r[a]]=Zl(t[r[a]]);return e}return t}function ay(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function pN(t,e,r,s){if(!ay(t))return;const a=e[t],n=r[t];be(a)&&be(n)?Wi(a,n,s):e[t]=Zl(n)}function Wi(t,e,r){const s=et(e)?e:[e],a=s.length;if(!be(t))return t;r=r||{};const n=r.merger||pN;let o;for(let l=0;l<a;++l){if(o=s[l],!be(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)n(c[d],t,o,r)}return t}function bi(t,e){return Wi(t,e,{merger:mN})}function mN(t,e,r){if(!ay(t))return;const s=e[t],a=r[t];be(s)&&be(a)?bi(s,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Zl(a))}const vg={"":t=>t,x:t=>t.x,y:t=>t.y};function gN(t){const e=t.split("."),r=[];let s="";for(const a of e)s+=a,s.endsWith("\\")?s=s.slice(0,-1)+".":(r.push(s),s="");return r}function fN(t){const e=gN(t);return r=>{for(const s of e){if(s==="")break;r=r&&r[s]}return r}}function va(t,e){return(vg[e]||(vg[e]=fN(e)))(t)}function dp(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Hi=t=>typeof t<"u",Rs=t=>typeof t=="function",wg=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function xN(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const je=Math.PI,Ve=2*je,bN=Ve+je,ec=Number.POSITIVE_INFINITY,yN=je/180,rt=je/2,Js=je/4,kg=je*2/3,qu=Math.log10,Ar=Math.sign;function yi(t,e,r){return Math.abs(t-e)<r}function jg(t){const e=Math.round(t);t=yi(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(qu(t))),s=t/r;return(s<=1?1:s<=2?2:s<=5?5:10)*r}function vN(t){const e=[],r=Math.sqrt(t);let s;for(s=1;s<r;s++)t%s===0&&(e.push(s),e.push(t/s));return r===(r|0)&&e.push(r),e.sort((a,n)=>a-n).pop(),e}function wN(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ji(t){return!wN(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function kN(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function jN(t,e,r){let s,a,n;for(s=0,a=t.length;s<a;s++)n=t[s][r],isNaN(n)||(e.min=Math.min(e.min,n),e.max=Math.max(e.max,n))}function Xr(t){return t*(je/180)}function _N(t){return t*(180/je)}function _g(t){if(!lr(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function ny(t,e){const r=e.x-t.x,s=e.y-t.y,a=Math.sqrt(r*r+s*s);let n=Math.atan2(s,r);return n<-.5*je&&(n+=Ve),{angle:n,distance:a}}function Vu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function NN(t,e){return(t-e+bN)%Ve-je}function gr(t){return(t%Ve+Ve)%Ve}function Yi(t,e,r,s){const a=gr(t),n=gr(e),o=gr(r),l=gr(n-a),c=gr(o-a),d=gr(a-n),u=gr(a-o);return a===n||a===o||s&&n===o||l>c&&d<u}function yt(t,e,r){return Math.max(e,Math.min(r,t))}function SN(t){return yt(t,-32768,32767)}function js(t,e,r,s=1e-6){return t>=Math.min(e,r)-s&&t<=Math.max(e,r)+s}function up(t,e,r){r=r||(o=>t[o]<e);let s=t.length-1,a=0,n;for(;s-a>1;)n=a+s>>1,r(n)?a=n:s=n;return{lo:a,hi:s}}const la=(t,e,r,s)=>up(t,r,s?a=>{const n=t[a][e];return n<r||n===r&&t[a+1][e]===r}:a=>t[a][e]<r),CN=(t,e,r)=>up(t,r,s=>t[s][e]>=r);function MN(t,e,r){let s=0,a=t.length;for(;s<a&&t[s]<e;)s++;for(;a>s&&t[a-1]>r;)a--;return s>0||a<t.length?t.slice(s,a):t}const iy=["push","pop","shift","splice","unshift"];function EN(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),iy.forEach(r=>{const s="_onData"+dp(r),a=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...n){const o=a.apply(this,n);return t._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...n)}),o}})})}function Ng(t,e){const r=t._chartjs;if(!r)return;const s=r.listeners,a=s.indexOf(e);a!==-1&&s.splice(a,1),!(s.length>0)&&(iy.forEach(n=>{delete t[n]}),delete t._chartjs)}function oy(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ly=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function cy(t,e){let r=[],s=!1;return function(...a){r=a,s||(s=!0,ly.call(window,()=>{s=!1,t.apply(e,r)}))}}function PN(t,e){let r;return function(...s){return e?(clearTimeout(r),r=setTimeout(t,e,s)):t.apply(this,s),e}}const hp=t=>t==="start"?"left":t==="end"?"right":"center",ft=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,TN=(t,e,r,s)=>t===(s?"left":"right")?r:t==="center"?(e+r)/2:e;function DN(t,e,r){const s=e.length;let a=0,n=s;if(t._sorted){const{iScale:o,vScale:l,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:p,minDefined:m,maxDefined:v}=o.getUserBounds();if(m){if(a=Math.min(la(c,u,h).lo,r?s:la(e,u,o.getPixelForValue(h)).lo),d){const y=c.slice(0,a+1).reverse().findIndex(k=>!ve(k[l.axis]));a-=Math.max(0,y)}a=yt(a,0,s-1)}if(v){let y=Math.max(la(c,o.axis,p,!0).hi+1,r?0:la(e,u,o.getPixelForValue(p),!0).hi+1);if(d){const k=c.slice(y-1).findIndex(g=>!ve(g[l.axis]));y+=Math.max(0,k)}n=yt(y,a,s)-a}else n=s-a}return{start:a,count:n}}function ON(t){const{xScale:e,yScale:r,_scaleRanges:s}=t,a={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!s)return t._scaleRanges=a,!0;const n=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==r.min||s.ymax!==r.max;return Object.assign(s,a),n}const Bo=t=>t===0||t===1,Sg=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ve/r)),Cg=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ve/r)+1,vi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*rt)+1,easeOutSine:t=>Math.sin(t*rt),easeInOutSine:t=>-.5*(Math.cos(je*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Bo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Bo(t)?t:Sg(t,.075,.3),easeOutElastic:t=>Bo(t)?t:Cg(t,.075,.3),easeInOutElastic(t){return Bo(t)?t:t<.5?.5*Sg(t*2,.1125,.45):.5+.5*Cg(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-vi.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?vi.easeInBounce(t*2)*.5:vi.easeOutBounce(t*2-1)*.5+.5};function pp(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Mg(t){return pp(t)?t:new Vi(t)}function bd(t){return pp(t)?t:new Vi(t).saturate(.5).darken(.1).hexString()}const IN=["x","y","borderWidth","radius","tension"],AN=["color","borderColor","backgroundColor"];function zN(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:AN},numbers:{type:"number",properties:IN}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function LN(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Eg=new Map;function RN(t,e){e=e||{};const r=t+JSON.stringify(e);let s=Eg.get(r);return s||(s=new Intl.NumberFormat(t,e),Eg.set(r,s)),s}function mp(t,e,r){return RN(e,r).format(t)}const dy={values(t){return et(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const s=this.chart.options.locale;let a,n=t;if(r.length>1){const d=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(d<1e-4||d>1e15)&&(a="scientific"),n=$N(t,r)}const o=qu(Math.abs(n)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:a,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),mp(t,s,c)},logarithmic(t,e,r){if(t===0)return"0";const s=r[e].significand||t/Math.pow(10,Math.floor(qu(t)));return[1,2,3,5,10,15].includes(s)||e>.8*r.length?dy.numeric.call(this,t,e,r):""}};function $N(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var uy={formatters:dy};function FN(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const wa=Object.create(null),Wu=Object.create(null);function wi(t,e){if(!e)return t;const r=e.split(".");for(let s=0,a=r.length;s<a;++s){const n=r[s];t=t[n]||(t[n]=Object.create(null))}return t}function yd(t,e,r){return typeof e=="string"?Wi(wi(t,e),r):Wi(wi(t,""),e)}class UN{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,a)=>bd(a.backgroundColor),this.hoverBorderColor=(s,a)=>bd(a.borderColor),this.hoverColor=(s,a)=>bd(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return yd(this,e,r)}get(e){return wi(this,e)}describe(e,r){return yd(Wu,e,r)}override(e,r){return yd(wa,e,r)}route(e,r,s,a){const n=wi(this,e),o=wi(this,s),l="_"+r;Object.defineProperties(n,{[l]:{value:n[r],writable:!0},[r]:{enumerable:!0,get(){const c=this[l],d=o[a];return be(c)?Object.assign({},d,c):ue(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(r=>r(this))}}var Je=new UN({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[zN,LN,FN]);function BN(t){return!t||ve(t.size)||ve(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Pg(t,e,r,s,a){let n=e[a];return n||(n=e[a]=t.measureText(a).width,r.push(a)),n>s&&(s=n),s}function Ys(t,e,r){const s=t.currentDevicePixelRatio,a=r!==0?Math.max(r/2,.5):0;return Math.round((e-a)*s)/s+a}function Tg(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Hu(t,e,r,s){hy(t,e,r,s,null)}function hy(t,e,r,s,a){let n,o,l,c,d,u,h,p;const m=e.pointStyle,v=e.rotation,y=e.radius;let k=(v||0)*yN;if(m&&typeof m=="object"&&(n=m.toString(),n==="[object HTMLImageElement]"||n==="[object HTMLCanvasElement]")){t.save(),t.translate(r,s),t.rotate(k),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),m){default:a?t.ellipse(r,s,a/2,y,0,0,Ve):t.arc(r,s,y,0,Ve),t.closePath();break;case"triangle":u=a?a/2:y,t.moveTo(r+Math.sin(k)*u,s-Math.cos(k)*y),k+=kg,t.lineTo(r+Math.sin(k)*u,s-Math.cos(k)*y),k+=kg,t.lineTo(r+Math.sin(k)*u,s-Math.cos(k)*y),t.closePath();break;case"rectRounded":d=y*.516,c=y-d,o=Math.cos(k+Js)*c,h=Math.cos(k+Js)*(a?a/2-d:c),l=Math.sin(k+Js)*c,p=Math.sin(k+Js)*(a?a/2-d:c),t.arc(r-h,s-l,d,k-je,k-rt),t.arc(r+p,s-o,d,k-rt,k),t.arc(r+h,s+l,d,k,k+rt),t.arc(r-p,s+o,d,k+rt,k+je),t.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*y,u=a?a/2:c,t.rect(r-u,s-c,2*u,2*c);break}k+=Js;case"rectRot":h=Math.cos(k)*(a?a/2:y),o=Math.cos(k)*y,l=Math.sin(k)*y,p=Math.sin(k)*(a?a/2:y),t.moveTo(r-h,s-l),t.lineTo(r+p,s-o),t.lineTo(r+h,s+l),t.lineTo(r-p,s+o),t.closePath();break;case"crossRot":k+=Js;case"cross":h=Math.cos(k)*(a?a/2:y),o=Math.cos(k)*y,l=Math.sin(k)*y,p=Math.sin(k)*(a?a/2:y),t.moveTo(r-h,s-l),t.lineTo(r+h,s+l),t.moveTo(r+p,s-o),t.lineTo(r-p,s+o);break;case"star":h=Math.cos(k)*(a?a/2:y),o=Math.cos(k)*y,l=Math.sin(k)*y,p=Math.sin(k)*(a?a/2:y),t.moveTo(r-h,s-l),t.lineTo(r+h,s+l),t.moveTo(r+p,s-o),t.lineTo(r-p,s+o),k+=Js,h=Math.cos(k)*(a?a/2:y),o=Math.cos(k)*y,l=Math.sin(k)*y,p=Math.sin(k)*(a?a/2:y),t.moveTo(r-h,s-l),t.lineTo(r+h,s+l),t.moveTo(r+p,s-o),t.lineTo(r-p,s+o);break;case"line":o=a?a/2:Math.cos(k)*y,l=Math.sin(k)*y,t.moveTo(r-o,s-l),t.lineTo(r+o,s+l);break;case"dash":t.moveTo(r,s),t.lineTo(r+Math.cos(k)*(a?a/2:y),s+Math.sin(k)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Gi(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function gp(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function fp(t){t.restore()}function qN(t,e,r,s,a){if(!e)return t.lineTo(r.x,r.y);if(a==="middle"){const n=(e.x+r.x)/2;t.lineTo(n,e.y),t.lineTo(n,r.y)}else a==="after"!=!!s?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function VN(t,e,r,s){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?r.cp2x:r.cp1x,s?r.cp2y:r.cp1y,r.x,r.y)}function WN(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ve(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function HN(t,e,r,s,a){if(a.strikethrough||a.underline){const n=t.measureText(s),o=e-n.actualBoundingBoxLeft,l=e+n.actualBoundingBoxRight,c=r-n.actualBoundingBoxAscent,d=r+n.actualBoundingBoxDescent,u=a.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(o,u),t.lineTo(l,u),t.stroke()}}function JN(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function Ki(t,e,r,s,a,n={}){const o=et(e)?e:[e],l=n.strokeWidth>0&&n.strokeColor!=="";let c,d;for(t.save(),t.font=a.string,WN(t,n),c=0;c<o.length;++c)d=o[c],n.backdrop&&JN(t,n.backdrop),l&&(n.strokeColor&&(t.strokeStyle=n.strokeColor),ve(n.strokeWidth)||(t.lineWidth=n.strokeWidth),t.strokeText(d,r,s,n.maxWidth)),t.fillText(d,r,s,n.maxWidth),HN(t,r,s,d,n),s+=Number(a.lineHeight);t.restore()}function tc(t,e){const{x:r,y:s,w:a,h:n,radius:o}=e;t.arc(r+o.topLeft,s+o.topLeft,o.topLeft,1.5*je,je,!0),t.lineTo(r,s+n-o.bottomLeft),t.arc(r+o.bottomLeft,s+n-o.bottomLeft,o.bottomLeft,je,rt,!0),t.lineTo(r+a-o.bottomRight,s+n),t.arc(r+a-o.bottomRight,s+n-o.bottomRight,o.bottomRight,rt,0,!0),t.lineTo(r+a,s+o.topRight),t.arc(r+a-o.topRight,s+o.topRight,o.topRight,0,-rt,!0),t.lineTo(r+o.topLeft,s)}const YN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,GN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function KN(t,e){const r=(""+t).match(YN);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const QN=t=>+t||0;function xp(t,e){const r={},s=be(e),a=s?Object.keys(e):e,n=be(t)?s?o=>ue(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of a)r[o]=QN(n(o));return r}function py(t){return xp(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ln(t){return xp(t,["topLeft","topRight","bottomLeft","bottomRight"])}function cr(t){const e=py(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function vt(t,e){t=t||{},e=e||Je.font;let r=ue(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let s=ue(t.style,e.style);s&&!(""+s).match(GN)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const a={family:ue(t.family,e.family),lineHeight:KN(ue(t.lineHeight,e.lineHeight),r),size:r,style:s,weight:ue(t.weight,e.weight),string:""};return a.string=BN(a),a}function qo(t,e,r,s){let a,n,o;for(a=0,n=t.length;a<n;++a)if(o=t[a],o!==void 0&&o!==void 0)return o}function XN(t,e,r){const{min:s,max:a}=t,n=sy(e,(a-s)/2),o=(l,c)=>r&&l===0?0:l+c;return{min:o(s,-Math.abs(n)),max:o(a,n)}}function Pa(t,e){return Object.assign(Object.create(t),e)}function bp(t,e=[""],r,s,a=()=>t[0]){const n=r||t;typeof s>"u"&&(s=xy("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:s,_getTarget:a,override:l=>bp([l,...t],e,n,s)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return gy(l,c,()=>iS(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return Og(l).includes(c)},ownKeys(l){return Og(l)},set(l,c,d){const u=l._storage||(l._storage=a());return l[c]=u[c]=d,delete l._keys,!0}})}function vn(t,e,r,s){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:my(t,s),setContext:n=>vn(t,n,r,s),override:n=>vn(t.override(n),e,r,s)};return new Proxy(a,{deleteProperty(n,o){return delete n[o],delete t[o],!0},get(n,o,l){return gy(n,o,()=>eS(n,o,l))},getOwnPropertyDescriptor(n,o){return n._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(n,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(n,o,l){return t[o]=l,delete n[o],!0}})}function my(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:s=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:r,indexable:s,isScriptable:Rs(r)?r:()=>r,isIndexable:Rs(s)?s:()=>s}}const ZN=(t,e)=>t?t+dp(e):e,yp=(t,e)=>be(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function gy(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=r();return t[e]=s,s}function eS(t,e,r){const{_proxy:s,_context:a,_subProxy:n,_descriptors:o}=t;let l=s[e];return Rs(l)&&o.isScriptable(e)&&(l=tS(e,l,t,r)),et(l)&&l.length&&(l=rS(e,l,t,o.isIndexable)),yp(e,l)&&(l=vn(l,a,n&&n[e],o)),l}function tS(t,e,r,s){const{_proxy:a,_context:n,_subProxy:o,_stack:l}=r;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(n,o||s);return l.delete(t),yp(t,c)&&(c=vp(a._scopes,a,t,c)),c}function rS(t,e,r,s){const{_proxy:a,_context:n,_subProxy:o,_descriptors:l}=r;if(typeof n.index<"u"&&s(t))return e[n.index%e.length];if(be(e[0])){const c=e,d=a._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=vp(d,a,t,u);e.push(vn(h,n,o&&o[t],l))}}return e}function fy(t,e,r){return Rs(t)?t(e,r):t}const sS=(t,e)=>t===!0?e:typeof t=="string"?va(e,t):void 0;function aS(t,e,r,s,a){for(const n of e){const o=sS(r,n);if(o){t.add(o);const l=fy(o._fallback,r,a);if(typeof l<"u"&&l!==r&&l!==s)return l}else if(o===!1&&typeof s<"u"&&r!==s)return null}return!1}function vp(t,e,r,s){const a=e._rootScopes,n=fy(e._fallback,r,s),o=[...t,...a],l=new Set;l.add(s);let c=Dg(l,o,r,n||r,s);return c===null||typeof n<"u"&&n!==r&&(c=Dg(l,o,n,c,s),c===null)?!1:bp(Array.from(l),[""],a,n,()=>nS(e,r,s))}function Dg(t,e,r,s,a){for(;r;)r=aS(t,e,r,s,a);return r}function nS(t,e,r){const s=t._getTarget();e in s||(s[e]={});const a=s[e];return et(a)&&be(r)?r:a||{}}function iS(t,e,r,s){let a;for(const n of e)if(a=xy(ZN(n,t),r),typeof a<"u")return yp(t,a)?vp(r,s,t,a):a}function xy(t,e){for(const r of e){if(!r)continue;const s=r[t];if(typeof s<"u")return s}}function Og(t){let e=t._keys;return e||(e=t._keys=oS(t._scopes)),e}function oS(t){const e=new Set;for(const r of t)for(const s of Object.keys(r).filter(a=>!a.startsWith("_")))e.add(s);return Array.from(e)}const lS=Number.EPSILON||1e-14,wn=(t,e)=>e<t.length&&!t[e].skip&&t[e],by=t=>t==="x"?"y":"x";function cS(t,e,r,s){const a=t.skip?e:t,n=e,o=r.skip?e:r,l=Vu(n,a),c=Vu(o,n);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=s*d,p=s*u;return{previous:{x:n.x-h*(o.x-a.x),y:n.y-h*(o.y-a.y)},next:{x:n.x+p*(o.x-a.x),y:n.y+p*(o.y-a.y)}}}function dS(t,e,r){const s=t.length;let a,n,o,l,c,d=wn(t,0);for(let u=0;u<s-1;++u)if(c=d,d=wn(t,u+1),!(!c||!d)){if(yi(e[u],0,lS)){r[u]=r[u+1]=0;continue}a=r[u]/e[u],n=r[u+1]/e[u],l=Math.pow(a,2)+Math.pow(n,2),!(l<=9)&&(o=3/Math.sqrt(l),r[u]=a*o*e[u],r[u+1]=n*o*e[u])}}function uS(t,e,r="x"){const s=by(r),a=t.length;let n,o,l,c=wn(t,0);for(let d=0;d<a;++d){if(o=l,l=c,c=wn(t,d+1),!l)continue;const u=l[r],h=l[s];o&&(n=(u-o[r])/3,l[`cp1${r}`]=u-n,l[`cp1${s}`]=h-n*e[d]),c&&(n=(c[r]-u)/3,l[`cp2${r}`]=u+n,l[`cp2${s}`]=h+n*e[d])}}function hS(t,e="x"){const r=by(e),s=t.length,a=Array(s).fill(0),n=Array(s);let o,l,c,d=wn(t,0);for(o=0;o<s;++o)if(l=c,c=d,d=wn(t,o+1),!!c){if(d){const u=d[e]-c[e];a[o]=u!==0?(d[r]-c[r])/u:0}n[o]=l?d?Ar(a[o-1])!==Ar(a[o])?0:(a[o-1]+a[o])/2:a[o-1]:a[o]}dS(t,a,n),uS(t,n,e)}function Vo(t,e,r){return Math.max(Math.min(t,r),e)}function pS(t,e){let r,s,a,n,o,l=Gi(t[0],e);for(r=0,s=t.length;r<s;++r)o=n,n=l,l=r<s-1&&Gi(t[r+1],e),n&&(a=t[r],o&&(a.cp1x=Vo(a.cp1x,e.left,e.right),a.cp1y=Vo(a.cp1y,e.top,e.bottom)),l&&(a.cp2x=Vo(a.cp2x,e.left,e.right),a.cp2y=Vo(a.cp2y,e.top,e.bottom)))}function mS(t,e,r,s,a){let n,o,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")hS(t,a);else{let d=s?t[t.length-1]:t[0];for(n=0,o=t.length;n<o;++n)l=t[n],c=cS(d,l,t[Math.min(n+1,o-(s?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&pS(t,r)}function wp(){return typeof window<"u"&&typeof document<"u"}function kp(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function rc(t,e,r){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[r])):s=t,s}const Pc=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function gS(t,e){return Pc(t).getPropertyValue(e)}const fS=["top","right","bottom","left"];function ua(t,e,r){const s={};r=r?"-"+r:"";for(let a=0;a<4;a++){const n=fS[a];s[n]=parseFloat(t[e+"-"+n+r])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const xS=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function bS(t,e){const r=t.touches,s=r&&r.length?r[0]:t,{offsetX:a,offsetY:n}=s;let o=!1,l,c;if(xS(a,n,t.target))l=a,c=n;else{const d=e.getBoundingClientRect();l=s.clientX-d.left,c=s.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function Zs(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:s}=e,a=Pc(r),n=a.boxSizing==="border-box",o=ua(a,"padding"),l=ua(a,"border","width"),{x:c,y:d,box:u}=bS(t,r),h=o.left+(u&&l.left),p=o.top+(u&&l.top);let{width:m,height:v}=e;return n&&(m-=o.width+l.width,v-=o.height+l.height),{x:Math.round((c-h)/m*r.width/s),y:Math.round((d-p)/v*r.height/s)}}function yS(t,e,r){let s,a;if(e===void 0||r===void 0){const n=t&&kp(t);if(!n)e=t.clientWidth,r=t.clientHeight;else{const o=n.getBoundingClientRect(),l=Pc(n),c=ua(l,"border","width"),d=ua(l,"padding");e=o.width-d.width-c.width,r=o.height-d.height-c.height,s=rc(l.maxWidth,n,"clientWidth"),a=rc(l.maxHeight,n,"clientHeight")}}return{width:e,height:r,maxWidth:s||ec,maxHeight:a||ec}}const Wo=t=>Math.round(t*10)/10;function vS(t,e,r,s){const a=Pc(t),n=ua(a,"margin"),o=rc(a.maxWidth,t,"clientWidth")||ec,l=rc(a.maxHeight,t,"clientHeight")||ec,c=yS(t,e,r);let{width:d,height:u}=c;if(a.boxSizing==="content-box"){const h=ua(a,"border","width"),p=ua(a,"padding");d-=p.width+h.width,u-=p.height+h.height}return d=Math.max(0,d-n.width),u=Math.max(0,s?d/s:u-n.height),d=Wo(Math.min(d,o,c.maxWidth)),u=Wo(Math.min(u,l,c.maxHeight)),d&&!u&&(u=Wo(d/2)),(e!==void 0||r!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,d=Wo(Math.floor(u*s))),{width:d,height:u}}function Ig(t,e,r){const s=e||1,a=Math.floor(t.height*s),n=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==a||o.width!==n?(t.currentDevicePixelRatio=s,o.height=a,o.width=n,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const wS=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};wp()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Ag(t,e){const r=gS(t,e),s=r&&r.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function ea(t,e,r,s){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function kS(t,e,r,s){return{x:t.x+r*(e.x-t.x),y:s==="middle"?r<.5?t.y:e.y:s==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function jS(t,e,r,s){const a={x:t.cp2x,y:t.cp2y},n={x:e.cp1x,y:e.cp1y},o=ea(t,a,r),l=ea(a,n,r),c=ea(n,e,r),d=ea(o,l,r),u=ea(l,c,r);return ea(d,u,r)}const _S=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,s){return r-s},leftForLtr(r,s){return r-s}}},NS=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function cn(t,e,r){return t?_S(e,r):NS()}function yy(t,e){let r,s;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,s=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=s)}function vy(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function wy(t){return t==="angle"?{between:Yi,compare:NN,normalize:gr}:{between:js,compare:(e,r)=>e-r,normalize:e=>e}}function zg({start:t,end:e,count:r,loop:s,style:a}){return{start:t%r,end:e%r,loop:s&&(e-t+1)%r===0,style:a}}function SS(t,e,r){const{property:s,start:a,end:n}=r,{between:o,normalize:l}=wy(s),c=e.length;let{start:d,end:u,loop:h}=t,p,m;if(h){for(d+=c,u+=c,p=0,m=c;p<m&&o(l(e[d%c][s]),a,n);++p)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:t.style}}function CS(t,e,r){if(!r)return[t];const{property:s,start:a,end:n}=r,o=e.length,{compare:l,between:c,normalize:d}=wy(s),{start:u,end:h,loop:p,style:m}=SS(t,e,r),v=[];let y=!1,k=null,g,f,x;const w=()=>c(a,x,g)&&l(a,x)!==0,S=()=>l(n,g)===0||c(n,x,g),N=()=>y||w(),_=()=>!y||S();for(let b=u,j=u;b<=h;++b)f=e[b%o],!f.skip&&(g=d(f[s]),g!==x&&(y=c(g,a,n),k===null&&N()&&(k=l(g,a)===0?b:j),k!==null&&_()&&(v.push(zg({start:k,end:b,loop:p,count:o,style:m})),k=null),j=b,x=g));return k!==null&&v.push(zg({start:k,end:h,loop:p,count:o,style:m})),v}function MS(t,e){const r=[],s=t.segments;for(let a=0;a<s.length;a++){const n=CS(s[a],t.points,e);n.length&&r.push(...n)}return r}function ES(t,e,r,s){let a=0,n=e-1;if(r&&!s)for(;a<e&&!t[a].skip;)a++;for(;a<e&&t[a].skip;)a++;for(a%=e,r&&(n+=a);n>a&&t[n%e].skip;)n--;return n%=e,{start:a,end:n}}function PS(t,e,r,s){const a=t.length,n=[];let o=e,l=t[e],c;for(c=e+1;c<=r;++c){const d=t[c%a];d.skip||d.stop?l.skip||(s=!1,n.push({start:e%a,end:(c-1)%a,loop:s}),e=o=d.stop?c:null):(o=c,l.skip&&(e=c)),l=d}return o!==null&&n.push({start:e%a,end:o%a,loop:s}),n}function TS(t,e){const r=t.points,s=t.options.spanGaps,a=r.length;if(!a)return[];const n=!!t._loop,{start:o,end:l}=ES(r,a,n,s);if(s===!0)return Lg(t,[{start:o,end:l,loop:n}],r,e);const c=l<o?l+a:l,d=!!t._fullLoop&&o===0&&l===a-1;return Lg(t,PS(r,o,c,d),r,e)}function Lg(t,e,r,s){return!s||!s.setContext||!r?e:DS(t,e,r,s)}function DS(t,e,r,s){const a=t._chart.getContext(),n=Rg(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=r.length,d=[];let u=n,h=e[0].start,p=h;function m(v,y,k,g){const f=l?-1:1;if(v!==y){for(v+=c;r[v%c].skip;)v-=f;for(;r[y%c].skip;)y+=f;v%c!==y%c&&(d.push({start:v%c,end:y%c,loop:k,style:g}),u=g,h=y%c)}}for(const v of e){h=l?h:v.start;let y=r[h%c],k;for(p=h+1;p<=v.end;p++){const g=r[p%c];k=Rg(s.setContext(Pa(a,{type:"segment",p0:y,p1:g,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),OS(k,u)&&m(h,p-1,v.loop,u),y=g,u=k}h<p-1&&m(h,p-1,v.loop,u)}return d}function Rg(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function OS(t,e){if(!e)return!1;const r=[],s=function(a,n){return pp(n)?(r.includes(n)||r.push(n),r.indexOf(n)):n};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function Ho(t,e,r){return t.options.clip?t[r]:e[r]}function IS(t,e){const{xScale:r,yScale:s}=t;return r&&s?{left:Ho(r,e,"left"),right:Ho(r,e,"right"),top:Ho(s,e,"top"),bottom:Ho(s,e,"bottom")}:e}function AS(t,e){const r=e._clip;if(r.disabled)return!1;const s=IS(e,t.chartArea);return{left:r.left===!1?0:s.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:s.right+(r.right===!0?0:r.right),top:r.top===!1?0:s.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:s.bottom+(r.bottom===!0?0:r.bottom)}}/*!
* Chart.js v4.5.0
* https://www.chartjs.org
* (c) 2025 Chart.js Contributors
* Released under the MIT License
*/class zS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,s,a){const n=r.listeners[a],o=r.duration;n.forEach(l=>l({chart:e,initial:r.initial,numSteps:o,currentStep:Math.min(s-r.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ly.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((s,a)=>{if(!s.running||!s.items.length)return;const n=s.items;let o=n.length-1,l=!1,c;for(;o>=0;--o)c=n[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(e),l=!0):(n[o]=n[n.length-1],n.pop());l&&(a.draw(),this._notify(a,s,e,"progress")),n.length||(s.running=!1,this._notify(a,s,e,"complete"),s.initial=!1),r+=n.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let s=r.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,s)),s}listen(e,r,s){this._getAnims(e).listeners[r].push(s)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((s,a)=>Math.max(s,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const s=r.items;let a=s.length-1;for(;a>=0;--a)s[a].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ur=new zS;const $g="transparent",LS={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const s=Mg(t||$g),a=s.valid&&Mg(e||$g);return a&&a.valid?a.mix(s,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class RS{constructor(e,r,s,a){const n=r[s];a=qo([e.to,a,n,e.from]);const o=qo([e.from,n,a]);this._active=!0,this._fn=e.fn||LS[e.type||typeof o],this._easing=vi[e.easing]||vi.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=s,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(e,r,s){if(this._active){this._notify(!1);const a=this._target[this._prop],n=s-this._start,o=this._duration-n;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=n,this._loop=!!e.loop,this._to=qo([e.to,r,a,e.from]),this._from=qo([e.from,a,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,s=this._duration,a=this._prop,n=this._from,o=this._loop,l=this._to;let c;if(this._active=n!==l&&(o||r<s),!this._active){this._target[a]=l,this._notify(!0);return}if(r<0){this._target[a]=n;return}c=r/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[a]=this._fn(n,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,s)=>{e.push({res:r,rej:s})})}_notify(e){const r=e?"res":"rej",s=this._promises||[];for(let a=0;a<s.length;a++)s[a][r]()}}class ky{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!be(e))return;const r=Object.keys(Je.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const n=e[a];if(!be(n))return;const o={};for(const l of r)o[l]=n[l];(et(n.properties)&&n.properties||[a]).forEach(l=>{(l===a||!s.has(l))&&s.set(l,o)})})}_animateOptions(e,r){const s=r.options,a=FS(e,s);if(!a)return[];const n=this._createAnimations(a,s);return s.$shared&&$S(e.options.$animations,s).then(()=>{e.options=s},()=>{}),n}_createAnimations(e,r){const s=this._properties,a=[],n=e.$animations||(e.$animations={}),o=Object.keys(r),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){a.push(...this._animateOptions(e,r));continue}const u=r[d];let h=n[d];const p=s.get(d);if(h)if(p&&h.active()){h.update(p,u,l);continue}else h.cancel();if(!p||!p.duration){e[d]=u;continue}n[d]=h=new RS(p,e,d,u),a.push(h)}return a}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const s=this._createAnimations(e,r);if(s.length)return Ur.add(this._chart,s),!0}}function $S(t,e){const r=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const n=t[s[a]];n&&n.active()&&r.push(n.wait())}return Promise.all(r)}function FS(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function Fg(t,e){const r=t&&t.options||{},s=r.reverse,a=r.min===void 0?e:0,n=r.max===void 0?e:0;return{start:s?n:a,end:s?a:n}}function US(t,e,r){if(r===!1)return!1;const s=Fg(t,r),a=Fg(e,r);return{top:a.end,right:s.end,bottom:a.start,left:s.start}}function BS(t){let e,r,s,a;return be(t)?(e=t.top,r=t.right,s=t.bottom,a=t.left):e=r=s=a=t,{top:e,right:r,bottom:s,left:a,disabled:t===!1}}function jy(t,e){const r=[],s=t._getSortedDatasetMetas(e);let a,n;for(a=0,n=s.length;a<n;++a)r.push(s[a].index);return r}function Ug(t,e,r,s={}){const a=t.keys,n=s.mode==="single";let o,l,c,d;if(e===null)return;let u=!1;for(o=0,l=a.length;o<l;++o){if(c=+a[o],c===r){if(u=!0,s.all)continue;break}d=t.values[c],lr(d)&&(n||e===0||Ar(e)===Ar(d))&&(e+=d)}return!u&&!s.all?0:e}function qS(t,e){const{iScale:r,vScale:s}=e,a=r.axis==="x"?"x":"y",n=s.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[a]:u,[n]:t[u]};return l}function vd(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function VS(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function WS(t){const{min:e,max:r,minDefined:s,maxDefined:a}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}function HS(t,e,r){const s=t[e]||(t[e]={});return s[r]||(s[r]={})}function Bg(t,e,r,s){for(const a of e.getMatchingVisibleMetas(s).reverse()){const n=t[a.index];if(r&&n>0||!r&&n<0)return a.index}return null}function qg(t,e){const{chart:r,_cachedMeta:s}=t,a=r._stacks||(r._stacks={}),{iScale:n,vScale:o,index:l}=s,c=n.axis,d=o.axis,u=VS(n,o,s),h=e.length;let p;for(let m=0;m<h;++m){const v=e[m],{[c]:y,[d]:k}=v,g=v._stacks||(v._stacks={});p=g[d]=HS(a,u,y),p[l]=k,p._top=Bg(p,o,!0,s.type),p._bottom=Bg(p,o,!1,s.type);const f=p._visualValues||(p._visualValues={});f[l]=k}}function wd(t,e){const r=t.scales;return Object.keys(r).filter(s=>r[s].axis===e).shift()}function JS(t,e){return Pa(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function YS(t,e,r){return Pa(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function Un(t,e){const r=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const a of e){const n=a._stacks;if(!n||n[s]===void 0||n[s][r]===void 0)return;delete n[s][r],n[s]._visualValues!==void 0&&n[s]._visualValues[r]!==void 0&&delete n[s]._visualValues[r]}}}const kd=t=>t==="reset"||t==="none",Vg=(t,e)=>e?t:Object.assign({},t),GS=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:jy(r,!0),values:null};class ha{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=vd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Un(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,s=this.getDataset(),a=(h,p,m,v)=>h==="x"?p:h==="r"?v:m,n=r.xAxisID=ue(s.xAxisID,wd(e,"x")),o=r.yAxisID=ue(s.yAxisID,wd(e,"y")),l=r.rAxisID=ue(s.rAxisID,wd(e,"r")),c=r.indexAxis,d=r.iAxisID=a(c,n,o,l),u=r.vAxisID=a(c,o,n,l);r.xScale=this.getScaleForId(n),r.yScale=this.getScaleForId(o),r.rScale=this.getScaleForId(l),r.iScale=this.getScaleForId(d),r.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Ng(this._data,this),e._stacked&&Un(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),s=this._data;if(be(r)){const a=this._cachedMeta;this._data=qS(r,a)}else if(s!==r){if(s){Ng(s,this);const a=this._cachedMeta;Un(a),a._parsed=[]}r&&Object.isExtensible(r)&&EN(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,s=this.getDataset();let a=!1;this._dataCheck();const n=r._stacked;r._stacked=vd(r.vScale,r),r.stack!==s.stack&&(a=!0,Un(r),r.stack=s.stack),this._resyncElements(e),(a||n!==r._stacked)&&(qg(this,r._parsed),r._stacked=vd(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:s,_data:a}=this,{iScale:n,_stacked:o}=s,l=n.axis;let c=e===0&&r===a.length?!0:s._sorted,d=e>0&&s._parsed[e-1],u,h,p;if(this._parsing===!1)s._parsed=a,s._sorted=!0,p=a;else{et(a[e])?p=this.parseArrayData(s,a,e,r):be(a[e])?p=this.parseObjectData(s,a,e,r):p=this.parsePrimitiveData(s,a,e,r);const m=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<r;++u)s._parsed[u+e]=h=p[u],c&&(m()&&(c=!1),d=h);s._sorted=c}o&&qg(this,p)}parsePrimitiveData(e,r,s,a){const{iScale:n,vScale:o}=e,l=n.axis,c=o.axis,d=n.getLabels(),u=n===o,h=new Array(a);let p,m,v;for(p=0,m=a;p<m;++p)v=p+s,h[p]={[l]:u||n.parse(d[v],v),[c]:o.parse(r[v],v)};return h}parseArrayData(e,r,s,a){const{xScale:n,yScale:o}=e,l=new Array(a);let c,d,u,h;for(c=0,d=a;c<d;++c)u=c+s,h=r[u],l[c]={x:n.parse(h[0],u),y:o.parse(h[1],u)};return l}parseObjectData(e,r,s,a){const{xScale:n,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(a);let u,h,p,m;for(u=0,h=a;u<h;++u)p=u+s,m=r[p],d[u]={x:n.parse(va(m,l),p),y:o.parse(va(m,c),p)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,s){const a=this.chart,n=this._cachedMeta,o=r[e.axis],l={keys:jy(a,!0),values:r._stacks[e.axis]._visualValues};return Ug(l,o,n.index,{mode:s})}updateRangeFromParsed(e,r,s,a){const n=s[r.axis];let o=n===null?NaN:n;const l=a&&s._stacks[r.axis];a&&l&&(a.values=l,o=Ug(a,n,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,r){const s=this._cachedMeta,a=s._parsed,n=s._sorted&&e===s.iScale,o=a.length,l=this._getOtherScale(e),c=GS(r,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=WS(l);let p,m;function v(){m=a[p];const y=m[l.axis];return!lr(m[e.axis])||u>y||h<y}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(d,e,m,c),n));++p);if(n){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(d,e,m,c);break}}return d}getAllParsedValues(e){const r=this._cachedMeta._parsed,s=[];let a,n,o;for(a=0,n=r.length;a<n;++a)o=r[a][e.axis],lr(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,s=r.iScale,a=r.vScale,n=this.getParsed(e);return{label:s?""+s.getLabelForValue(n[s.axis]):"",value:a?""+a.getLabelForValue(n[a.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=BS(ue(this.options.clip,US(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,s=this._cachedMeta,a=s.data||[],n=r.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||a.length-l,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,n,l,c),u=l;u<l+c;++u){const h=a[u];h.hidden||(h.active&&d?o.push(h):h.draw(e,n))}for(u=0;u<o.length;++u)o[u].draw(e,n)}getStyle(e,r){const s=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,r,s){const a=this.getDataset();let n;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];n=o.$context||(o.$context=YS(this.getContext(),e,o)),n.parsed=this.getParsed(e),n.raw=a.data[e],n.index=n.dataIndex=e}else n=this.$context||(this.$context=JS(this.chart.getContext(),this.index)),n.dataset=a,n.index=n.datasetIndex=this.index;return n.active=!!r,n.mode=s,n}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",s){const a=r==="active",n=this._cachedDataOpts,o=e+"-"+r,l=n[o],c=this.enableOptionSharing&&Hi(s);if(l)return Vg(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=a?[`${e}Hover`,"hover",e,""]:[e,""],p=d.getOptionScopes(this.getDataset(),u),m=Object.keys(Je.elements[e]),v=()=>this.getContext(s,a,r),y=d.resolveNamedOptions(p,m,v,h);return y.$shared&&(y.$shared=c,n[o]=Object.freeze(Vg(y,c))),y}_resolveAnimations(e,r,s){const a=this.chart,n=this._cachedDataOpts,o=`animation-${r}`,l=n[o];if(l)return l;let c;if(a.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,r),p=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(p,this.getContext(e,s,r))}const d=new ky(a,c&&c.animations);return c&&c._cacheable&&(n[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||kd(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const s=this.resolveDataElementOptions(e,r),a=this._sharedOptions,n=this.getSharedOptions(s),o=this.includeOptions(r,n)||n!==a;return this.updateSharedOptions(n,r,s),{sharedOptions:n,includeOptions:o}}updateElement(e,r,s,a){kd(a)?Object.assign(e,s):this._resolveAnimations(r,a).update(e,s)}updateSharedOptions(e,r,s){e&&!kd(r)&&this._resolveAnimations(void 0,r).update(e,s)}_setStyle(e,r,s,a){e.active=a;const n=this.getStyle(r,a);this._resolveAnimations(r,s,a).update(e,{options:!a&&this.getSharedOptions(n)||n})}removeHoverStyle(e,r,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,r,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,s=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const a=s.length,n=r.length,o=Math.min(n,a);o&&this.parse(0,o),n>a?this._insertElements(a,n-a,e):n<a&&this._removeElements(n,a-n)}_insertElements(e,r,s=!0){const a=this._cachedMeta,n=a.data,o=e+r;let l;const c=d=>{for(d.length+=r,l=d.length-1;l>=o;l--)d[l]=d[l-r]};for(c(n),l=e;l<o;++l)n[l]=new this.dataElementType;this._parsing&&c(a._parsed),this.parse(e,r),s&&this.updateElements(n,e,r,"reset")}updateElements(e,r,s,a){}_removeElements(e,r){const s=this._cachedMeta;if(this._parsing){const a=s._parsed.splice(e,r);s._stacked&&Un(s,a)}s.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,s,a]=e;this[r](s,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}q(ha,"defaults",{}),q(ha,"datasetElementType",null),q(ha,"dataElementType",null);function KS(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let s=[];for(let a=0,n=r.length;a<n;a++)s=s.concat(r[a].controller.getAllParsedValues(t));t._cache.$bar=oy(s.sort((a,n)=>a-n))}return t._cache.$bar}function QS(t){const e=t.iScale,r=KS(e,t.type);let s=e._length,a,n,o,l;const c=()=>{o===32767||o===-32768||(Hi(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(a=0,n=r.length;a<n;++a)o=e.getPixelForValue(r[a]),c();for(l=void 0,a=0,n=e.ticks.length;a<n;++a)o=e.getPixelForTick(a),c();return s}function XS(t,e,r,s){const a=r.barThickness;let n,o;return ve(a)?(n=e.min*r.categoryPercentage,o=r.barPercentage):(n=a*s,o=1),{chunk:n/s,ratio:o,start:e.pixels[t]-n/2}}function ZS(t,e,r,s){const a=e.pixels,n=a[t];let o=t>0?a[t-1]:null,l=t<a.length-1?a[t+1]:null;const c=r.categoryPercentage;o===null&&(o=n-(l===null?e.end-e.start:l-n)),l===null&&(l=n+n-o);const d=n-(n-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/s,ratio:r.barPercentage,start:d}}function e4(t,e,r,s){const a=r.parse(t[0],s),n=r.parse(t[1],s),o=Math.min(a,n),l=Math.max(a,n);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),e[r.axis]=d,e._custom={barStart:c,barEnd:d,start:a,end:n,min:o,max:l}}function _y(t,e,r,s){return et(t)?e4(t,e,r,s):e[r.axis]=r.parse(t,s),e}function Wg(t,e,r,s){const a=t.iScale,n=t.vScale,o=a.getLabels(),l=a===n,c=[];let d,u,h,p;for(d=r,u=r+s;d<u;++d)p=e[d],h={},h[a.axis]=l||a.parse(o[d],d),c.push(_y(p,h,n,d));return c}function jd(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function t4(t,e,r){return t!==0?Ar(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function r4(t){let e,r,s,a,n;return t.horizontal?(e=t.base>t.x,r="left",s="right"):(e=t.base<t.y,r="bottom",s="top"),e?(a="end",n="start"):(a="start",n="end"),{start:r,end:s,reverse:e,top:a,bottom:n}}function s4(t,e,r,s){let a=e.borderSkipped;const n={};if(!a){t.borderSkipped=n;return}if(a===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=r4(t);a==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===s?a=d:(r._bottom||0)===s?a=u:(n[Hg(u,o,l,c)]=!0,a=d)),n[Hg(a,o,l,c)]=!0,t.borderSkipped=n}function Hg(t,e,r,s){return s?(t=a4(t,e,r),t=Jg(t,r,e)):t=Jg(t,e,r),t}function a4(t,e,r){return t===e?r:t===r?e:t}function Jg(t,e,r){return t==="start"?e:t==="end"?r:t}function n4(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class pl extends ha{parsePrimitiveData(e,r,s,a){return Wg(e,r,s,a)}parseArrayData(e,r,s,a){return Wg(e,r,s,a)}parseObjectData(e,r,s,a){const{iScale:n,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=n.axis==="x"?l:c,u=o.axis==="x"?l:c,h=[];let p,m,v,y;for(p=s,m=s+a;p<m;++p)y=r[p],v={},v[n.axis]=n.parse(va(y,d),p),h.push(_y(va(y,u),v,o,p));return h}updateRangeFromParsed(e,r,s,a){super.updateRangeFromParsed(e,r,s,a);const n=s._custom;n&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,n.min),e.max=Math.max(e.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:s,vScale:a}=r,n=this.getParsed(e),o=n._custom,l=jd(o)?"["+o.start+", "+o.end+"]":""+a.getLabelForValue(n[a.axis]);return{label:""+s.getLabelForValue(n[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,s,a){const n=a==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(r,a);for(let m=r;m<r+s;m++){const v=this.getParsed(m),y=n||ve(v[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),k=this._calculateBarIndexPixels(m,u),g=(v._stacks||{})[l.axis],f={horizontal:d,base:y.base,enableBorderRadius:!g||jd(v._custom)||o===g._top||o===g._bottom,x:d?y.head:k.center,y:d?k.center:y.head,height:d?k.size:Math.abs(y.size),width:d?Math.abs(y.size):k.size};p&&(f.options=h||this.resolveDataElementOptions(m,e[m].active?"active":a));const x=f.options||e[m].options;s4(f,x,g,o),n4(f,x,u.ratio),this.updateElement(e[m],m,f,a)}}_getStacks(e,r){const{iScale:s}=this._cachedMeta,a=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),n=s.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(r),c=l&&l[s.axis],d=u=>{const h=u._parsed.find(m=>m[s.axis]===c),p=h&&h[u.vScale.axis];if(ve(p)||isNaN(p))return!0};for(const u of a)if(!(r!==void 0&&d(u))&&((n===!1||o.indexOf(u.stack)===-1||n===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===r).shift()}_getAxis(){const e={},r=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[ue(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,r)]=!0;return Object.keys(e)}_getStackIndex(e,r,s){const a=this._getStacks(e,s),n=r!==void 0?a.indexOf(r):-1;return n===-1?a.length-1:n}_getRuler(){const e=this.options,r=this._cachedMeta,s=r.iScale,a=[];let n,o;for(n=0,o=r.data.length;n<o;++n)a.push(s.getPixelForValue(this.getParsed(n)[s.axis],n));const l=e.barThickness;return{min:l||QS(r),pixels:a,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:s,index:a},options:{base:n,minBarLength:o}}=this,l=n||0,c=this.getParsed(e),d=c._custom,u=jd(d);let h=c[r.axis],p=0,m=s?this.applyStack(r,c,s):h,v,y;m!==h&&(p=m-h,m=h),u&&(h=d.barStart,m=d.barEnd-d.barStart,h!==0&&Ar(h)!==Ar(d.barEnd)&&(p=0),p+=h);const k=!ve(n)&&!u?n:p;let g=r.getPixelForValue(k);if(this.chart.getDataVisibility(e)?v=r.getPixelForValue(p+m):v=g,y=v-g,Math.abs(y)<o){y=t4(y,r,l)*o,h===l&&(g-=y/2);const f=r.getPixelForDecimal(0),x=r.getPixelForDecimal(1),w=Math.min(f,x),S=Math.max(f,x);g=Math.max(Math.min(g,S),w),v=g+y,s&&!u&&(c._stacks[r.axis]._visualValues[a]=r.getValueForPixel(v)-r.getValueForPixel(g))}if(g===r.getPixelForValue(l)){const f=Ar(y)*r.getLineWidthForValue(l)/2;g+=f,y-=f}return{size:y,base:g,head:v,center:v+y/2}}_calculateBarIndexPixels(e,r){const s=r.scale,a=this.options,n=a.skipNull,o=ue(a.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(r.grouped){const u=n?this._getStackCount(e):r.stackCount,h=a.barThickness==="flex"?ZS(e,r,a,u*d):XS(e,r,a,u*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(ue(p,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,n?e:void 0)+m;l=h.start+h.chunk*v+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=s.getPixelForValue(this.getParsed(e)[s.axis],e),c=Math.min(o,r.min*r.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,r=e.vScale,s=e.data,a=s.length;let n=0;for(;n<a;++n)this.getParsed(n)[r.axis]!==null&&!s[n].hidden&&s[n].draw(this._ctx)}}q(pl,"id","bar"),q(pl,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),q(pl,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function i4(t,e,r){let s=1,a=1,n=0,o=0;if(e<Ve){const l=t,c=l+e,d=Math.cos(l),u=Math.sin(l),h=Math.cos(c),p=Math.sin(c),m=(x,w,S)=>Yi(x,l,c,!0)?1:Math.max(w,w*r,S,S*r),v=(x,w,S)=>Yi(x,l,c,!0)?-1:Math.min(w,w*r,S,S*r),y=m(0,d,h),k=m(rt,u,p),g=v(je,d,h),f=v(je+rt,u,p);s=(y-g)/2,a=(k-f)/2,n=-(y+g)/2,o=-(k+f)/2}return{ratioX:s,ratioY:a,offsetX:n,offsetY:o}}class ti extends ha{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const s=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=s;else{let n=c=>+s[c];if(be(s[e])){const{key:c="value"}=this._parsing;n=d=>+va(s[d],c)}let o,l;for(o=e,l=e+r;o<l;++o)a._parsed[o]=n(o)}}_getRotation(){return Xr(this.options.rotation-90)}_getCircumference(){return Xr(this.options.circumference)}_getRotationExtents(){let e=Ve,r=-Ve;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const a=this.chart.getDatasetMeta(s).controller,n=a._getRotation(),o=a._getCircumference();e=Math.min(e,n),r=Math.max(r,n+o)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:s}=r,a=this._cachedMeta,n=a.data,o=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(hN(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:v,offsetY:y}=i4(h,u,c),k=(s.width-o)/p,g=(s.height-o)/m,f=Math.max(Math.min(k,g)/2,0),x=sy(this.options.radius,f),w=Math.max(x*c,0),S=(x-w)/this._getVisibleDatasetWeightTotal();this.offsetX=v*x,this.offsetY=y*x,a.total=this.calculateTotal(),this.outerRadius=x-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*d,0),this.updateElements(n,0,n.length,e)}_circumference(e,r){const s=this.options,a=this._cachedMeta,n=this._getCircumference();return r&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*n/Ve)}updateElements(e,r,s,a){const n=a==="reset",o=this.chart,l=o.chartArea,c=o.options.animation,d=(l.left+l.right)/2,u=(l.top+l.bottom)/2,h=n&&c.animateScale,p=h?0:this.innerRadius,m=h?0:this.outerRadius,{sharedOptions:v,includeOptions:y}=this._getSharedOptions(r,a);let k=this._getRotation(),g;for(g=0;g<r;++g)k+=this._circumference(g,n);for(g=r;g<r+s;++g){const f=this._circumference(g,n),x=e[g],w={x:d+this.offsetX,y:u+this.offsetY,startAngle:k,endAngle:k+f,circumference:f,outerRadius:m,innerRadius:p};y&&(w.options=v||this.resolveDataElementOptions(g,x.active?"active":a)),k+=f,this.updateElement(x,g,w,a)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let s=0,a;for(a=0;a<r.length;a++){const n=e._parsed[a];n!==null&&!isNaN(n)&&this.chart.getDataVisibility(a)&&!r[a].hidden&&(s+=Math.abs(n))}return s}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?Ve*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,s=this.chart,a=s.data.labels||[],n=mp(r._parsed[e],s.options.locale);return{label:a[e]||"",value:n}}getMaxBorderWidth(e){let r=0;const s=this.chart;let a,n,o,l,c;if(!e){for(a=0,n=s.data.datasets.length;a<n;++a)if(s.isDatasetVisible(a)){o=s.getDatasetMeta(a),e=o.data,l=o.controller;break}}if(!e)return 0;for(a=0,n=e.length;a<n;++a)c=l.resolveDataElementOptions(a),c.borderAlign!=="inner"&&(r=Math.max(r,c.borderWidth||0,c.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let s=0,a=e.length;s<a;++s){const n=this.resolveDataElementOptions(s);r=Math.max(r,n.offset||0,n.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(r+=this._getRingWeight(s));return r}_getRingWeight(e){return Math.max(ue(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}q(ti,"id","doughnut"),q(ti,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),q(ti,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),q(ti,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:r,color:s}}=t.legend.options;return e.labels.map((a,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:a,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:s,lineWidth:o.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(n),index:n}})}return[]}},onClick(t,e,r){r.chart.toggleDataVisibility(e.index),r.chart.update()}}}});class ml extends ha{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:s,data:a=[],_dataset:n}=r,o=this.chart._animationsDisabled;let{start:l,count:c}=DN(r,a,o);this._drawStart=l,this._drawCount=c,ON(r)&&(l=0,c=a.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!n._decimated,s.points=a;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:d},e),this.updateElements(a,l,c,e)}updateElements(e,r,s,a){const n=a==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(r,a),p=o.axis,m=l.axis,{spanGaps:v,segment:y}=this.options,k=Ji(v)?v:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||n||a==="none",f=r+s,x=e.length;let w=r>0&&this.getParsed(r-1);for(let S=0;S<x;++S){const N=e[S],_=g?N:{};if(S<r||S>=f){_.skip=!0;continue}const b=this.getParsed(S),j=ve(b[m]),z=_[p]=o.getPixelForValue(b[p],S),I=_[m]=n||j?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,b,c):b[m],S);_.skip=isNaN(z)||isNaN(I)||j,_.stop=S>0&&Math.abs(b[p]-w[p])>k,y&&(_.parsed=b,_.raw=d.data[S]),h&&(_.options=u||this.resolveDataElementOptions(S,N.active?"active":a)),g||this.updateElement(N,S,_,a),w=b}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,s=r.options&&r.options.borderWidth||0,a=e.data||[];if(!a.length)return s;const n=a[0].size(this.resolveDataElementOptions(0)),o=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(s,n,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}q(ml,"id","line"),q(ml,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),q(ml,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Gs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class jp{constructor(e){q(this,"options"),this.options=e||{}}static override(e){Object.assign(jp.prototype,e)}init(){}formats(){return Gs()}parse(){return Gs()}format(){return Gs()}add(){return Gs()}diff(){return Gs()}startOf(){return Gs()}endOf(){return Gs()}}var Ny={_date:jp};function o4(t,e,r,s){const{controller:a,data:n,_sorted:o}=t,l=a._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&n.length){const d=l._reversePixels?CN:la;if(s){if(a._sharedOptions){const u=n[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const p=d(n,e,r-h),m=d(n,e,r+h);return{lo:p.lo,hi:m.hi}}}}else{const u=d(n,e,r);if(c){const{vScale:h}=a._cachedMeta,{_parsed:p}=t,m=p.slice(0,u.lo+1).reverse().findIndex(y=>!ve(y[h.axis]));u.lo-=Math.max(0,m);const v=p.slice(u.hi).findIndex(y=>!ve(y[h.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:n.length-1}}function uo(t,e,r,s,a){const n=t.getSortedVisibleDatasetMetas(),o=r[e];for(let l=0,c=n.length;l<c;++l){const{index:d,data:u}=n[l],{lo:h,hi:p}=o4(n[l],e,o,a);for(let m=h;m<=p;++m){const v=u[m];v.skip||s(v,d,m)}}}function l4(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(s,a){const n=e?Math.abs(s.x-a.x):0,o=r?Math.abs(s.y-a.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}}function _d(t,e,r,s,a){const n=[];return!a&&!t.isPointInArea(e)||uo(t,r,e,function(o,l,c){!a&&!Gi(o,t.chartArea,0)||o.inRange(e.x,e.y,s)&&n.push({element:o,datasetIndex:l,index:c})},!0),n}function c4(t,e,r,s){let a=[];function n(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=ny(o,{x:e.x,y:e.y});Yi(h,d,u)&&a.push({element:o,datasetIndex:l,index:c})}return uo(t,r,e,n),a}function d4(t,e,r,s,a,n){let o=[];const l=l4(r);let c=Number.POSITIVE_INFINITY;function d(u,h,p){const m=u.inRange(e.x,e.y,a);if(s&&!m)return;const v=u.getCenterPoint(a);if(!(n||t.isPointInArea(v))&&!m)return;const y=l(e,v);y<c?(o=[{element:u,datasetIndex:h,index:p}],c=y):y===c&&o.push({element:u,datasetIndex:h,index:p})}return uo(t,r,e,d),o}function Nd(t,e,r,s,a,n){return!n&&!t.isPointInArea(e)?[]:r==="r"&&!s?c4(t,e,r,a):d4(t,e,r,s,a,n)}function Yg(t,e,r,s,a){const n=[],o=r==="x"?"inXRange":"inYRange";let l=!1;return uo(t,r,e,(c,d,u)=>{c[o]&&c[o](e[r],a)&&(n.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,a))}),s&&!l?[]:n}var u4={evaluateInteractionItems:uo,modes:{index(t,e,r,s){const a=Zs(e,t),n=r.axis||"x",o=r.includeInvisible||!1,l=r.intersect?_d(t,a,n,s,o):Nd(t,a,n,!1,s,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,r,s){const a=Zs(e,t),n=r.axis||"xy",o=r.includeInvisible||!1;let l=r.intersect?_d(t,a,n,s,o):Nd(t,a,n,!1,s,o);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(t,e,r,s){const a=Zs(e,t),n=r.axis||"xy",o=r.includeInvisible||!1;return _d(t,a,n,s,o)},nearest(t,e,r,s){const a=Zs(e,t),n=r.axis||"xy",o=r.includeInvisible||!1;return Nd(t,a,n,r.intersect,s,o)},x(t,e,r,s){const a=Zs(e,t);return Yg(t,a,"x",r.intersect,s)},y(t,e,r,s){const a=Zs(e,t);return Yg(t,a,"y",r.intersect,s)}}};const Sy=["left","top","right","bottom"];function Bn(t,e){return t.filter(r=>r.pos===e)}function Gg(t,e){return t.filter(r=>Sy.indexOf(r.pos)===-1&&r.box.axis===e)}function qn(t,e){return t.sort((r,s)=>{const a=e?s:r,n=e?r:s;return a.weight===n.weight?a.index-n.index:a.weight-n.weight})}function h4(t){const e=[];let r,s,a,n,o,l;for(r=0,s=(t||[]).length;r<s;++r)a=t[r],{position:n,options:{stack:o,stackWeight:l=1}}=a,e.push({index:r,box:a,pos:n,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&n+o,stackWeight:l});return e}function p4(t){const e={};for(const r of t){const{stack:s,pos:a,stackWeight:n}=r;if(!s||!Sy.includes(a))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=n}return e}function m4(t,e){const r=p4(t),{vBoxMaxWidth:s,hBoxMaxHeight:a}=e;let n,o,l;for(n=0,o=t.length;n<o;++n){l=t[n];const{fullSize:c}=l.box,d=r[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*s:c&&e.availableWidth,l.height=a):(l.width=s,l.height=u?u*a:c&&e.availableHeight)}return r}function g4(t){const e=h4(t),r=qn(e.filter(d=>d.box.fullSize),!0),s=qn(Bn(e,"left"),!0),a=qn(Bn(e,"right")),n=qn(Bn(e,"top"),!0),o=qn(Bn(e,"bottom")),l=Gg(e,"x"),c=Gg(e,"y");return{fullSize:r,leftAndTop:s.concat(n),rightAndBottom:a.concat(c).concat(o).concat(l),chartArea:Bn(e,"chartArea"),vertical:s.concat(a).concat(c),horizontal:n.concat(o).concat(l)}}function Kg(t,e,r,s){return Math.max(t[r],e[r])+Math.max(t[s],e[s])}function Cy(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function f4(t,e,r,s){const{pos:a,box:n}=r,o=t.maxPadding;if(!be(a)){r.size&&(t[a]-=r.size);const h=s[r.stack]||{size:0,count:1};h.size=Math.max(h.size,r.horizontal?n.height:n.width),r.size=h.size/h.count,t[a]+=r.size}n.getPadding&&Cy(o,n.getPadding());const l=Math.max(0,e.outerWidth-Kg(o,t,"left","right")),c=Math.max(0,e.outerHeight-Kg(o,t,"top","bottom")),d=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,r.horizontal?{same:d,other:u}:{same:u,other:d}}function x4(t){const e=t.maxPadding;function r(s){const a=Math.max(e[s]-t[s],0);return t[s]+=a,a}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function b4(t,e){const r=e.maxPadding;function s(a){const n={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{n[o]=Math.max(e[o],r[o])}),n}return s(t?["left","right"]:["top","bottom"])}function ri(t,e,r,s){const a=[];let n,o,l,c,d,u;for(n=0,o=t.length,d=0;n<o;++n){l=t[n],c=l.box,c.update(l.width||e.w,l.height||e.h,b4(l.horizontal,e));const{same:h,other:p}=f4(e,r,l,s);d|=h&&a.length,u=u||p,c.fullSize||a.push(l)}return d&&ri(a,e,r,s)||u}function Jo(t,e,r,s,a){t.top=r,t.left=e,t.right=e+s,t.bottom=r+a,t.width=s,t.height=a}function Qg(t,e,r,s){const a=r.padding;let{x:n,y:o}=e;for(const l of t){const c=l.box,d=s[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,p=d.size||c.height;Hi(d.start)&&(o=d.start),c.fullSize?Jo(c,a.left,o,r.outerWidth-a.right-a.left,p):Jo(c,e.left+d.placed,o,h,p),d.start=o,d.placed+=h,o=c.bottom}else{const h=e.h*u,p=d.size||c.width;Hi(d.start)&&(n=d.start),c.fullSize?Jo(c,n,a.top,p,r.outerHeight-a.bottom-a.top):Jo(c,n,e.top+d.placed,p,h),d.start=n,d.placed+=h,n=c.right}}e.x=n,e.y=o}var ar={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,s){if(!t)return;const a=cr(t.options.layout.padding),n=Math.max(e-a.width,0),o=Math.max(r-a.height,0),l=g4(t.boxes),c=l.vertical,d=l.horizontal;ke(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=c.reduce((y,k)=>k.box.options&&k.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:r,padding:a,availableWidth:n,availableHeight:o,vBoxMaxWidth:n/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},a);Cy(p,cr(s));const m=Object.assign({maxPadding:p,w:n,h:o,x:a.left,y:a.top},a),v=m4(c.concat(d),h);ri(l.fullSize,m,h,v),ri(c,m,h,v),ri(d,m,h,v)&&ri(c,m,h,v),x4(m),Qg(l.leftAndTop,m,h,v),m.x+=m.w,m.y+=m.h,Qg(l.rightAndBottom,m,h,v),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ke(l.chartArea,y=>{const k=y.box;Object.assign(k,t.chartArea),k.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class My{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,s){}removeEventListener(e,r,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,s,a){return r=Math.max(0,r||e.width),s=s||e.height,{width:r,height:Math.max(0,a?Math.floor(r/a):s)}}isAttached(e){return!0}updateConfig(e){}}class y4 extends My{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const gl="$chartjs",v4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Xg=t=>t===null||t==="";function w4(t,e){const r=t.style,s=t.getAttribute("height"),a=t.getAttribute("width");if(t[gl]={initial:{height:s,width:a,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",Xg(a)){const n=Ag(t,"width");n!==void 0&&(t.width=n)}if(Xg(s))if(t.style.height==="")t.height=t.width/(e||2);else{const n=Ag(t,"height");n!==void 0&&(t.height=n)}return t}const Ey=wS?{passive:!0}:!1;function k4(t,e,r){t&&t.addEventListener(e,r,Ey)}function j4(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,Ey)}function _4(t,e){const r=v4[t.type]||t.type,{x:s,y:a}=Zs(t,e);return{type:r,chart:e,native:t,x:s!==void 0?s:null,y:a!==void 0?a:null}}function sc(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function N4(t,e,r){const s=t.canvas,a=new MutationObserver(n=>{let o=!1;for(const l of n)o=o||sc(l.addedNodes,s),o=o&&!sc(l.removedNodes,s);o&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}function S4(t,e,r){const s=t.canvas,a=new MutationObserver(n=>{let o=!1;for(const l of n)o=o||sc(l.removedNodes,s),o=o&&!sc(l.addedNodes,s);o&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}const Qi=new Map;let Zg=0;function Py(){const t=window.devicePixelRatio;t!==Zg&&(Zg=t,Qi.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function C4(t,e){Qi.size||window.addEventListener("resize",Py),Qi.set(t,e)}function M4(t){Qi.delete(t),Qi.size||window.removeEventListener("resize",Py)}function E4(t,e,r){const s=t.canvas,a=s&&kp(s);if(!a)return;const n=cy((l,c)=>{const d=a.clientWidth;r(l,c),d<a.clientWidth&&r()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||n(d,u)});return o.observe(a),C4(t,n),o}function Sd(t,e,r){r&&r.disconnect(),e==="resize"&&M4(t)}function P4(t,e,r){const s=t.canvas,a=cy(n=>{t.ctx!==null&&r(_4(n,t))},t);return k4(s,e,a),a}class T4 extends My{acquireContext(e,r){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(w4(e,r),s):null}releaseContext(e){const r=e.canvas;if(!r[gl])return!1;const s=r[gl].initial;["height","width"].forEach(n=>{const o=s[n];ve(o)?r.removeAttribute(n):r.setAttribute(n,o)});const a=s.style||{};return Object.keys(a).forEach(n=>{r.style[n]=a[n]}),r.width=r.width,delete r[gl],!0}addEventListener(e,r,s){this.removeEventListener(e,r);const a=e.$proxies||(e.$proxies={}),n={attach:N4,detach:S4,resize:E4}[r]||P4;a[r]=n(e,r,s)}removeEventListener(e,r){const s=e.$proxies||(e.$proxies={}),a=s[r];a&&(({attach:Sd,detach:Sd,resize:Sd}[r]||j4)(e,r,a),s[r]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,s,a){return vS(e,r,s,a)}isAttached(e){const r=e&&kp(e);return!!(r&&r.isConnected)}}function D4(t){return!wp()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?y4:T4}var Yo;let os=(Yo=class{constructor(){q(this,"x"),q(this,"y"),q(this,"active",!1),q(this,"options"),q(this,"$animations")}tooltipPosition(t){const{x:e,y:r}=this.getProps(["x","y"],t);return{x:e,y:r}}hasValue(){return Ji(this.x)&&Ji(this.y)}getProps(t,e){const r=this.$animations;if(!e||!r)return this;const s={};return t.forEach(a=>{s[a]=r[a]&&r[a].active()?r[a]._to:this[a]}),s}},q(Yo,"defaults",{}),q(Yo,"defaultRoutes"),Yo);function O4(t,e){const r=t.options.ticks,s=I4(t),a=Math.min(r.maxTicksLimit||s,s),n=r.major.enabled?z4(e):[],o=n.length,l=n[0],c=n[o-1],d=[];if(o>a)return L4(e,d,n,o/a),d;const u=A4(n,e,a);if(o>0){let h,p;const m=o>1?Math.round((c-l)/(o-1)):null;for(Go(e,d,u,ve(m)?0:l-m,l),h=0,p=o-1;h<p;h++)Go(e,d,u,n[h],n[h+1]);return Go(e,d,u,c,ve(m)?e.length:c+m),d}return Go(e,d,u),d}function I4(t){const e=t.options.offset,r=t._tickSize(),s=t._length/r+(e?0:1),a=t._maxLength/r;return Math.floor(Math.min(s,a))}function A4(t,e,r){const s=R4(t),a=e.length/r;if(!s)return Math.max(a,1);const n=vN(s);for(let o=0,l=n.length-1;o<l;o++){const c=n[o];if(c>a)return c}return Math.max(a,1)}function z4(t){const e=[];let r,s;for(r=0,s=t.length;r<s;r++)t[r].major&&e.push(r);return e}function L4(t,e,r,s){let a=0,n=r[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===n&&(e.push(t[o]),a++,n=r[a*s])}function Go(t,e,r,s,a){const n=ue(s,0),o=Math.min(ue(a,t.length),t.length);let l=0,c,d,u;for(r=Math.ceil(r),a&&(c=a-s,r=c/Math.floor(c/r)),u=n;u<0;)l++,u=Math.round(n+l*r);for(d=Math.max(n,0);d<o;d++)d===u&&(e.push(t[d]),l++,u=Math.round(n+l*r))}function R4(t){const e=t.length;let r,s;if(e<2)return!1;for(s=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==s)return!1;return s}const $4=t=>t==="left"?"right":t==="right"?"left":t,e0=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,t0=(t,e)=>Math.min(e||t,t);function r0(t,e){const r=[],s=t.length/e,a=t.length;let n=0;for(;n<a;n+=s)r.push(t[Math.floor(n)]);return r}function F4(t,e,r){const s=t.ticks.length,a=Math.min(e,s-1),n=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(a),d;if(!(r&&(s===1?d=Math.max(c-n,o-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(a-1))/2,c+=a<e?d:-d,c<n-l||c>o+l)))return c}function U4(t,e){ke(t,r=>{const s=r.gc,a=s.length/2;let n;if(a>e){for(n=0;n<a;++n)delete r.data[s[n]];s.splice(0,a)}})}function Vn(t){return t.drawTicks?t.tickLength:0}function s0(t,e){if(!t.display)return 0;const r=vt(t.font,e),s=cr(t.padding);return(et(t.text)?t.text.length:1)*r.lineHeight+s.height}function B4(t,e){return Pa(t,{scale:e,type:"scale"})}function q4(t,e,r){return Pa(t,{tick:r,index:e,type:"tick"})}function V4(t,e,r){let s=hp(t);return(r&&e!=="right"||!r&&e==="right")&&(s=$4(s)),s}function W4(t,e,r,s){const{top:a,left:n,bottom:o,right:l,chart:c}=t,{chartArea:d,scales:u}=c;let h=0,p,m,v;const y=o-a,k=l-n;if(t.isHorizontal()){if(m=ft(s,n,l),be(r)){const g=Object.keys(r)[0],f=r[g];v=u[g].getPixelForValue(f)+y-e}else r==="center"?v=(d.bottom+d.top)/2+y-e:v=e0(t,r,e);p=l-n}else{if(be(r)){const g=Object.keys(r)[0],f=r[g];m=u[g].getPixelForValue(f)-k+e}else r==="center"?m=(d.left+d.right)/2-k+e:m=e0(t,r,e);v=ft(s,o,a),h=r==="left"?-rt:rt}return{titleX:m,titleY:v,maxWidth:p,rotation:h}}class Mn extends os{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:s,_suggestedMax:a}=this;return e=Nr(e,Number.POSITIVE_INFINITY),r=Nr(r,Number.NEGATIVE_INFINITY),s=Nr(s,Number.POSITIVE_INFINITY),a=Nr(a,Number.NEGATIVE_INFINITY),{min:Nr(e,s),max:Nr(r,a),minDefined:lr(e),maxDefined:lr(r)}}getMinMax(e){let{min:r,max:s,minDefined:a,maxDefined:n}=this.getUserBounds(),o;if(a&&n)return{min:r,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,e),a||(r=Math.min(r,o.min)),n||(s=Math.max(s,o.max));return r=n&&r>s?s:r,s=a&&r>s?r:s,{min:Nr(r,Nr(s,r)),max:Nr(s,Nr(r,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Te(this.options.beforeUpdate,[this])}update(e,r,s){const{beginAtZero:a,grace:n,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=XN(this,n,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?r0(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=O4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,s;this.isHorizontal()?(r=this.left,s=this.right):(r=this.top,s=this.bottom,e=!e),this._startPixel=r,this._endPixel=s,this._reversePixels=e,this._length=s-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Te(this.options.afterUpdate,[this])}beforeSetDimensions(){Te(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Te(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Te(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Te(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let s,a,n;for(s=0,a=e.length;s<a;s++)n=e[s],n.label=Te(r.callback,[n.value,s,e],this)}afterTickToLabelConversion(){Te(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Te(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,s=t0(this.ticks.length,e.ticks.maxTicksLimit),a=r.minRotation||0,n=r.maxRotation;let o=a,l,c,d;if(!this._isVisible()||!r.display||a>=n||s<=1||!this.isHorizontal()){this.labelRotation=a;return}const u=this._getLabelSizes(),h=u.widest.width,p=u.highest.height,m=yt(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/s:m/(s-1),h+6>l&&(l=m/(s-(e.offset?.5:1)),c=this.maxHeight-Vn(e.grid)-r.padding-s0(e.title,this.chart.options.font),d=Math.sqrt(h*h+p*p),o=_N(Math.min(Math.asin(yt((u.highest.height+6)/l,-1,1)),Math.asin(yt(c/d,-1,1))-Math.asin(yt(p/d,-1,1)))),o=Math.max(a,Math.min(n,o))),this.labelRotation=o}afterCalculateLabelRotation(){Te(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Te(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:s,title:a,grid:n}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=s0(a,r.options.font);if(l?(e.width=this.maxWidth,e.height=Vn(n)+c):(e.height=this.maxHeight,e.width=Vn(n)+c),s.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:p}=this._getLabelSizes(),m=s.padding*2,v=Xr(this.labelRotation),y=Math.cos(v),k=Math.sin(v);if(l){const g=s.mirror?0:k*h.width+y*p.height;e.height=Math.min(this.maxHeight,e.height+g+m)}else{const g=s.mirror?0:y*h.width+k*p.height;e.width=Math.min(this.maxWidth,e.width+g+m)}this._calculatePadding(d,u,k,y)}}this._handleMargins(),l?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,s,a){const{ticks:{align:n,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;c?d?(p=a*e.width,m=s*r.height):(p=s*e.height,m=a*r.width):n==="start"?m=r.width:n==="end"?p=e.width:n!=="inner"&&(p=e.width/2,m=r.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+o)*this.width/(this.width-h),0)}else{let u=r.height/2,h=e.height/2;n==="start"?(u=0,h=e.height):n==="end"&&(u=r.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Te(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,s;for(r=0,s=e.length;r<s;r++)ve(e[r].label)&&(e.splice(r,1),s--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let s=this.ticks;r<s.length&&(s=r0(s,r)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,s){const{ctx:a,_longestTextCache:n}=this,o=[],l=[],c=Math.floor(r/t0(r,s));let d=0,u=0,h,p,m,v,y,k,g,f,x,w,S;for(h=0;h<r;h+=c){if(v=e[h].label,y=this._resolveTickFontOptions(h),a.font=k=y.string,g=n[k]=n[k]||{data:{},gc:[]},f=y.lineHeight,x=w=0,!ve(v)&&!et(v))x=Pg(a,g.data,g.gc,x,v),w=f;else if(et(v))for(p=0,m=v.length;p<m;++p)S=v[p],!ve(S)&&!et(S)&&(x=Pg(a,g.data,g.gc,x,S),w+=f);o.push(x),l.push(w),d=Math.max(x,d),u=Math.max(w,u)}U4(n,r);const N=o.indexOf(d),_=l.indexOf(u),b=j=>({width:o[j]||0,height:l[j]||0});return{first:b(0),last:b(r-1),widest:b(N),highest:b(_),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return SN(this._alignToPixels?Ys(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const s=r[e];return s.$context||(s.$context=q4(this.getContext(),e,s))}return this.$context||(this.$context=B4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=Xr(this.labelRotation),s=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r)),n=this._getLabelSizes(),o=e.autoSkipPadding||0,l=n?n.widest.width+o:0,c=n?n.highest.height+o:0;return this.isHorizontal()?c*s>l*a?l/s:c/a:c*a<l*s?c/s:l/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,s=this.chart,a=this.options,{grid:n,position:o,border:l}=a,c=n.offset,d=this.isHorizontal(),u=this.ticks.length+(c?1:0),h=Vn(n),p=[],m=l.setContext(this.getContext()),v=m.display?m.width:0,y=v/2,k=function(L){return Ys(s,L,v)};let g,f,x,w,S,N,_,b,j,z,I,A;if(o==="top")g=k(this.bottom),N=this.bottom-h,b=g-y,z=k(e.top)+y,A=e.bottom;else if(o==="bottom")g=k(this.top),z=e.top,A=k(e.bottom)-y,N=g+y,b=this.top+h;else if(o==="left")g=k(this.right),S=this.right-h,_=g-y,j=k(e.left)+y,I=e.right;else if(o==="right")g=k(this.left),j=e.left,I=k(e.right)-y,S=g+y,_=this.left+h;else if(r==="x"){if(o==="center")g=k((e.top+e.bottom)/2+.5);else if(be(o)){const L=Object.keys(o)[0],Y=o[L];g=k(this.chart.scales[L].getPixelForValue(Y))}z=e.top,A=e.bottom,N=g+y,b=N+h}else if(r==="y"){if(o==="center")g=k((e.left+e.right)/2);else if(be(o)){const L=Object.keys(o)[0],Y=o[L];g=k(this.chart.scales[L].getPixelForValue(Y))}S=g-y,_=S-h,j=e.left,I=e.right}const F=ue(a.ticks.maxTicksLimit,u),H=Math.max(1,Math.ceil(u/F));for(f=0;f<u;f+=H){const L=this.getContext(f),Y=n.setContext(L),P=l.setContext(L),$=Y.lineWidth,B=Y.color,Q=P.dash||[],U=P.dashOffset,G=Y.tickWidth,M=Y.tickColor,O=Y.tickBorderDash||[],R=Y.tickBorderDashOffset;x=F4(this,f,c),x!==void 0&&(w=Ys(s,x,$),d?S=_=j=I=w:N=b=z=A=w,p.push({tx1:S,ty1:N,tx2:_,ty2:b,x1:j,y1:z,x2:I,y2:A,width:$,color:B,borderDash:Q,borderDashOffset:U,tickWidth:G,tickColor:M,tickBorderDash:O,tickBorderDashOffset:R}))}return this._ticksLength=u,this._borderValue=g,p}_computeLabelItems(e){const r=this.axis,s=this.options,{position:a,ticks:n}=s,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=n,p=Vn(s.grid),m=p+u,v=h?-u:m,y=-Xr(this.labelRotation),k=[];let g,f,x,w,S,N,_,b,j,z,I,A,F="middle";if(a==="top")N=this.bottom-v,_=this._getXAxisLabelAlignment();else if(a==="bottom")N=this.top+v,_=this._getXAxisLabelAlignment();else if(a==="left"){const L=this._getYAxisLabelAlignment(p);_=L.textAlign,S=L.x}else if(a==="right"){const L=this._getYAxisLabelAlignment(p);_=L.textAlign,S=L.x}else if(r==="x"){if(a==="center")N=(e.top+e.bottom)/2+m;else if(be(a)){const L=Object.keys(a)[0],Y=a[L];N=this.chart.scales[L].getPixelForValue(Y)+m}_=this._getXAxisLabelAlignment()}else if(r==="y"){if(a==="center")S=(e.left+e.right)/2-m;else if(be(a)){const L=Object.keys(a)[0],Y=a[L];S=this.chart.scales[L].getPixelForValue(Y)}_=this._getYAxisLabelAlignment(p).textAlign}r==="y"&&(c==="start"?F="top":c==="end"&&(F="bottom"));const H=this._getLabelSizes();for(g=0,f=l.length;g<f;++g){x=l[g],w=x.label;const L=n.setContext(this.getContext(g));b=this.getPixelForTick(g)+n.labelOffset,j=this._resolveTickFontOptions(g),z=j.lineHeight,I=et(w)?w.length:1;const Y=I/2,P=L.color,$=L.textStrokeColor,B=L.textStrokeWidth;let Q=_;o?(S=b,_==="inner"&&(g===f-1?Q=this.options.reverse?"left":"right":g===0?Q=this.options.reverse?"right":"left":Q="center"),a==="top"?d==="near"||y!==0?A=-I*z+z/2:d==="center"?A=-H.highest.height/2-Y*z+z:A=-H.highest.height+z/2:d==="near"||y!==0?A=z/2:d==="center"?A=H.highest.height/2-Y*z:A=H.highest.height-I*z,h&&(A*=-1),y!==0&&!L.showLabelBackdrop&&(S+=z/2*Math.sin(y))):(N=b,A=(1-I)*z/2);let U;if(L.showLabelBackdrop){const G=cr(L.backdropPadding),M=H.heights[g],O=H.widths[g];let R=A-G.top,D=0-G.left;switch(F){case"middle":R-=M/2;break;case"bottom":R-=M;break}switch(_){case"center":D-=O/2;break;case"right":D-=O;break;case"inner":g===f-1?D-=O:g>0&&(D-=O/2);break}U={left:D,top:R,width:O+G.width,height:M+G.height,color:L.backdropColor}}k.push({label:w,font:j,textOffset:A,options:{rotation:y,color:P,strokeColor:$,strokeWidth:B,textAlign:Q,textBaseline:F,translation:[S,N],backdrop:U}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-Xr(this.labelRotation))return e==="top"?"left":"right";let s="center";return r.align==="start"?s="left":r.align==="end"?s="right":r.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:s,mirror:a,padding:n}}=this.options,o=this._getLabelSizes(),l=e+n,c=o.widest.width;let d,u;return r==="left"?a?(u=this.right+n,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u=this.left)):r==="right"?a?(u=this.left+n,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:s,top:a,width:n,height:o}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(s,a,n,o),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const s=this.ticks.findIndex(a=>a.value===e);return s>=0?r.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const r=this.options.grid,s=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let n,o;const l=(c,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(r.display)for(n=0,o=a.length;n<o;++n){const c=a[n];r.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),r.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:s,grid:a}}=this,n=s.setContext(this.getContext()),o=s.display?n.width:0;if(!o)return;const l=a.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,p;this.isHorizontal()?(d=Ys(e,this.left,o)-o/2,u=Ys(e,this.right,l)+l/2,h=p=c):(h=Ys(e,this.top,o)-o/2,p=Ys(e,this.bottom,l)+l/2,d=u=c),r.save(),r.lineWidth=n.width,r.strokeStyle=n.color,r.beginPath(),r.moveTo(d,h),r.lineTo(u,p),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&gp(r,s);const a=this.getLabelItems(e);for(const n of a){const o=n.options,l=n.font,c=n.label,d=n.textOffset;Ki(r,c,0,d,l,o)}s&&fp(r)}drawTitle(){const{ctx:e,options:{position:r,title:s,reverse:a}}=this;if(!s.display)return;const n=vt(s.font),o=cr(s.padding),l=s.align;let c=n.lineHeight/2;r==="bottom"||r==="center"||be(r)?(c+=o.bottom,et(s.text)&&(c+=n.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:h,rotation:p}=W4(this,c,r,l);Ki(e,s.text,0,0,n,{color:s.color,maxWidth:h,rotation:p,textAlign:V4(l,r,a),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,s=ue(e.grid&&e.grid.z,-1),a=ue(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Mn.prototype.draw?[{z:r,draw:n=>{this.draw(n)}}]:[{z:s,draw:n=>{this.drawBackground(),this.drawGrid(n),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:r,draw:n=>{this.drawLabels(n)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",a=[];let n,o;for(n=0,o=r.length;n<o;++n){const l=r[n];l[s]===this.id&&(!e||l.type===e)&&a.push(l)}return a}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return vt(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ko{constructor(e,r,s){this.type=e,this.scope=r,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let s;Y4(r)&&(s=this.register(r));const a=this.items,n=e.id,o=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+e);return n in a||(a[n]=e,H4(e,o,s),this.override&&Je.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const r=this.items,s=e.id,a=this.scope;s in r&&delete r[s],a&&s in Je[a]&&(delete Je[a][s],this.override&&delete wa[s])}}function H4(t,e,r){const s=Wi(Object.create(null),[r?Je.get(r):{},Je.get(e),t.defaults]);Je.set(e,s),t.defaultRoutes&&J4(e,t.defaultRoutes),t.descriptors&&Je.describe(e,t.descriptors)}function J4(t,e){Object.keys(e).forEach(r=>{const s=r.split("."),a=s.pop(),n=[t].concat(s).join("."),o=e[r].split("."),l=o.pop(),c=o.join(".");Je.route(n,a,c,l)})}function Y4(t){return"id"in t&&"defaults"in t}class G4{constructor(){this.controllers=new Ko(ha,"datasets",!0),this.elements=new Ko(os,"elements"),this.plugins=new Ko(Object,"plugins"),this.scales=new Ko(Mn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,s){[...r].forEach(a=>{const n=s||this._getRegistryForType(a);s||n.isForType(a)||n===this.plugins&&a.id?this._exec(e,n,a):ke(a,o=>{const l=s||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,r,s){const a=dp(e);Te(s["before"+a],[],s),r[e](s),Te(s["after"+a],[],s)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const s=this._typedRegistries[r];if(s.isForType(e))return s}return this.plugins}_get(e,r,s){const a=r.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return a}}var Mr=new G4;class K4{constructor(){this._init=[]}notify(e,r,s,a){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const n=a?this._descriptors(e).filter(a):this._descriptors(e),o=this._notify(n,e,r,s);return r==="afterDestroy"&&(this._notify(n,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,r,s,a){a=a||{};for(const n of e){const o=n.plugin,l=o[s],c=[r,a,n.options];if(Te(l,c,o)===!1&&a.cancelable)return!1}return!0}invalidate(){ve(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const s=e&&e.config,a=ue(s.options&&s.options.plugins,{}),n=Q4(s);return a===!1&&!r?[]:Z4(e,n,a,r)}_notifyStateChanges(e){const r=this._oldCache||[],s=this._cache,a=(n,o)=>n.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(a(r,s),e,"stop"),this._notify(a(s,r),e,"start")}}function Q4(t){const e={},r=[],s=Object.keys(Mr.plugins.items);for(let n=0;n<s.length;n++)r.push(Mr.getPlugin(s[n]));const a=t.plugins||[];for(let n=0;n<a.length;n++){const o=a[n];r.indexOf(o)===-1&&(r.push(o),e[o.id]=!0)}return{plugins:r,localIds:e}}function X4(t,e){return!e&&t===!1?null:t===!0?{}:t}function Z4(t,{plugins:e,localIds:r},s,a){const n=[],o=t.getContext();for(const l of e){const c=l.id,d=X4(s[c],a);d!==null&&n.push({plugin:l,options:e3(t.config,{plugin:l,local:r[c]},d,o)})}return n}function e3(t,{plugin:e,local:r},s,a){const n=t.pluginScopeKeys(e),o=t.getOptionScopes(s,n);return r&&e.defaults&&o.push(e.defaults),t.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ju(t,e){const r=Je.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function t3(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function r3(t,e){return t===e?"_index_":"_value_"}function a0(t){if(t==="x"||t==="y"||t==="r")return t}function s3(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Yu(t,...e){if(a0(t))return t;for(const r of e){const s=r.axis||s3(r.position)||t.length>1&&a0(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function n0(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function a3(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(r.length)return n0(t,"x",r[0])||n0(t,"y",r[0])}return{}}function n3(t,e){const r=wa[t.type]||{scales:{}},s=e.scales||{},a=Ju(t.type,e),n=Object.create(null);return Object.keys(s).forEach(o=>{const l=s[o];if(!be(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Yu(o,l,a3(o,t),Je.scales[l.type]),d=r3(c,a),u=r.scales||{};n[o]=bi(Object.create(null),[{axis:c},l,u[c],u[d]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||Ju(l,e),d=(wa[l]||{}).scales||{};Object.keys(d).forEach(u=>{const h=t3(u,c),p=o[h+"AxisID"]||h;n[p]=n[p]||Object.create(null),bi(n[p],[{axis:h},s[p],d[u]])})}),Object.keys(n).forEach(o=>{const l=n[o];bi(l,[Je.scales[l.type],Je.scale])}),n}function Ty(t){const e=t.options||(t.options={});e.plugins=ue(e.plugins,{}),e.scales=n3(t,e)}function Dy(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function i3(t){return t=t||{},t.data=Dy(t.data),Ty(t),t}const i0=new Map,Oy=new Set;function Qo(t,e){let r=i0.get(t);return r||(r=e(),i0.set(t,r),Oy.add(r)),r}const Wn=(t,e,r)=>{const s=va(e,r);s!==void 0&&t.add(s)};class o3{constructor(e){this._config=i3(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Dy(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Ty(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Qo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return Qo(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return Qo(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,s=this.type;return Qo(`${s}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const s=this._scopeCache;let a=s.get(e);return(!a||r)&&(a=new Map,s.set(e,a)),a}getOptionScopes(e,r,s){const{options:a,type:n}=this,o=this._cachedScopes(e,s),l=o.get(r);if(l)return l;const c=new Set;r.forEach(u=>{e&&(c.add(e),u.forEach(h=>Wn(c,e,h))),u.forEach(h=>Wn(c,a,h)),u.forEach(h=>Wn(c,wa[n]||{},h)),u.forEach(h=>Wn(c,Je,h)),u.forEach(h=>Wn(c,Wu,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),Oy.has(r)&&o.set(r,d),d}chartOptionScopes(){const{options:e,type:r}=this;return[e,wa[r]||{},Je.datasets[r]||{},{type:r},Je,Wu]}resolveNamedOptions(e,r,s,a=[""]){const n={$shared:!0},{resolver:o,subPrefixes:l}=o0(this._resolverCache,e,a);let c=o;if(c3(o,r)){n.$shared=!1,s=Rs(s)?s():s;const d=this.createResolver(e,s,l);c=vn(o,s,d)}for(const d of r)n[d]=c[d];return n}createResolver(e,r,s=[""],a){const{resolver:n}=o0(this._resolverCache,e,s);return be(r)?vn(n,r,void 0,a):n}}function o0(t,e,r){let s=t.get(e);s||(s=new Map,t.set(e,s));const a=r.join();let n=s.get(a);return n||(n={resolver:bp(e,r),subPrefixes:r.filter(o=>!o.toLowerCase().includes("hover"))},s.set(a,n)),n}const l3=t=>be(t)&&Object.getOwnPropertyNames(t).some(e=>Rs(t[e]));function c3(t,e){const{isScriptable:r,isIndexable:s}=my(t);for(const a of e){const n=r(a),o=s(a),l=(o||n)&&t[a];if(n&&(Rs(l)||l3(l))||o&&et(l))return!0}return!1}var d3="4.5.0";const u3=["top","bottom","left","right","chartArea"];function l0(t,e){return t==="top"||t==="bottom"||u3.indexOf(t)===-1&&e==="x"}function c0(t,e){return function(r,s){return r[t]===s[t]?r[e]-s[e]:r[t]-s[t]}}function d0(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),Te(r&&r.onComplete,[t],e)}function h3(t){const e=t.chart,r=e.options.animation;Te(r&&r.onProgress,[t],e)}function Iy(t){return wp()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const fl={},u0=t=>{const e=Iy(t);return Object.values(fl).filter(r=>r.canvas===e).pop()};function p3(t,e,r){const s=Object.keys(t);for(const a of s){const n=+a;if(n>=e){const o=t[a];delete t[a],(r>0||n>e)&&(t[n+r]=o)}}}function m3(t,e,r,s){return!r||t.type==="mouseout"?null:s?e:t}var us;let Tc=(us=class{static register(...t){Mr.add(...t),h0()}static unregister(...t){Mr.remove(...t),h0()}constructor(t,e){const r=this.config=new o3(e),s=Iy(t),a=u0(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const n=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||D4(s)),this.platform.updateConfig(r);const o=this.platform.acquireContext(s,n.aspectRatio),l=o&&o.canvas,c=l&&l.height,d=l&&l.width;if(this.id=uN(),this.ctx=o,this.canvas=l,this.width=d,this.height=c,this._options=n,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new K4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=PN(u=>this.update(u),n.resizeDelay||0),this._dataChanges=[],fl[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ur.listen(this,"complete",d0),Ur.listen(this,"progress",h3),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:r,height:s,_aspectRatio:a}=this;return ve(t)?e&&a?a:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Mr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ig(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Tg(this.canvas,this.ctx),this}stop(){return Ur.stop(this),this}resize(t,e){Ur.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const r=this.options,s=this.canvas,a=r.maintainAspectRatio&&this.aspectRatio,n=this.platform.getMaximumSize(s,t,e,a),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=n.width,this.height=n.height,this._aspectRatio=this.aspectRatio,Ig(this,o,!0)&&(this.notifyPlugins("resize",{size:n}),Te(r.onResize,[this,n],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};ke(t,(e,r)=>{e.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,r=this.scales,s=Object.keys(r).reduce((n,o)=>(n[o]=!1,n),{});let a=[];e&&(a=a.concat(Object.keys(e).map(n=>{const o=e[n],l=Yu(n,o),c=l==="r",d=l==="x";return{options:o,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),ke(a,n=>{const o=n.options,l=o.id,c=Yu(l,o),d=ue(o.type,n.dtype);(o.position===void 0||l0(o.position,c)!==l0(n.dposition))&&(o.position=n.dposition),s[l]=!0;let u=null;if(l in r&&r[l].type===d)u=r[l];else{const h=Mr.getScale(d);u=new h({id:l,type:d,ctx:this.ctx,chart:this}),r[u.id]=u}u.init(o,t)}),ke(s,(n,o)=>{n||delete r[o]}),ke(r,n=>{ar.configure(this,n,n.options),ar.addBox(this,n)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,r=t.length;if(t.sort((s,a)=>s.index-a.index),r>e){for(let s=e;s<r;++s)this._destroyDatasetMeta(s);t.splice(e,r-e)}this._sortedMetasets=t.slice(0).sort(c0("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((r,s)=>{e.filter(a=>a===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=e.length;r<s;r++){const a=e[r];let n=this.getDatasetMeta(r);const o=a.type||this.config.type;if(n.type&&n.type!==o&&(this._destroyDatasetMeta(r),n=this.getDatasetMeta(r)),n.type=o,n.indexAxis=a.indexAxis||Ju(o,this.options),n.order=a.order||0,n.index=r,n.label=""+a.label,n.visible=this.isDatasetVisible(r),n.controller)n.controller.updateIndex(r),n.controller.linkScales();else{const l=Mr.getController(o),{datasetElementType:c,dataElementType:d}=Je.datasets[o];Object.assign(l,{dataElementType:Mr.getElement(d),datasetElementType:c&&Mr.getElement(c)}),n.controller=new l(this,r),t.push(n.controller)}}return this._updateMetasets(),t}_resetElements(){ke(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const r=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let n=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:u}=this.getDatasetMeta(c),h=!s&&a.indexOf(u)===-1;u.buildOrUpdateElements(h),n=Math.max(+u.getMaxOverflow(),n)}n=this._minPadding=r.layout.autoPadding?n:0,this._updateLayout(n),s||ke(a,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(c0("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){ke(this.scales,t=>{ar.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!wg(e,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:a}of e){const n=r==="_removeElements"?-a:a;p3(t,s,n)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,r=a=>new Set(t.filter(n=>n[0]===a).map((n,o)=>o+","+n.splice(1).join(","))),s=r(0);for(let a=1;a<e;a++)if(!wg(s,r(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ar.update(this,this.width,this.height,t);const e=this.chartArea,r=e.width<=0||e.height<=0;this._layers=[],ke(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,r=this.data.datasets.length;e<r;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,r=this.data.datasets.length;e<r;++e)this._updateDataset(e,Rs(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const r=this.getDatasetMeta(t),s={meta:r,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ur.has(this)?this.attached&&!Ur.running(this)&&Ur.start(this):(this.draw(),d0({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,r=[];let s,a;for(s=0,a=e.length;s<a;++s){const n=e[s];(!t||n.visible)&&r.push(n)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,r={meta:t,index:t.index,cancelable:!0},s=AS(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&gp(e,s),t.controller.draw(),s&&fp(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return Gi(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,r,s){const a=u4.modes[e];return typeof a=="function"?a(this,t,r,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],r=this._metasets;let s=r.filter(a=>a&&a._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Pa(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!e.hidden}setDatasetVisibility(t,e){const r=this.getDatasetMeta(t);r.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,r){const s=r?"show":"hide",a=this.getDatasetMeta(t),n=a.controller._resolveAnimations(void 0,s);Hi(e)?(a.data[e].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),n.update(a,{visible:r}),this.update(o=>o.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ur.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Tg(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete fl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,r=(a,n)=>{e.addEventListener(this,a,n),t[a]=n},s=(a,n,o)=>{a.offsetX=n,a.offsetY=o,this._eventHandler(a)};ke(this.options.events,a=>r(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,r=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},a=(l,c)=>{this.canvas&&this.resize(l,c)};let n;const o=()=>{s("attach",o),this.attached=!0,this.resize(),r("resize",a),r("detach",n)};n=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),r("attach",o)},e.isAttached(this.canvas)?o():n()}unbindEvents(){ke(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ke(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,r){const s=r?"set":"remove";let a,n,o,l;for(e==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),o=0,l=t.length;o<l;++o){n=t[o];const c=n&&this.getDatasetMeta(n.datasetIndex).controller;c&&c[s+"HoverStyle"](n.element,n.datasetIndex,n.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],r=t.map(({datasetIndex:s,index:a})=>{const n=this.getDatasetMeta(s);if(!n)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:n.data[a],index:a}});!Xl(r,e)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,e))}notifyPlugins(t,e,r){return this._plugins.notify(this,t,e,r)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,r){const s=this.options.hover,a=(l,c)=>l.filter(d=>!c.some(u=>d.datasetIndex===u.datasetIndex&&d.index===u.index)),n=a(e,t),o=r?t:a(t,e);n.length&&this.updateHoverStyle(n,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(t,e){const r={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=n=>(n.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const a=this._handleEvent(t,e,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(a||r.changed)&&this.render(),this}_handleEvent(t,e,r){const{_active:s=[],options:a}=this,n=e,o=this._getActiveElements(t,s,r,n),l=xN(t),c=m3(t,this._lastEvent,r,l);r&&(this._lastEvent=null,Te(a.onHover,[t,o,this],this),l&&Te(a.onClick,[t,o,this],this));const d=!Xl(o,s);return(d||e)&&(this._active=o,this._updateHoverStyles(o,s,e)),this._lastEvent=c,d}_getActiveElements(t,e,r,s){if(t.type==="mouseout")return[];if(!r)return e;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,s)}},q(us,"defaults",Je),q(us,"instances",fl),q(us,"overrides",wa),q(us,"registry",Mr),q(us,"version",d3),q(us,"getChart",u0),us);function h0(){return ke(Tc.instances,t=>t._plugins.invalidate())}function g3(t,e,r){const{startAngle:s,x:a,y:n,outerRadius:o,innerRadius:l,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,h=Math.min(d/o,gr(s-r));if(t.beginPath(),t.arc(a,n,o-d/2,s+h/2,r-h/2),l>0){const p=Math.min(d/l,gr(s-r));t.arc(a,n,l+d/2,r-p/2,s+p/2,!0)}else{const p=Math.min(d/2,o*gr(s-r));if(u==="round")t.arc(a,n,p,r-je/2,s+je/2,!0);else if(u==="bevel"){const m=2*p*p,v=-m*Math.cos(r+je/2)+a,y=-m*Math.sin(r+je/2)+n,k=m*Math.cos(s+je/2)+a,g=m*Math.sin(s+je/2)+n;t.lineTo(v,y),t.lineTo(k,g)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function f3(t,e,r){const{startAngle:s,pixelMargin:a,x:n,y:o,outerRadius:l,innerRadius:c}=e;let d=a/l;t.beginPath(),t.arc(n,o,l,s-d,r+d),c>a?(d=a/c,t.arc(n,o,c,r+d,s-d,!0)):t.arc(n,o,a,r+rt,s-rt),t.closePath(),t.clip()}function x3(t){return xp(t,["outerStart","outerEnd","innerStart","innerEnd"])}function b3(t,e,r,s){const a=x3(t.options.borderRadius),n=(r-e)/2,o=Math.min(n,s*e/2),l=c=>{const d=(r-Math.min(n,c))*s/2;return yt(c,0,Math.min(n,d))};return{outerStart:l(a.outerStart),outerEnd:l(a.outerEnd),innerStart:yt(a.innerStart,0,o),innerEnd:yt(a.innerEnd,0,o)}}function Ra(t,e,r,s){return{x:r+t*Math.cos(e),y:s+t*Math.sin(e)}}function ac(t,e,r,s,a,n){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=e,h=Math.max(e.outerRadius+s+r-d,0),p=u>0?u+s+r+d:0;let m=0;const v=a-c;if(s){const L=u>0?u-s:0,Y=h>0?h-s:0,P=(L+Y)/2,$=P!==0?v*P/(P+s):v;m=(v-$)/2}const y=Math.max(.001,v*h-r/je)/h,k=(v-y)/2,g=c+k+m,f=a-k-m,{outerStart:x,outerEnd:w,innerStart:S,innerEnd:N}=b3(e,p,h,f-g),_=h-x,b=h-w,j=g+x/_,z=f-w/b,I=p+S,A=p+N,F=g+S/I,H=f-N/A;if(t.beginPath(),n){const L=(j+z)/2;if(t.arc(o,l,h,j,L),t.arc(o,l,h,L,z),w>0){const B=Ra(b,z,o,l);t.arc(B.x,B.y,w,z,f+rt)}const Y=Ra(A,f,o,l);if(t.lineTo(Y.x,Y.y),N>0){const B=Ra(A,H,o,l);t.arc(B.x,B.y,N,f+rt,H+Math.PI)}const P=(f-N/p+(g+S/p))/2;if(t.arc(o,l,p,f-N/p,P,!0),t.arc(o,l,p,P,g+S/p,!0),S>0){const B=Ra(I,F,o,l);t.arc(B.x,B.y,S,F+Math.PI,g-rt)}const $=Ra(_,g,o,l);if(t.lineTo($.x,$.y),x>0){const B=Ra(_,j,o,l);t.arc(B.x,B.y,x,g-rt,j)}}else{t.moveTo(o,l);const L=Math.cos(j)*h+o,Y=Math.sin(j)*h+l;t.lineTo(L,Y);const P=Math.cos(z)*h+o,$=Math.sin(z)*h+l;t.lineTo(P,$)}t.closePath()}function y3(t,e,r,s,a){const{fullCircles:n,startAngle:o,circumference:l}=e;let c=e.endAngle;if(n){ac(t,e,r,s,c,a);for(let d=0;d<n;++d)t.fill();isNaN(l)||(c=o+(l%Ve||Ve))}return ac(t,e,r,s,c,a),t.fill(),c}function v3(t,e,r,s,a){const{fullCircles:n,startAngle:o,circumference:l,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:p,borderRadius:m}=c,v=c.borderAlign==="inner";if(!d)return;t.setLineDash(h||[]),t.lineDashOffset=p,v?(t.lineWidth=d*2,t.lineJoin=u||"round"):(t.lineWidth=d,t.lineJoin=u||"bevel");let y=e.endAngle;if(n){ac(t,e,r,s,y,a);for(let k=0;k<n;++k)t.stroke();isNaN(l)||(y=o+(l%Ve||Ve))}v&&f3(t,e,y),c.selfJoin&&y-o>=je&&m===0&&u!=="miter"&&g3(t,e,y),n||(ac(t,e,r,s,y,a),t.stroke())}class si extends os{constructor(e){super(),q(this,"circumference"),q(this,"endAngle"),q(this,"fullCircles"),q(this,"innerRadius"),q(this,"outerRadius"),q(this,"pixelMargin"),q(this,"startAngle"),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,r,s){const a=this.getProps(["x","y"],s),{angle:n,distance:o}=ny(a,{x:e,y:r}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,m=ue(h,c-l),v=Yi(n,l,c)&&l!==c,y=m>=Ve||v,k=js(o,d+p,u+p);return y&&k}getCenterPoint(e){const{x:r,y:s,startAngle:a,endAngle:n,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,u=(a+n)/2,h=(o+l+d+c)/2;return{x:r+Math.cos(u)*h,y:s+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:r,circumference:s}=this,a=(r.offset||0)/4,n=(r.spacing||0)/2,o=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>Ve?Math.floor(s/Ve):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*a,Math.sin(l)*a);const c=1-Math.sin(Math.min(je,s||0)),d=a*c;e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,y3(e,this,d,n,o),v3(e,this,d,n,o),e.restore()}}q(si,"id","arc"),q(si,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),q(si,"defaultRoutes",{backgroundColor:"backgroundColor"}),q(si,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function Ay(t,e,r=e){t.lineCap=ue(r.borderCapStyle,e.borderCapStyle),t.setLineDash(ue(r.borderDash,e.borderDash)),t.lineDashOffset=ue(r.borderDashOffset,e.borderDashOffset),t.lineJoin=ue(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ue(r.borderWidth,e.borderWidth),t.strokeStyle=ue(r.borderColor,e.borderColor)}function w3(t,e,r){t.lineTo(r.x,r.y)}function k3(t){return t.stepped?qN:t.tension||t.cubicInterpolationMode==="monotone"?VN:w3}function zy(t,e,r={}){const s=t.length,{start:a=0,end:n=s-1}=r,{start:o,end:l}=e,c=Math.max(a,o),d=Math.min(n,l),u=a<o&&n<o||a>l&&n>l;return{count:s,start:c,loop:e.loop,ilen:d<c&&!u?s+d-c:d-c}}function j3(t,e,r,s){const{points:a,options:n}=e,{count:o,start:l,loop:c,ilen:d}=zy(a,r,s),u=k3(n);let{move:h=!0,reverse:p}=s||{},m,v,y;for(m=0;m<=d;++m)v=a[(l+(p?d-m:m))%o],!v.skip&&(h?(t.moveTo(v.x,v.y),h=!1):u(t,y,v,p,n.stepped),y=v);return c&&(v=a[(l+(p?d:0))%o],u(t,y,v,p,n.stepped)),!!c}function _3(t,e,r,s){const a=e.points,{count:n,start:o,ilen:l}=zy(a,r,s),{move:c=!0,reverse:d}=s||{};let u=0,h=0,p,m,v,y,k,g;const f=w=>(o+(d?l-w:w))%n,x=()=>{y!==k&&(t.lineTo(u,k),t.lineTo(u,y),t.lineTo(u,g))};for(c&&(m=a[f(0)],t.moveTo(m.x,m.y)),p=0;p<=l;++p){if(m=a[f(p)],m.skip)continue;const w=m.x,S=m.y,N=w|0;N===v?(S<y?y=S:S>k&&(k=S),u=(h*u+w)/++h):(x(),t.lineTo(w,S),v=N,h=0,y=k=S),g=S}x()}function Gu(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?_3:j3}function N3(t){return t.stepped?kS:t.tension||t.cubicInterpolationMode==="monotone"?jS:ea}function S3(t,e,r,s){let a=e._path;a||(a=e._path=new Path2D,e.path(a,r,s)&&a.closePath()),Ay(t,e.options),t.stroke(a)}function C3(t,e,r,s){const{segments:a,options:n}=e,o=Gu(e);for(const l of a)Ay(t,n,l.style),t.beginPath(),o(t,e,l,{start:r,end:r+s-1})&&t.closePath(),t.stroke()}const M3=typeof Path2D=="function";function E3(t,e,r,s){M3&&!e.options.segment?S3(t,e,r,s):C3(t,e,r,s)}class ai extends os{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const a=s.spanGaps?this._loop:this._fullLoop;mS(this._points,s,e,a,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=TS(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,s=e.length;return s&&r[e[s-1].end]}interpolate(e,r){const s=this.options,a=e[r],n=this.points,o=MS(this,{property:r,start:a,end:a});if(!o.length)return;const l=[],c=N3(s);let d,u;for(d=0,u=o.length;d<u;++d){const{start:h,end:p}=o[d],m=n[h],v=n[p];if(m===v){l.push(m);continue}const y=Math.abs((a-m[r])/(v[r]-m[r])),k=c(m,v,y,s.stepped);k[r]=e[r],l.push(k)}return l.length===1?l[0]:l}pathSegment(e,r,s){return Gu(this)(e,this,r,s)}path(e,r,s){const a=this.segments,n=Gu(this);let o=this._loop;r=r||0,s=s||this.points.length-r;for(const l of a)o&=n(e,this,l,{start:r,end:r+s-1});return!!o}draw(e,r,s,a){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(e.save(),E3(e,this,s,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}q(ai,"id","line"),q(ai,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),q(ai,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),q(ai,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function p0(t,e,r,s){const a=t.options,{[r]:n}=t.getProps([r],s);return Math.abs(e-n)<a.radius+a.hitRadius}class xl extends os{constructor(e){super(),q(this,"parsed"),q(this,"skip"),q(this,"stop"),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,r,s){const a=this.options,{x:n,y:o}=this.getProps(["x","y"],s);return Math.pow(e-n,2)+Math.pow(r-o,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,r){return p0(this,e,"x",r)}inYRange(e,r){return p0(this,e,"y",r)}getCenterPoint(e){const{x:r,y:s}=this.getProps(["x","y"],e);return{x:r,y:s}}size(e){e=e||this.options||{};let r=e.radius||0;r=Math.max(r,r&&e.hoverRadius||0);const s=r&&e.borderWidth||0;return(r+s)*2}draw(e,r){const s=this.options;this.skip||s.radius<.1||!Gi(this,r,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,Hu(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}q(xl,"id","point"),q(xl,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),q(xl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Ly(t,e){const{x:r,y:s,base:a,width:n,height:o}=t.getProps(["x","y","base","width","height"],e);let l,c,d,u,h;return t.horizontal?(h=o/2,l=Math.min(r,a),c=Math.max(r,a),d=s-h,u=s+h):(h=n/2,l=r-h,c=r+h,d=Math.min(s,a),u=Math.max(s,a)),{left:l,top:d,right:c,bottom:u}}function _s(t,e,r,s){return t?0:yt(e,r,s)}function P3(t,e,r){const s=t.options.borderWidth,a=t.borderSkipped,n=py(s);return{t:_s(a.top,n.top,0,r),r:_s(a.right,n.right,0,e),b:_s(a.bottom,n.bottom,0,r),l:_s(a.left,n.left,0,e)}}function T3(t,e,r){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,n=ln(a),o=Math.min(e,r),l=t.borderSkipped,c=s||be(a);return{topLeft:_s(!c||l.top||l.left,n.topLeft,0,o),topRight:_s(!c||l.top||l.right,n.topRight,0,o),bottomLeft:_s(!c||l.bottom||l.left,n.bottomLeft,0,o),bottomRight:_s(!c||l.bottom||l.right,n.bottomRight,0,o)}}function D3(t){const e=Ly(t),r=e.right-e.left,s=e.bottom-e.top,a=P3(t,r/2,s/2),n=T3(t,r/2,s/2);return{outer:{x:e.left,y:e.top,w:r,h:s,radius:n},inner:{x:e.left+a.l,y:e.top+a.t,w:r-a.l-a.r,h:s-a.t-a.b,radius:{topLeft:Math.max(0,n.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,n.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,n.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,n.bottomRight-Math.max(a.b,a.r))}}}}function Cd(t,e,r,s){const a=e===null,n=r===null,o=t&&!(a&&n)&&Ly(t,s);return o&&(a||js(e,o.left,o.right))&&(n||js(r,o.top,o.bottom))}function O3(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function I3(t,e){t.rect(e.x,e.y,e.w,e.h)}function Md(t,e,r={}){const s=t.x!==r.x?-e:0,a=t.y!==r.y?-e:0,n=(t.x+t.w!==r.x+r.w?e:0)-s,o=(t.y+t.h!==r.y+r.h?e:0)-a;return{x:t.x+s,y:t.y+a,w:t.w+n,h:t.h+o,radius:t.radius}}class bl extends os{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:s,backgroundColor:a}}=this,{inner:n,outer:o}=D3(this),l=O3(o.radius)?tc:I3;e.save(),(o.w!==n.w||o.h!==n.h)&&(e.beginPath(),l(e,Md(o,r,n)),e.clip(),l(e,Md(n,-r,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),l(e,Md(n,r)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,r,s){return Cd(this,e,r,s)}inXRange(e,r){return Cd(this,e,null,r)}inYRange(e,r){return Cd(this,null,e,r)}getCenterPoint(e){const{x:r,y:s,base:a,horizontal:n}=this.getProps(["x","y","base","horizontal"],e);return{x:n?(r+a)/2:r,y:n?s:(s+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}q(bl,"id","bar"),q(bl,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),q(bl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const m0=(t,e)=>{let{boxHeight:r=e,boxWidth:s=e}=t;return t.usePointStyle&&(r=Math.min(r,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:r,itemHeight:Math.max(e,r)}},A3=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class g0 extends os{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,s){this.maxWidth=e,this.maxHeight=r,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=Te(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(s=>e.filter(s,this.chart.data))),e.sort&&(r=r.sort((s,a)=>e.sort(s,a,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,a=vt(s.font),n=a.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=m0(s,n);let d,u;r.font=a.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,n,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,a,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,r,s,a){const{ctx:n,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=a+l;let h=e;n.textAlign="left",n.textBaseline="middle";let p=-1,m=-u;return this.legendItems.forEach((v,y)=>{const k=s+r/2+n.measureText(v.text).width;(y===0||d[d.length-1]+k+2*l>o)&&(h+=u,d[d.length-(y>0?0:1)]=0,m+=u,p++),c[y]={left:0,top:m,row:p,width:k,height:a},d[d.length-1]+=k+l}),h}_fitCols(e,r,s,a){const{ctx:n,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-e;let h=l,p=0,m=0,v=0,y=0;return this.legendItems.forEach((k,g)=>{const{itemWidth:f,itemHeight:x}=z3(s,r,n,k,a);g>0&&m+x+2*l>u&&(h+=p+l,d.push({width:p,height:m}),v+=p+l,y++,p=m=0),c[g]={left:v,top:m,col:y,width:f,height:x},p=Math.max(p,f),m+=x+l}),h+=p,d.push({width:p,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:s,labels:{padding:a},rtl:n}}=this,o=cn(n,this.left,this.width);if(this.isHorizontal()){let l=0,c=ft(s,this.left+a,this.right-this.lineWidths[l]);for(const d of r)l!==d.row&&(l=d.row,c=ft(s,this.left+a,this.right-this.lineWidths[l])),d.top+=this.top+e+a,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+a}else{let l=0,c=ft(s,this.top+e+a,this.bottom-this.columnSizes[l].height);for(const d of r)d.col!==l&&(l=d.col,c=ft(s,this.top+e+a,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+a,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;gp(e,this),this._draw(),fp(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:s,ctx:a}=this,{align:n,labels:o}=e,l=Je.color,c=cn(e.rtl,this.left,this.width),d=vt(o.font),{padding:u}=o,h=d.size,p=h/2;let m;this.drawTitle(),a.textAlign=c.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=d.string;const{boxWidth:v,boxHeight:y,itemHeight:k}=m0(o,h),g=function(N,_,b){if(isNaN(v)||v<=0||isNaN(y)||y<0)return;a.save();const j=ue(b.lineWidth,1);if(a.fillStyle=ue(b.fillStyle,l),a.lineCap=ue(b.lineCap,"butt"),a.lineDashOffset=ue(b.lineDashOffset,0),a.lineJoin=ue(b.lineJoin,"miter"),a.lineWidth=j,a.strokeStyle=ue(b.strokeStyle,l),a.setLineDash(ue(b.lineDash,[])),o.usePointStyle){const z={radius:y*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:j},I=c.xPlus(N,v/2),A=_+p;hy(a,z,I,A,o.pointStyleWidth&&v)}else{const z=_+Math.max((h-y)/2,0),I=c.leftForLtr(N,v),A=ln(b.borderRadius);a.beginPath(),Object.values(A).some(F=>F!==0)?tc(a,{x:I,y:z,w:v,h:y,radius:A}):a.rect(I,z,v,y),a.fill(),j!==0&&a.stroke()}a.restore()},f=function(N,_,b){Ki(a,b.text,N,_+k/2,d,{strikethrough:b.hidden,textAlign:c.textAlign(b.textAlign)})},x=this.isHorizontal(),w=this._computeTitleHeight();x?m={x:ft(n,this.left+u,this.right-s[0]),y:this.top+u+w,line:0}:m={x:this.left+u,y:ft(n,this.top+w+u,this.bottom-r[0].height),line:0},yy(this.ctx,e.textDirection);const S=k+u;this.legendItems.forEach((N,_)=>{a.strokeStyle=N.fontColor,a.fillStyle=N.fontColor;const b=a.measureText(N.text).width,j=c.textAlign(N.textAlign||(N.textAlign=o.textAlign)),z=v+p+b;let I=m.x,A=m.y;c.setWidth(this.width),x?_>0&&I+z+u>this.right&&(A=m.y+=S,m.line++,I=m.x=ft(n,this.left+u,this.right-s[m.line])):_>0&&A+S>this.bottom&&(I=m.x=I+r[m.line].width+u,m.line++,A=m.y=ft(n,this.top+w+u,this.bottom-r[m.line].height));const F=c.x(I);if(g(F,A,N),I=TN(j,I+v+p,x?I+z:this.right,e.rtl),f(c.x(I),A,N),x)m.x+=z+u;else if(typeof N.text!="string"){const H=d.lineHeight;m.y+=Ry(N,H)+u}else m.y+=S}),vy(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,s=vt(r.font),a=cr(r.padding);if(!r.display)return;const n=cn(e.rtl,this.left,this.width),o=this.ctx,l=r.position,c=s.size/2,d=a.top+c;let u,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+d,h=ft(e.align,h,this.right-p);else{const v=this.columnSizes.reduce((y,k)=>Math.max(y,k.height),0);u=d+ft(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const m=ft(l,h,h+p);o.textAlign=n.textAlign(hp(l)),o.textBaseline="middle",o.strokeStyle=r.color,o.fillStyle=r.color,o.font=s.string,Ki(o,r.text,m,u,s)}_computeTitleHeight(){const e=this.options.title,r=vt(e.font),s=cr(e.padding);return e.display?r.lineHeight+s.height:0}_getLegendItemAt(e,r){let s,a,n;if(js(e,this.left,this.right)&&js(r,this.top,this.bottom)){for(n=this.legendHitBoxes,s=0;s<n.length;++s)if(a=n[s],js(e,a.left,a.left+a.width)&&js(r,a.top,a.top+a.height))return this.legendItems[s]}return null}handleEvent(e){const r=this.options;if(!$3(e.type,r))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,n=A3(a,s);a&&!n&&Te(r.onLeave,[e,a,this],this),this._hoveredItem=s,s&&!n&&Te(r.onHover,[e,s,this],this)}else s&&Te(r.onClick,[e,s,this],this)}}function z3(t,e,r,s,a){const n=L3(s,t,e,r),o=R3(a,s,e.lineHeight);return{itemWidth:n,itemHeight:o}}function L3(t,e,r,s){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((n,o)=>n.length>o.length?n:o)),e+r.size/2+s.measureText(a).width}function R3(t,e,r){let s=t;return typeof e.text!="string"&&(s=Ry(e,r)),s}function Ry(t,e){const r=t.text?t.text.length:0;return e*r}function $3(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var F3={id:"legend",_element:g0,start(t,e,r){const s=t.legend=new g0({ctx:t.ctx,options:r,chart:t});ar.configure(t,s,r),ar.addBox(t,s)},stop(t){ar.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const s=t.legend;ar.configure(t,s,r),s.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const s=e.datasetIndex,a=r.chart;a.isDatasetVisible(s)?(a.hide(s),e.hidden=!0):(a.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:s,textAlign:a,color:n,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(r?0:void 0),u=cr(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:n,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:a||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class $y extends os{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const a=et(s.text)?s.text.length:1;this._padding=cr(s.padding);const n=a*vt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:s,bottom:a,right:n,options:o}=this,l=o.align;let c=0,d,u,h;return this.isHorizontal()?(u=ft(l,s,n),h=r+e,d=n-s):(o.position==="left"?(u=s+e,h=ft(l,a,r),c=je*-.5):(u=n-e,h=ft(l,r,a),c=je*.5),d=a-r),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const s=vt(r.font),a=s.lineHeight/2+this._padding.top,{titleX:n,titleY:o,maxWidth:l,rotation:c}=this._drawArgs(a);Ki(e,r.text,0,0,s,{color:r.color,maxWidth:l,rotation:c,textAlign:hp(r.align),textBaseline:"middle",translation:[n,o]})}}function U3(t,e){const r=new $y({ctx:t.ctx,options:e,chart:t});ar.configure(t,r,e),ar.addBox(t,r),t.titleBlock=r}var B3={id:"title",_element:$y,start(t,e,r){U3(t,r)},stop(t){const e=t.titleBlock;ar.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const s=t.titleBlock;ar.configure(t,s,r),s.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ki={average(t){if(!t.length)return!1;let e,r,s=new Set,a=0,n=0;for(e=0,r=t.length;e<r;++e){const o=t[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();s.add(l.x),a+=l.y,++n}}return n===0||s.size===0?!1:{x:[...s].reduce((o,l)=>o+l)/s.size,y:a/n}},nearest(t,e){if(!t.length)return!1;let r=e.x,s=e.y,a=Number.POSITIVE_INFINITY,n,o,l;for(n=0,o=t.length;n<o;++n){const c=t[n].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=Vu(e,d);u<a&&(a=u,l=c)}}if(l){const c=l.tooltipPosition();r=c.x,s=c.y}return{x:r,y:s}}};function Sr(t,e){return e&&(et(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Br(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function q3(t,e){const{element:r,datasetIndex:s,index:a}=e,n=t.getDatasetMeta(s).controller,{label:o,value:l}=n.getLabelAndValue(a);return{chart:t,label:o,parsed:n.getParsed(a),raw:t.data.datasets[s].data[a],formattedValue:l,dataset:n.getDataset(),dataIndex:a,datasetIndex:s,element:r}}function f0(t,e){const r=t.chart.ctx,{body:s,footer:a,title:n}=t,{boxWidth:o,boxHeight:l}=e,c=vt(e.bodyFont),d=vt(e.titleFont),u=vt(e.footerFont),h=n.length,p=a.length,m=s.length,v=cr(e.padding);let y=v.height,k=0,g=s.reduce((w,S)=>w+S.before.length+S.lines.length+S.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,h&&(y+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),g){const w=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;y+=m*w+(g-m)*c.lineHeight+(g-1)*e.bodySpacing}p&&(y+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let f=0;const x=function(w){k=Math.max(k,r.measureText(w).width+f)};return r.save(),r.font=d.string,ke(t.title,x),r.font=c.string,ke(t.beforeBody.concat(t.afterBody),x),f=e.displayColors?o+2+e.boxPadding:0,ke(s,w=>{ke(w.before,x),ke(w.lines,x),ke(w.after,x)}),f=0,r.font=u.string,ke(t.footer,x),r.restore(),k+=v.width,{width:k,height:y}}function V3(t,e){const{y:r,height:s}=e;return r<s/2?"top":r>t.height-s/2?"bottom":"center"}function W3(t,e,r,s){const{x:a,width:n}=s,o=r.caretSize+r.caretPadding;if(t==="left"&&a+n+o>e.width||t==="right"&&a-n-o<0)return!0}function H3(t,e,r,s){const{x:a,width:n}=r,{width:o,chartArea:{left:l,right:c}}=t;let d="center";return s==="center"?d=a<=(l+c)/2?"left":"right":a<=n/2?d="left":a>=o-n/2&&(d="right"),W3(d,t,e,r)&&(d="center"),d}function x0(t,e,r){const s=r.yAlign||e.yAlign||V3(t,r);return{xAlign:r.xAlign||e.xAlign||H3(t,e,r,s),yAlign:s}}function J3(t,e){let{x:r,width:s}=t;return e==="right"?r-=s:e==="center"&&(r-=s/2),r}function Y3(t,e,r){let{y:s,height:a}=t;return e==="top"?s+=r:e==="bottom"?s-=a+r:s-=a/2,s}function b0(t,e,r,s){const{caretSize:a,caretPadding:n,cornerRadius:o}=t,{xAlign:l,yAlign:c}=r,d=a+n,{topLeft:u,topRight:h,bottomLeft:p,bottomRight:m}=ln(o);let v=J3(e,l);const y=Y3(e,c,d);return c==="center"?l==="left"?v+=d:l==="right"&&(v-=d):l==="left"?v-=Math.max(u,p)+a:l==="right"&&(v+=Math.max(h,m)+a),{x:yt(v,0,s.width-e.width),y:yt(y,0,s.height-e.height)}}function Xo(t,e,r){const s=cr(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function y0(t){return Sr([],Br(t))}function G3(t,e,r){return Pa(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function v0(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const Fy={beforeTitle:$r,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,s=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return r[e.dataIndex]}return""},afterTitle:$r,beforeBody:$r,beforeLabel:$r,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return ve(r)||(e+=r),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:$r,afterBody:$r,beforeFooter:$r,footer:$r,afterFooter:$r};function Et(t,e,r,s){const a=t[e].call(r,s);return typeof a>"u"?Fy[e].call(r,s):a}class Ku extends os{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,s=this.options.setContext(this.getContext()),a=s.enabled&&r.options.animation&&s.animations,n=new ky(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=G3(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:s}=r,a=Et(s,"beforeTitle",this,e),n=Et(s,"title",this,e),o=Et(s,"afterTitle",this,e);let l=[];return l=Sr(l,Br(a)),l=Sr(l,Br(n)),l=Sr(l,Br(o)),l}getBeforeBody(e,r){return y0(Et(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:s}=r,a=[];return ke(e,n=>{const o={before:[],lines:[],after:[]},l=v0(s,n);Sr(o.before,Br(Et(l,"beforeLabel",this,n))),Sr(o.lines,Et(l,"label",this,n)),Sr(o.after,Br(Et(l,"afterLabel",this,n))),a.push(o)}),a}getAfterBody(e,r){return y0(Et(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:s}=r,a=Et(s,"beforeFooter",this,e),n=Et(s,"footer",this,e),o=Et(s,"afterFooter",this,e);let l=[];return l=Sr(l,Br(a)),l=Sr(l,Br(n)),l=Sr(l,Br(o)),l}_createItems(e){const r=this._active,s=this.chart.data,a=[],n=[],o=[];let l=[],c,d;for(c=0,d=r.length;c<d;++c)l.push(q3(this.chart,r[c]));return e.filter&&(l=l.filter((u,h,p)=>e.filter(u,h,p,s))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,s))),ke(l,u=>{const h=v0(e.callbacks,u);a.push(Et(h,"labelColor",this,u)),n.push(Et(h,"labelPointStyle",this,u)),o.push(Et(h,"labelTextColor",this,u))}),this.labelColors=a,this.labelPointStyles=n,this.labelTextColors=o,this.dataPoints=l,l}update(e,r){const s=this.options.setContext(this.getContext()),a=this._active;let n,o=[];if(!a.length)this.opacity!==0&&(n={opacity:0});else{const l=ki[s.position].call(this,a,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=f0(this,s),d=Object.assign({},l,c),u=x0(this.chart,s,d),h=b0(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,n={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,s,a){const n=this.getCaretPosition(e,s,a);r.lineTo(n.x1,n.y1),r.lineTo(n.x2,n.y2),r.lineTo(n.x3,n.y3)}getCaretPosition(e,r,s){const{xAlign:a,yAlign:n}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=ln(l),{x:p,y:m}=e,{width:v,height:y}=r;let k,g,f,x,w,S;return n==="center"?(w=m+y/2,a==="left"?(k=p,g=k-o,x=w+o,S=w-o):(k=p+v,g=k+o,x=w-o,S=w+o),f=k):(a==="left"?g=p+Math.max(c,u)+o:a==="right"?g=p+v-Math.max(d,h)-o:g=this.caretX,n==="top"?(x=m,w=x-o,k=g-o,f=g+o):(x=m+y,w=x+o,k=g+o,f=g-o),S=x),{x1:k,x2:g,x3:f,y1:x,y2:w,y3:S}}drawTitle(e,r,s){const a=this.title,n=a.length;let o,l,c;if(n){const d=cn(s.rtl,this.x,this.width);for(e.x=Xo(this,s.titleAlign,s),r.textAlign=d.textAlign(s.titleAlign),r.textBaseline="middle",o=vt(s.titleFont),l=s.titleSpacing,r.fillStyle=s.titleColor,r.font=o.string,c=0;c<n;++c)r.fillText(a[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===n&&(e.y+=s.titleMarginBottom-l)}}_drawColorBox(e,r,s,a,n){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=n,u=vt(n.bodyFont),h=Xo(this,"left",n),p=a.x(h),m=c<u.lineHeight?(u.lineHeight-c)/2:0,v=r.y+m;if(n.usePointStyle){const y={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},k=a.leftForLtr(p,d)+d/2,g=v+c/2;e.strokeStyle=n.multiKeyBackground,e.fillStyle=n.multiKeyBackground,Hu(e,y,k,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Hu(e,y,k,g)}else{e.lineWidth=be(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=a.leftForLtr(p,d),k=a.leftForLtr(a.xPlus(p,1),d-2),g=ln(o.borderRadius);Object.values(g).some(f=>f!==0)?(e.beginPath(),e.fillStyle=n.multiKeyBackground,tc(e,{x:y,y:v,w:d,h:c,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),tc(e,{x:k,y:v+1,w:d-2,h:c-2,radius:g}),e.fill()):(e.fillStyle=n.multiKeyBackground,e.fillRect(y,v,d,c),e.strokeRect(y,v,d,c),e.fillStyle=o.backgroundColor,e.fillRect(k,v+1,d-2,c-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,r,s){const{body:a}=this,{bodySpacing:n,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=s,h=vt(s.bodyFont);let p=h.lineHeight,m=0;const v=cn(s.rtl,this.x,this.width),y=function(b){r.fillText(b,v.x(e.x+m),e.y+p/2),e.y+=p+n},k=v.textAlign(o);let g,f,x,w,S,N,_;for(r.textAlign=o,r.textBaseline="middle",r.font=h.string,e.x=Xo(this,k,s),r.fillStyle=s.bodyColor,ke(this.beforeBody,y),m=l&&k!=="right"?o==="center"?d/2+u:d+2+u:0,w=0,N=a.length;w<N;++w){for(g=a[w],f=this.labelTextColors[w],r.fillStyle=f,ke(g.before,y),x=g.lines,l&&x.length&&(this._drawColorBox(r,e,w,v,s),p=Math.max(h.lineHeight,c)),S=0,_=x.length;S<_;++S)y(x[S]),p=h.lineHeight;ke(g.after,y)}m=0,p=h.lineHeight,ke(this.afterBody,y),e.y-=n}drawFooter(e,r,s){const a=this.footer,n=a.length;let o,l;if(n){const c=cn(s.rtl,this.x,this.width);for(e.x=Xo(this,s.footerAlign,s),e.y+=s.footerMarginTop,r.textAlign=c.textAlign(s.footerAlign),r.textBaseline="middle",o=vt(s.footerFont),r.fillStyle=s.footerColor,r.font=o.string,l=0;l<n;++l)r.fillText(a[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,r,s,a){const{xAlign:n,yAlign:o}=this,{x:l,y:c}=e,{width:d,height:u}=s,{topLeft:h,topRight:p,bottomLeft:m,bottomRight:v}=ln(a.cornerRadius);r.fillStyle=a.backgroundColor,r.strokeStyle=a.borderColor,r.lineWidth=a.borderWidth,r.beginPath(),r.moveTo(l+h,c),o==="top"&&this.drawCaret(e,r,s,a),r.lineTo(l+d-p,c),r.quadraticCurveTo(l+d,c,l+d,c+p),o==="center"&&n==="right"&&this.drawCaret(e,r,s,a),r.lineTo(l+d,c+u-v),r.quadraticCurveTo(l+d,c+u,l+d-v,c+u),o==="bottom"&&this.drawCaret(e,r,s,a),r.lineTo(l+m,c+u),r.quadraticCurveTo(l,c+u,l,c+u-m),o==="center"&&n==="left"&&this.drawCaret(e,r,s,a),r.lineTo(l,c+h),r.quadraticCurveTo(l,c,l+h,c),r.closePath(),r.fill(),a.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,s=this.$animations,a=s&&s.x,n=s&&s.y;if(a||n){const o=ki[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=f0(this,e),c=Object.assign({},o,this._size),d=x0(r,e,c),u=b0(e,c,d,r);(a._to!==u.x||n._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(r);const a={width:this.width,height:this.height},n={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=cr(r.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&l&&(e.save(),e.globalAlpha=s,this.drawBackground(n,e,a,r),yy(e,r.textDirection),n.y+=o.top,this.drawTitle(n,e,r),this.drawBody(n,e,r),this.drawFooter(n,e,r),vy(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const s=this._active,a=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),n=!Xl(s,a),o=this._positionChanged(a,r);(n||o)&&(this._active=a,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,s=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,n=this._active||[],o=this._getActiveElements(e,n,r,s),l=this._positionChanged(o,e),c=r||!Xl(o,n)||l;return c&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),c}_getActiveElements(e,r,s,a){const n=this.options;if(e.type==="mouseout")return[];if(!a)return r.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,n.mode,n,s);return n.reverse&&o.reverse(),o}_positionChanged(e,r){const{caretX:s,caretY:a,options:n}=this,o=ki[n.position].call(this,e,r);return o!==!1&&(s!==o.x||a!==o.y)}}q(Ku,"positioners",ki);var K3={id:"tooltip",_element:Ku,positioners:ki,afterInit(t,e,r){r&&(t.tooltip=new Ku({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Fy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Q3=(t,e,r,s)=>(typeof e=="string"?(r=t.push(e)-1,s.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function X3(t,e,r,s){const a=t.indexOf(e);if(a===-1)return Q3(t,e,r,s);const n=t.lastIndexOf(e);return a!==n?r:a}const Z3=(t,e)=>t===null?null:yt(Math.round(t),0,e);function Uy(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Qu extends Mn{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const s=this.getLabels();for(const{index:a,label:n}of r)s[a]===n&&s.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(ve(e))return null;const s=this.getLabels();return r=isFinite(r)&&s[r]===e?r:X3(s,e,ue(r,e),this._addedLabels),Z3(r,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:s,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),r||(a=this.getLabels().length-1)),this.min=s,this.max=a}buildTicks(){const e=this.min,r=this.max,s=this.options.offset,a=[];let n=this.getLabels();n=e===0&&r===n.length-1?n:n.slice(e,r+1),this._valueRange=Math.max(n.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=r;o++)a.push({value:o});return a}getLabelForValue(e){return Uy.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}q(Qu,"id","category"),q(Qu,"defaults",{ticks:{callback:Uy}});function e5(t,e){const r=[],{bounds:s,step:a,min:n,max:o,precision:l,count:c,maxTicks:d,maxDigits:u,includeBounds:h}=t,p=a||1,m=d-1,{min:v,max:y}=e,k=!ve(n),g=!ve(o),f=!ve(c),x=(y-v)/(u+1);let w=jg((y-v)/m/p)*p,S,N,_,b;if(w<1e-14&&!k&&!g)return[{value:v},{value:y}];b=Math.ceil(y/w)-Math.floor(v/w),b>m&&(w=jg(b*w/m/p)*p),ve(l)||(S=Math.pow(10,l),w=Math.ceil(w*S)/S),s==="ticks"?(N=Math.floor(v/w)*w,_=Math.ceil(y/w)*w):(N=v,_=y),k&&g&&a&&kN((o-n)/a,w/1e3)?(b=Math.round(Math.min((o-n)/w,d)),w=(o-n)/b,N=n,_=o):f?(N=k?n:N,_=g?o:_,b=c-1,w=(_-N)/b):(b=(_-N)/w,yi(b,Math.round(b),w/1e3)?b=Math.round(b):b=Math.ceil(b));const j=Math.max(_g(w),_g(N));S=Math.pow(10,ve(l)?j:l),N=Math.round(N*S)/S,_=Math.round(_*S)/S;let z=0;for(k&&(h&&N!==n?(r.push({value:n}),N<n&&z++,yi(Math.round((N+z*w)*S)/S,n,w0(n,x,t))&&z++):N<n&&z++);z<b;++z){const I=Math.round((N+z*w)*S)/S;if(g&&I>o)break;r.push({value:I})}return g&&h&&_!==o?r.length&&yi(r[r.length-1].value,o,w0(o,x,t))?r[r.length-1].value=o:r.push({value:o}):(!g||_===o)&&r.push({value:_}),r}function w0(t,e,{horizontal:r,minRotation:s}){const a=Xr(s),n=(r?Math.sin(a):Math.cos(a))||.001,o=.75*e*(""+t).length;return Math.min(e/n,o)}class t5 extends Mn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return ve(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:s}=this.getUserBounds();let{min:a,max:n}=this;const o=c=>a=r?a:c,l=c=>n=s?n:c;if(e){const c=Ar(a),d=Ar(n);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(a===n){let c=n===0?1:Math.abs(n*.05);l(n+c),e||o(a-c)}this.min=a,this.max=n}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:s}=e,a;return s?(a=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),r=r||11),r&&(a=Math.min(r,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const a={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},n=this._range||this,o=e5(a,n);return e.bounds==="ticks"&&jN(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let r=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const a=(s-r)/Math.max(e.length-1,1)/2;r-=a,s+=a}this._startValue=r,this._endValue=s,this._valueRange=s-r}getLabelForValue(e){return mp(e,this.chart.options.locale,this.options.ticks.format)}}class Xu extends t5{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=lr(e)?e:0,this.max=lr(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,s=Xr(this.options.ticks.minRotation),a=(e?Math.sin(s):Math.cos(s))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,n.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}q(Xu,"id","linear"),q(Xu,"defaults",{ticks:{callback:uy.formatters.numeric}});const Dc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Dt=Object.keys(Dc);function k0(t,e){return t-e}function j0(t,e){if(ve(e))return null;const r=t._adapter,{parser:s,round:a,isoWeekday:n}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),lr(o)||(o=typeof s=="string"?r.parse(o,s):r.parse(o)),o===null?null:(a&&(o=a==="week"&&(Ji(n)||n===!0)?r.startOf(o,"isoWeek",n):r.startOf(o,a)),+o)}function _0(t,e,r,s){const a=Dt.length;for(let n=Dt.indexOf(t);n<a-1;++n){const o=Dc[Dt[n]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((r-e)/(l*o.size))<=s)return Dt[n]}return Dt[a-1]}function r5(t,e,r,s,a){for(let n=Dt.length-1;n>=Dt.indexOf(r);n--){const o=Dt[n];if(Dc[o].common&&t._adapter.diff(a,s,o)>=e-1)return o}return Dt[r?Dt.indexOf(r):0]}function s5(t){for(let e=Dt.indexOf(t)+1,r=Dt.length;e<r;++e)if(Dc[Dt[e]].common)return Dt[e]}function N0(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:s,hi:a}=up(r,e),n=r[s]>=e?r[s]:r[a];t[n]=!0}}function a5(t,e,r,s){const a=t._adapter,n=+a.startOf(e[0].value,s),o=e[e.length-1].value;let l,c;for(l=n;l<=o;l=+a.add(l,1,s))c=r[l],c>=0&&(e[c].major=!0);return e}function S0(t,e,r){const s=[],a={},n=e.length;let o,l;for(o=0;o<n;++o)l=e[o],a[l]=o,s.push({value:l,major:!1});return n===0||!r?s:a5(t,s,a,r)}class Xi extends Mn{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const s=e.time||(e.time={}),a=this._adapter=new Ny._date(e.adapters.date);a.init(r),bi(s.displayFormats,a.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:j0(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,s=e.time.unit||"day";let{min:a,max:n,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(a=Math.min(a,d.min)),!l&&!isNaN(d.max)&&(n=Math.max(n,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),a=lr(a)&&!isNaN(a)?a:+r.startOf(Date.now(),s),n=lr(n)&&!isNaN(n)?n:+r.endOf(Date.now(),s)+1,this.min=Math.min(a,n-1),this.max=Math.max(a+1,n)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],s=e[e.length-1]),{min:r,max:s}}buildTicks(){const e=this.options,r=e.time,s=e.ticks,a=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const n=this.min,o=this.max,l=MN(a,n,o);return this._unit=r.unit||(s.autoSkip?_0(r.minUnit,this.min,this.max,this._getLabelCapacity(n)):r5(this,l.length,r.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:s5(this._unit),this.initOffsets(a),e.reverse&&l.reverse(),S0(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,s=0,a,n;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?r=1-a:r=(this.getDecimalForValue(e[1])-a)/2,n=this.getDecimalForValue(e[e.length-1]),e.length===1?s=n:s=(n-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;r=yt(r,0,o),s=yt(s,0,o),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){const e=this._adapter,r=this.min,s=this.max,a=this.options,n=a.time,o=n.unit||_0(n.minUnit,r,s,this._getLabelCapacity(r)),l=ue(a.ticks.stepSize,1),c=o==="week"?n.isoWeekday:!1,d=Ji(c)||c===!0,u={};let h=r,p,m;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":o),e.diff(s,r,o)>1e5*l)throw new Error(r+" and "+s+" are too far apart with stepSize of "+l+" "+o);const v=a.ticks.source==="data"&&this.getDataTimestamps();for(p=h,m=0;p<s;p=+e.add(p,l,o),m++)N0(u,p,v);return(p===s||a.bounds==="ticks"||m===1)&&N0(u,p,v),Object.keys(u).sort(k0).map(y=>+y)}getLabelForValue(e){const r=this._adapter,s=this.options.time;return s.tooltipFormat?r.format(e,s.tooltipFormat):r.format(e,s.displayFormats.datetime)}format(e,r){const s=this.options.time.displayFormats,a=this._unit,n=r||s[a];return this._adapter.format(e,n)}_tickFormatFunction(e,r,s,a){const n=this.options,o=n.ticks.callback;if(o)return Te(o,[e,r,s],this);const l=n.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],p=s[r],m=d&&h&&p&&p.major;return this._adapter.format(e,a||(m?h:u))}generateTickLabels(e){let r,s,a;for(r=0,s=e.length;r<s;++r)a=e[r],a.label=this._tickFormatFunction(a.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+s)*r.factor)}getValueForPixel(e){const r=this._offsets,s=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,s=this.ctx.measureText(e).width,a=Xr(this.isHorizontal()?r.maxRotation:r.minRotation),n=Math.cos(a),o=Math.sin(a),l=this._resolveTickFontOptions(0).size;return{w:s*n+l*o,h:s*o+l*n}}_getLabelCapacity(e){const r=this.options.time,s=r.displayFormats,a=s[r.unit]||s.millisecond,n=this._tickFormatFunction(e,0,S0(this,[e],this._majorUnit),a),o=this._getLabelSize(n),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],r,s;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(r=0,s=a.length;r<s;++r)e=e.concat(a[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,s;if(e.length)return e;const a=this.getLabels();for(r=0,s=a.length;r<s;++r)e.push(j0(this,a[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return oy(e.sort(k0))}}q(Xi,"id","time"),q(Xi,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Zo(t,e,r){let s=0,a=t.length-1,n,o,l,c;r?(e>=t[s].pos&&e<=t[a].pos&&({lo:s,hi:a}=la(t,"pos",e)),{pos:n,time:l}=t[s],{pos:o,time:c}=t[a]):(e>=t[s].time&&e<=t[a].time&&({lo:s,hi:a}=la(t,"time",e)),{time:n,pos:l}=t[s],{time:o,pos:c}=t[a]);const d=o-n;return d?l+(c-l)*(e-n)/d:l}class C0 extends Xi{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=Zo(r,this.min),this._tableRange=Zo(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:s}=this,a=[],n=[];let o,l,c,d,u;for(o=0,l=e.length;o<l;++o)d=e[o],d>=r&&d<=s&&a.push(d);if(a.length<2)return[{time:r,pos:0},{time:s,pos:1}];for(o=0,l=a.length;o<l;++o)u=a[o+1],c=a[o-1],d=a[o],Math.round((u+c)/2)!==d&&n.push({time:d,pos:o/(l-1)});return n}_generate(){const e=this.min,r=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(r)||s.length===1)&&s.push(r),s.sort((a,n)=>a-n)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),s=this.getLabelTimestamps();return r.length&&s.length?e=this.normalize(r.concat(s)):e=r.length?r:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Zo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,s=this.getDecimalForPixel(e)/r.factor-r.end;return Zo(this._table,s*this._tableRange+this._minPos,!0)}}q(C0,"id","timeseries"),q(C0,"defaults",Xi.defaults);const By="label";function M0(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function n5(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function qy(t,e){t.labels=e}function Vy(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:By;const s=[];t.datasets=e.map(a=>{const n=t.datasets.find(o=>o[r]===a[r]);return!n||!a.data||s.includes(n)?{...a}:(s.push(n),Object.assign(n,a),n)})}function i5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:By;const r={labels:[],datasets:[]};return qy(r,t.labels),Vy(r,t.datasets,e),r}function o5(t,e){const{height:r=150,width:s=300,redraw:a=!1,datasetIdKey:n,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...p}=t,m=T.useRef(null),v=T.useRef(null),y=()=>{m.current&&(v.current=new Tc(m.current,{type:o,data:i5(l,n),options:c&&{...c},plugins:d}),M0(e,v.current))},k=()=>{M0(e,null),v.current&&(v.current.destroy(),v.current=null)};return T.useEffect(()=>{!a&&v.current&&c&&n5(v.current,c)},[a,c]),T.useEffect(()=>{!a&&v.current&&qy(v.current.config.data,l.labels)},[a,l.labels]),T.useEffect(()=>{!a&&v.current&&l.datasets&&Vy(v.current.config.data,l.datasets,n)},[a,l.datasets]),T.useEffect(()=>{v.current&&(a?(k(),setTimeout(y)):v.current.update(h))},[a,c,l.labels,l.datasets,h]),T.useEffect(()=>{v.current&&(k(),setTimeout(y))},[o]),T.useEffect(()=>(y(),()=>k()),[]),oh.createElement("canvas",{ref:m,role:"img",height:r,width:s,...p},u)}const l5=T.forwardRef(o5);function _p(t,e){return Tc.register(e),T.forwardRef((r,s)=>oh.createElement(l5,{...r,ref:s,type:t}))}const E0=_p("line",ml),c5=_p("bar",pl),d5=_p("doughnut",ti);function ie(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function De(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Oc(t,e){const r=ie(t);return isNaN(e)?De(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function Np(t,e){const r=ie(t);if(isNaN(e))return De(t,NaN);if(!e)return r;const s=r.getDate(),a=De(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const n=a.getDate();return s>=n?a:(r.setFullYear(a.getFullYear(),a.getMonth(),s),r)}function Ic(t,e){const r=+ie(t);return De(t,r+e)}const Wy=6048e5,u5=864e5,ho=6e4,po=36e5,h5=1e3;function p5(t,e){return Ic(t,e*po)}let m5={};function Ta(){return m5}function zr(t,e){var r,s,a,n;const o=Ta(),l=(e==null?void 0:e.weekStartsOn)??((s=(r=e==null?void 0:e.locale)==null?void 0:r.options)==null?void 0:s.weekStartsOn)??o.weekStartsOn??((n=(a=o.locale)==null?void 0:a.options)==null?void 0:n.weekStartsOn)??0,c=ie(t),d=c.getDay(),u=(d<l?7:0)+d-l;return c.setDate(c.getDate()-u),c.setHours(0,0,0,0),c}function kn(t){return zr(t,{weekStartsOn:1})}function Hy(t){const e=ie(t),r=e.getFullYear(),s=De(t,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=kn(s),n=De(t,0);n.setFullYear(r,0,4),n.setHours(0,0,0,0);const o=kn(n);return e.getTime()>=a.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Zu(t){const e=ie(t);return e.setHours(0,0,0,0),e}function nc(t){const e=ie(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Jy(t,e){const r=Zu(t),s=Zu(e),a=+r-nc(r),n=+s-nc(s);return Math.round((a-n)/u5)}function g5(t){const e=Hy(t),r=De(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),kn(r)}function f5(t,e){return Ic(t,e*ho)}function x5(t,e){const r=e*3;return Np(t,r)}function b5(t,e){return Ic(t,e*1e3)}function y5(t,e){const r=e*7;return Oc(t,r)}function v5(t,e){return Np(t,e*12)}function ji(t,e){const r=ie(t),s=ie(e),a=r.getTime()-s.getTime();return a<0?-1:a>0?1:a}function w5(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Yy(t){if(!w5(t)&&typeof t!="number")return!1;const e=ie(t);return!isNaN(Number(e))}function k5(t,e){const r=ie(t),s=ie(e),a=r.getFullYear()-s.getFullYear(),n=r.getMonth()-s.getMonth();return a*12+n}function j5(t,e){const r=ie(t),s=ie(e);return r.getFullYear()-s.getFullYear()}function Gy(t,e){const r=ie(t),s=ie(e),a=P0(r,s),n=Math.abs(Jy(r,s));r.setDate(r.getDate()-a*n);const o=+(P0(r,s)===-a),l=a*(n-o);return l===0?0:l}function P0(t,e){const r=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}function mo(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Ac(t,e){return+ie(t)-+ie(e)}function _5(t,e,r){const s=Ac(t,e)/po;return mo(void 0)(s)}function N5(t,e,r){const s=Ac(t,e)/ho;return mo(void 0)(s)}function Ky(t){const e=ie(t);return e.setHours(23,59,59,999),e}function Qy(t){const e=ie(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function S5(t){const e=ie(t);return+Ky(e)==+Qy(e)}function Xy(t,e){const r=ie(t),s=ie(e),a=ji(r,s),n=Math.abs(k5(r,s));let o;if(n<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*n);let l=ji(r,s)===-a;S5(ie(t))&&n===1&&ji(t,s)===1&&(l=!1),o=a*(n-Number(l))}return o===0?0:o}function C5(t,e,r){const s=Xy(t,e)/3;return mo(void 0)(s)}function M5(t,e,r){const s=Ac(t,e)/1e3;return mo(void 0)(s)}function E5(t,e,r){const s=Gy(t,e)/7;return mo(void 0)(s)}function P5(t,e){const r=ie(t),s=ie(e),a=ji(r,s),n=Math.abs(j5(r,s));r.setFullYear(1584),s.setFullYear(1584);const o=ji(r,s)===-a,l=a*(n-+o);return l===0?0:l}function T5(t){const e=ie(t);return e.setSeconds(0,0),e}function D5(t){const e=ie(t),r=e.getMonth(),s=r-r%3;return e.setMonth(s,1),e.setHours(0,0,0,0),e}function O5(t){const e=ie(t);return e.setDate(1),e.setHours(0,0,0,0),e}function I5(t){const e=ie(t),r=e.getFullYear();return e.setFullYear(r+1,0,0),e.setHours(23,59,59,999),e}function Zy(t){const e=ie(t),r=De(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function A5(t){const e=ie(t);return e.setMinutes(59,59,999),e}function z5(t,e){var r,s;const a=Ta(),n=a.weekStartsOn??((s=(r=a.locale)==null?void 0:r.options)==null?void 0:s.weekStartsOn)??0,o=ie(t),l=o.getDay(),c=(l<n?-7:0)+6-(l-n);return o.setDate(o.getDate()+c),o.setHours(23,59,59,999),o}function L5(t){const e=ie(t);return e.setSeconds(59,999),e}function R5(t){const e=ie(t),r=e.getMonth(),s=r-r%3+3;return e.setMonth(s,0),e.setHours(23,59,59,999),e}function $5(t){const e=ie(t);return e.setMilliseconds(999),e}const F5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},U5=(t,e,r)=>{let s;const a=F5[t];return typeof a=="string"?s=a:e===1?s=a.one:s=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Ed(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const B5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},q5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},V5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},W5={date:Ed({formats:B5,defaultWidth:"full"}),time:Ed({formats:q5,defaultWidth:"full"}),dateTime:Ed({formats:V5,defaultWidth:"full"})},H5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},J5=(t,e,r,s)=>H5[t];function Hn(t){return(e,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[o]}const n=t.argumentCallback?t.argumentCallback(e):e;return a[n]}}const Y5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},G5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},K5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Q5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},X5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Z5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eC=(t,e)=>{const r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},tC={ordinalNumber:eC,era:Hn({values:Y5,defaultWidth:"wide"}),quarter:Hn({values:G5,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Hn({values:K5,defaultWidth:"wide"}),day:Hn({values:Q5,defaultWidth:"wide"}),dayPeriod:Hn({values:X5,defaultWidth:"wide",formattingValues:Z5,defaultFormattingWidth:"wide"})};function Jn(t){return(e,r={})=>{const s=r.width,a=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],n=e.match(a);if(!n)return null;const o=n[0],l=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?sC(l,h=>h.test(o)):rC(l,h=>h.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=e.slice(o.length);return{value:d,rest:u}}}function rC(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function sC(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function aC(t){return(e,r={})=>{const s=e.match(t.matchPattern);if(!s)return null;const a=s[0],n=e.match(t.parsePattern);if(!n)return null;let o=t.valueCallback?t.valueCallback(n[0]):n[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(a.length);return{value:o,rest:l}}}const nC=/^(\d+)(th|st|nd|rd)?/i,iC=/\d+/i,oC={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},lC={any:[/^b/i,/^(a|c)/i]},cC={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dC={any:[/1/i,/2/i,/3/i,/4/i]},uC={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hC={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pC={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mC={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gC={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fC={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xC={ordinalNumber:aC({matchPattern:nC,parsePattern:iC,valueCallback:t=>parseInt(t,10)}),era:Jn({matchPatterns:oC,defaultMatchWidth:"wide",parsePatterns:lC,defaultParseWidth:"any"}),quarter:Jn({matchPatterns:cC,defaultMatchWidth:"wide",parsePatterns:dC,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Jn({matchPatterns:uC,defaultMatchWidth:"wide",parsePatterns:hC,defaultParseWidth:"any"}),day:Jn({matchPatterns:pC,defaultMatchWidth:"wide",parsePatterns:mC,defaultParseWidth:"any"}),dayPeriod:Jn({matchPatterns:gC,defaultMatchWidth:"any",parsePatterns:fC,defaultParseWidth:"any"})},ev={code:"en-US",formatDistance:U5,formatLong:W5,formatRelative:J5,localize:tC,match:xC,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bC(t){const e=ie(t);return Jy(e,Zy(e))+1}function tv(t){const e=ie(t),r=+kn(e)-+g5(e);return Math.round(r/Wy)+1}function Sp(t,e){var r,s,a,n;const o=ie(t),l=o.getFullYear(),c=Ta(),d=(e==null?void 0:e.firstWeekContainsDate)??((s=(r=e==null?void 0:e.locale)==null?void 0:r.options)==null?void 0:s.firstWeekContainsDate)??c.firstWeekContainsDate??((n=(a=c.locale)==null?void 0:a.options)==null?void 0:n.firstWeekContainsDate)??1,u=De(t,0);u.setFullYear(l+1,0,d),u.setHours(0,0,0,0);const h=zr(u,e),p=De(t,0);p.setFullYear(l,0,d),p.setHours(0,0,0,0);const m=zr(p,e);return o.getTime()>=h.getTime()?l+1:o.getTime()>=m.getTime()?l:l-1}function yC(t,e){var r,s,a,n;const o=Ta(),l=(e==null?void 0:e.firstWeekContainsDate)??((s=(r=e==null?void 0:e.locale)==null?void 0:r.options)==null?void 0:s.firstWeekContainsDate)??o.firstWeekContainsDate??((n=(a=o.locale)==null?void 0:a.options)==null?void 0:n.firstWeekContainsDate)??1,c=Sp(t,e),d=De(t,0);return d.setFullYear(c,0,l),d.setHours(0,0,0,0),zr(d,e)}function rv(t,e){const r=ie(t),s=+zr(r,e)-+yC(r,e);return Math.round(s/Wy)+1}function we(t,e){const r=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return r+s}const hs={y(t,e){const r=t.getFullYear(),s=r>0?r:1-r;return we(e==="yy"?s%100:s,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):we(r+1,2)},d(t,e){return we(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return we(t.getHours()%12||12,e.length)},H(t,e){return we(t.getHours(),e.length)},m(t,e){return we(t.getMinutes(),e.length)},s(t,e){return we(t.getSeconds(),e.length)},S(t,e){const r=e.length,s=t.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return we(a,e.length)}},$a={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},T0={G:function(t,e,r){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const s=t.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return hs.y(t,e)},Y:function(t,e,r,s){const a=Sp(t,s),n=a>0?a:1-a;if(e==="YY"){const o=n%100;return we(o,2)}return e==="Yo"?r.ordinalNumber(n,{unit:"year"}):we(n,e.length)},R:function(t,e){const r=Hy(t);return we(r,e.length)},u:function(t,e){const r=t.getFullYear();return we(r,e.length)},Q:function(t,e,r){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return we(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,r){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return we(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,r){const s=t.getMonth();switch(e){case"M":case"MM":return hs.M(t,e);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,r){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return we(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,r,s){const a=rv(t,s);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):we(a,e.length)},I:function(t,e,r){const s=tv(t);return e==="Io"?r.ordinalNumber(s,{unit:"week"}):we(s,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):hs.d(t,e)},D:function(t,e,r){const s=bC(t);return e==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):we(s,e.length)},E:function(t,e,r){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,r,s){const a=t.getDay(),n=(a-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(n);case"ee":return we(n,2);case"eo":return r.ordinalNumber(n,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,s){const a=t.getDay(),n=(a-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(n);case"cc":return we(n,e.length);case"co":return r.ordinalNumber(n,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const s=t.getDay(),a=s===0?7:s;switch(e){case"i":return String(a);case"ii":return we(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const s=t.getHours();let a;switch(s===12?a=$a.noon:s===0?a=$a.midnight:a=s/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const s=t.getHours();let a;switch(s>=17?a=$a.evening:s>=12?a=$a.afternoon:s>=4?a=$a.morning:a=$a.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return hs.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):hs.H(t,e)},K:function(t,e,r){const s=t.getHours()%12;return e==="Ko"?r.ordinalNumber(s,{unit:"hour"}):we(s,e.length)},k:function(t,e,r){let s=t.getHours();return s===0&&(s=24),e==="ko"?r.ordinalNumber(s,{unit:"hour"}):we(s,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):hs.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):hs.s(t,e)},S:function(t,e){return hs.S(t,e)},X:function(t,e,r){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return O0(s);case"XXXX":case"XX":return ta(s);case"XXXXX":case"XXX":default:return ta(s,":")}},x:function(t,e,r){const s=t.getTimezoneOffset();switch(e){case"x":return O0(s);case"xxxx":case"xx":return ta(s);case"xxxxx":case"xxx":default:return ta(s,":")}},O:function(t,e,r){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+D0(s,":");case"OOOO":default:return"GMT"+ta(s,":")}},z:function(t,e,r){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+D0(s,":");case"zzzz":default:return"GMT"+ta(s,":")}},t:function(t,e,r){const s=Math.trunc(t.getTime()/1e3);return we(s,e.length)},T:function(t,e,r){const s=t.getTime();return we(s,e.length)}};function D0(t,e=""){const r=t>0?"-":"+",s=Math.abs(t),a=Math.trunc(s/60),n=s%60;return n===0?r+String(a):r+String(a)+e+we(n,2)}function O0(t,e){return t%60===0?(t>0?"-":"+")+we(Math.abs(t)/60,2):ta(t,e)}function ta(t,e=""){const r=t>0?"-":"+",s=Math.abs(t),a=we(Math.trunc(s/60),2),n=we(s%60,2);return r+a+e+n}const I0=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},sv=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},vC=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return I0(t,e);let n;switch(s){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;case"PPPP":default:n=e.dateTime({width:"full"});break}return n.replace("{{date}}",I0(s,e)).replace("{{time}}",sv(a,e))},eh={p:sv,P:vC},wC=/^D+$/,kC=/^Y+$/,jC=["D","DD","YY","YYYY"];function av(t){return wC.test(t)}function nv(t){return kC.test(t)}function th(t,e,r){const s=_C(t,e,r);if(console.warn(s),jC.includes(t))throw new RangeError(s)}function _C(t,e,r){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const NC=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,SC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,CC=/^'([^]*?)'?$/,MC=/''/g,EC=/[a-zA-Z]/;function PC(t,e,r){var s,a,n,o,l,c,d,u;const h=Ta(),p=(r==null?void 0:r.locale)??h.locale??ev,m=(r==null?void 0:r.firstWeekContainsDate)??((a=(s=r==null?void 0:r.locale)==null?void 0:s.options)==null?void 0:a.firstWeekContainsDate)??h.firstWeekContainsDate??((o=(n=h.locale)==null?void 0:n.options)==null?void 0:o.firstWeekContainsDate)??1,v=(r==null?void 0:r.weekStartsOn)??((c=(l=r==null?void 0:r.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??h.weekStartsOn??((u=(d=h.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,y=ie(t);if(!Yy(y))throw new RangeError("Invalid time value");let k=e.match(SC).map(f=>{const x=f[0];if(x==="p"||x==="P"){const w=eh[x];return w(f,p.formatLong)}return f}).join("").match(NC).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const x=f[0];if(x==="'")return{isToken:!1,value:TC(f)};if(T0[x])return{isToken:!0,value:f};if(x.match(EC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:f}});p.localize.preprocessor&&(k=p.localize.preprocessor(y,k));const g={firstWeekContainsDate:m,weekStartsOn:v,locale:p};return k.map(f=>{if(!f.isToken)return f.value;const x=f.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&nv(x)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&av(x))&&th(x,e,String(t));const w=T0[x[0]];return w(y,x,p.localize,g)}).join("")}function TC(t){const e=t.match(CC);return e?e[1].replace(MC,"'"):t}function DC(){return Object.assign({},Ta())}function OC(t){let e=ie(t).getDay();return e===0&&(e=7),e}function IC(t,e){const r=e instanceof Date?De(e,0):new e(0);return r.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),r.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),r}const AC=10;class iv{constructor(){q(this,"subPriority",0)}validate(e,r){return!0}}class zC extends iv{constructor(e,r,s,a,n){super(),this.value=e,this.validateValue=r,this.setValue=s,this.priority=a,n&&(this.subPriority=n)}validate(e,r){return this.validateValue(e,this.value,r)}set(e,r,s){return this.setValue(e,r,this.value,s)}}class LC extends iv{constructor(){super(...arguments),q(this,"priority",AC),q(this,"subPriority",-1)}set(e,r){return r.timestampIsSet?e:De(e,IC(e,Date))}}class ye{run(e,r,s,a){const n=this.parse(e,r,s,a);return n?{setter:new zC(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}validate(e,r,s){return!0}}class RC extends ye{constructor(){super(...arguments),q(this,"priority",140),q(this,"incompatibleTokens",["R","u","t","T"])}parse(e,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"});case"GGGGG":return s.era(e,{width:"narrow"});case"GGGG":default:return s.era(e,{width:"wide"})||s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"})}}set(e,r,s){return r.era=s,e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}const Ye={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Pr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ge(t,e){return t&&{value:e(t.value),rest:t.rest}}function Fe(t,e){const r=e.match(t);return r?{value:parseInt(r[0],10),rest:e.slice(r[0].length)}:null}function Tr(t,e){const r=e.match(t);if(!r)return null;if(r[0]==="Z")return{value:0,rest:e.slice(1)};const s=r[1]==="+"?1:-1,a=r[2]?parseInt(r[2],10):0,n=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:s*(a*po+n*ho+o*h5),rest:e.slice(r[0].length)}}function ov(t){return Fe(Ye.anyDigitsSigned,t)}function We(t,e){switch(t){case 1:return Fe(Ye.singleDigit,e);case 2:return Fe(Ye.twoDigits,e);case 3:return Fe(Ye.threeDigits,e);case 4:return Fe(Ye.fourDigits,e);default:return Fe(new RegExp("^\\d{1,"+t+"}"),e)}}function lv(t,e){switch(t){case 1:return Fe(Ye.singleDigitSigned,e);case 2:return Fe(Ye.twoDigitsSigned,e);case 3:return Fe(Ye.threeDigitsSigned,e);case 4:return Fe(Ye.fourDigitsSigned,e);default:return Fe(new RegExp("^-?\\d{1,"+t+"}"),e)}}function Cp(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function cv(t,e){const r=e>0,s=r?e:1-e;let a;if(s<=50)a=t||100;else{const n=s+50,o=Math.trunc(n/100)*100,l=t>=n%100;a=t+o-(l?100:0)}return r?a:1-a}function dv(t){return t%400===0||t%4===0&&t%100!==0}class $C extends ye{constructor(){super(...arguments),q(this,"priority",130),q(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,r,s){const a=n=>({year:n,isTwoDigitYear:r==="yy"});switch(r){case"y":return Ge(We(4,e),a);case"yo":return Ge(s.ordinalNumber(e,{unit:"year"}),a);default:return Ge(We(r.length,e),a)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,s){const a=e.getFullYear();if(s.isTwoDigitYear){const o=cv(s.year,a);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}const n=!("era"in r)||r.era===1?s.year:1-s.year;return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}}class FC extends ye{constructor(){super(...arguments),q(this,"priority",130),q(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,r,s){const a=n=>({year:n,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Ge(We(4,e),a);case"Yo":return Ge(s.ordinalNumber(e,{unit:"year"}),a);default:return Ge(We(r.length,e),a)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,s,a){const n=Sp(e,a);if(s.isTwoDigitYear){const l=cv(s.year,n);return e.setFullYear(l,0,a.firstWeekContainsDate),e.setHours(0,0,0,0),zr(e,a)}const o=!("era"in r)||r.era===1?s.year:1-s.year;return e.setFullYear(o,0,a.firstWeekContainsDate),e.setHours(0,0,0,0),zr(e,a)}}class UC extends ye{constructor(){super(...arguments),q(this,"priority",130),q(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,r){return lv(r==="R"?4:r.length,e)}set(e,r,s){const a=De(e,0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),kn(a)}}class BC extends ye{constructor(){super(...arguments),q(this,"priority",130),q(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,r){return lv(r==="u"?4:r.length,e)}set(e,r,s){return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}class qC extends ye{constructor(){super(...arguments),q(this,"priority",120),q(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,s){switch(r){case"Q":case"QQ":return We(r.length,e);case"Qo":return s.ordinalNumber(e,{unit:"quarter"});case"QQQ":return s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(e,{width:"wide",context:"formatting"})||s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=1&&r<=4}set(e,r,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}}class VC extends ye{constructor(){super(...arguments),q(this,"priority",120),q(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,s){switch(r){case"q":case"qq":return We(r.length,e);case"qo":return s.ordinalNumber(e,{unit:"quarter"});case"qqq":return s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(e,{width:"wide",context:"standalone"})||s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=1&&r<=4}set(e,r,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}}class WC extends ye{constructor(){super(...arguments),q(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),q(this,"priority",110)}parse(e,r,s){const a=n=>n-1;switch(r){case"M":return Ge(Fe(Ye.month,e),a);case"MM":return Ge(We(2,e),a);case"Mo":return Ge(s.ordinalNumber(e,{unit:"month"}),a);case"MMM":return s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(e,{width:"wide",context:"formatting"})||s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=11}set(e,r,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}class HC extends ye{constructor(){super(...arguments),q(this,"priority",110),q(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,r,s){const a=n=>n-1;switch(r){case"L":return Ge(Fe(Ye.month,e),a);case"LL":return Ge(We(2,e),a);case"Lo":return Ge(s.ordinalNumber(e,{unit:"month"}),a);case"LLL":return s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(e,{width:"wide",context:"standalone"})||s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=11}set(e,r,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}function JC(t,e,r){const s=ie(t),a=rv(s,r)-e;return s.setDate(s.getDate()-a*7),s}class YC extends ye{constructor(){super(...arguments),q(this,"priority",100),q(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,r,s){switch(r){case"w":return Fe(Ye.week,e);case"wo":return s.ordinalNumber(e,{unit:"week"});default:return We(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,s,a){return zr(JC(e,s,a),a)}}function GC(t,e){const r=ie(t),s=tv(r)-e;return r.setDate(r.getDate()-s*7),r}class KC extends ye{constructor(){super(...arguments),q(this,"priority",100),q(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,r,s){switch(r){case"I":return Fe(Ye.week,e);case"Io":return s.ordinalNumber(e,{unit:"week"});default:return We(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,s){return kn(GC(e,s))}}const QC=[31,28,31,30,31,30,31,31,30,31,30,31],XC=[31,29,31,30,31,30,31,31,30,31,30,31];class ZC extends ye{constructor(){super(...arguments),q(this,"priority",90),q(this,"subPriority",1),q(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,r,s){switch(r){case"d":return Fe(Ye.date,e);case"do":return s.ordinalNumber(e,{unit:"date"});default:return We(r.length,e)}}validate(e,r){const s=e.getFullYear(),a=dv(s),n=e.getMonth();return a?r>=1&&r<=XC[n]:r>=1&&r<=QC[n]}set(e,r,s){return e.setDate(s),e.setHours(0,0,0,0),e}}class e6 extends ye{constructor(){super(...arguments),q(this,"priority",90),q(this,"subpriority",1),q(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,r,s){switch(r){case"D":case"DD":return Fe(Ye.dayOfYear,e);case"Do":return s.ordinalNumber(e,{unit:"date"});default:return We(r.length,e)}}validate(e,r){const s=e.getFullYear();return dv(s)?r>=1&&r<=366:r>=1&&r<=365}set(e,r,s){return e.setMonth(0,s),e.setHours(0,0,0,0),e}}function Mp(t,e,r){var s,a,n,o;const l=Ta(),c=(r==null?void 0:r.weekStartsOn)??((a=(s=r==null?void 0:r.locale)==null?void 0:s.options)==null?void 0:a.weekStartsOn)??l.weekStartsOn??((o=(n=l.locale)==null?void 0:n.options)==null?void 0:o.weekStartsOn)??0,d=ie(t),u=d.getDay(),h=(e%7+7)%7,p=7-c,m=e<0||e>6?e-(u+p)%7:(h+p)%7-(u+p)%7;return Oc(d,m)}class t6 extends ye{constructor(){super(...arguments),q(this,"priority",90),q(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,s,a){return e=Mp(e,s,a),e.setHours(0,0,0,0),e}}class r6 extends ye{constructor(){super(...arguments),q(this,"priority",90),q(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,r,s,a){const n=o=>{const l=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Ge(We(r.length,e),n);case"eo":return Ge(s.ordinalNumber(e,{unit:"day"}),n);case"eee":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeeee":return s.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,s,a){return e=Mp(e,s,a),e.setHours(0,0,0,0),e}}class s6 extends ye{constructor(){super(...arguments),q(this,"priority",90),q(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,r,s,a){const n=o=>{const l=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Ge(We(r.length,e),n);case"co":return Ge(s.ordinalNumber(e,{unit:"day"}),n);case"ccc":return s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"ccccc":return s.day(e,{width:"narrow",context:"standalone"});case"cccccc":return s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(e,{width:"wide",context:"standalone"})||s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=6}set(e,r,s,a){return e=Mp(e,s,a),e.setHours(0,0,0,0),e}}function a6(t,e){const r=ie(t),s=OC(r),a=e-s;return Oc(r,a)}class n6 extends ye{constructor(){super(...arguments),q(this,"priority",90),q(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,r,s){const a=n=>n===0?7:n;switch(r){case"i":case"ii":return We(r.length,e);case"io":return s.ordinalNumber(e,{unit:"day"});case"iii":return Ge(s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),a);case"iiiii":return Ge(s.day(e,{width:"narrow",context:"formatting"}),a);case"iiiiii":return Ge(s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),a);case"iiii":default:return Ge(s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),a)}}validate(e,r){return r>=1&&r<=7}set(e,r,s){return e=a6(e,s),e.setHours(0,0,0,0),e}}class i6 extends ye{constructor(){super(...arguments),q(this,"priority",80),q(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,s){return e.setHours(Cp(s),0,0,0),e}}class o6 extends ye{constructor(){super(...arguments),q(this,"priority",80),q(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,s){return e.setHours(Cp(s),0,0,0),e}}class l6 extends ye{constructor(){super(...arguments),q(this,"priority",80),q(this,"incompatibleTokens",["a","b","t","T"])}parse(e,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,s){return e.setHours(Cp(s),0,0,0),e}}class c6 extends ye{constructor(){super(...arguments),q(this,"priority",70),q(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,r,s){switch(r){case"h":return Fe(Ye.hour12h,e);case"ho":return s.ordinalNumber(e,{unit:"hour"});default:return We(r.length,e)}}validate(e,r){return r>=1&&r<=12}set(e,r,s){const a=e.getHours()>=12;return a&&s<12?e.setHours(s+12,0,0,0):!a&&s===12?e.setHours(0,0,0,0):e.setHours(s,0,0,0),e}}class d6 extends ye{constructor(){super(...arguments),q(this,"priority",70),q(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,r,s){switch(r){case"H":return Fe(Ye.hour23h,e);case"Ho":return s.ordinalNumber(e,{unit:"hour"});default:return We(r.length,e)}}validate(e,r){return r>=0&&r<=23}set(e,r,s){return e.setHours(s,0,0,0),e}}class u6 extends ye{constructor(){super(...arguments),q(this,"priority",70),q(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,r,s){switch(r){case"K":return Fe(Ye.hour11h,e);case"Ko":return s.ordinalNumber(e,{unit:"hour"});default:return We(r.length,e)}}validate(e,r){return r>=0&&r<=11}set(e,r,s){return e.getHours()>=12&&s<12?e.setHours(s+12,0,0,0):e.setHours(s,0,0,0),e}}class h6 extends ye{constructor(){super(...arguments),q(this,"priority",70),q(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,r,s){switch(r){case"k":return Fe(Ye.hour24h,e);case"ko":return s.ordinalNumber(e,{unit:"hour"});default:return We(r.length,e)}}validate(e,r){return r>=1&&r<=24}set(e,r,s){const a=s<=24?s%24:s;return e.setHours(a,0,0,0),e}}class p6 extends ye{constructor(){super(...arguments),q(this,"priority",60),q(this,"incompatibleTokens",["t","T"])}parse(e,r,s){switch(r){case"m":return Fe(Ye.minute,e);case"mo":return s.ordinalNumber(e,{unit:"minute"});default:return We(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,s){return e.setMinutes(s,0,0),e}}class m6 extends ye{constructor(){super(...arguments),q(this,"priority",50),q(this,"incompatibleTokens",["t","T"])}parse(e,r,s){switch(r){case"s":return Fe(Ye.second,e);case"so":return s.ordinalNumber(e,{unit:"second"});default:return We(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,s){return e.setSeconds(s,0),e}}class g6 extends ye{constructor(){super(...arguments),q(this,"priority",30),q(this,"incompatibleTokens",["t","T"])}parse(e,r){const s=a=>Math.trunc(a*Math.pow(10,-r.length+3));return Ge(We(r.length,e),s)}set(e,r,s){return e.setMilliseconds(s),e}}class f6 extends ye{constructor(){super(...arguments),q(this,"priority",10),q(this,"incompatibleTokens",["t","T","x"])}parse(e,r){switch(r){case"X":return Tr(Pr.basicOptionalMinutes,e);case"XX":return Tr(Pr.basic,e);case"XXXX":return Tr(Pr.basicOptionalSeconds,e);case"XXXXX":return Tr(Pr.extendedOptionalSeconds,e);case"XXX":default:return Tr(Pr.extended,e)}}set(e,r,s){return r.timestampIsSet?e:De(e,e.getTime()-nc(e)-s)}}class x6 extends ye{constructor(){super(...arguments),q(this,"priority",10),q(this,"incompatibleTokens",["t","T","X"])}parse(e,r){switch(r){case"x":return Tr(Pr.basicOptionalMinutes,e);case"xx":return Tr(Pr.basic,e);case"xxxx":return Tr(Pr.basicOptionalSeconds,e);case"xxxxx":return Tr(Pr.extendedOptionalSeconds,e);case"xxx":default:return Tr(Pr.extended,e)}}set(e,r,s){return r.timestampIsSet?e:De(e,e.getTime()-nc(e)-s)}}class b6 extends ye{constructor(){super(...arguments),q(this,"priority",40),q(this,"incompatibleTokens","*")}parse(e){return ov(e)}set(e,r,s){return[De(e,s*1e3),{timestampIsSet:!0}]}}class y6 extends ye{constructor(){super(...arguments),q(this,"priority",20),q(this,"incompatibleTokens","*")}parse(e){return ov(e)}set(e,r,s){return[De(e,s),{timestampIsSet:!0}]}}const v6={G:new RC,y:new $C,Y:new FC,R:new UC,u:new BC,Q:new qC,q:new VC,M:new WC,L:new HC,w:new YC,I:new KC,d:new ZC,D:new e6,E:new t6,e:new r6,c:new s6,i:new n6,a:new i6,b:new o6,B:new l6,h:new c6,H:new d6,K:new u6,k:new h6,m:new p6,s:new m6,S:new g6,X:new f6,x:new x6,t:new b6,T:new y6},w6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,k6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,j6=/^'([^]*?)'?$/,_6=/''/g,N6=/\S/,S6=/[a-zA-Z]/;function C6(t,e,r,s){var a,n,o,l,c,d,u,h;const p=DC(),m=(s==null?void 0:s.locale)??p.locale??ev,v=(s==null?void 0:s.firstWeekContainsDate)??((n=(a=s==null?void 0:s.locale)==null?void 0:a.options)==null?void 0:n.firstWeekContainsDate)??p.firstWeekContainsDate??((l=(o=p.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??1,y=(s==null?void 0:s.weekStartsOn)??((d=(c=s==null?void 0:s.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??p.weekStartsOn??((h=(u=p.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0;if(e==="")return t===""?ie(r):De(r,NaN);const k={firstWeekContainsDate:v,weekStartsOn:y,locale:m},g=[new LC],f=e.match(k6).map(_=>{const b=_[0];if(b in eh){const j=eh[b];return j(_,m.formatLong)}return _}).join("").match(w6),x=[];for(let _ of f){!(s!=null&&s.useAdditionalWeekYearTokens)&&nv(_)&&th(_,e,t),!(s!=null&&s.useAdditionalDayOfYearTokens)&&av(_)&&th(_,e,t);const b=_[0],j=v6[b];if(j){const{incompatibleTokens:z}=j;if(Array.isArray(z)){const A=x.find(F=>z.includes(F.token)||F.token===b);if(A)throw new RangeError(`The format string mustn't contain \`${A.fullToken}\` and \`${_}\` at the same time`)}else if(j.incompatibleTokens==="*"&&x.length>0)throw new RangeError(`The format string mustn't contain \`${_}\` and any other token at the same time`);x.push({token:b,fullToken:_});const I=j.run(t,_,m.match,k);if(!I)return De(r,NaN);g.push(I.setter),t=I.rest}else{if(b.match(S6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");if(_==="''"?_="'":b==="'"&&(_=M6(_)),t.indexOf(_)===0)t=t.slice(_.length);else return De(r,NaN)}}if(t.length>0&&N6.test(t))return De(r,NaN);const w=g.map(_=>_.priority).sort((_,b)=>b-_).filter((_,b,j)=>j.indexOf(_)===b).map(_=>g.filter(b=>b.priority===_).sort((b,j)=>j.subPriority-b.subPriority)).map(_=>_[0]);let S=ie(r);if(isNaN(S.getTime()))return De(r,NaN);const N={};for(const _ of w){if(!_.validate(S,k))return De(r,NaN);const b=_.set(S,N,k);Array.isArray(b)?(S=b[0],Object.assign(N,b[1])):S=b}return De(r,S)}function M6(t){return t.match(j6)[1].replace(_6,"'")}function E6(t){const e=ie(t);return e.setMinutes(0,0,0),e}function P6(t){const e=ie(t);return e.setMilliseconds(0),e}function T6(t,e){const r=(e==null?void 0:e.additionalDigits)??2,s=A6(t);let a;if(s.date){const c=z6(s.date,r);a=L6(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const n=a.getTime();let o=0,l;if(s.time&&(o=R6(s.time),isNaN(o)))return new Date(NaN);if(s.timezone){if(l=$6(s.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(n+o),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(n+o+l)}const el={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},D6=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,O6=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,I6=/^([+-])(\d{2})(?::?(\d{2}))?$/;function A6(t){const e={},r=t.split(el.dateTimeDelimiter);let s;if(r.length>2)return e;if(/:/.test(r[0])?s=r[0]:(e.date=r[0],s=r[1],el.timeZoneDelimiter.test(e.date)&&(e.date=t.split(el.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const a=el.timezone.exec(s);a?(e.time=s.replace(a[1],""),e.timezone=a[1]):e.time=s}return e}function z6(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(r);if(!s)return{year:NaN,restDateString:""};const a=s[1]?parseInt(s[1]):null,n=s[2]?parseInt(s[2]):null;return{year:n===null?a:n*100,restDateString:t.slice((s[1]||s[2]).length)}}function L6(t,e){if(e===null)return new Date(NaN);const r=t.match(D6);if(!r)return new Date(NaN);const s=!!r[4],a=Yn(r[1]),n=Yn(r[2])-1,o=Yn(r[3]),l=Yn(r[4]),c=Yn(r[5])-1;if(s)return V6(e,l,c)?F6(e,l,c):new Date(NaN);{const d=new Date(0);return!B6(e,n,o)||!q6(e,a)?new Date(NaN):(d.setUTCFullYear(e,n,Math.max(a,o)),d)}}function Yn(t){return t?parseInt(t):1}function R6(t){const e=t.match(O6);if(!e)return NaN;const r=Pd(e[1]),s=Pd(e[2]),a=Pd(e[3]);return W6(r,s,a)?r*po+s*ho+a*1e3:NaN}function Pd(t){return t&&parseFloat(t.replace(",","."))||0}function $6(t){if(t==="Z")return 0;const e=t.match(I6);if(!e)return 0;const r=e[1]==="+"?-1:1,s=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return H6(s,a)?r*(s*po+a*ho):NaN}function F6(t,e,r){const s=new Date(0);s.setUTCFullYear(t,0,4);const a=s.getUTCDay()||7,n=(e-1)*7+r+1-a;return s.setUTCDate(s.getUTCDate()+n),s}const U6=[31,null,31,30,31,30,31,31,30,31,30,31];function uv(t){return t%400===0||t%4===0&&t%100!==0}function B6(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(U6[e]||(uv(t)?29:28))}function q6(t,e){return e>=1&&e<=(uv(t)?366:365)}function V6(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function W6(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function H6(t,e){return e>=0&&e<=59}/*!
* chartjs-adapter-date-fns v3.0.0
* https://www.chartjs.org
* (c) 2022 chartjs-adapter-date-fns Contributors
* Released under the MIT license
*/const J6={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};Ny._date.override({_id:"date-fns",formats:function(){return J6},parse:function(t,e){if(t===null||typeof t>"u")return null;const r=typeof t;return r==="number"||t instanceof Date?t=ie(t):r==="string"&&(typeof e=="string"?t=C6(t,e,new Date,this.options):t=T6(t,this.options)),Yy(t)?t.getTime():null},format:function(t,e){return PC(t,e,this.options)},add:function(t,e,r){switch(r){case"millisecond":return Ic(t,e);case"second":return b5(t,e);case"minute":return f5(t,e);case"hour":return p5(t,e);case"day":return Oc(t,e);case"week":return y5(t,e);case"month":return Np(t,e);case"quarter":return x5(t,e);case"year":return v5(t,e);default:return t}},diff:function(t,e,r){switch(r){case"millisecond":return Ac(t,e);case"second":return M5(t,e);case"minute":return N5(t,e);case"hour":return _5(t,e);case"day":return Gy(t,e);case"week":return E5(t,e);case"month":return Xy(t,e);case"quarter":return C5(t,e);case"year":return P5(t,e);default:return 0}},startOf:function(t,e,r){switch(e){case"second":return P6(t);case"minute":return T5(t);case"hour":return E6(t);case"day":return Zu(t);case"week":return zr(t);case"isoWeek":return zr(t,{weekStartsOn:+r});case"month":return O5(t);case"quarter":return D5(t);case"year":return Zy(t);default:return t}},endOf:function(t,e){switch(e){case"second":return $5(t);case"minute":return L5(t);case"hour":return A5(t);case"day":return Ky(t);case"week":return z5(t);case"month":return Qy(t);case"quarter":return R5(t);case"year":return I5(t);default:return t}}});T.createContext(void 0);const hv=()=>{var t,e,r,s,a,n;const o=ht();return{user:{id:((t=o.user)==null?void 0:t.id)||"1",name:((e=o.user)==null?void 0:e.name)||"Guest User",email:((r=o.user)==null?void 0:r.email)||"guest@example.com",grade:((s=o.user)==null?void 0:s.grade)||"Guest",joinDate:((a=o.user)==null?void 0:a.join_date)||new Date().toISOString(),lastActive:((n=o.user)==null?void 0:n.last_active)||new Date().toISOString()},setUser:()=>{},hasAccess:o.hasAccess}};Tc.register(Qu,Xu,xl,ai,bl,B3,K3,F3,si,Xi);const Y6=()=>{const{hasAccess:t}=hv(),{getSystemMetrics:e,getDownloadLogs:r,getActivityLogs:s,getUsers:a,loading:n}=Kt(),[o,l]=T.useState("7d"),[c,d]=T.useState(null),[u,h]=T.useState(null),[p,m]=T.useState(null),[v,y]=T.useState(null),[k,g]=T.useState([]),[f,x]=T.useState({totalDownloads:0,activeUsers:0,popularFile:"",avgDownloadsPerDay:0,networkUsage:"2.4 GB",bandwidth:"45.2 MB/s"}),[w,S]=T.useState({hourlyUsage:[],hourlyBandwidth:[],totalUsage:0,peakBandwidth:0,lastUpdated:new Date});T.useEffect(()=>{j(),N()},[o]);const N=()=>{try{const L=localStorage.getItem("prodomo_network_metrics");if(L)S(JSON.parse(L));else{const Y=Array.from({length:24},(U,G)=>{const M=G;let O=20;return M>=9&&M<=17?O=60+Math.floor(Math.random()*40):M>=6&&M<9||M>17&&M<=22?O=30+Math.floor(Math.random()*30):O=10+Math.floor(Math.random()*20),O}),P=Y.map(U=>Math.max(5,Math.floor(U/3)+Math.floor(Math.random()*15))),$=Y.reduce((U,G)=>U+G,0),B=Math.max(...P),Q={hourlyUsage:Y,hourlyBandwidth:P,totalUsage:$,peakBandwidth:B,lastUpdated:new Date};S(Q),localStorage.setItem("prodomo_network_metrics",JSON.stringify(Q))}}catch(L){console.error("Failed to initialize network metrics:",L)}},_=()=>{try{const L=new Date,Y=L.getHours();if(L.getTime()-new Date(w.lastUpdated).getTime()<5*60*1e3)return;const P=[...w.hourlyUsage],$=[...w.hourlyBandwidth];let B=0;Y>=9&&Y<=17?B=2+Math.floor(Math.random()*8):Y>=6&&Y<9||Y>17&&Y<=22?B=1+Math.floor(Math.random()*4):B=Math.floor(Math.random()*2),P[Y]+=B;const Q=Math.max(0,Math.floor(B/2)+Math.floor(Math.random()*3));$[Y]=Math.max($[Y],$[Y]+Q);const U=P.reduce((O,R)=>O+R,0),G=Math.max(...$),M={hourlyUsage:P,hourlyBandwidth:$,totalUsage:U,peakBandwidth:G,lastUpdated:L};S(M),localStorage.setItem("prodomo_network_metrics",JSON.stringify(M)),b(P,$),x(O=>({...O,networkUsage:`${(U/1024).toFixed(1)} GB`,bandwidth:`${G.toFixed(1)} MB/s`}))}catch(L){console.error("Failed to update network metrics:",L)}},b=(L,Y)=>{const P={labels:Array.from({length:24},($,B)=>`${B}:00`),datasets:[{label:"Network Usage (MB)",data:L,borderColor:"rgb(139, 92, 246)",backgroundColor:"rgba(139, 92, 246, 0.1)",tension:.4,fill:!0},{label:"Bandwidth (MB/s)",data:Y,borderColor:"rgb(245, 158, 11)",backgroundColor:"rgba(245, 158, 11, 0.1)",tension:.4,fill:!0}]};y(P)},j=async()=>{const L=o==="7d"?7:o==="30d"?30:90,[Y,P,$,B]=await Promise.all([e(void 0,L),r(1e3),s(1e3),a()]),Q=P.reduce((J,ne)=>{const fe=new Date(ne.created_at).toDateString();return J[fe]=(J[fe]||0)+1,J},{}),U={labels:Object.keys(Q).slice(-L),datasets:[{label:"Downloads",data:Object.values(Q).slice(-L),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},G=$.reduce((J,ne)=>{const fe=new Date(ne.created_at).getHours();return J[fe]=(J[fe]||0)+1,J},{}),M={labels:Array.from({length:24},(J,ne)=>`${ne}:00`),datasets:[{label:"User Activity",data:Array.from({length:24},(J,ne)=>G[ne]||0),backgroundColor:"rgba(16, 185, 129, 0.8)",borderColor:"rgb(16, 185, 129)",borderWidth:1}]},O=P.reduce((J,ne)=>{var fe;const kt=((fe=ne.file_name.split(".").pop())==null?void 0:fe.toLowerCase())||"unknown";return J[kt]=(J[kt]||0)+1,J},{}),R={labels:Object.keys(O),datasets:[{data:Object.values(O),backgroundColor:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#F97316"],borderWidth:0}]};_();const D=$.slice(0,10).map(J=>{const ne=B.find(fe=>fe.id===J.user_id);return{...J,user_grade:ne==null?void 0:ne.grade}}),E=P.length,V=new Set(P.map(J=>J.user_id)).size,X=P.reduce((J,ne)=>(J[ne.file_name]=(J[ne.file_name]||0)+1,J),{}),C=Object.keys(X).reduce((J,ne)=>X[J]>X[ne]?J:ne,""),K=Math.round(E/L);d(U),h(M),m(R),g(D),x({totalDownloads:E,activeUsers:V,popularFile:C,avgDownloadsPerDay:K,networkUsage:`${(w.totalUsage/1024).toFixed(1)} GB`,bandwidth:`${w.peakBandwidth.toFixed(1)} MB/s`})},z={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(156, 163, 175, 0.1)"}},x:{grid:{color:"rgba(156, 163, 175, 0.1)"}}}},I={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}},A=L=>L.type==="download"?i.jsx(dt,{size:16,className:"text-blue-500"}):L.action&&L.action.includes("login")||L.action&&L.action.includes("auth")?i.jsx(nt,{size:16,className:"text-emerald-500"}):L.action&&L.action.includes("profile")||L.action&&L.action.includes("user")?i.jsx(vr,{size:16,className:"text-purple-500"}):i.jsx(nt,{size:16,className:"text-gray-500"}),F=L=>{switch(L){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},H=L=>{const Y=new Date(L),P=Math.floor((new Date().getTime()-Y.getTime())/1e3);return P<60?`${P}s ago`:P<3600?`${Math.floor(P/60)}m ago`:P<86400?`${Math.floor(P/3600)}h ago`:`${Math.floor(P/86400)}d ago`};return t("Admin")?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Analytics Dashboard"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Monitor downloads, user activity, network usage, and system performance."})]}),i.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[i.jsxs("select",{value:o,onChange:L=>l(L.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"7d",children:"Last 7 days"}),i.jsx("option",{value:"30d",children:"Last 30 days"}),i.jsx("option",{value:"90d",children:"Last 90 days"})]}),i.jsxs("button",{onClick:j,disabled:n,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(ao,{size:18,className:n?"animate-spin":""}),i.jsx("span",{children:"Refresh"})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-6",children:[{title:"Total Downloads",value:f.totalDownloads.toLocaleString(),icon:dt,color:"bg-blue-500",change:"+12%",changeType:"positive"},{title:"Active Users",value:f.activeUsers.toLocaleString(),icon:vr,color:"bg-emerald-500",change:"+8%",changeType:"positive"},{title:"Network Usage",value:f.networkUsage,icon:Mu,color:"bg-purple-500",change:"+15%",changeType:"positive"},{title:"Bandwidth",value:f.bandwidth,icon:Qr,color:"bg-amber-500",change:"+5%",changeType:"positive"},{title:"Avg Downloads/Day",value:f.avgDownloadsPerDay.toLocaleString(),icon:Vl,color:"bg-indigo-500",change:"+22%",changeType:"positive"},{title:"Server Uptime",value:"99.9%",icon:ya,color:"bg-emerald-600",change:"+0.1%",changeType:"positive"}].map((L,Y)=>{const P=L.icon;return i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:L.title}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:L.value}),i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx(Vl,{size:14,className:`${L.changeType==="positive"?"text-emerald-500":"text-red-500"} mr-1`}),i.jsx("span",{className:`text-sm font-medium ${L.changeType==="positive"?"text-emerald-600":"text-red-600"}`,children:L.change}),i.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:L.title==="Total Files"?"":"vs last month"})]})]}),i.jsx("div",{className:`p-3 rounded-lg ${L.color} bg-opacity-10`,children:i.jsx(P,{className:`w-6 h-6 ${L.color.replace("bg-","text-")}`})})]})},Y)})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Network Usage"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Mu,{className:"w-5 h-5 text-purple-500"}),i.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",new Date(w.lastUpdated).toLocaleTimeString()]})]})]}),i.jsx("div",{className:"h-64",children:v&&i.jsx(E0,{data:v,options:z})}),i.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[i.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Total Usage"}),i.jsxs("span",{className:"text-sm font-medium text-purple-800 dark:text-purple-200",children:[(w.totalUsage/1024).toFixed(1)," GB"]})]})}),i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Peak Bandwidth"}),i.jsxs("span",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:[w.peakBandwidth.toFixed(1)," MB/s"]})]})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Downloads Over Time"}),i.jsx(dt,{className:"w-5 h-5 text-blue-500"})]}),i.jsx("div",{className:"h-64",children:c&&i.jsx(E0,{data:c,options:z})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Activity by Hour"}),i.jsx(nt,{className:"w-5 h-5 text-emerald-500"})]}),i.jsx("div",{className:"h-64",children:u&&i.jsx(c5,{data:u,options:z})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"File Types"}),i.jsx(Xx,{className:"w-5 h-5 text-amber-500"})]}),i.jsx("div",{className:"h-64",children:p&&i.jsx(d5,{data:p,options:I})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent User Activity"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Latest user actions and system events with user details"})]}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[k.map((L,Y)=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-sm",children:L.user_name.charAt(0)})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:L.user_name}),L.user_grade&&i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${F(L.user_grade)}`,children:L.user_grade})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[A(L),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:H(L.created_at)})]})]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:L.action}),L.details&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:L.details})]})]},Y)),k.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(nt,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No recent activity"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"User activity will appear here as it happens."})]})]})})]})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(nt,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access analytics."})]})})},G6=({onViewProfile:t})=>{const{user:e,hasAccess:r}=ht(),{getUsers:s,updateUserGrade:a,blockUser:n,unblockUser:o,createUser:l,deleteUser:c,getUserPassword:d,loading:u,error:h,setError:p}=Kt(),{logUserCreation:m,logUserGradeUpdate:v,logUserBlock:y,logUserUnblock:k,logUserDelete:g}=Ma(),[f,x]=T.useState([]),[w,S]=T.useState(""),[N,_]=T.useState("all"),[b,j]=T.useState(null),[z,I]=T.useState(null),[A,F]=T.useState(null),[H,L]=T.useState(!1),[Y,P]=T.useState(""),[$,B]=T.useState("30m"),[Q,U]=T.useState(new Set),[G,M]=T.useState({name:"",email:"",password:"",grade:"V4"});T.useEffect(()=>{O()},[]);const O=async()=>{console.log("UserManagement: Loading users...");const W=(await s()).filter(ce=>!ce.is_guest);x(W),console.log("UserManagement: Loaded",W.length,"users")},R=async(W,ce)=>{console.log("UserManagement: Updating user grade:",W,"to",ce);const Ie=f.find(En=>En.id===W);if(!Ie)return;const qs=Ie.grade;await a(W,ce)&&(await O(),j(null),P(""),te.gradeUpdated(Ie.name,ce),await v(Ie.name,qs,ce),console.log("UserManagement: Grade updated successfully"))},D=async(W,ce)=>{console.log("UserManagement: Blocking user:",W,"for",ce);const Ie=f.find(qs=>qs.id===W);Ie&&await n(W,ce)&&(await O(),I(null),te.userBlocked(Ie.name),await y(Ie.name,ce),console.log("UserManagement: User blocked successfully"))},E=async W=>{console.log("UserManagement: Unblocking user:",W);const ce=f.find(Ie=>Ie.id===W);ce&&await o(W)&&(await O(),te.userUnblocked(ce.name),await k(ce.name),console.log("UserManagement: User unblocked successfully"))},V=async W=>{console.log("UserManagement: Deleting user:",W);const ce=f.find(Ie=>Ie.id===W);ce&&await c(W)&&(await O(),F(null),te.warning(`User ${ce.name} has been deleted`),await g(ce.name),console.log("UserManagement: User deleted successfully"))},X=async()=>{console.log("UserManagement: Creating new user:",G.email);try{const W=G.password||Math.random().toString(36).slice(-8)+Math.random().toString(36).slice(-8).toUpperCase()+"123!";await l({...G,password:W})&&(await O(),te.success(`User ${G.name} created successfully`),await m(G.name,G.grade),L(!1),M({name:"",email:"",password:"",grade:"V4"}),console.log("UserManagement: User created successfully"))}catch(W){console.error("UserManagement: Error creating user:",W)}},C=W=>{t&&t(W)},K=W=>{const ce=new Set(Q);ce.has(W)?ce.delete(W):ce.add(W),U(ce)},J=async W=>{const ce=d(W);if(ce)try{await navigator.clipboard.writeText(ce),te.success("Password copied to clipboard")}catch(Ie){console.error("Failed to copy password:",Ie),te.error("Failed to copy password")}},ne=f.filter(W=>{const ce=W.name.toLowerCase().includes(w.toLowerCase())||W.email.toLowerCase().includes(w.toLowerCase()),Ie=N==="all"||W.grade===N;return ce&&Ie&&!W.is_guest}),fe=W=>{switch(W){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},kt=W=>{switch(W){case"Admin":return"Full system access";case"Support":return"Bug management access";case"V5":return"Advanced features";case"V4":return"Standard access";default:return"Basic access"}},$t=W=>{switch(W){case"Admin":return i.jsx(Se,{size:16,className:"text-red-500"});case"Support":return i.jsx(Os,{size:16,className:"text-amber-500"});case"V5":return i.jsx(Se,{size:16,className:"text-purple-500"});case"V4":return i.jsx(Se,{size:16,className:"text-blue-500"});default:return i.jsx(Se,{size:16,className:"text-gray-500"})}},Ct=W=>{switch(W){case"30m":return"30 minutes";case"1d":return"1 day";case"7d":return"7 days";case"30d":return"30 days";default:return W}},Ft=W=>!W.is_blocked||!W.blocked_until?!1:new Date(W.blocked_until)>new Date;return r("Admin")?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"User Management"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Manage user accounts, permissions, and access levels."})]}),i.jsxs("button",{onClick:()=>L(!0),className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ir,{size:18}),i.jsx("span",{children:"Create User"})]})]}),h&&i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(It,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:h})]}),i.jsx("button",{onClick:()=>p(null),className:"text-red-400 hover:text-red-600 dark:hover:text-red-300",children:i.jsx(_e,{size:16})})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search users...",value:w,onChange:W=>S(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_a,{className:"text-gray-400 w-5 h-5"}),i.jsxs("select",{value:N,onChange:W=>_(W.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Grades"}),i.jsx("option",{value:"V4",children:"V4"}),i.jsx("option",{value:"V5",children:"V5"}),i.jsx("option",{value:"Support",children:"Support"}),i.jsx("option",{value:"Admin",children:"Admin"})]})]})]})}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Password"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Grade"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Downloads"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Last Active"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:ne.map(W=>{const ce=d(W.id),Ie=Q.has(W.id);return i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:W.name.charAt(0)})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:i.jsxs("button",{onClick:()=>C(W.id),className:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:[W.name,W.id===(e==null?void 0:e.id)&&i.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400",children:"(You)"})]})}),i.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[i.jsx(nn,{size:12,className:"mr-1"}),W.email]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg px-3 py-2",children:[i.jsx(tk,{size:14,className:"text-gray-400"}),i.jsx("span",{className:"text-sm font-mono text-gray-900 dark:text-white",children:ce?Ie?ce:"":"No password"})]}),ce&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{onClick:()=>K(W.id),className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:Ie?"Hide password":"Show password",children:Ie?i.jsx(kc,{size:14}):i.jsx(Jt,{size:14})}),i.jsx("button",{onClick:()=>J(W.id),className:"p-1 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Copy password",children:i.jsx(Y1,{size:14})})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:`flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full ${fe(W.grade)}`,children:[$t(W.grade),i.jsx("span",{children:W.grade})]}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:kt(W.grade)})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ft(W)?i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(oa,{size:14,className:"text-red-500"}),i.jsx("span",{className:"text-sm text-red-600 dark:text-red-400",children:"Blocked"})]}):i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(lt,{size:14,className:"text-emerald-500"}),i.jsx("span",{className:"text-sm text-emerald-600 dark:text-emerald-400",children:"Active"})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-900 dark:text-white",children:[i.jsx(nt,{size:14,className:"mr-1 text-gray-400"}),W.total_downloads||0]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[i.jsx(as,{size:14,className:"mr-1"}),new Date(W.last_active).toLocaleDateString()]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>C(W.id),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"View Profile",children:i.jsx(Jt,{size:16})}),W.id!==(e==null?void 0:e.id)&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>{j(W),P(W.grade)},className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"Edit Grade",children:i.jsx(sr,{size:16})}),Ft(W)?i.jsx("button",{onClick:()=>E(W.id),className:"p-2 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Unblock User",children:i.jsx(lk,{size:16})}):i.jsx("button",{onClick:()=>I(W),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",title:"Block User",children:i.jsx(oa,{size:16})}),i.jsx("button",{onClick:()=>F(W),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",title:"Delete User",children:i.jsx(Rt,{size:16})})]})]})})]},W.id)})})]})}),ne.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(vr,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No users found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria."})]})]}),H&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>L(!1)}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Create New User"}),i.jsx("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),i.jsx("input",{type:"text",value:G.name,onChange:W=>M({...G,name:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter full name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),i.jsx("input",{type:"email",value:G.email,onChange:W=>M({...G,email:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password (optional)"}),i.jsx("input",{type:"password",value:G.password,onChange:W=>M({...G,password:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Leave empty to auto-generate"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"If left empty, a secure password will be generated automatically"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Access Grade"}),i.jsxs("select",{value:G.grade,onChange:W=>M({...G,grade:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"V4",children:"V4 - Standard access"}),i.jsx("option",{value:"V5",children:"V5 - Advanced features"}),i.jsx("option",{value:"Support",children:"Support - Bug management access"})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(lt,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"User Account Created"}),i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"The user account will be created with the specified credentials. The user can log in immediately with their email and password."})]})]})})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:X,disabled:u||!G.name||!G.email,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(ck,{size:18}),i.jsx("span",{children:u?"Creating...":"Create User"})]})]})]})]})}),b&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>j(null)}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Edit User Grade"}),i.jsx("button",{onClick:()=>j(null),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:b.name.charAt(0)})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:b.name}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:b.email})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Current Grade: ",i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${fe(b.grade)}`,children:b.grade})]}),i.jsxs("select",{value:Y,onChange:W=>P(W.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"V4",children:"V4 - Standard access"}),i.jsx("option",{value:"V5",children:"V5 - Advanced features"}),i.jsx("option",{value:"Support",children:"Support - Bug management access"}),i.jsx("option",{value:"Admin",children:"Admin - Full system access"})]})]}),i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(It,{className:"text-amber-600 dark:text-amber-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Grade Change Warning"}),i.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:"Changing a user's grade will immediately affect their access permissions and available features."})]})]})})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:()=>j(null),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:()=>R(b.id,Y),disabled:u||Y===b.grade,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(lt,{size:18}),i.jsx("span",{children:u?"Updating...":"Update Grade"})]})]})]})]})}),z&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>I(null)}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Block User"}),i.jsx("button",{onClick:()=>I(null),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:z.name.charAt(0)})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:z.name}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:z.email})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Block Duration"}),i.jsxs("select",{value:$,onChange:W=>B(W.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"30m",children:"30 minutes"}),i.jsx("option",{value:"1d",children:"1 day"}),i.jsx("option",{value:"7d",children:"7 days"}),i.jsx("option",{value:"30d",children:"30 days"})]})]}),i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(oa,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Block User Warning"}),i.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:["This user will be blocked for ",Ct($)," and won't be able to access the system until the block expires."]})]})]})})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:()=>I(null),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:()=>D(z.id,$),disabled:u,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(oa,{size:18}),i.jsx("span",{children:u?"Blocking...":"Block User"})]})]})]})]})}),A&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>F(null)}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Delete User"}),i.jsx("button",{onClick:()=>F(null),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:A.name.charAt(0)})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:A.name}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:A.email})]})]}),i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(It,{className:"text-red-600 dark:text-red-400 w-6 h-6 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Warning: This action cannot be undone"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"Deleting this user will permanently remove their account and all associated data including:"}),i.jsxs("ul",{className:"mt-2 text-sm text-red-700 dark:text-red-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"User profile information"}),i.jsx("li",{children:"Download history"}),i.jsx("li",{children:"Activity logs"}),i.jsx("li",{children:"Bug reports"}),i.jsx("li",{children:"Authored content"})]})]})]})}),i.jsxs("div",{className:"pt-3",children:[i.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Please type ",i.jsx("span",{className:"font-medium",children:A.name})," to confirm deletion:"]}),i.jsx("input",{type:"text",className:"mt-2 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:`Type "${A.name}" to confirm`,id:"delete-confirmation"})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:()=>F(null),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsxs("button",{onClick:()=>{const W=document.getElementById("delete-confirmation");W&&W.value===A.name?V(A.id):te.error("Name confirmation does not match")},disabled:u,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Rt,{size:18}),i.jsx("span",{children:u?"Deleting...":"Delete User"})]})]})]})]})}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-4",children:[{label:"Total Users",value:f.length,color:"bg-blue-500"},{label:"Admin Users",value:f.filter(W=>W.grade==="Admin").length,color:"bg-red-500"},{label:"Support Users",value:f.filter(W=>W.grade==="Support").length,color:"bg-amber-500"},{label:"V5 Users",value:f.filter(W=>W.grade==="V5").length,color:"bg-purple-500"},{label:"Blocked Users",value:f.filter(W=>Ft(W)).length,color:"bg-gray-500"}].map((W,ce)=>i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:W.label}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:W.value})]}),i.jsx("div",{className:`p-2 rounded-lg ${W.color} bg-opacity-10`,children:i.jsx(vr,{className:`w-5 h-5 ${W.color.replace("bg-","text-")}`})})]})},ce))})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(It,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access user management."})]})})},K6=()=>{const{hasAccess:t}=hv(),{getActivityLogs:e,getDownloadLogs:r,loading:s}=Kt(),[a,n]=T.useState([]),[o,l]=T.useState([]),[c,d]=T.useState(""),[u,h]=T.useState("all"),[p,m]=T.useState("7d");T.useEffect(()=>{v()},[p]);const v=async()=>{const f=p==="7d"?100:p==="30d"?500:1e3,[x,w]=await Promise.all([e(f),r(f)]);n(x),l(w)},y=f=>f.includes("download")?i.jsx(dt,{size:16,className:"text-blue-500"}):f.includes("login")||f.includes("auth")?i.jsx(Se,{size:16,className:"text-emerald-500"}):f.includes("profile")||f.includes("user")?i.jsx(ns,{size:16,className:"text-purple-500"}):f.includes("patch")||f.includes("note")?i.jsx(yr,{size:16,className:"text-amber-500"}):i.jsx(nt,{size:16,className:"text-gray-500"}),k=f=>{const x=new Date(f),w=Math.floor((new Date().getTime()-x.getTime())/1e3);return w<60?`${w}s ago`:w<3600?`${Math.floor(w/60)}m ago`:w<86400?`${Math.floor(w/3600)}h ago`:`${Math.floor(w/86400)}d ago`},g=()=>{let f=[];return(u==="all"||u==="activity")&&(f=[...f,...a.map(x=>({...x,type:"activity"}))]),(u==="all"||u==="downloads")&&(f=[...f,...o.map(x=>({...x,type:"download",action:`Downloaded ${x.file_name} v${x.file_version}`,details:`File: ${x.file_name}`}))]),f.sort((x,w)=>new Date(w.created_at).getTime()-new Date(x.created_at).getTime()),c&&(f=f.filter(x=>x.user_name.toLowerCase().includes(c.toLowerCase())||x.action.toLowerCase().includes(c.toLowerCase())||x.details&&x.details.toLowerCase().includes(c.toLowerCase()))),f};return t("Admin")?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Activity Logs"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Monitor user activities, downloads, and system events."})]}),i.jsxs("button",{onClick:v,disabled:s,className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(ao,{size:18,className:s?"animate-spin":""}),i.jsx("span",{children:"Refresh"})]})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search logs...",value:c,onChange:f=>d(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_a,{className:"text-gray-400 w-5 h-5"}),i.jsxs("select",{value:u,onChange:f=>h(f.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Logs"}),i.jsx("option",{value:"activity",children:"Activity Only"}),i.jsx("option",{value:"downloads",children:"Downloads Only"})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(as,{className:"text-gray-400 w-5 h-5"}),i.jsxs("select",{value:p,onChange:f=>m(f.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"7d",children:"Last 7 days"}),i.jsx("option",{value:"30d",children:"Last 30 days"}),i.jsx("option",{value:"90d",children:"Last 90 days"})]})]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Activities"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.length})]}),i.jsx(nt,{className:"w-8 h-8 text-blue-500"})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Downloads"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.length})]}),i.jsx(dt,{className:"w-8 h-8 text-emerald-500"})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Unique Users"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:new Set([...a.map(f=>f.user_id),...o.map(f=>f.user_id)]).size})]}),i.jsx(ns,{className:"w-8 h-8 text-purple-500"})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Showing ",g().length," log entries"]})]}),i.jsx("div",{className:"max-h-96 overflow-y-auto",children:i.jsxs("div",{className:"p-6 space-y-4",children:[g().map((f,x)=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:y(f.action)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f.user_name}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${f.type==="download"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400"}`,children:f.type}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:k(f.created_at)})]})]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:f.action}),f.details&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:f.details}),i.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500 dark:text-gray-500",children:[i.jsxs("span",{children:["IP: ",f.ip_address||"Unknown"]}),i.jsx("span",{children:new Date(f.created_at).toLocaleString()})]})]})]},`${f.type}-${f.id}-${x}`)),g().length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Jt,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No logs found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria or date range."})]})]})})]})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(It,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access activity logs."})]})})},Q6=()=>{var t,e;const{user:r,hasAccess:s}=ht(),{createBugReport:a,getBugReports:n,updateBugReport:o,loading:l}=Kt(),{logSystemAction:c,logBugReportSubmit:d}=Ma(),[u,h]=T.useState({title:"",description:"",severity:"medium",category:"general",steps:[""],expected_behavior:"",actual_behavior:"",environment:{os:"FreeBSD",version:"V4"}}),[p,m]=T.useState([]),[v,y]=T.useState(!1),[k,g]=T.useState(!1),[f,x]=T.useState([]),[w,S]=T.useState(null),[N,_]=T.useState(!1),[b,j]=T.useState(""),[z,I]=T.useState(""),[A,F]=T.useState("all"),H=[{value:"low",label:"Low",color:"text-green-600 bg-green-100 dark:bg-green-900/20 dark:text-green-400",description:"Minor issue, workaround available"},{value:"medium",label:"Medium",color:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-400",description:"Moderate impact on functionality"},{value:"high",label:"High",color:"text-orange-600 bg-orange-100 dark:bg-orange-900/20 dark:text-orange-400",description:"Significant impact, needs attention"},{value:"critical",label:"Critical",color:"text-red-600 bg-red-100 dark:bg-red-900/20 dark:text-red-400",description:"System breaking, immediate fix required"}],L=[{value:"general",label:"General",icon:Jr},{value:"ui",label:"User Interface",icon:ya},{value:"performance",label:"Performance",icon:ya},{value:"security",label:"Security",icon:It},{value:"feature",label:"Feature Request",icon:lt}];T.useEffect(()=>{Y()},[r]);const Y=async()=>{if(r)try{const C=(await n()).filter(K=>K.reporter_id===r.id);x(C)}catch(C){console.error("Failed to load bug reports:",C),te.error("Failed to load your bug reports")}},P=async C=>{if(C.preventDefault(),!!r)try{y(!0);const K={...u,reporter_id:r.id,reporter_name:r.name,steps:u.steps.filter(J=>J.trim()!==""),attachments:p.map(J=>J.name),status:"open",environment:{browser:"",os:u.environment.os,version:u.environment.version},comments:[]};await a(K)&&(te.success("Bug report submitted successfully"),await d(u.title),await c(`Submitted bug report: ${u.title}`),h({title:"",description:"",severity:"medium",category:"general",steps:[""],expected_behavior:"",actual_behavior:"",environment:{os:"FreeBSD",version:"V4"}}),m([]),g(!1),await Y())}catch(K){console.error("Failed to submit bug report:",K),te.error("Failed to submit bug report")}finally{y(!1)}},$=async()=>{if(!(!w||!r||!b.trim()))try{const C={id:`comment_${Date.now()}`,author:r.name,author_grade:r.grade,content:b,created_at:new Date().toISOString()},K=[...w.comments||[],C];if(await o(w.id,{comments:K})){te.success("Comment added successfully"),j(""),await Y();const J=(await n()).find(ne=>ne.id===w.id);J&&S(J)}}catch(C){console.error("Failed to add comment:",C),te.error("Failed to add comment")}},B=()=>{h({...u,steps:[...u.steps,""]})},Q=(C,K)=>{const J=[...u.steps];J[C]=K,h({...u,steps:J})},U=C=>{const K=u.steps.filter((J,ne)=>ne!==C);h({...u,steps:K})},G=C=>{const K=Array.from(C.target.files||[]);m([...p,...K])},M=C=>{m(p.filter((K,J)=>J!==C))},O=C=>{S(C),_(!0)},R=C=>{switch(C){case"low":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400";case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},D=C=>{switch(C){case"open":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"in-progress":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"resolved":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400";case"closed":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},E=C=>{switch(C){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},V=C=>{const K=new Date(C),J=Math.floor((new Date().getTime()-K.getTime())/1e3);return J<60?`${J}s ago`:J<3600?`${Math.floor(J/60)}m ago`:J<86400?`${Math.floor(J/3600)}h ago`:`${Math.floor(J/86400)}d ago`},X=f.filter(C=>{const K=C.title.toLowerCase().includes(z.toLowerCase())||C.description.toLowerCase().includes(z.toLowerCase()),J=A==="all"||C.status===A;return K&&J});return s("V4")?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Bug Reports"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"View your submitted bug reports and submit new ones."})]}),i.jsx("div",{className:"mt-4 sm:mt-0",children:i.jsx("button",{onClick:()=>{g(!k),N&&_(!1)},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:k?i.jsxs(i.Fragment,{children:[i.jsx(_e,{size:18}),i.jsx("span",{children:"Cancel"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Ir,{size:18}),i.jsx("span",{children:"Submit New Bug"})]})})})]}),!k&&!N&&i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search bug reports...",value:z,onChange:C=>I(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_a,{className:"text-gray-400 w-5 h-5"}),i.jsxs("select",{value:A,onChange:C=>F(C.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"open",children:"Open"}),i.jsx("option",{value:"in-progress",children:"In Progress"}),i.jsx("option",{value:"resolved",children:"Resolved"}),i.jsx("option",{value:"closed",children:"Closed"})]})]}),i.jsxs("button",{onClick:Y,disabled:l,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(ao,{size:18,className:l?"animate-spin":""}),i.jsx("span",{children:"Refresh"})]})]})]})}),k&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bug Report Details"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Please provide as much detail as possible to help us reproduce and fix the issue."})]}),i.jsxs("form",{onSubmit:P,className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bug Title *"}),i.jsx("input",{type:"text",value:u.title,onChange:C=>h({...u,title:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Brief description of the bug",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Severity *"}),i.jsx("div",{className:"space-y-2",children:H.map(C=>i.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"severity",value:C.value,checked:u.severity===C.value,onChange:K=>h({...u,severity:K.target.value}),className:"text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${C.color}`,children:C.label}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:C.description})]},C.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category *"}),i.jsx("div",{className:"space-y-2",children:L.map(C=>{const K=C.icon;return i.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"category",value:C.value,checked:u.category===C.value,onChange:J=>h({...u,category:J.target.value}),className:"text-blue-600 focus:ring-blue-500"}),i.jsx(K,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:C.label})]},C.value)})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description *"}),i.jsx("textarea",{value:u.description,onChange:C=>h({...u,description:C.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Detailed description of the bug...",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Steps to Reproduce"}),i.jsxs("div",{className:"space-y-2",children:[u.steps.map((C,K)=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 w-8",children:[K+1,"."]}),i.jsx("input",{type:"text",value:C,onChange:J=>Q(K,J.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe this step..."}),u.steps.length>1&&i.jsx("button",{type:"button",onClick:()=>U(K),className:"p-2 text-red-500 hover:text-red-700 dark:hover:text-red-400",children:i.jsx(_e,{size:16})})]},K)),i.jsx("button",{type:"button",onClick:B,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:i.jsx("span",{children:"Add Step"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Expected Behavior"}),i.jsx("textarea",{value:u.expected_behavior,onChange:C=>h({...u,expected_behavior:C.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"What should happen?"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Actual Behavior"}),i.jsx("textarea",{value:u.actual_behavior,onChange:C=>h({...u,actual_behavior:C.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"What actually happens?"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Environment Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Operating System"}),i.jsx("select",{value:u.environment.os,onChange:C=>h({...u,environment:{...u.environment,os:C.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:i.jsx("option",{value:"FreeBSD",children:"FreeBSD"})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Version"}),i.jsxs("select",{value:u.environment.version,onChange:C=>h({...u,environment:{...u.environment,version:C.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"V4",children:"V4"}),i.jsx("option",{value:"V5",children:"V5"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Attachments (Screenshots, logs, etc.)"}),i.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Zh,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("label",{className:"cursor-pointer",children:[i.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900 dark:text-white",children:"Upload files"}),i.jsx("input",{type:"file",multiple:!0,accept:"image/*,.txt,.log,.pdf",onChange:G,className:"hidden"})]}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"PNG, JPG, TXT, LOG, PDF up to 10MB each"})]})]})}),p.length>0&&i.jsx("div",{className:"mt-4 space-y-2",children:p.map((C,K)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(yr,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:C.name}),i.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",(C.size/1024).toFixed(1)," KB)"]})]}),i.jsx("button",{type:"button",onClick:()=>M(K),className:"text-red-500 hover:text-red-700 dark:hover:text-red-400",children:i.jsx(_e,{size:16})})]},K))})]}),i.jsxs("div",{className:"flex justify-end space-x-3",children:[i.jsx("button",{type:"button",onClick:()=>{h({title:"",description:"",severity:"medium",category:"general",steps:[""],expected_behavior:"",actual_behavior:"",environment:{os:"FreeBSD",version:"V4"}}),m([])},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Clear Form"}),i.jsxs("button",{type:"submit",disabled:v||!u.title||!u.description,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Su,{size:18}),i.jsx("span",{children:v?"Submitting...":"Submit Bug Report"})]})]})]})]}),N&&w&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>_(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:i.jsx(_e,{size:20})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Bug Report Details"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R(w.severity)}`,children:w.severity}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${D(w.status)}`,children:w.status})]})]})}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:w.title}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:w.description})]}),w.steps&&w.steps.length>0&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-2",children:"Steps to Reproduce"}),i.jsx("ol",{className:"list-decimal list-inside space-y-1",children:w.steps.map((C,K)=>i.jsx("li",{className:"text-gray-600 dark:text-gray-400",children:C},K))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.expected_behavior&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-2",children:"Expected Behavior"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:w.expected_behavior})]}),w.actual_behavior&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-2",children:"Actual Behavior"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:w.actual_behavior})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-2",children:"Environment"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"OS:"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:((t=w.environment)==null?void 0:t.os)||"Not specified"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Version:"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:((e=w.environment)==null?void 0:e.version)||"Not specified"})]})]})]}),i.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[i.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[i.jsx(on,{size:18,className:"mr-2"}),"Comments"]}),i.jsx("div",{className:"space-y-4 mb-6",children:w.comments&&w.comments.length>0?w.comments.map((C,K)=>i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-xs",children:C.author.charAt(0)})}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:C.author}),C.author_grade&&i.jsxs("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full flex items-center ${E(C.author_grade)}`,children:[i.jsx(Se,{size:10,className:"mr-1"}),C.author_grade]})]})]}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:V(C.created_at)})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:C.content})]},K)):i.jsxs("div",{className:"text-center py-4",children:[i.jsx(on,{className:"mx-auto h-8 w-8 text-gray-400"}),i.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"No comments yet"})]})}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Add a Comment"}),i.jsx("textarea",{value:b,onChange:C=>j(C.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Type your comment here..."}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:$,disabled:!b.trim()||l,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Su,{size:16}),i.jsx("span",{children:l?"Sending...":"Send Comment"})]})})]})]})]})})]}),!k&&!N&&i.jsx("div",{className:"space-y-4",children:X.length>0?X.map(C=>i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>O(C),children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:C.title}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R(C.severity)}`,children:C.severity}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${D(C.status)}`,children:C.status.replace("-"," ")})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[i.jsx(qt,{size:14}),i.jsx("span",{children:V(C.created_at)})]})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 line-clamp-2 mb-3",children:C.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[i.jsx(on,{size:14}),i.jsxs("span",{children:[C.comments?C.comments.length:0," comments"]})]}),i.jsxs("button",{onClick:K=>{K.stopPropagation(),O(C)},className:"flex items-center space-x-1 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm",children:[i.jsx(Jt,{size:14}),i.jsx("span",{children:"View Details"})]})]})]})},C.id)):i.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx(Jr,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"No bug reports found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:z||A!=="all"?"Try adjusting your search criteria.":"You haven't submitted any bug reports yet."}),i.jsxs("button",{onClick:()=>g(!0),className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Ir,{size:18}),i.jsx("span",{children:"Submit New Bug"})]})]})}),k&&i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(lt,{className:"text-blue-600 dark:text-blue-400 w-6 h-6 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Tips for Better Bug Reports"}),i.jsxs("ul",{className:"space-y-1 text-sm text-blue-800 dark:text-blue-200",children:[i.jsx("li",{children:" Be specific and descriptive in your title"}),i.jsx("li",{children:" Include step-by-step instructions to reproduce the issue"}),i.jsx("li",{children:" Attach screenshots or screen recordings when possible"}),i.jsx("li",{children:" Mention what you expected to happen vs. what actually happened"}),i.jsx("li",{children:" Specify which Prodomo version you're using (V4 or V5)"})]})]})]})})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(It,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need V4+ access to report bugs."})]})})},X6=()=>{var t;const{user:e,hasAccess:r}=ht(),{getBugReports:s,updateBugReport:a,deleteBugReport:n,loading:o}=Kt(),{logSystemAction:l}=Ma();$b();const[c,d]=T.useState([]),[u,h]=T.useState(""),[p,m]=T.useState("all"),[v,y]=T.useState("all"),[k,g]=T.useState(null),[f,x]=T.useState(!1),[w,S]=T.useState("");T.useEffect(()=>{N()},[]);const N=async()=>{const U=await s();d(U)},_=async(U,G)=>{const M=c.find(R=>R.id===U);if(!M)return;const O=M.status;if(await a(U,{status:G})&&(await N(),te.success(`Bug "${M.title}" marked as ${G}`),await l(`[ADMIN] Updated bug status: ${M.title} -> ${G}`,`Bug ID: ${U}`),(G==="in-progress"||G==="resolved")&&M.reporter_id!==(e==null?void 0:e.id))){console.log("Sending notification to reporter:",M.reporter_id,"for bug:",M.title),M.id,M.title,M.reporter_id,new Date().toISOString();const R=JSON.parse(localStorage.getItem(`prodomo_notifications_${M.reporter_id}`)||"[]");let D="",E="info";switch(G){case"in-progress":D=`Your bug report "${M.title}" is now being worked on by our team.`,E="info";break;case"resolved":D=`Great news! Your bug report "${M.title}" has been resolved.`,E="success";break;case"closed":D=`Your bug report "${M.title}" has been closed.`,E="info";break;default:D=`Your bug report "${M.title}" status changed from ${O} to ${G}.`,E="info"}const V={id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:"Bug Report Update",message:D,type:E,read:!1,created_at:new Date().toISOString(),related_id:M.id,action_url:"/bug-report"},X=[V,...R].slice(0,50);localStorage.setItem(`prodomo_notifications_${M.reporter_id}`,JSON.stringify(X)),console.log("Notification stored for user:",M.reporter_id,V)}},b=async()=>{if(!(!k||!e||!w.trim()))try{const U={id:`comment_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,author:e.name,author_grade:e.grade,content:w.trim(),created_at:new Date().toISOString()},G=[...k.comments||[],U];if(await a(k.id,{comments:G})){await N(),S("");const M=(await s()).find(O=>O.id===k.id);if(M&&g(M),te.success("Comment added successfully"),await l("Added comment to bug report",`Bug ID: ${k.id}`),(r("Admin")||e.grade==="Support")&&k.reporter_id!==e.id){const O=JSON.parse(localStorage.getItem(`prodomo_notifications_${k.reporter_id}`)||"[]"),R=[{id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:"New Comment on Your Bug Report",message:`${e.name} commented on your bug report "${k.title}"`,type:"info",read:!1,created_at:new Date().toISOString(),related_id:k.id,action_url:"/bug-report"},...O].slice(0,50);localStorage.setItem(`prodomo_notifications_${k.reporter_id}`,JSON.stringify(R))}}}catch(U){console.error("Failed to add comment:",U),te.error("Failed to add comment")}},j=async U=>{c.find(G=>G.id===U)&&F(U)},z=async U=>{const G=c.find(M=>M.id===U);G&&(await n(U)?(await l(`[ADMIN] Deleted bug report: ${G.title}`,`Bug ID: ${U}`),await N(),te.warning(`Bug report for "${G.title}" deleted`)):te.error("Failed to delete bug report"),F(null))},I=()=>{F(null)},[A,F]=T.useState(null),H=U=>{switch(U){case"low":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400";case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},L=U=>{switch(U){case"open":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"in-progress":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"resolved":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400";case"closed":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},Y=U=>{switch(U){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},P=U=>{switch(U){case"open":return i.jsx(Jr,{size:16});case"in-progress":return i.jsx(qt,{size:16});case"resolved":return i.jsx(lt,{size:16});case"closed":return i.jsx(_e,{size:16});default:return i.jsx(Jr,{size:16})}},$=c.filter(U=>{const G=U.title.toLowerCase().includes(u.toLowerCase())||U.description.toLowerCase().includes(u.toLowerCase())||U.reporter_name.toLowerCase().includes(u.toLowerCase()),M=p==="all"||U.status===p,O=v==="all"||U.severity===v;return G&&M&&O}),B={open:c.filter(U=>U.status==="open").length,"in-progress":c.filter(U=>U.status==="in-progress").length,resolved:c.filter(U=>U.status==="resolved").length,closed:c.filter(U=>U.status==="closed").length},Q=U=>new Date(U).toLocaleString();return!r("Admin")&&(e==null?void 0:e.grade)!=="Support"?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Kr,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin or Support privileges to manage bug reports."})]})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Bug Management"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Review, manage, and resolve bug reports from users."})]}),i.jsxs("button",{onClick:N,disabled:o,className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(ao,{size:18,className:o?"animate-spin":""}),i.jsx("span",{children:"Refresh"})]})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-6",children:[{label:"Open",value:B.open,color:"bg-blue-500",icon:Jr},{label:"In Progress",value:B["in-progress"],color:"bg-purple-500",icon:qt},{label:"Resolved",value:B.resolved,color:"bg-emerald-500",icon:lt},{label:"Closed",value:B.closed,color:"bg-gray-500",icon:_e}].map((U,G)=>{const M=U.icon;return i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:U.label}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:U.value})]}),i.jsx("div",{className:`p-3 rounded-lg ${U.color} bg-opacity-10`,children:i.jsx(M,{className:`w-6 h-6 ${U.color.replace("bg-","text-")}`})})]})},G)})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search bug reports...",value:u,onChange:U=>h(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_a,{className:"text-gray-400 w-5 h-5"}),i.jsxs("select",{value:p,onChange:U=>m(U.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"open",children:"Open"}),i.jsx("option",{value:"in-progress",children:"In Progress"}),i.jsx("option",{value:"resolved",children:"Resolved"}),i.jsx("option",{value:"closed",children:"Closed"})]})]}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs("select",{value:v,onChange:U=>y(U.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Severity"}),i.jsx("option",{value:"low",children:"Low"}),i.jsx("option",{value:"medium",children:"Medium"}),i.jsx("option",{value:"high",children:"High"}),i.jsx("option",{value:"critical",children:"Critical"})]})})]})]})}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Bug Report"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Severity"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Reporter"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Created"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Comments"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:$.map(U=>{var G;return i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:U.title}),i.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[U.description.substring(0,100),"..."]}),i.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[i.jsx(ab,{size:12,className:"text-gray-400"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:U.category})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${H(U.severity)}`,children:U.severity})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs("span",{className:`flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full ${L(U.status)}`,children:[P(U.status),i.jsx("span",{className:"capitalize",children:U.status.replace("-"," ")})]})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ns,{size:14,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:U.reporter_name})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(as,{size:14,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(U.created_at).toLocaleDateString()})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(on,{size:14,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:((G=U.comments)==null?void 0:G.length)||0})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>{g(U),x(!0)},className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"View Details",children:i.jsx(Jt,{size:16})}),U.status!=="in-progress"&&i.jsx("button",{onClick:()=>_(U.id,"in-progress"),className:"p-2 text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors duration-200",title:"Mark as In Progress",children:i.jsx(qt,{size:16})}),U.status!=="resolved"&&i.jsx("button",{onClick:()=>_(U.id,"resolved"),className:"p-2 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Mark as Resolved",children:i.jsx(lt,{size:16})}),r("Admin")&&i.jsx("button",{onClick:()=>j(U.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",title:"Delete",children:i.jsx(Rt,{size:16})})]})})]},U.id)})})]})}),$.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Jr,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No bug reports found"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria."})]})]}),f&&k&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>x(!1)}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Jr,{className:"w-6 h-6 text-red-500"}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:k.title}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${H(k.severity)}`,children:k.severity}),i.jsxs("span",{className:`flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full ${L(k.status)}`,children:[P(k.status),i.jsx("span",{className:"capitalize",children:k.status.replace("-"," ")})]})]}),i.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Description"}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:k.description})]}),k.steps.length>0&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Steps to Reproduce"}),i.jsx("ol",{className:"list-decimal list-inside space-y-2",children:k.steps.map((U,G)=>i.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:U},G))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[k.expected_behavior&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Expected Behavior"}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:k.expected_behavior})]}),k.actual_behavior&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Actual Behavior"}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:k.actual_behavior})]})]}),i.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[i.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[i.jsx(on,{className:"mr-2",size:18}),"Comments (",((t=k.comments)==null?void 0:t.length)||0,")"]}),i.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto mb-4",children:k.comments&&k.comments.length>0?k.comments.map((U,G)=>i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-xs",children:U.author.charAt(0)})}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:U.author}),U.author_grade&&i.jsxs("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full flex items-center ${Y(U.author_grade)}`,children:[i.jsx(Se,{size:10,className:"mr-1"}),U.author_grade]})]})]}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:Q(U.created_at)})]}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:U.content})]},G)):i.jsxs("div",{className:"text-center py-6",children:[i.jsx(on,{className:"mx-auto h-10 w-10 text-gray-400"}),i.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"No comments yet. Add a comment to communicate with the reporter."})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Add a Comment"}),i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("textarea",{value:w,onChange:U=>S(U.target.value),rows:3,className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Add your comment here..."}),i.jsxs("button",{onClick:b,disabled:!w.trim()||o,className:"flex-shrink-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Su,{size:16}),i.jsx("span",{children:"Send"})]})]})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Bug Information"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Category:"}),i.jsx("span",{className:"text-gray-900 dark:text-white capitalize",children:k.category})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Reporter:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:k.reporter_name})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Created:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(k.created_at).toLocaleDateString()})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Updated:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(k.updated_at).toLocaleDateString()})]})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Environment"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"OS:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:k.environment.os||"Not specified"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Version:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:k.environment.version||"Not specified"})]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Actions"}),i.jsxs("div",{className:"space-y-2",children:[k.status!=="in-progress"&&i.jsxs("button",{onClick:()=>{_(k.id,"in-progress"),x(!1)},className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors duration-200",children:[i.jsx(qt,{size:16}),i.jsx("span",{children:"Mark In Progress"})]}),k.status!=="resolved"&&i.jsxs("button",{onClick:()=>{_(k.id,"resolved"),x(!1)},className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors duration-200",children:[i.jsx(lt,{size:16}),i.jsx("span",{children:"Mark Resolved"})]}),k.status!=="closed"&&i.jsxs("button",{onClick:()=>{_(k.id,"closed"),x(!1)},className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors duration-200",children:[i.jsx(_e,{size:16}),i.jsx("span",{children:"Close Bug"})]})]})]})]})]})]})]})}),A&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:I}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[i.jsxs("div",{className:"sm:flex sm:items-start",children:[i.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:i.jsx(Rt,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),i.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[i.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete Bug Report"}),i.jsx("div",{className:"mt-2",children:i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this bug report? This action cannot be undone."})})]})]}),i.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[i.jsx("button",{type:"button",onClick:()=>z(A),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),i.jsx("button",{type:"button",onClick:I,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]})},Z6=()=>{const{hasAccess:t}=ht(),[e,r]=T.useState(null),[s,a]=T.useState(null),[n,o]=T.useState(null),[l,c]=T.useState(!1),[d,u]=T.useState(!1),[h,p]=T.useState(Vt()),[m,v]=T.useState(null),[y,k]=T.useState(!1);T.useEffect(()=>{g(),f()},[h]);const g=()=>{u(!0);try{const I=xk();r(I)}catch(I){console.error("Failed to load IP statistics:",I),te.error("Failed to load IP protection statistics")}finally{u(!1)}},f=()=>{try{const I=Zt.getSecurityStats();v(I),k(Zt.getRateLimitStatus("login"))}catch(I){console.error("Failed to load security stats:",I)}},x=I=>{confirm(`Are you sure you want to unblock IP ${I}?`)&&(bk(I)?(Zt.unblockIP(I),te.ipUnblocked(I),g(),f(),s===I&&c(!1)):te.error("Failed to unblock IP"))},w=I=>{const A=yk(I);o(A),a(I),c(!0)},S=()=>{confirm("This will remove old IP records and sessions. Continue?")&&(ub(),g(),te.success("Old records cleaned up successfully"))},N=()=>{const I=!h;gk(I),p(I),I?te.success("IP Protection has been enabled","Protection Active"):te.warning("IP Protection has been disabled","Protection Inactive"),g()},_=()=>{const I=!y;Zt.toggleRateLimit("login",I),k(I),I?te.success("Login rate limiting has been enabled","Protection Active"):te.warning("Login rate limiting has been disabled","Protection Inactive"),f()},b=I=>{const A=new Date(I),F=Math.floor((new Date().getTime()-A.getTime())/1e3);return F<60?`${F}s ago`:F<3600?`${Math.floor(F/60)}m ago`:F<86400?`${Math.floor(F/3600)}h ago`:`${Math.floor(F/86400)}d ago`},j=I=>{const A=new Date(I),F=new Date,H=A.getTime()-F.getTime();if(H<=0)return"Expired";const L=Math.floor(H/(1e3*60*60)),Y=Math.floor(H%(1e3*60*60)/(1e3*60));return L>24?`${Math.floor(L/24)}d ${L%24}h`:`${L}h ${Y}m`},z=I=>I.blockedUntil?new Date(I.blockedUntil)>new Date:!1;return t("Admin")?e?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"IP Protection Dashboard"}),i.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Monitor and manage IP-based protection for guest users."})]}),i.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[i.jsxs("button",{onClick:S,className:"flex items-center space-x-2 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(nt,{size:18}),i.jsx("span",{children:"Cleanup Old Records"})]}),i.jsxs("button",{onClick:g,disabled:d,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(ao,{size:18,className:d?"animate-spin":""}),i.jsx("span",{children:"Refresh"})]})]})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`p-3 rounded-lg ${h?"bg-emerald-100 dark:bg-emerald-900/20":"bg-red-100 dark:bg-red-900/20"}`,children:i.jsx(Se,{className:`w-6 h-6 ${h?"text-emerald-500":"text-red-500"}`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"IP Protection System"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:h?"Protection is active - Guest IPs will be blocked for 3 days after session expiry":"Protection is disabled - Guest IPs will not be blocked after session expiry"})]})]}),i.jsx("button",{onClick:N,className:`mt-4 sm:mt-0 flex items-center space-x-2 px-6 py-3 ${h?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700"} text-white rounded-lg font-medium transition-colors duration-200`,children:h?i.jsxs(i.Fragment,{children:[i.jsx(Cu,{size:20}),i.jsx("span",{children:"Protection Enabled"})]}):i.jsxs(i.Fragment,{children:[i.jsx(ql,{size:20}),i.jsx("span",{children:"Protection Disabled"})]})})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`p-3 rounded-lg ${y?"bg-emerald-100 dark:bg-emerald-900/20":"bg-red-100 dark:bg-red-900/20"}`,children:i.jsx(Ui,{className:`w-6 h-6 ${y?"text-emerald-500":"text-red-500"}`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Login Rate Limiting"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:y?"Rate limiting is active - Too many login attempts will be temporarily blocked":"Rate limiting is disabled - No cooldown for failed login attempts"})]})]}),i.jsx("button",{onClick:_,className:`mt-4 sm:mt-0 flex items-center space-x-2 px-6 py-3 ${y?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700"} text-white rounded-lg font-medium transition-colors duration-200`,children:y?i.jsxs(i.Fragment,{children:[i.jsx(Cu,{size:20}),i.jsx("span",{children:"Rate Limiting Enabled"})]}):i.jsxs(i.Fragment,{children:[i.jsx(ql,{size:20}),i.jsx("span",{children:"Rate Limiting Disabled"})]})})]})}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-6",children:[{title:"Tracked IPs",value:e.totalTrackedIPs,icon:Qr,color:"bg-blue-500",description:"Total IPs in system"},{title:"Blocked IPs",value:e.blockedIPs,icon:oa,color:"bg-red-500",description:"Currently blocked"},{title:"Sessions Today",value:e.guestSessionsToday,icon:vr,color:"bg-emerald-500",description:"Guest sessions today"},{title:"Unique IPs Today",value:e.uniqueIPsToday,icon:Vl,color:"bg-purple-500",description:"Different IPs today"}].map((I,A)=>{const F=I.icon;return i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:I.title}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:I.value}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:I.description})]}),i.jsx("div",{className:`p-3 rounded-lg ${I.color} bg-opacity-10`,children:i.jsx(F,{className:`w-6 h-6 ${I.color.replace("bg-","text-")}`})})]})},A)})}),m&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Xh,{className:"w-5 h-5 text-blue-500"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Security Settings"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Rate Limiting Configuration"}),i.jsx("div",{className:"space-y-3",children:Object.entries(m.rateLimitConfigs||{}).map(([I,A])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:I}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[A.maxRequests," requests / ",Math.round(A.windowMs/1e3),"s"]})]}),i.jsx("button",{onClick:()=>{Zt.toggleRateLimit(I,!A.enabled),f(),I==="login"&&k(!A.enabled)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${A.enabled?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${A.enabled?"translate-x-6":"translate-x-1"}`})})]},I))})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Security Statistics"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Events"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m.totalEvents})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Blocked Requests"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m.blockedRequests})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Critical Events"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m.criticalEvents})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Recent Events (1h)"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m.recentEvents})]})]})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(Se,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Security Configuration"}),i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["You can enable or disable various security features above. Login rate limiting is currently",i.jsx("span",{className:`font-medium ${y?" text-emerald-600 dark:text-emerald-400":" text-red-600 dark:text-red-400"}`,children:y?" enabled":" disabled"}),"."]})]})]})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"IP Records"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Recent IP addresses and their protection status"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"IP Address"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Attempts"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Last Session"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Block Expires"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.records.map(I=>{const A=z(I);return i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Qr,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:I.ip})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"flex items-center space-x-2",children:A?i.jsxs(i.Fragment,{children:[i.jsx(oa,{size:16,className:"text-red-500"}),i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400 rounded-full",children:"Blocked"})]}):i.jsxs(i.Fragment,{children:[i.jsx(lt,{size:16,className:"text-emerald-500"}),i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400 rounded-full",children:"Active"})]})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(nt,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:I.attemptCount})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(qt,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:b(I.lastGuestSession)})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:I.blockedUntil?i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(as,{size:16,className:"text-amber-500"}),i.jsx("span",{className:"text-sm text-amber-600 dark:text-amber-400",children:j(I.blockedUntil)})]}):i.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>w(I.ip),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"View Details",children:i.jsx(Jt,{size:16})}),A&&i.jsx("button",{onClick:()=>x(I.ip),className:"p-2 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Unblock IP",children:i.jsx(Fm,{size:16})})]})})]},I.ip)})})]})}),e.records.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Se,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No IP records"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"IP records will appear here as guest sessions are created."})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Guest Sessions"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Latest guest sessions and their details"})]}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[e.recentSessions.map((I,A)=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:`p-2 rounded-lg ${I.expired?"bg-red-100 dark:bg-red-900/20":"bg-emerald-100 dark:bg-emerald-900/20"}`,children:I.expired?i.jsx(_e,{className:"w-5 h-5 text-red-500"}):i.jsx(lt,{className:"w-5 h-5 text-emerald-500"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:I.ip}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Started: ",b(I.startTime),I.endTime&&`  Ended: ${b(I.endTime)}`]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${I.expired?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400"}`,children:I.expired?"Expired":"Active"}),i.jsx("button",{onClick:()=>w(I.ip),className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:i.jsx(Jt,{size:14})})]})]},I.id)),e.recentSessions.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(vr,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No recent sessions"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Guest sessions will appear here as they are created."})]})]})})]}),l&&n&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>c(!1)}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Se,{className:"w-6 h-6 text-blue-500"}),i.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["IP Details: ",n.ip]})]}),i.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Status"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current Status"}),i.jsx("div",{className:"flex items-center space-x-2 mt-1",children:z(n)?i.jsxs(i.Fragment,{children:[i.jsx(oa,{size:16,className:"text-red-500"}),i.jsx("span",{className:"text-red-600 dark:text-red-400 font-medium",children:"Blocked"})]}):i.jsxs(i.Fragment,{children:[i.jsx(lt,{size:16,className:"text-emerald-500"}),i.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:"Active"})]})})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Block Expires"}),i.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:n.blockedUntil?j(n.blockedUntil):"Not blocked"})]})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Activity"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Attempts"}),i.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:n.attemptCount})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last Session"}),i.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:b(n.lastGuestSession)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"First Attempt"}),i.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:b(n.firstAttempt)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Location"}),i.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:n.location||"Unknown"})]})]})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Technical Details"}),i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"User Agent"}),i.jsx("p",{className:"text-xs text-gray-900 dark:text-white font-mono mt-1 break-all",children:n.userAgent||"Not available"})]})})]}),z(n)&&i.jsx("div",{className:"flex justify-end space-x-3",children:i.jsxs("button",{onClick:()=>{x(n.ip),c(!1)},className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors duration-200",children:[i.jsx(Fm,{size:16}),i.jsx("span",{children:"Unblock IP"})]})})]})]})]})})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Kr,{className:"mx-auto h-12 w-12 text-amber-500"}),i.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access IP protection dashboard."})]})})},eM=({isOpen:t,onClose:e})=>{const{signIn:r,signInAsGuest:s,loading:a,error:n}=ht(),[o,l]=T.useState("signin"),[c,d]=T.useState({email:"",password:"",adminToken:""}),[u,h]=T.useState(null),[p,m]=T.useState(""),[v,y]=T.useState(!1),[k,g]=T.useState(Vt()),[f,x]=T.useState(null),[w,S]=T.useState(null);T.useEffect(()=>{t&&(_(),N())},[t]),T.useEffect(()=>{g(Vt())},[t,o]),T.useEffect(()=>{n&&S(n)},[n]);const N=()=>{const A=localStorage.getItem("login_cooldown");if(A)try{const{until:F}=JSON.parse(A),H=Date.now();if(F>H){x(Math.ceil((F-H)/1e3));const L=setInterval(()=>{x(Y=>Y===null||Y<=1?(clearInterval(L),localStorage.removeItem("login_cooldown"),null):Y-1)},1e3);return()=>clearInterval(L)}else localStorage.removeItem("login_cooldown")}catch(F){console.error("Failed to parse login cooldown:",F),localStorage.removeItem("login_cooldown")}},_=async()=>{y(!0);try{const A=await ep();m(A);const F=Hl(A);h(F)}catch(A){console.error("Failed to check IP status:",A)}finally{y(!1)}};if(!t)return null;const b=async A=>{A.preventDefault(),S(null);try{if(f!==null){I();return}if(o==="guest"){const F=Hl(p);if(F.blocked){h(F);return}await s()}else await r(c.email,c.password,c.adminToken);e()}catch(F){if(S(F.message||"Authentication failed"),console.error("Auth error:",F),F.message&&F.message.includes("Rate limit exceeded")){const H=F.message.match(/(\d+) seconds/);if(H&&H[1]){const L=parseInt(H[1],10),Y=Math.min(30,L),P=Date.now()+Y*1e3;localStorage.setItem("login_cooldown",JSON.stringify({until:P})),x(Y)}}}},j=c.email.includes("admin")||c.adminToken,z=async(A,F,H)=>{try{if(S(null),f!==null){I();return}await r(A,F,H),e()}catch(L){if(S(L instanceof Error?L.message:"Quick login failed"),console.error("Quick login error:",L),L instanceof Error&&L.message.includes("Rate limit exceeded")){const Y=L.message.match(/(\d+) seconds/);if(Y&&Y[1]){const P=parseInt(Y[1],10),$=Math.min(30,P),B=Date.now()+$*1e3;localStorage.setItem("login_cooldown",JSON.stringify({until:B})),x($)}}}},I=()=>{S(`Too many login attempts. Please try again in ${f} seconds.`)};return i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:e}),i.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:o==="guest"?"Guest Access":"Sign In"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:i.jsx(_e,{size:24})})]}),w&&i.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(It,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",id:"login-error",children:w})]})}),f!==null&&i.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(qt,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["Too many login attempts. Please try again in ",f," seconds."]})]})}),i.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>l("signin"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors duration-200 ${o==="signin"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Sign In"}),i.jsx("button",{onClick:()=>l("guest"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors duration-200 ${o==="guest"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Guest (5 min)"})]}),o==="guest"?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(qt,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"5-Minute Guest Access"}),i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Get temporary access to download test clients and view patch notes. Your session will expire after 5 minutes."})]})]})}),i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(Se,{className:"text-amber-600 dark:text-amber-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h4",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:["IP Protection ",k?"Active":"Inactive"]}),k?i.jsx(Cu,{className:"w-5 h-5 text-emerald-500"}):i.jsx(ql,{className:"w-5 h-5 text-red-500"})]}),i.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:k?"To prevent abuse, your IP address will be blocked for 3 days after your guest session expires.":"IP protection is currently disabled. Your IP will not be blocked after session expiry."}),p&&i.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[i.jsx(Qr,{size:14,className:"text-amber-600 dark:text-amber-400"}),i.jsxs("span",{className:"text-xs font-mono text-amber-800 dark:text-amber-200",children:["Your IP: ",p]})]})]})]})}),(u==null?void 0:u.blocked)&&i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(It,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Access Restricted"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:u.reason}),u.unblockTime&&i.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2",children:["Block expires: ",new Date(u.unblockTime).toLocaleString()]})]})]})}),i.jsxs("button",{onClick:b,disabled:a||v||(u==null?void 0:u.blocked)||!1||f!==null,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(qt,{size:18}),i.jsx("span",{children:a?"Creating Guest Session...":v?"Checking IP Status...":u!=null&&u.blocked?"IP Blocked":f!==null?`Try again in ${f}s`:"Start Guest Session"})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Quick Login (Demo):"}),i.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[i.jsxs("button",{onClick:()=>z("admin@prodomo.local","admin123","T0KEN"),disabled:a||f!==null,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-red-100 hover:bg-red-200 dark:bg-red-900/20 dark:hover:bg-red-900/30 text-red-800 dark:text-red-200 rounded-lg text-sm font-medium transition-colors duration-200 disabled:opacity-50",children:[i.jsx(Se,{size:16}),i.jsx("span",{children:a?"Signing in...":f!==null?`Cooldown: ${f}s`:"Admin Login"})]}),i.jsxs("button",{onClick:()=>z("support@prodomo.local","support123"),disabled:a||f!==null,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-amber-100 hover:bg-amber-200 dark:bg-amber-900/20 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-200 rounded-lg text-sm font-medium transition-colors duration-200 disabled:opacity-50",children:[i.jsx(Os,{size:16}),i.jsx("span",{children:a?"Signing in...":f!==null?`Cooldown: ${f}s`:"Support Login"})]}),i.jsxs("button",{onClick:()=>z("v4@prodomo.local","v4pass"),disabled:a||f!==null,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-lg text-sm font-medium transition-colors duration-200 disabled:opacity-50",children:[i.jsx(nn,{size:16}),i.jsx("span",{children:a?"Signing in...":f!==null?`Cooldown: ${f}s`:"V4 User Login"})]}),i.jsxs("button",{onClick:()=>z("v5@prodomo.local","v5pass"),disabled:a||f!==null,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-purple-100 hover:bg-purple-200 dark:bg-purple-900/20 dark:hover:bg-purple-900/30 text-purple-800 dark:text-purple-200 rounded-lg text-sm font-medium transition-colors duration-200 disabled:opacity-50",children:[i.jsx(nn,{size:16}),i.jsx("span",{children:a?"Signing in...":f!==null?`Cooldown: ${f}s`:"V5 User Login"})]})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Or sign in manually"})})]}),i.jsxs("form",{onSubmit:b,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),i.jsxs("div",{className:"relative",children:[i.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"email",value:c.email,onChange:A=>d({...c,email:A.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"password",value:c.password,onChange:A=>d({...c,password:A.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password",required:!0})]})]}),j&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Token"}),i.jsxs("div",{className:"relative",children:[i.jsx(Se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"password",value:c.adminToken,onChange:A=>d({...c,adminToken:A.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter admin token (T0KEN)",required:!0})]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Admin accounts require a special token for security"})]}),i.jsx("button",{type:"submit",disabled:a||f!==null,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:i.jsx("span",{children:a?"Signing in...":f!==null?`Try again in ${f}s`:"Sign In"})}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Only admins can create new accounts. Contact an administrator for access."})})]})]})]})]})})},tM=()=>{const{user:t,timeRemaining:e,signOut:r}=ht(),s=Vt();if(!(t!=null&&t.is_guest)||e===null)return null;const a=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3),o=e<6e4;return i.jsx("div",{className:`fixed top-4 right-4 z-40 px-4 py-3 rounded-lg shadow-lg border ${o?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200"}`,children:i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[o?i.jsx(Kr,{className:"w-4 h-4"}):i.jsx(qt,{className:"w-4 h-4"}),i.jsxs("span",{className:"text-sm font-medium",children:["Guest Session: ",a,":",n.toString().padStart(2,"0")]}),i.jsx("button",{onClick:r,className:"text-xs underline hover:no-underline",children:"End Session"})]}),i.jsx("div",{className:"flex items-center space-x-2 text-xs",children:s?i.jsxs(i.Fragment,{children:[i.jsx(Se,{className:"w-3 h-3"}),i.jsx("span",{className:"text-amber-700 dark:text-amber-300",children:"IP will be blocked for 3 days after session expires"})]}):i.jsxs(i.Fragment,{children:[i.jsx(ql,{className:"w-3 h-3"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"IP protection is disabled"})]})})]})})},rM=()=>{const{isAuthenticated:t,user:e}=ht(),{initializeCleanData:r}=Kt(),[s,a]=T.useState("dashboard"),[n,o]=T.useState(!1),[l,c]=T.useState(void 0),[d,u]=T.useState(!1);T.useEffect(()=>{d||(localStorage.getItem("prodomo_users")||(console.log("Initializing clean data..."),r()),u(!0))},[d,r]),T.useEffect(()=>{const v=y=>{y.detail&&y.detail.userId&&c(y.detail.userId)};return document.addEventListener("viewProfile",v),()=>{document.removeEventListener("viewProfile",v)}},[]);const h=v=>{c(v),a("profile")},p=()=>{c(void 0),a("dashboard")},m=()=>{switch(s){case"dashboard":return i.jsx(ag,{activeSection:s,setActiveSection:a});case"downloads":return i.jsx($j,{});case"documentation":return i.jsx(Fj,{});case"file-manager":return i.jsx(B_,{});case"patch-notes":return i.jsx(Uj,{});case"analytics":return i.jsx(Y6,{});case"user-management":return i.jsx(G6,{onViewProfile:h});case"activity-logs":return i.jsx(K6,{});case"bug-report":return i.jsx(Q6,{});case"bug-management":return i.jsx(X6,{});case"ip-protection":return i.jsx(Z6,{});case"profile":return i.jsx(Bj,{userId:l,onBack:l?p:void 0});case"settings":return i.jsx(qj,{});default:return i.jsx(ag,{activeSection:s,setActiveSection:a})}};return t?i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[i.jsxs("div",{className:"flex",children:[i.jsx(Rj,{activeSection:s,setActiveSection:a}),i.jsx("main",{className:"flex-1 lg:ml-64",children:i.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:m()})})]}),i.jsx(tM,{})]}):i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"max-w-md w-full mx-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-8 text-center",children:[i.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full w-16 h-16 mx-auto mb-6 flex items-center justify-center",children:i.jsx(Nu,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome to Prodomo"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Access server downloads, patch notes, and more. Sign in to continue or try our 5-minute guest access."}),i.jsxs("button",{onClick:()=>o(!0),className:"w-full flex items-center justify-center space-x-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[i.jsx(Nu,{size:20}),i.jsx("span",{children:"Get Started"})]}),i.jsxs("div",{className:"mt-6 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[i.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200 font-medium",children:[" IP Protection ",Vt()?"Active":"Inactive"]}),i.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-300 mt-1",children:["Guest accounts expire after 5 minutes. ",Vt()?"Your IP will be blocked for 3 days after session expiry to prevent abuse.":"IP protection is currently disabled."]})]})]})})}),i.jsx(eM,{isOpen:n,onClose:()=>o(!1)})]})};function sM(){return i.jsx(pk,{children:i.jsx(zj,{children:i.jsx(rM,{})})})}const A0=localStorage.getItem("prodomo_theme");A0!==null?JSON.parse(A0)?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.documentElement.classList.add("dark");setTimeout(()=>{document.documentElement.classList.add("theme-transition")},100);Kx(document.getElementById("root")).render(i.jsx(T.StrictMode,{children:i.jsx(sM,{})}));
