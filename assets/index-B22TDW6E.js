var gb=Object.defineProperty;var xb=(t,e,r)=>e in t?gb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var H=(t,e,r)=>xb(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var n=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,n.get?n:{enumerable:!0,get:function(){return t[s]}})}),r}var Ug={exports:{}},oc={},Bg={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za=Symbol.for("react.element"),vb=Symbol.for("react.portal"),bb=Symbol.for("react.fragment"),wb=Symbol.for("react.strict_mode"),kb=Symbol.for("react.profiler"),jb=Symbol.for("react.provider"),_b=Symbol.for("react.context"),Nb=Symbol.for("react.forward_ref"),Sb=Symbol.for("react.suspense"),Cb=Symbol.for("react.memo"),Eb=Symbol.for("react.lazy"),Tf=Symbol.iterator;function Db(t){return t===null||typeof t!="object"?null:(t=Tf&&t[Tf]||t["@@iterator"],typeof t=="function"?t:null)}var Hg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wg=Object.assign,Vg={};function Si(t,e,r){this.props=t,this.context=e,this.refs=Vg,this.updater=r||Hg}Si.prototype.isReactComponent={};Si.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Si.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qg(){}qg.prototype=Si.prototype;function ih(t,e,r){this.props=t,this.context=e,this.refs=Vg,this.updater=r||Hg}var ah=ih.prototype=new qg;ah.constructor=ih;Wg(ah,Si.prototype);ah.isPureReactComponent=!0;var Of=Array.isArray,Yg=Object.prototype.hasOwnProperty,oh={current:null},Gg={key:!0,ref:!0,__self:!0,__source:!0};function Jg(t,e,r){var s,n={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Yg.call(e,s)&&!Gg.hasOwnProperty(s)&&(n[s]=e[s]);var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];n.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)n[s]===void 0&&(n[s]=l[s]);return{$$typeof:Za,type:t,key:i,ref:o,props:n,_owner:oh.current}}function Pb(t,e){return{$$typeof:Za,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Za}function Mb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Af=/\/+/g;function Lc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Mb(""+t.key):e.toString(36)}function tl(t,e,r,s,n){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Za:case vb:o=!0}}if(o)return o=t,n=n(o),t=s===""?"."+Lc(o,0):s,Of(n)?(r="",t!=null&&(r=t.replace(Af,"$&/")+"/"),tl(n,e,r,"",function(d){return d})):n!=null&&(lh(n)&&(n=Pb(n,r+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(Af,"$&/")+"/")+t)),e.push(n)),1;if(o=0,s=s===""?".":s+":",Of(t))for(var l=0;l<t.length;l++){i=t[l];var c=s+Lc(i,l);o+=tl(i,e,r,c,n)}else if(c=Db(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=s+Lc(i,l++),o+=tl(i,e,r,c,n);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function mo(t,e,r){if(t==null)return t;var s=[],n=0;return tl(t,s,"","",function(i){return e.call(r,i,n++)}),s}function Tb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ct={current:null},rl={transition:null},Ob={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:rl,ReactCurrentOwner:oh};function Kg(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:mo,forEach:function(t,e,r){mo(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return mo(t,function(){e++}),e},toArray:function(t){return mo(t,function(e){return e})||[]},only:function(t){if(!lh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=Si;ge.Fragment=bb;ge.Profiler=kb;ge.PureComponent=ih;ge.StrictMode=wb;ge.Suspense=Sb;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ob;ge.act=Kg;ge.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Wg({},t.props),n=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=oh.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Yg.call(e,c)&&!Gg.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:Za,type:t.type,key:n,ref:i,props:s,_owner:o}};ge.createContext=function(t){return t={$$typeof:_b,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jb,_context:t},t.Consumer=t};ge.createElement=Jg;ge.createFactory=function(t){var e=Jg.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:Nb,render:t}};ge.isValidElement=lh;ge.lazy=function(t){return{$$typeof:Eb,_payload:{_status:-1,_result:t},_init:Tb}};ge.memo=function(t,e){return{$$typeof:Cb,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=rl.transition;rl.transition={};try{t()}finally{rl.transition=e}};ge.unstable_act=Kg;ge.useCallback=function(t,e){return Ct.current.useCallback(t,e)};ge.useContext=function(t){return Ct.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Ct.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Ct.current.useEffect(t,e)};ge.useId=function(){return Ct.current.useId()};ge.useImperativeHandle=function(t,e,r){return Ct.current.useImperativeHandle(t,e,r)};ge.useInsertionEffect=function(t,e){return Ct.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Ct.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Ct.current.useMemo(t,e)};ge.useReducer=function(t,e,r){return Ct.current.useReducer(t,e,r)};ge.useRef=function(t){return Ct.current.useRef(t)};ge.useState=function(t){return Ct.current.useState(t)};ge.useSyncExternalStore=function(t,e,r){return Ct.current.useSyncExternalStore(t,e,r)};ge.useTransition=function(){return Ct.current.useTransition()};ge.version="18.3.1";Bg.exports=ge;var M=Bg.exports;const ch=nh(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab=M,Ib=Symbol.for("react.element"),Rb=Symbol.for("react.fragment"),Lb=Object.prototype.hasOwnProperty,zb=Ab.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fb={key:!0,ref:!0,__self:!0,__source:!0};function Xg(t,e,r){var s,n={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)Lb.call(e,s)&&!Fb.hasOwnProperty(s)&&(n[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:Ib,type:t,key:i,ref:o,props:n,_owner:zb.current}}oc.Fragment=Rb;oc.jsx=Xg;oc.jsxs=Xg;Ug.exports=oc;var a=Ug.exports,Qg={exports:{}},Jt={},Zg={exports:{}},e0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,B){var G=L.length;L.push(B);e:for(;0<G;){var U=G-1>>>1,K=L[U];if(0<n(K,B))L[U]=B,L[G]=K,G=U;else break e}}function r(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var B=L[0],G=L.pop();if(G!==B){L[0]=G;e:for(var U=0,K=L.length,te=K>>>1;U<te;){var ne=2*(U+1)-1,A=L[ne],E=ne+1,D=L[E];if(0>n(A,G))E<K&&0>n(D,A)?(L[U]=D,L[E]=G,U=E):(L[U]=A,L[ne]=G,U=ne);else if(E<K&&0>n(D,G))L[U]=D,L[E]=G,U=E;else break e}}return B}function n(L,B){var G=L.sortIndex-B.sortIndex;return G!==0?G:L.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,p=!1,v=!1,g=!1,j=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(L){for(var B=r(d);B!==null;){if(B.callback===null)s(d);else if(B.startTime<=L)s(d),B.sortIndex=B.expirationTime,e(c,B);else break;B=r(d)}}function w(L){if(g=!1,x(L),!v)if(r(c)!==null)v=!0,J(C);else{var B=r(d);B!==null&&P(w,B.startTime-L)}}function C(L,B){v=!1,g&&(g=!1,y(b),b=-1),p=!0;var G=f;try{for(x(B),h=r(c);h!==null&&(!(h.expirationTime>B)||L&&!T());){var U=h.callback;if(typeof U=="function"){h.callback=null,f=h.priorityLevel;var K=U(h.expirationTime<=B);B=t.unstable_now(),typeof K=="function"?h.callback=K:h===r(c)&&s(c),x(B)}else s(c);h=r(c)}if(h!==null)var te=!0;else{var ne=r(d);ne!==null&&P(w,ne.startTime-B),te=!1}return te}finally{h=null,f=G,p=!1}}var _=!1,N=null,b=-1,k=5,I=-1;function T(){return!(t.unstable_now()-I<k)}function O(){if(N!==null){var L=t.unstable_now();I=L;var B=!0;try{B=N(!0,L)}finally{B?$():(_=!1,N=null)}}else _=!1}var $;if(typeof m=="function")$=function(){m(O)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,R=V.port2;V.port1.onmessage=O,$=function(){R.postMessage(null)}}else $=function(){j(O,0)};function J(L){N=L,_||(_=!0,$())}function P(L,B){b=j(function(){L(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,J(C))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var G=f;f=B;try{return L()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,B){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=f;f=L;try{return B()}finally{f=G}},t.unstable_scheduleCallback=function(L,B,G){var U=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?U+G:U):G=U,L){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=G+K,L={id:u++,callback:B,priorityLevel:L,startTime:G,expirationTime:K,sortIndex:-1},G>U?(L.sortIndex=G,e(d,L),r(c)===null&&L===r(d)&&(g?(y(b),b=-1):g=!0,P(w,G-U))):(L.sortIndex=K,e(c,L),v||p||(v=!0,J(C))),L},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(L){var B=f;return function(){var G=f;f=B;try{return L.apply(this,arguments)}finally{f=G}}}})(e0);Zg.exports=e0;var $b=Zg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub=M,Yt=$b;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t0=new Set,_a={};function jn(t,e){fi(t,e),fi(t+"Capture",e)}function fi(t,e){for(_a[t]=e,t=0;t<e.length;t++)t0.add(e[t])}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Td=Object.prototype.hasOwnProperty,Bb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,If={},Rf={};function Hb(t){return Td.call(Rf,t)?!0:Td.call(If,t)?!1:Bb.test(t)?Rf[t]=!0:(If[t]=!0,!1)}function Wb(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Vb(t,e,r,s){if(e===null||typeof e>"u"||Wb(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Et(t,e,r,s,n,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ft[t]=new Et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ft[e]=new Et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ft[t]=new Et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ft[t]=new Et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ft[t]=new Et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ft[t]=new Et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ft[t]=new Et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ft[t]=new Et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ft[t]=new Et(t,5,!1,t.toLowerCase(),null,!1,!1)});var dh=/[\-:]([a-z])/g;function uh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dh,uh);ft[e]=new Et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dh,uh);ft[e]=new Et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dh,uh);ft[e]=new Et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ft[t]=new Et(t,1,!1,t.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ft[t]=new Et(t,1,!1,t.toLowerCase(),null,!0,!0)});function hh(t,e,r,s){var n=ft.hasOwnProperty(e)?ft[e]:null;(n!==null?n.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Vb(e,r,n,s)&&(r=null),s||n===null?Hb(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(e=n.attributeName,s=n.attributeNamespace,r===null?t.removeAttribute(e):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var os=Ub.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,go=Symbol.for("react.element"),Vn=Symbol.for("react.portal"),qn=Symbol.for("react.fragment"),fh=Symbol.for("react.strict_mode"),Od=Symbol.for("react.profiler"),r0=Symbol.for("react.provider"),s0=Symbol.for("react.context"),ph=Symbol.for("react.forward_ref"),Ad=Symbol.for("react.suspense"),Id=Symbol.for("react.suspense_list"),mh=Symbol.for("react.memo"),ms=Symbol.for("react.lazy"),n0=Symbol.for("react.offscreen"),Lf=Symbol.iterator;function Ti(t){return t===null||typeof t!="object"?null:(t=Lf&&t[Lf]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,zc;function Ji(t){if(zc===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);zc=e&&e[1]||""}return`
`+zc+t}var Fc=!1;function $c(t,e){if(!t||Fc)return"";Fc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=s.stack.split(`
`),o=n.length-1,l=i.length-1;1<=o&&0<=l&&n[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(n[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||n[o]!==i[l]){var c=`
`+n[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Fc=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ji(t):""}function qb(t){switch(t.tag){case 5:return Ji(t.type);case 16:return Ji("Lazy");case 13:return Ji("Suspense");case 19:return Ji("SuspenseList");case 0:case 2:case 15:return t=$c(t.type,!1),t;case 11:return t=$c(t.type.render,!1),t;case 1:return t=$c(t.type,!0),t;default:return""}}function Rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qn:return"Fragment";case Vn:return"Portal";case Od:return"Profiler";case fh:return"StrictMode";case Ad:return"Suspense";case Id:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case s0:return(t.displayName||"Context")+".Consumer";case r0:return(t._context.displayName||"Context")+".Provider";case ph:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mh:return e=t.displayName||null,e!==null?e:Rd(t.type)||"Memo";case ms:e=t._payload,t=t._init;try{return Rd(t(e))}catch{}}return null}function Yb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rd(e);case 8:return e===fh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function i0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Gb(t){var e=i0(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xo(t){t._valueTracker||(t._valueTracker=Gb(t))}function a0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=i0(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function vl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ld(t,e){var r=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function zf(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=Ls(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function o0(t,e){e=e.checked,e!=null&&hh(t,"checked",e,!1)}function zd(t,e){o0(t,e);var r=Ls(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fd(t,e.type,r):e.hasOwnProperty("defaultValue")&&Fd(t,e.type,Ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ff(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Fd(t,e,r){(e!=="number"||vl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ki=Array.isArray;function si(t,e,r,s){if(t=t.options,e){e={};for(var n=0;n<r.length;n++)e["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=e.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&s&&(t[r].defaultSelected=!0)}else{for(r=""+Ls(r),e=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,s&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function $d(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $f(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(X(92));if(Ki(r)){if(1<r.length)throw Error(X(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ls(r)}}function l0(t,e){var r=Ls(e.value),s=Ls(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function Uf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function c0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ud(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?c0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yo,d0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,n){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yo=yo||document.createElement("div"),yo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Na(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var aa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jb=["Webkit","ms","Moz","O"];Object.keys(aa).forEach(function(t){Jb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),aa[e]=aa[t]})});function u0(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||aa.hasOwnProperty(t)&&aa[t]?(""+e).trim():e+"px"}function h0(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,n=u0(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,n):t[r]=n}}var Kb=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bd(t,e){if(e){if(Kb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function Hd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wd=null;function gh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vd=null,ni=null,ii=null;function Bf(t){if(t=ro(t)){if(typeof Vd!="function")throw Error(X(280));var e=t.stateNode;e&&(e=hc(e),Vd(t.stateNode,t.type,e))}}function f0(t){ni?ii?ii.push(t):ii=[t]:ni=t}function p0(){if(ni){var t=ni,e=ii;if(ii=ni=null,Bf(t),e)for(t=0;t<e.length;t++)Bf(e[t])}}function m0(t,e){return t(e)}function g0(){}var Uc=!1;function x0(t,e,r){if(Uc)return t(e,r);Uc=!0;try{return m0(t,e,r)}finally{Uc=!1,(ni!==null||ii!==null)&&(g0(),p0())}}function Sa(t,e){var r=t.stateNode;if(r===null)return null;var s=hc(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(X(231,e,typeof r));return r}var qd=!1;if(ts)try{var Oi={};Object.defineProperty(Oi,"passive",{get:function(){qd=!0}}),window.addEventListener("test",Oi,Oi),window.removeEventListener("test",Oi,Oi)}catch{qd=!1}function Xb(t,e,r,s,n,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(u){this.onError(u)}}var oa=!1,bl=null,wl=!1,Yd=null,Qb={onError:function(t){oa=!0,bl=t}};function Zb(t,e,r,s,n,i,o,l,c){oa=!1,bl=null,Xb.apply(Qb,arguments)}function ew(t,e,r,s,n,i,o,l,c){if(Zb.apply(this,arguments),oa){if(oa){var d=bl;oa=!1,bl=null}else throw Error(X(198));wl||(wl=!0,Yd=d)}}function _n(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function y0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hf(t){if(_n(t)!==t)throw Error(X(188))}function tw(t){var e=t.alternate;if(!e){if(e=_n(t),e===null)throw Error(X(188));return e!==t?null:t}for(var r=t,s=e;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(s=n.return,s!==null){r=s;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return Hf(n),t;if(i===s)return Hf(n),e;i=i.sibling}throw Error(X(188))}if(r.return!==s.return)r=n,s=i;else{for(var o=!1,l=n.child;l;){if(l===r){o=!0,r=n,s=i;break}if(l===s){o=!0,s=n,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=n;break}if(l===s){o=!0,s=i,r=n;break}l=l.sibling}if(!o)throw Error(X(189))}}if(r.alternate!==s)throw Error(X(190))}if(r.tag!==3)throw Error(X(188));return r.stateNode.current===r?t:e}function v0(t){return t=tw(t),t!==null?b0(t):null}function b0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=b0(t);if(e!==null)return e;t=t.sibling}return null}var w0=Yt.unstable_scheduleCallback,Wf=Yt.unstable_cancelCallback,rw=Yt.unstable_shouldYield,sw=Yt.unstable_requestPaint,Ye=Yt.unstable_now,nw=Yt.unstable_getCurrentPriorityLevel,xh=Yt.unstable_ImmediatePriority,k0=Yt.unstable_UserBlockingPriority,kl=Yt.unstable_NormalPriority,iw=Yt.unstable_LowPriority,j0=Yt.unstable_IdlePriority,lc=null,Ar=null;function aw(t){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(lc,t,void 0,(t.current.flags&128)===128)}catch{}}var yr=Math.clz32?Math.clz32:cw,ow=Math.log,lw=Math.LN2;function cw(t){return t>>>=0,t===0?32:31-(ow(t)/lw|0)|0}var vo=64,bo=4194304;function Xi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jl(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,n=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~n;l!==0?s=Xi(l):(i&=o,i!==0&&(s=Xi(i)))}else o=r&~n,o!==0?s=Xi(o):i!==0&&(s=Xi(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&n)&&(n=s&-s,i=e&-e,n>=i||n===16&&(i&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-yr(e),n=1<<r,s|=t[r],e&=~n;return s}function dw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uw(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,n=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-yr(i),l=1<<o,c=n[o];c===-1?(!(l&r)||l&s)&&(n[o]=dw(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Gd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _0(){var t=vo;return vo<<=1,!(vo&4194240)&&(vo=64),t}function Bc(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function eo(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yr(e),t[e]=r}function hw(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-yr(r),i=1<<n;e[n]=0,s[n]=-1,t[n]=-1,r&=~i}}function yh(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-yr(r),n=1<<s;n&e|t[s]&e&&(t[s]|=e),r&=~n}}var Ne=0;function N0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var S0,vh,C0,E0,D0,Jd=!1,wo=[],Ss=null,Cs=null,Es=null,Ca=new Map,Ea=new Map,ys=[],fw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vf(t,e){switch(t){case"focusin":case"focusout":Ss=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":Ca.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(e.pointerId)}}function Ai(t,e,r,s,n,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[n]},e!==null&&(e=ro(e),e!==null&&vh(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function pw(t,e,r,s,n){switch(e){case"focusin":return Ss=Ai(Ss,t,e,r,s,n),!0;case"dragenter":return Cs=Ai(Cs,t,e,r,s,n),!0;case"mouseover":return Es=Ai(Es,t,e,r,s,n),!0;case"pointerover":var i=n.pointerId;return Ca.set(i,Ai(Ca.get(i)||null,t,e,r,s,n)),!0;case"gotpointercapture":return i=n.pointerId,Ea.set(i,Ai(Ea.get(i)||null,t,e,r,s,n)),!0}return!1}function P0(t){var e=nn(t.target);if(e!==null){var r=_n(e);if(r!==null){if(e=r.tag,e===13){if(e=y0(r),e!==null){t.blockedOn=e,D0(t.priority,function(){C0(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Kd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);Wd=s,r.target.dispatchEvent(s),Wd=null}else return e=ro(r),e!==null&&vh(e),t.blockedOn=r,!1;e.shift()}return!0}function qf(t,e,r){sl(t)&&r.delete(e)}function mw(){Jd=!1,Ss!==null&&sl(Ss)&&(Ss=null),Cs!==null&&sl(Cs)&&(Cs=null),Es!==null&&sl(Es)&&(Es=null),Ca.forEach(qf),Ea.forEach(qf)}function Ii(t,e){t.blockedOn===e&&(t.blockedOn=null,Jd||(Jd=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,mw)))}function Da(t){function e(n){return Ii(n,t)}if(0<wo.length){Ii(wo[0],t);for(var r=1;r<wo.length;r++){var s=wo[r];s.blockedOn===t&&(s.blockedOn=null)}}for(Ss!==null&&Ii(Ss,t),Cs!==null&&Ii(Cs,t),Es!==null&&Ii(Es,t),Ca.forEach(e),Ea.forEach(e),r=0;r<ys.length;r++)s=ys[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<ys.length&&(r=ys[0],r.blockedOn===null);)P0(r),r.blockedOn===null&&ys.shift()}var ai=os.ReactCurrentBatchConfig,_l=!0;function gw(t,e,r,s){var n=Ne,i=ai.transition;ai.transition=null;try{Ne=1,bh(t,e,r,s)}finally{Ne=n,ai.transition=i}}function xw(t,e,r,s){var n=Ne,i=ai.transition;ai.transition=null;try{Ne=4,bh(t,e,r,s)}finally{Ne=n,ai.transition=i}}function bh(t,e,r,s){if(_l){var n=Kd(t,e,r,s);if(n===null)Qc(t,e,s,Nl,r),Vf(t,s);else if(pw(n,t,e,r,s))s.stopPropagation();else if(Vf(t,s),e&4&&-1<fw.indexOf(t)){for(;n!==null;){var i=ro(n);if(i!==null&&S0(i),i=Kd(t,e,r,s),i===null&&Qc(t,e,s,Nl,r),i===n)break;n=i}n!==null&&s.stopPropagation()}else Qc(t,e,s,null,r)}}var Nl=null;function Kd(t,e,r,s){if(Nl=null,t=gh(s),t=nn(t),t!==null)if(e=_n(t),e===null)t=null;else if(r=e.tag,r===13){if(t=y0(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nl=t,null}function M0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nw()){case xh:return 1;case k0:return 4;case kl:case iw:return 16;case j0:return 536870912;default:return 16}default:return 16}}var ws=null,wh=null,nl=null;function T0(){if(nl)return nl;var t,e=wh,r=e.length,s,n="value"in ws?ws.value:ws.textContent,i=n.length;for(t=0;t<r&&e[t]===n[t];t++);var o=r-t;for(s=1;s<=o&&e[r-s]===n[i-s];s++);return nl=n.slice(t,1<s?1-s:void 0)}function il(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ko(){return!0}function Yf(){return!1}function Kt(t){function e(r,s,n,i,o){this._reactName=r,this._targetInst=n,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ko:Yf,this.isPropagationStopped=Yf,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ko)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ko)},persist:function(){},isPersistent:ko}),e}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kh=Kt(Ci),to=Be({},Ci,{view:0,detail:0}),yw=Kt(to),Hc,Wc,Ri,cc=Be({},to,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ri&&(Ri&&t.type==="mousemove"?(Hc=t.screenX-Ri.screenX,Wc=t.screenY-Ri.screenY):Wc=Hc=0,Ri=t),Hc)},movementY:function(t){return"movementY"in t?t.movementY:Wc}}),Gf=Kt(cc),vw=Be({},cc,{dataTransfer:0}),bw=Kt(vw),ww=Be({},to,{relatedTarget:0}),Vc=Kt(ww),kw=Be({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),jw=Kt(kw),_w=Be({},Ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nw=Kt(_w),Sw=Be({},Ci,{data:0}),Jf=Kt(Sw),Cw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ew={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Dw[t])?!!e[t]:!1}function jh(){return Pw}var Mw=Be({},to,{key:function(t){if(t.key){var e=Cw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=il(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ew[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jh,charCode:function(t){return t.type==="keypress"?il(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?il(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Tw=Kt(Mw),Ow=Be({},cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kf=Kt(Ow),Aw=Be({},to,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jh}),Iw=Kt(Aw),Rw=Be({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lw=Kt(Rw),zw=Be({},cc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Fw=Kt(zw),$w=[9,13,27,32],_h=ts&&"CompositionEvent"in window,la=null;ts&&"documentMode"in document&&(la=document.documentMode);var Uw=ts&&"TextEvent"in window&&!la,O0=ts&&(!_h||la&&8<la&&11>=la),Xf=" ",Qf=!1;function A0(t,e){switch(t){case"keyup":return $w.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yn=!1;function Bw(t,e){switch(t){case"compositionend":return I0(e);case"keypress":return e.which!==32?null:(Qf=!0,Xf);case"textInput":return t=e.data,t===Xf&&Qf?null:t;default:return null}}function Hw(t,e){if(Yn)return t==="compositionend"||!_h&&A0(t,e)?(t=T0(),nl=wh=ws=null,Yn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return O0&&e.locale!=="ko"?null:e.data;default:return null}}var Ww={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ww[t.type]:e==="textarea"}function R0(t,e,r,s){f0(s),e=Sl(e,"onChange"),0<e.length&&(r=new kh("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var ca=null,Pa=null;function Vw(t){Y0(t,0)}function dc(t){var e=Kn(t);if(a0(e))return t}function qw(t,e){if(t==="change")return e}var L0=!1;if(ts){var qc;if(ts){var Yc="oninput"in document;if(!Yc){var ep=document.createElement("div");ep.setAttribute("oninput","return;"),Yc=typeof ep.oninput=="function"}qc=Yc}else qc=!1;L0=qc&&(!document.documentMode||9<document.documentMode)}function tp(){ca&&(ca.detachEvent("onpropertychange",z0),Pa=ca=null)}function z0(t){if(t.propertyName==="value"&&dc(Pa)){var e=[];R0(e,Pa,t,gh(t)),x0(Vw,e)}}function Yw(t,e,r){t==="focusin"?(tp(),ca=e,Pa=r,ca.attachEvent("onpropertychange",z0)):t==="focusout"&&tp()}function Gw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dc(Pa)}function Jw(t,e){if(t==="click")return dc(e)}function Kw(t,e){if(t==="input"||t==="change")return dc(e)}function Xw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kr=typeof Object.is=="function"?Object.is:Xw;function Ma(t,e){if(kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!Td.call(e,n)||!kr(t[n],e[n]))return!1}return!0}function rp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sp(t,e){var r=rp(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rp(r)}}function F0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?F0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $0(){for(var t=window,e=vl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=vl(t.document)}return e}function Nh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Qw(t){var e=$0(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&F0(r.ownerDocument.documentElement,r)){if(s!==null&&Nh(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,i=Math.min(s.start,n);s=s.end===void 0?i:Math.min(s.end,n),!t.extend&&i>s&&(n=s,s=i,i=n),n=sp(r,i);var o=sp(r,s);n&&o&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Zw=ts&&"documentMode"in document&&11>=document.documentMode,Gn=null,Xd=null,da=null,Qd=!1;function np(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Qd||Gn==null||Gn!==vl(s)||(s=Gn,"selectionStart"in s&&Nh(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),da&&Ma(da,s)||(da=s,s=Sl(Xd,"onSelect"),0<s.length&&(e=new kh("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=Gn)))}function jo(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Jn={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionend:jo("Transition","TransitionEnd")},Gc={},U0={};ts&&(U0=document.createElement("div").style,"AnimationEvent"in window||(delete Jn.animationend.animation,delete Jn.animationiteration.animation,delete Jn.animationstart.animation),"TransitionEvent"in window||delete Jn.transitionend.transition);function uc(t){if(Gc[t])return Gc[t];if(!Jn[t])return t;var e=Jn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in U0)return Gc[t]=e[r];return t}var B0=uc("animationend"),H0=uc("animationiteration"),W0=uc("animationstart"),V0=uc("transitionend"),q0=new Map,ip="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $s(t,e){q0.set(t,e),jn(e,[t])}for(var Jc=0;Jc<ip.length;Jc++){var Kc=ip[Jc],ek=Kc.toLowerCase(),tk=Kc[0].toUpperCase()+Kc.slice(1);$s(ek,"on"+tk)}$s(B0,"onAnimationEnd");$s(H0,"onAnimationIteration");$s(W0,"onAnimationStart");$s("dblclick","onDoubleClick");$s("focusin","onFocus");$s("focusout","onBlur");$s(V0,"onTransitionEnd");fi("onMouseEnter",["mouseout","mouseover"]);fi("onMouseLeave",["mouseout","mouseover"]);fi("onPointerEnter",["pointerout","pointerover"]);fi("onPointerLeave",["pointerout","pointerover"]);jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jn("onBeforeInput",["compositionend","keypress","textInput","paste"]);jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qi));function ap(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,ew(s,e,void 0,t),t.currentTarget=null}function Y0(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],n=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&n.isPropagationStopped())break e;ap(n,l,d),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&n.isPropagationStopped())break e;ap(n,l,d),i=c}}}if(wl)throw t=Yd,wl=!1,Yd=null,t}function Oe(t,e){var r=e[su];r===void 0&&(r=e[su]=new Set);var s=t+"__bubble";r.has(s)||(G0(e,t,2,!1),r.add(s))}function Xc(t,e,r){var s=0;e&&(s|=4),G0(r,t,s,e)}var _o="_reactListening"+Math.random().toString(36).slice(2);function Ta(t){if(!t[_o]){t[_o]=!0,t0.forEach(function(r){r!=="selectionchange"&&(rk.has(r)||Xc(r,!1,t),Xc(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_o]||(e[_o]=!0,Xc("selectionchange",!1,e))}}function G0(t,e,r,s){switch(M0(e)){case 1:var n=gw;break;case 4:n=xw;break;default:n=bh}r=n.bind(null,e,r,t),n=void 0,!qd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),s?n!==void 0?t.addEventListener(e,r,{capture:!0,passive:n}):t.addEventListener(e,r,!0):n!==void 0?t.addEventListener(e,r,{passive:n}):t.addEventListener(e,r,!1)}function Qc(t,e,r,s,n){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;o=o.return}for(;l!==null;){if(o=nn(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}x0(function(){var d=i,u=gh(r),h=[];e:{var f=q0.get(t);if(f!==void 0){var p=kh,v=t;switch(t){case"keypress":if(il(r)===0)break e;case"keydown":case"keyup":p=Tw;break;case"focusin":v="focus",p=Vc;break;case"focusout":v="blur",p=Vc;break;case"beforeblur":case"afterblur":p=Vc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=bw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Iw;break;case B0:case H0:case W0:p=jw;break;case V0:p=Lw;break;case"scroll":p=yw;break;case"wheel":p=Fw;break;case"copy":case"cut":case"paste":p=Nw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Kf}var g=(e&4)!==0,j=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var m=d,x;m!==null;){x=m;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,y!==null&&(w=Sa(m,y),w!=null&&g.push(Oa(m,w,x)))),j)break;m=m.return}0<g.length&&(f=new p(f,v,null,r,u),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==Wd&&(v=r.relatedTarget||r.fromElement)&&(nn(v)||v[rs]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=d,v=v?nn(v):null,v!==null&&(j=_n(v),v!==j||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=d),p!==v)){if(g=Gf,w="onMouseLeave",y="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(g=Kf,w="onPointerLeave",y="onPointerEnter",m="pointer"),j=p==null?f:Kn(p),x=v==null?f:Kn(v),f=new g(w,m+"leave",p,r,u),f.target=j,f.relatedTarget=x,w=null,nn(u)===d&&(g=new g(y,m+"enter",v,r,u),g.target=x,g.relatedTarget=j,w=g),j=w,p&&v)t:{for(g=p,y=v,m=0,x=g;x;x=Rn(x))m++;for(x=0,w=y;w;w=Rn(w))x++;for(;0<m-x;)g=Rn(g),m--;for(;0<x-m;)y=Rn(y),x--;for(;m--;){if(g===y||y!==null&&g===y.alternate)break t;g=Rn(g),y=Rn(y)}g=null}else g=null;p!==null&&op(h,f,p,g,!1),v!==null&&j!==null&&op(h,j,v,g,!0)}}e:{if(f=d?Kn(d):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=qw;else if(Zf(f))if(L0)C=Kw;else{C=Gw;var _=Yw}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=Jw);if(C&&(C=C(t,d))){R0(h,C,r,u);break e}_&&_(t,f,d),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Fd(f,"number",f.value)}switch(_=d?Kn(d):window,t){case"focusin":(Zf(_)||_.contentEditable==="true")&&(Gn=_,Xd=d,da=null);break;case"focusout":da=Xd=Gn=null;break;case"mousedown":Qd=!0;break;case"contextmenu":case"mouseup":case"dragend":Qd=!1,np(h,r,u);break;case"selectionchange":if(Zw)break;case"keydown":case"keyup":np(h,r,u)}var N;if(_h)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Yn?A0(t,r)&&(b="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(b="onCompositionStart");b&&(O0&&r.locale!=="ko"&&(Yn||b!=="onCompositionStart"?b==="onCompositionEnd"&&Yn&&(N=T0()):(ws=u,wh="value"in ws?ws.value:ws.textContent,Yn=!0)),_=Sl(d,b),0<_.length&&(b=new Jf(b,t,null,r,u),h.push({event:b,listeners:_}),N?b.data=N:(N=I0(r),N!==null&&(b.data=N)))),(N=Uw?Bw(t,r):Hw(t,r))&&(d=Sl(d,"onBeforeInput"),0<d.length&&(u=new Jf("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=N))}Y0(h,e)})}function Oa(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Sl(t,e){for(var r=e+"Capture",s=[];t!==null;){var n=t,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=Sa(t,r),i!=null&&s.unshift(Oa(t,i,n)),i=Sa(t,e),i!=null&&s.push(Oa(t,i,n))),t=t.return}return s}function Rn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function op(t,e,r,s,n){for(var i=e._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,n?(c=Sa(r,i),c!=null&&o.unshift(Oa(r,c,l))):n||(c=Sa(r,i),c!=null&&o.push(Oa(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var sk=/\r\n?/g,nk=/\u0000|\uFFFD/g;function lp(t){return(typeof t=="string"?t:""+t).replace(sk,`
`).replace(nk,"")}function No(t,e,r){if(e=lp(e),lp(t)!==e&&r)throw Error(X(425))}function Cl(){}var Zd=null,eu=null;function tu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ru=typeof setTimeout=="function"?setTimeout:void 0,ik=typeof clearTimeout=="function"?clearTimeout:void 0,cp=typeof Promise=="function"?Promise:void 0,ak=typeof queueMicrotask=="function"?queueMicrotask:typeof cp<"u"?function(t){return cp.resolve(null).then(t).catch(ok)}:ru;function ok(t){setTimeout(function(){throw t})}function Zc(t,e){var r=e,s=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(s===0){t.removeChild(n),Da(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=n}while(r);Da(e)}function Ds(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ei=Math.random().toString(36).slice(2),Mr="__reactFiber$"+Ei,Aa="__reactProps$"+Ei,rs="__reactContainer$"+Ei,su="__reactEvents$"+Ei,lk="__reactListeners$"+Ei,ck="__reactHandles$"+Ei;function nn(t){var e=t[Mr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[rs]||r[Mr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=dp(t);t!==null;){if(r=t[Mr])return r;t=dp(t)}return e}t=r,r=t.parentNode}return null}function ro(t){return t=t[Mr]||t[rs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function hc(t){return t[Aa]||null}var nu=[],Xn=-1;function Us(t){return{current:t}}function Re(t){0>Xn||(t.current=nu[Xn],nu[Xn]=null,Xn--)}function Me(t,e){Xn++,nu[Xn]=t.current,t.current=e}var zs={},jt=Us(zs),zt=Us(!1),pn=zs;function pi(t,e){var r=t.type.contextTypes;if(!r)return zs;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function Ft(t){return t=t.childContextTypes,t!=null}function El(){Re(zt),Re(jt)}function up(t,e,r){if(jt.current!==zs)throw Error(X(168));Me(jt,e),Me(zt,r)}function J0(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var n in s)if(!(n in e))throw Error(X(108,Yb(t)||"Unknown",n));return Be({},r,s)}function Dl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zs,pn=jt.current,Me(jt,t),Me(zt,zt.current),!0}function hp(t,e,r){var s=t.stateNode;if(!s)throw Error(X(169));r?(t=J0(t,e,pn),s.__reactInternalMemoizedMergedChildContext=t,Re(zt),Re(jt),Me(jt,t)):Re(zt),Me(zt,r)}var qr=null,fc=!1,ed=!1;function K0(t){qr===null?qr=[t]:qr.push(t)}function dk(t){fc=!0,K0(t)}function Bs(){if(!ed&&qr!==null){ed=!0;var t=0,e=Ne;try{var r=qr;for(Ne=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}qr=null,fc=!1}catch(n){throw qr!==null&&(qr=qr.slice(t+1)),w0(xh,Bs),n}finally{Ne=e,ed=!1}}return null}var Qn=[],Zn=0,Pl=null,Ml=0,tr=[],rr=0,mn=null,Jr=1,Kr="";function Ks(t,e){Qn[Zn++]=Ml,Qn[Zn++]=Pl,Pl=t,Ml=e}function X0(t,e,r){tr[rr++]=Jr,tr[rr++]=Kr,tr[rr++]=mn,mn=t;var s=Jr;t=Kr;var n=32-yr(s)-1;s&=~(1<<n),r+=1;var i=32-yr(e)+n;if(30<i){var o=n-n%5;i=(s&(1<<o)-1).toString(32),s>>=o,n-=o,Jr=1<<32-yr(e)+n|r<<n|s,Kr=i+t}else Jr=1<<i|r<<n|s,Kr=t}function Sh(t){t.return!==null&&(Ks(t,1),X0(t,1,0))}function Ch(t){for(;t===Pl;)Pl=Qn[--Zn],Qn[Zn]=null,Ml=Qn[--Zn],Qn[Zn]=null;for(;t===mn;)mn=tr[--rr],tr[rr]=null,Kr=tr[--rr],tr[rr]=null,Jr=tr[--rr],tr[rr]=null}var qt=null,Ht=null,Le=!1,xr=null;function Q0(t,e){var r=sr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function fp(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,Ht=Ds(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=mn!==null?{id:Jr,overflow:Kr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=sr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,qt=t,Ht=null,!0):!1;default:return!1}}function iu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function au(t){if(Le){var e=Ht;if(e){var r=e;if(!fp(t,e)){if(iu(t))throw Error(X(418));e=Ds(r.nextSibling);var s=qt;e&&fp(t,e)?Q0(s,r):(t.flags=t.flags&-4097|2,Le=!1,qt=t)}}else{if(iu(t))throw Error(X(418));t.flags=t.flags&-4097|2,Le=!1,qt=t}}}function pp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function So(t){if(t!==qt)return!1;if(!Le)return pp(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tu(t.type,t.memoizedProps)),e&&(e=Ht)){if(iu(t))throw Z0(),Error(X(418));for(;e;)Q0(t,e),e=Ds(e.nextSibling)}if(pp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ht=Ds(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=qt?Ds(t.stateNode.nextSibling):null;return!0}function Z0(){for(var t=Ht;t;)t=Ds(t.nextSibling)}function mi(){Ht=qt=null,Le=!1}function Eh(t){xr===null?xr=[t]:xr.push(t)}var uk=os.ReactCurrentBatchConfig;function Li(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(X(309));var s=r.stateNode}if(!s)throw Error(X(147,t));var n=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=n.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(X(284));if(!r._owner)throw Error(X(290,t))}return t}function Co(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mp(t){var e=t._init;return e(t._payload)}function ex(t){function e(y,m){if(t){var x=y.deletions;x===null?(y.deletions=[m],y.flags|=16):x.push(m)}}function r(y,m){if(!t)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function s(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function n(y,m){return y=Os(y,m),y.index=0,y.sibling=null,y}function i(y,m,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<m?(y.flags|=2,m):x):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,m,x,w){return m===null||m.tag!==6?(m=od(x,y.mode,w),m.return=y,m):(m=n(m,x),m.return=y,m)}function c(y,m,x,w){var C=x.type;return C===qn?u(y,m,x.props.children,w,x.key):m!==null&&(m.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ms&&mp(C)===m.type)?(w=n(m,x.props),w.ref=Li(y,m,x),w.return=y,w):(w=hl(x.type,x.key,x.props,null,y.mode,w),w.ref=Li(y,m,x),w.return=y,w)}function d(y,m,x,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==x.containerInfo||m.stateNode.implementation!==x.implementation?(m=ld(x,y.mode,w),m.return=y,m):(m=n(m,x.children||[]),m.return=y,m)}function u(y,m,x,w,C){return m===null||m.tag!==7?(m=un(x,y.mode,w,C),m.return=y,m):(m=n(m,x),m.return=y,m)}function h(y,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return m=od(""+m,y.mode,x),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case go:return x=hl(m.type,m.key,m.props,null,y.mode,x),x.ref=Li(y,null,m),x.return=y,x;case Vn:return m=ld(m,y.mode,x),m.return=y,m;case ms:var w=m._init;return h(y,w(m._payload),x)}if(Ki(m)||Ti(m))return m=un(m,y.mode,x,null),m.return=y,m;Co(y,m)}return null}function f(y,m,x,w){var C=m!==null?m.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:l(y,m,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case go:return x.key===C?c(y,m,x,w):null;case Vn:return x.key===C?d(y,m,x,w):null;case ms:return C=x._init,f(y,m,C(x._payload),w)}if(Ki(x)||Ti(x))return C!==null?null:u(y,m,x,w,null);Co(y,x)}return null}function p(y,m,x,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(x)||null,l(m,y,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case go:return y=y.get(w.key===null?x:w.key)||null,c(m,y,w,C);case Vn:return y=y.get(w.key===null?x:w.key)||null,d(m,y,w,C);case ms:var _=w._init;return p(y,m,x,_(w._payload),C)}if(Ki(w)||Ti(w))return y=y.get(x)||null,u(m,y,w,C,null);Co(m,w)}return null}function v(y,m,x,w){for(var C=null,_=null,N=m,b=m=0,k=null;N!==null&&b<x.length;b++){N.index>b?(k=N,N=null):k=N.sibling;var I=f(y,N,x[b],w);if(I===null){N===null&&(N=k);break}t&&N&&I.alternate===null&&e(y,N),m=i(I,m,b),_===null?C=I:_.sibling=I,_=I,N=k}if(b===x.length)return r(y,N),Le&&Ks(y,b),C;if(N===null){for(;b<x.length;b++)N=h(y,x[b],w),N!==null&&(m=i(N,m,b),_===null?C=N:_.sibling=N,_=N);return Le&&Ks(y,b),C}for(N=s(y,N);b<x.length;b++)k=p(N,y,b,x[b],w),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?b:k.key),m=i(k,m,b),_===null?C=k:_.sibling=k,_=k);return t&&N.forEach(function(T){return e(y,T)}),Le&&Ks(y,b),C}function g(y,m,x,w){var C=Ti(x);if(typeof C!="function")throw Error(X(150));if(x=C.call(x),x==null)throw Error(X(151));for(var _=C=null,N=m,b=m=0,k=null,I=x.next();N!==null&&!I.done;b++,I=x.next()){N.index>b?(k=N,N=null):k=N.sibling;var T=f(y,N,I.value,w);if(T===null){N===null&&(N=k);break}t&&N&&T.alternate===null&&e(y,N),m=i(T,m,b),_===null?C=T:_.sibling=T,_=T,N=k}if(I.done)return r(y,N),Le&&Ks(y,b),C;if(N===null){for(;!I.done;b++,I=x.next())I=h(y,I.value,w),I!==null&&(m=i(I,m,b),_===null?C=I:_.sibling=I,_=I);return Le&&Ks(y,b),C}for(N=s(y,N);!I.done;b++,I=x.next())I=p(N,y,b,I.value,w),I!==null&&(t&&I.alternate!==null&&N.delete(I.key===null?b:I.key),m=i(I,m,b),_===null?C=I:_.sibling=I,_=I);return t&&N.forEach(function(O){return e(y,O)}),Le&&Ks(y,b),C}function j(y,m,x,w){if(typeof x=="object"&&x!==null&&x.type===qn&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case go:e:{for(var C=x.key,_=m;_!==null;){if(_.key===C){if(C=x.type,C===qn){if(_.tag===7){r(y,_.sibling),m=n(_,x.props.children),m.return=y,y=m;break e}}else if(_.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ms&&mp(C)===_.type){r(y,_.sibling),m=n(_,x.props),m.ref=Li(y,_,x),m.return=y,y=m;break e}r(y,_);break}else e(y,_);_=_.sibling}x.type===qn?(m=un(x.props.children,y.mode,w,x.key),m.return=y,y=m):(w=hl(x.type,x.key,x.props,null,y.mode,w),w.ref=Li(y,m,x),w.return=y,y=w)}return o(y);case Vn:e:{for(_=x.key;m!==null;){if(m.key===_)if(m.tag===4&&m.stateNode.containerInfo===x.containerInfo&&m.stateNode.implementation===x.implementation){r(y,m.sibling),m=n(m,x.children||[]),m.return=y,y=m;break e}else{r(y,m);break}else e(y,m);m=m.sibling}m=ld(x,y.mode,w),m.return=y,y=m}return o(y);case ms:return _=x._init,j(y,m,_(x._payload),w)}if(Ki(x))return v(y,m,x,w);if(Ti(x))return g(y,m,x,w);Co(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,m!==null&&m.tag===6?(r(y,m.sibling),m=n(m,x),m.return=y,y=m):(r(y,m),m=od(x,y.mode,w),m.return=y,y=m),o(y)):r(y,m)}return j}var gi=ex(!0),tx=ex(!1),Tl=Us(null),Ol=null,ei=null,Dh=null;function Ph(){Dh=ei=Ol=null}function Mh(t){var e=Tl.current;Re(Tl),t._currentValue=e}function ou(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function oi(t,e){Ol=t,Dh=ei=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function or(t){var e=t._currentValue;if(Dh!==t)if(t={context:t,memoizedValue:e,next:null},ei===null){if(Ol===null)throw Error(X(308));ei=t,Ol.dependencies={lanes:0,firstContext:t}}else ei=ei.next=t;return e}var an=null;function Th(t){an===null?an=[t]:an.push(t)}function rx(t,e,r,s){var n=e.interleaved;return n===null?(r.next=r,Th(e)):(r.next=n.next,n.next=r),e.interleaved=r,ss(t,s)}function ss(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var gs=!1;function Oh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function es(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ps(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,xe&2){var n=s.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),s.pending=e,ss(t,r)}return n=s.interleaved,n===null?(e.next=e,Th(s)):(e.next=n.next,n.next=e),s.interleaved=e,ss(t,r)}function al(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,yh(t,r)}}function gp(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?n=i=e:i=i.next=e}else n=i=e;r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Al(t,e,r,s){var n=t.updateQueue;gs=!1;var i=n.firstBaseUpdate,o=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=n.baseState;o=0,u=d=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,g=l;switch(f=e,p=r,g.tag){case 1:if(v=g.payload,typeof v=="function"){h=v.call(p,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,f=typeof v=="function"?v.call(p,h,f):v,f==null)break e;h=Be({},h,f);break e;case 2:gs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=n.effects,f===null?n.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=h):u=u.next=p,o|=f;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;f=l,l=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(!0);if(u===null&&(c=h),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,e=n.shared.interleaved,e!==null){n=e;do o|=n.lane,n=n.next;while(n!==e)}else i===null&&(n.shared.lanes=0);xn|=o,t.lanes=o,t.memoizedState=h}}function xp(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],n=s.callback;if(n!==null){if(s.callback=null,s=r,typeof n!="function")throw Error(X(191,n));n.call(s)}}}var so={},Ir=Us(so),Ia=Us(so),Ra=Us(so);function on(t){if(t===so)throw Error(X(174));return t}function Ah(t,e){switch(Me(Ra,e),Me(Ia,t),Me(Ir,so),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ud(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ud(e,t)}Re(Ir),Me(Ir,e)}function xi(){Re(Ir),Re(Ia),Re(Ra)}function nx(t){on(Ra.current);var e=on(Ir.current),r=Ud(e,t.type);e!==r&&(Me(Ia,t),Me(Ir,r))}function Ih(t){Ia.current===t&&(Re(Ir),Re(Ia))}var Fe=Us(0);function Il(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var td=[];function Rh(){for(var t=0;t<td.length;t++)td[t]._workInProgressVersionPrimary=null;td.length=0}var ol=os.ReactCurrentDispatcher,rd=os.ReactCurrentBatchConfig,gn=0,Ue=null,Ze=null,it=null,Rl=!1,ua=!1,La=0,hk=0;function mt(){throw Error(X(321))}function Lh(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!kr(t[r],e[r]))return!1;return!0}function zh(t,e,r,s,n,i){if(gn=i,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ol.current=t===null||t.memoizedState===null?gk:xk,t=r(s,n),ua){i=0;do{if(ua=!1,La=0,25<=i)throw Error(X(301));i+=1,it=Ze=null,e.updateQueue=null,ol.current=yk,t=r(s,n)}while(ua)}if(ol.current=Ll,e=Ze!==null&&Ze.next!==null,gn=0,it=Ze=Ue=null,Rl=!1,e)throw Error(X(300));return t}function Fh(){var t=La!==0;return La=0,t}function Dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Ue.memoizedState=it=t:it=it.next=t,it}function lr(){if(Ze===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=it===null?Ue.memoizedState:it.next;if(e!==null)it=e,Ze=t;else{if(t===null)throw Error(X(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},it===null?Ue.memoizedState=it=t:it=it.next=t}return it}function za(t,e){return typeof e=="function"?e(t):e}function sd(t){var e=lr(),r=e.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=t;var s=Ze,n=s.baseQueue,i=r.pending;if(i!==null){if(n!==null){var o=n.next;n.next=i.next,i.next=o}s.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,s=s.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((gn&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,Ue.lanes|=u,xn|=u}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=l,kr(s,e.memoizedState)||(Rt=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}if(t=r.interleaved,t!==null){n=t;do i=n.lane,Ue.lanes|=i,xn|=i,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function nd(t){var e=lr(),r=e.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=t;var s=r.dispatch,n=r.pending,i=e.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do i=t(i,o.action),o=o.next;while(o!==n);kr(i,e.memoizedState)||(Rt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,s]}function ix(){}function ax(t,e){var r=Ue,s=lr(),n=e(),i=!kr(s.memoizedState,n);if(i&&(s.memoizedState=n,Rt=!0),s=s.queue,$h(cx.bind(null,r,s,t),[t]),s.getSnapshot!==e||i||it!==null&&it.memoizedState.tag&1){if(r.flags|=2048,Fa(9,lx.bind(null,r,s,n,e),void 0,null),ot===null)throw Error(X(349));gn&30||ox(r,e,n)}return n}function ox(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function lx(t,e,r,s){e.value=r,e.getSnapshot=s,dx(e)&&ux(t)}function cx(t,e,r){return r(function(){dx(e)&&ux(t)})}function dx(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!kr(t,r)}catch{return!0}}function ux(t){var e=ss(t,1);e!==null&&vr(e,t,1,-1)}function yp(t){var e=Dr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:t},e.queue=t,t=t.dispatch=mk.bind(null,Ue,t),[e.memoizedState,t]}function Fa(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function hx(){return lr().memoizedState}function ll(t,e,r,s){var n=Dr();Ue.flags|=t,n.memoizedState=Fa(1|e,r,void 0,s===void 0?null:s)}function pc(t,e,r,s){var n=lr();s=s===void 0?null:s;var i=void 0;if(Ze!==null){var o=Ze.memoizedState;if(i=o.destroy,s!==null&&Lh(s,o.deps)){n.memoizedState=Fa(e,r,i,s);return}}Ue.flags|=t,n.memoizedState=Fa(1|e,r,i,s)}function vp(t,e){return ll(8390656,8,t,e)}function $h(t,e){return pc(2048,8,t,e)}function fx(t,e){return pc(4,2,t,e)}function px(t,e){return pc(4,4,t,e)}function mx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gx(t,e,r){return r=r!=null?r.concat([t]):null,pc(4,4,mx.bind(null,e,t),r)}function Uh(){}function xx(t,e){var r=lr();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Lh(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function yx(t,e){var r=lr();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Lh(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function vx(t,e,r){return gn&21?(kr(r,e)||(r=_0(),Ue.lanes|=r,xn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=r)}function fk(t,e){var r=Ne;Ne=r!==0&&4>r?r:4,t(!0);var s=rd.transition;rd.transition={};try{t(!1),e()}finally{Ne=r,rd.transition=s}}function bx(){return lr().memoizedState}function pk(t,e,r){var s=Ts(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},wx(t))kx(e,r);else if(r=rx(t,e,r,s),r!==null){var n=St();vr(r,t,s,n),jx(r,e,s)}}function mk(t,e,r){var s=Ts(t),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(wx(t))kx(e,n);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,r);if(n.hasEagerState=!0,n.eagerState=l,kr(l,o)){var c=e.interleaved;c===null?(n.next=n,Th(e)):(n.next=c.next,c.next=n),e.interleaved=n;return}}catch{}finally{}r=rx(t,e,n,s),r!==null&&(n=St(),vr(r,t,s,n),jx(r,e,s))}}function wx(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function kx(t,e){ua=Rl=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function jx(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,yh(t,r)}}var Ll={readContext:or,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},gk={readContext:or,useCallback:function(t,e){return Dr().memoizedState=[t,e===void 0?null:e],t},useContext:or,useEffect:vp,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ll(4194308,4,mx.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ll(4194308,4,t,e)},useInsertionEffect:function(t,e){return ll(4,2,t,e)},useMemo:function(t,e){var r=Dr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=Dr();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=pk.bind(null,Ue,t),[s.memoizedState,t]},useRef:function(t){var e=Dr();return t={current:t},e.memoizedState=t},useState:yp,useDebugValue:Uh,useDeferredValue:function(t){return Dr().memoizedState=t},useTransition:function(){var t=yp(!1),e=t[0];return t=fk.bind(null,t[1]),Dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=Ue,n=Dr();if(Le){if(r===void 0)throw Error(X(407));r=r()}else{if(r=e(),ot===null)throw Error(X(349));gn&30||ox(s,e,r)}n.memoizedState=r;var i={value:r,getSnapshot:e};return n.queue=i,vp(cx.bind(null,s,i,t),[t]),s.flags|=2048,Fa(9,lx.bind(null,s,i,r,e),void 0,null),r},useId:function(){var t=Dr(),e=ot.identifierPrefix;if(Le){var r=Kr,s=Jr;r=(s&~(1<<32-yr(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=La++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=hk++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xk={readContext:or,useCallback:xx,useContext:or,useEffect:$h,useImperativeHandle:gx,useInsertionEffect:fx,useLayoutEffect:px,useMemo:yx,useReducer:sd,useRef:hx,useState:function(){return sd(za)},useDebugValue:Uh,useDeferredValue:function(t){var e=lr();return vx(e,Ze.memoizedState,t)},useTransition:function(){var t=sd(za)[0],e=lr().memoizedState;return[t,e]},useMutableSource:ix,useSyncExternalStore:ax,useId:bx,unstable_isNewReconciler:!1},yk={readContext:or,useCallback:xx,useContext:or,useEffect:$h,useImperativeHandle:gx,useInsertionEffect:fx,useLayoutEffect:px,useMemo:yx,useReducer:nd,useRef:hx,useState:function(){return nd(za)},useDebugValue:Uh,useDeferredValue:function(t){var e=lr();return Ze===null?e.memoizedState=t:vx(e,Ze.memoizedState,t)},useTransition:function(){var t=nd(za)[0],e=lr().memoizedState;return[t,e]},useMutableSource:ix,useSyncExternalStore:ax,useId:bx,unstable_isNewReconciler:!1};function fr(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function lu(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:Be({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var mc={isMounted:function(t){return(t=t._reactInternals)?_n(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=St(),n=Ts(t),i=es(s,n);i.payload=e,r!=null&&(i.callback=r),e=Ps(t,i,n),e!==null&&(vr(e,t,n,s),al(e,t,n))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=St(),n=Ts(t),i=es(s,n);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Ps(t,i,n),e!==null&&(vr(e,t,n,s),al(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=St(),s=Ts(t),n=es(r,s);n.tag=2,e!=null&&(n.callback=e),e=Ps(t,n,s),e!==null&&(vr(e,t,s,r),al(e,t,s))}};function bp(t,e,r,s,n,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ma(r,s)||!Ma(n,i):!0}function _x(t,e,r){var s=!1,n=zs,i=e.contextType;return typeof i=="object"&&i!==null?i=or(i):(n=Ft(e)?pn:jt.current,s=e.contextTypes,i=(s=s!=null)?pi(t,n):zs),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mc,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=i),e}function wp(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&mc.enqueueReplaceState(e,e.state,null)}function cu(t,e,r,s){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},Oh(t);var i=e.contextType;typeof i=="object"&&i!==null?n.context=or(i):(i=Ft(e)?pn:jt.current,n.context=pi(t,i)),n.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(lu(t,e,i,r),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&mc.enqueueReplaceState(n,n.state,null),Al(t,r,n,s),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function yi(t,e){try{var r="",s=e;do r+=qb(s),s=s.return;while(s);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:n,digest:null}}function id(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function du(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var vk=typeof WeakMap=="function"?WeakMap:Map;function Nx(t,e,r){r=es(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){Fl||(Fl=!0,bu=s),du(t,e)},r}function Sx(t,e,r){r=es(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var n=e.value;r.payload=function(){return s(n)},r.callback=function(){du(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){du(t,e),typeof s!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function kp(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new vk;var n=new Set;s.set(e,n)}else n=s.get(e),n===void 0&&(n=new Set,s.set(e,n));n.has(r)||(n.add(r),t=Ok.bind(null,t,e,r),e.then(t,t))}function jp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _p(t,e,r,s,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=es(-1,1),e.tag=2,Ps(r,e,1))),r.lanes|=1),t)}var bk=os.ReactCurrentOwner,Rt=!1;function Nt(t,e,r,s){e.child=t===null?tx(e,null,r,s):gi(e,t.child,r,s)}function Np(t,e,r,s,n){r=r.render;var i=e.ref;return oi(e,n),s=zh(t,e,r,s,i,n),r=Fh(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,ns(t,e,n)):(Le&&r&&Sh(e),e.flags|=1,Nt(t,e,s,n),e.child)}function Sp(t,e,r,s,n){if(t===null){var i=r.type;return typeof i=="function"&&!Jh(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,Cx(t,e,i,s,n)):(t=hl(r.type,null,s,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&n)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ma,r(o,s)&&t.ref===e.ref)return ns(t,e,n)}return e.flags|=1,t=Os(i,s),t.ref=e.ref,t.return=e,e.child=t}function Cx(t,e,r,s,n){if(t!==null){var i=t.memoizedProps;if(Ma(i,s)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=s=i,(t.lanes&n)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,ns(t,e,n)}return uu(t,e,r,s,n)}function Ex(t,e,r){var s=e.pendingProps,n=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(ri,Bt),Bt|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(ri,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,Me(ri,Bt),Bt|=s}else i!==null?(s=i.baseLanes|r,e.memoizedState=null):s=r,Me(ri,Bt),Bt|=s;return Nt(t,e,n,r),e.child}function Dx(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function uu(t,e,r,s,n){var i=Ft(r)?pn:jt.current;return i=pi(e,i),oi(e,n),r=zh(t,e,r,s,i,n),s=Fh(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,ns(t,e,n)):(Le&&s&&Sh(e),e.flags|=1,Nt(t,e,r,n),e.child)}function Cp(t,e,r,s,n){if(Ft(r)){var i=!0;Dl(e)}else i=!1;if(oi(e,n),e.stateNode===null)cl(t,e),_x(e,r,s),cu(e,r,s,n),s=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=or(d):(d=Ft(r)?pn:jt.current,d=pi(e,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&wp(e,o,s,d),gs=!1;var f=e.memoizedState;o.state=f,Al(e,s,o,n),c=e.memoizedState,l!==s||f!==c||zt.current||gs?(typeof u=="function"&&(lu(e,r,u,s),c=e.memoizedState),(l=gs||bp(e,r,l,s,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,sx(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:fr(e.type,l),o.props=d,h=e.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=or(c):(c=Ft(r)?pn:jt.current,c=pi(e,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&wp(e,o,s,c),gs=!1,f=e.memoizedState,o.state=f,Al(e,s,o,n);var v=e.memoizedState;l!==h||f!==v||zt.current||gs?(typeof p=="function"&&(lu(e,r,p,s),v=e.memoizedState),(d=gs||bp(e,r,d,s,f,v,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=v),o.props=s,o.state=v,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return hu(t,e,r,s,i,n)}function hu(t,e,r,s,n,i){Dx(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return n&&hp(e,r,!1),ns(t,e,i);s=e.stateNode,bk.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=gi(e,t.child,null,i),e.child=gi(e,null,l,i)):Nt(t,e,l,i),e.memoizedState=s.state,n&&hp(e,r,!0),e.child}function Px(t){var e=t.stateNode;e.pendingContext?up(t,e.pendingContext,e.pendingContext!==e.context):e.context&&up(t,e.context,!1),Ah(t,e.containerInfo)}function Ep(t,e,r,s,n){return mi(),Eh(n),e.flags|=256,Nt(t,e,r,s),e.child}var fu={dehydrated:null,treeContext:null,retryLane:0};function pu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Mx(t,e,r){var s=e.pendingProps,n=Fe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(n&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Me(Fe,n&1),t===null)return au(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=yc(o,s,0,null),t=un(t,s,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=pu(r),e.memoizedState=fu,t):Bh(e,o));if(n=t.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return wk(t,e,o,s,l,n,r);if(i){i=s.fallback,o=e.mode,n=t.child,l=n.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==n?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Os(n,c),s.subtreeFlags=n.subtreeFlags&14680064),l!==null?i=Os(l,i):(i=un(i,o,r,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?pu(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=fu,s}return i=t.child,t=i.sibling,s=Os(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function Bh(t,e){return e=yc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Eo(t,e,r,s){return s!==null&&Eh(s),gi(e,t.child,null,r),t=Bh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wk(t,e,r,s,n,i,o){if(r)return e.flags&256?(e.flags&=-257,s=id(Error(X(422))),Eo(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,n=e.mode,s=yc({mode:"visible",children:s.children},n,0,null),i=un(i,n,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&gi(e,t.child,null,o),e.child.memoizedState=pu(o),e.memoizedState=fu,i);if(!(e.mode&1))return Eo(t,e,o,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(X(419)),s=id(i,s,void 0),Eo(t,e,o,s)}if(l=(o&t.childLanes)!==0,Rt||l){if(s=ot,s!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|o)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,ss(t,n),vr(s,t,n,-1))}return Gh(),s=id(Error(X(421))),Eo(t,e,o,s)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=Ak.bind(null,t),n._reactRetry=e,null):(t=i.treeContext,Ht=Ds(n.nextSibling),qt=e,Le=!0,xr=null,t!==null&&(tr[rr++]=Jr,tr[rr++]=Kr,tr[rr++]=mn,Jr=t.id,Kr=t.overflow,mn=e),e=Bh(e,s.children),e.flags|=4096,e)}function Dp(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),ou(t.return,e,r)}function ad(t,e,r,s,n){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=n)}function Tx(t,e,r){var s=e.pendingProps,n=s.revealOrder,i=s.tail;if(Nt(t,e,s.children,r),s=Fe.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dp(t,r,e);else if(t.tag===19)Dp(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Me(Fe,s),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(r=e.child,n=null;r!==null;)t=r.alternate,t!==null&&Il(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=e.child,e.child=null):(n=r.sibling,r.sibling=null),ad(e,!1,n,r,i);break;case"backwards":for(r=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&Il(t)===null){e.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}ad(e,!0,r,null,i);break;case"together":ad(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ns(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),xn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,r=Os(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Os(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function kk(t,e,r){switch(e.tag){case 3:Px(e),mi();break;case 5:nx(e);break;case 1:Ft(e.type)&&Dl(e);break;case 4:Ah(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,n=e.memoizedProps.value;Me(Tl,s._currentValue),s._currentValue=n;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Me(Fe,Fe.current&1),e.flags|=128,null):r&e.child.childLanes?Mx(t,e,r):(Me(Fe,Fe.current&1),t=ns(t,e,r),t!==null?t.sibling:null);Me(Fe,Fe.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return Tx(t,e,r);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Me(Fe,Fe.current),s)break;return null;case 22:case 23:return e.lanes=0,Ex(t,e,r)}return ns(t,e,r)}var Ox,mu,Ax,Ix;Ox=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mu=function(){};Ax=function(t,e,r,s){var n=t.memoizedProps;if(n!==s){t=e.stateNode,on(Ir.current);var i=null;switch(r){case"input":n=Ld(t,n),s=Ld(t,s),i=[];break;case"select":n=Be({},n,{value:void 0}),s=Be({},s,{value:void 0}),i=[];break;case"textarea":n=$d(t,n),s=$d(t,s),i=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Cl)}Bd(r,s);var o;r=null;for(d in n)if(!s.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var l=n[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(_a.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=n!=null?n[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(_a.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Oe("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Ix=function(t,e,r,s){r!==s&&(e.flags|=4)};function zi(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function jk(t,e,r){var s=e.pendingProps;switch(Ch(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return Ft(e.type)&&El(),gt(e),null;case 3:return s=e.stateNode,xi(),Re(zt),Re(jt),Rh(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(So(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xr!==null&&(ju(xr),xr=null))),mu(t,e),gt(e),null;case 5:Ih(e);var n=on(Ra.current);if(r=e.type,t!==null&&e.stateNode!=null)Ax(t,e,r,s,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(X(166));return gt(e),null}if(t=on(Ir.current),So(e)){s=e.stateNode,r=e.type;var i=e.memoizedProps;switch(s[Mr]=e,s[Aa]=i,t=(e.mode&1)!==0,r){case"dialog":Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":case"embed":Oe("load",s);break;case"video":case"audio":for(n=0;n<Qi.length;n++)Oe(Qi[n],s);break;case"source":Oe("error",s);break;case"img":case"image":case"link":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"input":zf(s,i),Oe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Oe("invalid",s);break;case"textarea":$f(s,i),Oe("invalid",s)}Bd(r,i),n=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&No(s.textContent,l,t),n=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&No(s.textContent,l,t),n=["children",""+l]):_a.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Oe("scroll",s)}switch(r){case"input":xo(s),Ff(s,i,!0);break;case"textarea":xo(s),Uf(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Cl)}s=n,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=c0(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(r,{is:s.is}):(t=o.createElement(r),r==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,r),t[Mr]=e,t[Aa]=s,Ox(t,e,!1,!1),e.stateNode=t;e:{switch(o=Hd(r,s),r){case"dialog":Oe("cancel",t),Oe("close",t),n=s;break;case"iframe":case"object":case"embed":Oe("load",t),n=s;break;case"video":case"audio":for(n=0;n<Qi.length;n++)Oe(Qi[n],t);n=s;break;case"source":Oe("error",t),n=s;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),n=s;break;case"details":Oe("toggle",t),n=s;break;case"input":zf(t,s),n=Ld(t,s),Oe("invalid",t);break;case"option":n=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},n=Be({},s,{value:void 0}),Oe("invalid",t);break;case"textarea":$f(t,s),n=$d(t,s),Oe("invalid",t);break;default:n=s}Bd(r,n),l=n;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?h0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&d0(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Na(t,c):typeof c=="number"&&Na(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_a.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Oe("scroll",t):c!=null&&hh(t,i,c,o))}switch(r){case"input":xo(t),Ff(t,s,!1);break;case"textarea":xo(t),Uf(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Ls(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?si(t,!!s.multiple,i,!1):s.defaultValue!=null&&si(t,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Cl)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(t&&e.stateNode!=null)Ix(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(X(166));if(r=on(Ra.current),on(Ir.current),So(e)){if(s=e.stateNode,r=e.memoizedProps,s[Mr]=e,(i=s.nodeValue!==r)&&(t=qt,t!==null))switch(t.tag){case 3:No(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&No(s.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Mr]=e,e.stateNode=s}return gt(e),null;case 13:if(Re(Fe),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&Ht!==null&&e.mode&1&&!(e.flags&128))Z0(),mi(),e.flags|=98560,i=!1;else if(i=So(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(X(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[Mr]=e}else mi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),i=!1}else xr!==null&&(ju(xr),xr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?tt===0&&(tt=3):Gh())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return xi(),mu(t,e),t===null&&Ta(e.stateNode.containerInfo),gt(e),null;case 10:return Mh(e.type._context),gt(e),null;case 17:return Ft(e.type)&&El(),gt(e),null;case 19:if(Re(Fe),i=e.memoizedState,i===null)return gt(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)zi(i,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Il(t),o!==null){for(e.flags|=128,zi(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)i=r,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Me(Fe,Fe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ye()>vi&&(e.flags|=128,s=!0,zi(i,!1),e.lanes=4194304)}else{if(!s)if(t=Il(o),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),zi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Le)return gt(e),null}else 2*Ye()-i.renderingStartTime>vi&&r!==1073741824&&(e.flags|=128,s=!0,zi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ye(),e.sibling=null,r=Fe.current,Me(Fe,s?r&1|2:r&1),e):(gt(e),null);case 22:case 23:return Yh(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Bt&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function _k(t,e){switch(Ch(e),e.tag){case 1:return Ft(e.type)&&El(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xi(),Re(zt),Re(jt),Rh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ih(e),null;case 13:if(Re(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));mi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Fe),null;case 4:return xi(),null;case 10:return Mh(e.type._context),null;case 22:case 23:return Yh(),null;case 24:return null;default:return null}}var Do=!1,vt=!1,Nk=typeof WeakSet=="function"?WeakSet:Set,ie=null;function ti(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){We(t,e,s)}else r.current=null}function gu(t,e,r){try{r()}catch(s){We(t,e,s)}}var Pp=!1;function Sk(t,e){if(Zd=_l,t=$0(),Nh(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var n=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var p;h!==r||n!==0&&h.nodeType!==3||(l=o+n),h!==i||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++d===n&&(l=o),f===i&&++u===s&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(eu={focusedElem:t,selectionRange:r},_l=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,j=v.memoizedState,y=e.stateNode,m=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:fr(e.type,g),j);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(w){We(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return v=Pp,Pp=!1,v}function ha(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var i=n.destroy;n.destroy=void 0,i!==void 0&&gu(e,r,i)}n=n.next}while(n!==s)}}function gc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function xu(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Rx(t){var e=t.alternate;e!==null&&(t.alternate=null,Rx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mr],delete e[Aa],delete e[su],delete e[lk],delete e[ck])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Lx(t){return t.tag===5||t.tag===3||t.tag===4}function Mp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yu(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Cl));else if(s!==4&&(t=t.child,t!==null))for(yu(t,e,r),t=t.sibling;t!==null;)yu(t,e,r),t=t.sibling}function vu(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(vu(t,e,r),t=t.sibling;t!==null;)vu(t,e,r),t=t.sibling}var ct=null,pr=!1;function us(t,e,r){for(r=r.child;r!==null;)zx(t,e,r),r=r.sibling}function zx(t,e,r){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(lc,r)}catch{}switch(r.tag){case 5:vt||ti(r,e);case 6:var s=ct,n=pr;ct=null,us(t,e,r),ct=s,pr=n,ct!==null&&(pr?(t=ct,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ct.removeChild(r.stateNode));break;case 18:ct!==null&&(pr?(t=ct,r=r.stateNode,t.nodeType===8?Zc(t.parentNode,r):t.nodeType===1&&Zc(t,r),Da(t)):Zc(ct,r.stateNode));break;case 4:s=ct,n=pr,ct=r.stateNode.containerInfo,pr=!0,us(t,e,r),ct=s,pr=n;break;case 0:case 11:case 14:case 15:if(!vt&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var i=n,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&gu(r,e,o),n=n.next}while(n!==s)}us(t,e,r);break;case 1:if(!vt&&(ti(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){We(r,e,l)}us(t,e,r);break;case 21:us(t,e,r);break;case 22:r.mode&1?(vt=(s=vt)||r.memoizedState!==null,us(t,e,r),vt=s):us(t,e,r);break;default:us(t,e,r)}}function Tp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Nk),e.forEach(function(s){var n=Ik.bind(null,t,s);r.has(s)||(r.add(s),s.then(n,n))})}}function ur(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var n=r[s];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ct=l.stateNode,pr=!1;break e;case 3:ct=l.stateNode.containerInfo,pr=!0;break e;case 4:ct=l.stateNode.containerInfo,pr=!0;break e}l=l.return}if(ct===null)throw Error(X(160));zx(i,o,n),ct=null,pr=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){We(n,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fx(e,t),e=e.sibling}function Fx(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ur(e,t),Nr(t),s&4){try{ha(3,t,t.return),gc(3,t)}catch(g){We(t,t.return,g)}try{ha(5,t,t.return)}catch(g){We(t,t.return,g)}}break;case 1:ur(e,t),Nr(t),s&512&&r!==null&&ti(r,r.return);break;case 5:if(ur(e,t),Nr(t),s&512&&r!==null&&ti(r,r.return),t.flags&32){var n=t.stateNode;try{Na(n,"")}catch(g){We(t,t.return,g)}}if(s&4&&(n=t.stateNode,n!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&o0(n,i),Hd(l,o);var d=Hd(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?h0(n,h):u==="dangerouslySetInnerHTML"?d0(n,h):u==="children"?Na(n,h):hh(n,u,h,d)}switch(l){case"input":zd(n,i);break;case"textarea":l0(n,i);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?si(n,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?si(n,!!i.multiple,i.defaultValue,!0):si(n,!!i.multiple,i.multiple?[]:"",!1))}n[Aa]=i}catch(g){We(t,t.return,g)}}break;case 6:if(ur(e,t),Nr(t),s&4){if(t.stateNode===null)throw Error(X(162));n=t.stateNode,i=t.memoizedProps;try{n.nodeValue=i}catch(g){We(t,t.return,g)}}break;case 3:if(ur(e,t),Nr(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Da(e.containerInfo)}catch(g){We(t,t.return,g)}break;case 4:ur(e,t),Nr(t);break;case 13:ur(e,t),Nr(t),n=t.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(Vh=Ye())),s&4&&Tp(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(vt=(d=vt)||u,ur(e,t),vt=d):ur(e,t),Nr(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(ie=t,u=t.child;u!==null;){for(h=ie=u;ie!==null;){switch(f=ie,p=f.child,f.tag){case 0:case 11:case 14:case 15:ha(4,f,f.return);break;case 1:ti(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){s=f,r=f.return;try{e=s,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(g){We(s,r,g)}}break;case 5:ti(f,f.return);break;case 22:if(f.memoizedState!==null){Ap(h);continue}}p!==null?(p.return=f,ie=p):Ap(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{n=h.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=u0("display",o))}catch(g){We(t,t.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){We(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ur(e,t),Nr(t),s&4&&Tp(t);break;case 21:break;default:ur(e,t),Nr(t)}}function Nr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Lx(r)){var s=r;break e}r=r.return}throw Error(X(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(Na(n,""),s.flags&=-33);var i=Mp(t);vu(t,i,n);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Mp(t);yu(t,l,o);break;default:throw Error(X(161))}}catch(c){We(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ck(t,e,r){ie=t,$x(t)}function $x(t,e,r){for(var s=(t.mode&1)!==0;ie!==null;){var n=ie,i=n.child;if(n.tag===22&&s){var o=n.memoizedState!==null||Do;if(!o){var l=n.alternate,c=l!==null&&l.memoizedState!==null||vt;l=Do;var d=vt;if(Do=o,(vt=c)&&!d)for(ie=n;ie!==null;)o=ie,c=o.child,o.tag===22&&o.memoizedState!==null?Ip(n):c!==null?(c.return=o,ie=c):Ip(n);for(;i!==null;)ie=i,$x(i),i=i.sibling;ie=n,Do=l,vt=d}Op(t)}else n.subtreeFlags&8772&&i!==null?(i.return=n,ie=i):Op(t)}}function Op(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||gc(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!vt)if(r===null)s.componentDidMount();else{var n=e.elementType===e.type?r.memoizedProps:fr(e.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&xp(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}xp(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Da(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}vt||e.flags&512&&xu(e)}catch(f){We(e,e.return,f)}}if(e===t){ie=null;break}if(r=e.sibling,r!==null){r.return=e.return,ie=r;break}ie=e.return}}function Ap(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ie=r;break}ie=e.return}}function Ip(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{gc(4,e)}catch(c){We(e,r,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var n=e.return;try{s.componentDidMount()}catch(c){We(e,n,c)}}var i=e.return;try{xu(e)}catch(c){We(e,i,c)}break;case 5:var o=e.return;try{xu(e)}catch(c){We(e,o,c)}}}catch(c){We(e,e.return,c)}if(e===t){ie=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ie=l;break}ie=e.return}}var Ek=Math.ceil,zl=os.ReactCurrentDispatcher,Hh=os.ReactCurrentOwner,ar=os.ReactCurrentBatchConfig,xe=0,ot=null,Qe=null,ut=0,Bt=0,ri=Us(0),tt=0,$a=null,xn=0,xc=0,Wh=0,fa=null,Ot=null,Vh=0,vi=1/0,Wr=null,Fl=!1,bu=null,Ms=null,Po=!1,ks=null,$l=0,pa=0,wu=null,dl=-1,ul=0;function St(){return xe&6?Ye():dl!==-1?dl:dl=Ye()}function Ts(t){return t.mode&1?xe&2&&ut!==0?ut&-ut:uk.transition!==null?(ul===0&&(ul=_0()),ul):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:M0(t.type)),t):1}function vr(t,e,r,s){if(50<pa)throw pa=0,wu=null,Error(X(185));eo(t,r,s),(!(xe&2)||t!==ot)&&(t===ot&&(!(xe&2)&&(xc|=r),tt===4&&vs(t,ut)),$t(t,s),r===1&&xe===0&&!(e.mode&1)&&(vi=Ye()+500,fc&&Bs()))}function $t(t,e){var r=t.callbackNode;uw(t,e);var s=jl(t,t===ot?ut:0);if(s===0)r!==null&&Wf(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&Wf(r),e===1)t.tag===0?dk(Rp.bind(null,t)):K0(Rp.bind(null,t)),ak(function(){!(xe&6)&&Bs()}),r=null;else{switch(N0(s)){case 1:r=xh;break;case 4:r=k0;break;case 16:r=kl;break;case 536870912:r=j0;break;default:r=kl}r=Gx(r,Ux.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Ux(t,e){if(dl=-1,ul=0,xe&6)throw Error(X(327));var r=t.callbackNode;if(li()&&t.callbackNode!==r)return null;var s=jl(t,t===ot?ut:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Ul(t,s);else{e=s;var n=xe;xe|=2;var i=Hx();(ot!==t||ut!==e)&&(Wr=null,vi=Ye()+500,dn(t,e));do try{Mk();break}catch(l){Bx(t,l)}while(!0);Ph(),zl.current=i,xe=n,Qe!==null?e=0:(ot=null,ut=0,e=tt)}if(e!==0){if(e===2&&(n=Gd(t),n!==0&&(s=n,e=ku(t,n))),e===1)throw r=$a,dn(t,0),vs(t,s),$t(t,Ye()),r;if(e===6)vs(t,s);else{if(n=t.current.alternate,!(s&30)&&!Dk(n)&&(e=Ul(t,s),e===2&&(i=Gd(t),i!==0&&(s=i,e=ku(t,i))),e===1))throw r=$a,dn(t,0),vs(t,s),$t(t,Ye()),r;switch(t.finishedWork=n,t.finishedLanes=s,e){case 0:case 1:throw Error(X(345));case 2:Xs(t,Ot,Wr);break;case 3:if(vs(t,s),(s&130023424)===s&&(e=Vh+500-Ye(),10<e)){if(jl(t,0)!==0)break;if(n=t.suspendedLanes,(n&s)!==s){St(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=ru(Xs.bind(null,t,Ot,Wr),e);break}Xs(t,Ot,Wr);break;case 4:if(vs(t,s),(s&4194240)===s)break;for(e=t.eventTimes,n=-1;0<s;){var o=31-yr(s);i=1<<o,o=e[o],o>n&&(n=o),s&=~i}if(s=n,s=Ye()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Ek(s/1960))-s,10<s){t.timeoutHandle=ru(Xs.bind(null,t,Ot,Wr),s);break}Xs(t,Ot,Wr);break;case 5:Xs(t,Ot,Wr);break;default:throw Error(X(329))}}}return $t(t,Ye()),t.callbackNode===r?Ux.bind(null,t):null}function ku(t,e){var r=fa;return t.current.memoizedState.isDehydrated&&(dn(t,e).flags|=256),t=Ul(t,e),t!==2&&(e=Ot,Ot=r,e!==null&&ju(e)),t}function ju(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function Dk(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var n=r[s],i=n.getSnapshot;n=n.value;try{if(!kr(i(),n))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vs(t,e){for(e&=~Wh,e&=~xc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-yr(e),s=1<<r;t[r]=-1,e&=~s}}function Rp(t){if(xe&6)throw Error(X(327));li();var e=jl(t,0);if(!(e&1))return $t(t,Ye()),null;var r=Ul(t,e);if(t.tag!==0&&r===2){var s=Gd(t);s!==0&&(e=s,r=ku(t,s))}if(r===1)throw r=$a,dn(t,0),vs(t,e),$t(t,Ye()),r;if(r===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xs(t,Ot,Wr),$t(t,Ye()),null}function qh(t,e){var r=xe;xe|=1;try{return t(e)}finally{xe=r,xe===0&&(vi=Ye()+500,fc&&Bs())}}function yn(t){ks!==null&&ks.tag===0&&!(xe&6)&&li();var e=xe;xe|=1;var r=ar.transition,s=Ne;try{if(ar.transition=null,Ne=1,t)return t()}finally{Ne=s,ar.transition=r,xe=e,!(xe&6)&&Bs()}}function Yh(){Bt=ri.current,Re(ri)}function dn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,ik(r)),Qe!==null)for(r=Qe.return;r!==null;){var s=r;switch(Ch(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&El();break;case 3:xi(),Re(zt),Re(jt),Rh();break;case 5:Ih(s);break;case 4:xi();break;case 13:Re(Fe);break;case 19:Re(Fe);break;case 10:Mh(s.type._context);break;case 22:case 23:Yh()}r=r.return}if(ot=t,Qe=t=Os(t.current,null),ut=Bt=e,tt=0,$a=null,Wh=xc=xn=0,Ot=fa=null,an!==null){for(e=0;e<an.length;e++)if(r=an[e],s=r.interleaved,s!==null){r.interleaved=null;var n=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=n,s.next=o}r.pending=s}an=null}return t}function Bx(t,e){do{var r=Qe;try{if(Ph(),ol.current=Ll,Rl){for(var s=Ue.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}Rl=!1}if(gn=0,it=Ze=Ue=null,ua=!1,La=0,Hh.current=null,r===null||r.return===null){tt=1,$a=e,Qe=null;break}e:{var i=t,o=r.return,l=r,c=e;if(e=ut,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=jp(o);if(p!==null){p.flags&=-257,_p(p,o,l,i,e),p.mode&1&&kp(i,d,e),e=p,c=d;var v=e.updateQueue;if(v===null){var g=new Set;g.add(c),e.updateQueue=g}else v.add(c);break e}else{if(!(e&1)){kp(i,d,e),Gh();break e}c=Error(X(426))}}else if(Le&&l.mode&1){var j=jp(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),_p(j,o,l,i,e),Eh(yi(c,l));break e}}i=c=yi(c,l),tt!==4&&(tt=2),fa===null?fa=[i]:fa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Nx(i,c,e);gp(i,y);break e;case 1:l=c;var m=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ms===null||!Ms.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=Sx(i,l,e);gp(i,w);break e}}i=i.return}while(i!==null)}Vx(r)}catch(C){e=C,Qe===r&&r!==null&&(Qe=r=r.return);continue}break}while(!0)}function Hx(){var t=zl.current;return zl.current=Ll,t===null?Ll:t}function Gh(){(tt===0||tt===3||tt===2)&&(tt=4),ot===null||!(xn&268435455)&&!(xc&268435455)||vs(ot,ut)}function Ul(t,e){var r=xe;xe|=2;var s=Hx();(ot!==t||ut!==e)&&(Wr=null,dn(t,e));do try{Pk();break}catch(n){Bx(t,n)}while(!0);if(Ph(),xe=r,zl.current=s,Qe!==null)throw Error(X(261));return ot=null,ut=0,tt}function Pk(){for(;Qe!==null;)Wx(Qe)}function Mk(){for(;Qe!==null&&!rw();)Wx(Qe)}function Wx(t){var e=Yx(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?Vx(t):Qe=e,Hh.current=null}function Vx(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=_k(r,e),r!==null){r.flags&=32767,Qe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Qe=null;return}}else if(r=jk(r,e,Bt),r!==null){Qe=r;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);tt===0&&(tt=5)}function Xs(t,e,r){var s=Ne,n=ar.transition;try{ar.transition=null,Ne=1,Tk(t,e,r,s)}finally{ar.transition=n,Ne=s}return null}function Tk(t,e,r,s){do li();while(ks!==null);if(xe&6)throw Error(X(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(hw(t,i),t===ot&&(Qe=ot=null,ut=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Po||(Po=!0,Gx(kl,function(){return li(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ar.transition,ar.transition=null;var o=Ne;Ne=1;var l=xe;xe|=4,Hh.current=null,Sk(t,r),Fx(r,t),Qw(eu),_l=!!Zd,eu=Zd=null,t.current=r,Ck(r),sw(),xe=l,Ne=o,ar.transition=i}else t.current=r;if(Po&&(Po=!1,ks=t,$l=n),i=t.pendingLanes,i===0&&(Ms=null),aw(r.stateNode),$t(t,Ye()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)n=e[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(Fl)throw Fl=!1,t=bu,bu=null,t;return $l&1&&t.tag!==0&&li(),i=t.pendingLanes,i&1?t===wu?pa++:(pa=0,wu=t):pa=0,Bs(),null}function li(){if(ks!==null){var t=N0($l),e=ar.transition,r=Ne;try{if(ar.transition=null,Ne=16>t?16:t,ks===null)var s=!1;else{if(t=ks,ks=null,$l=0,xe&6)throw Error(X(331));var n=xe;for(xe|=4,ie=t.current;ie!==null;){var i=ie,o=i.child;if(ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ie=d;ie!==null;){var u=ie;switch(u.tag){case 0:case 11:case 15:ha(8,u,i)}var h=u.child;if(h!==null)h.return=u,ie=h;else for(;ie!==null;){u=ie;var f=u.sibling,p=u.return;if(Rx(u),u===d){ie=null;break}if(f!==null){f.return=p,ie=f;break}ie=p}}}var v=i.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var j=g.sibling;g.sibling=null,g=j}while(g!==null)}}ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ie=o;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ha(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,ie=y;break e}ie=i.return}}var m=t.current;for(ie=m;ie!==null;){o=ie;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ie=x;else e:for(o=m;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:gc(9,l)}}catch(C){We(l,l.return,C)}if(l===o){ie=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,ie=w;break e}ie=l.return}}if(xe=n,Bs(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(lc,t)}catch{}s=!0}return s}finally{Ne=r,ar.transition=e}}return!1}function Lp(t,e,r){e=yi(r,e),e=Nx(t,e,1),t=Ps(t,e,1),e=St(),t!==null&&(eo(t,1,e),$t(t,e))}function We(t,e,r){if(t.tag===3)Lp(t,t,r);else for(;e!==null;){if(e.tag===3){Lp(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ms===null||!Ms.has(s))){t=yi(r,t),t=Sx(e,t,1),e=Ps(e,t,1),t=St(),e!==null&&(eo(e,1,t),$t(e,t));break}}e=e.return}}function Ok(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=St(),t.pingedLanes|=t.suspendedLanes&r,ot===t&&(ut&r)===r&&(tt===4||tt===3&&(ut&130023424)===ut&&500>Ye()-Vh?dn(t,0):Wh|=r),$t(t,e)}function qx(t,e){e===0&&(t.mode&1?(e=bo,bo<<=1,!(bo&130023424)&&(bo=4194304)):e=1);var r=St();t=ss(t,e),t!==null&&(eo(t,e,r),$t(t,r))}function Ak(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),qx(t,r)}function Ik(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(X(314))}s!==null&&s.delete(e),qx(t,r)}var Yx;Yx=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||zt.current)Rt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Rt=!1,kk(t,e,r);Rt=!!(t.flags&131072)}else Rt=!1,Le&&e.flags&1048576&&X0(e,Ml,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;cl(t,e),t=e.pendingProps;var n=pi(e,jt.current);oi(e,r),n=zh(null,e,s,t,n,r);var i=Fh();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ft(s)?(i=!0,Dl(e)):i=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Oh(e),n.updater=mc,e.stateNode=n,n._reactInternals=e,cu(e,s,t,r),e=hu(null,e,s,!0,i,r)):(e.tag=0,Le&&i&&Sh(e),Nt(null,e,n,r),e=e.child),e;case 16:s=e.elementType;e:{switch(cl(t,e),t=e.pendingProps,n=s._init,s=n(s._payload),e.type=s,n=e.tag=Lk(s),t=fr(s,t),n){case 0:e=uu(null,e,s,t,r);break e;case 1:e=Cp(null,e,s,t,r);break e;case 11:e=Np(null,e,s,t,r);break e;case 14:e=Sp(null,e,s,fr(s.type,t),r);break e}throw Error(X(306,s,""))}return e;case 0:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:fr(s,n),uu(t,e,s,n,r);case 1:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:fr(s,n),Cp(t,e,s,n,r);case 3:e:{if(Px(e),t===null)throw Error(X(387));s=e.pendingProps,i=e.memoizedState,n=i.element,sx(t,e),Al(e,s,null,r);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){n=yi(Error(X(423)),e),e=Ep(t,e,s,r,n);break e}else if(s!==n){n=yi(Error(X(424)),e),e=Ep(t,e,s,r,n);break e}else for(Ht=Ds(e.stateNode.containerInfo.firstChild),qt=e,Le=!0,xr=null,r=tx(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(mi(),s===n){e=ns(t,e,r);break e}Nt(t,e,s,r)}e=e.child}return e;case 5:return nx(e),t===null&&au(e),s=e.type,n=e.pendingProps,i=t!==null?t.memoizedProps:null,o=n.children,tu(s,n)?o=null:i!==null&&tu(s,i)&&(e.flags|=32),Dx(t,e),Nt(t,e,o,r),e.child;case 6:return t===null&&au(e),null;case 13:return Mx(t,e,r);case 4:return Ah(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=gi(e,null,s,r):Nt(t,e,s,r),e.child;case 11:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:fr(s,n),Np(t,e,s,n,r);case 7:return Nt(t,e,e.pendingProps,r),e.child;case 8:return Nt(t,e,e.pendingProps.children,r),e.child;case 12:return Nt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,n=e.pendingProps,i=e.memoizedProps,o=n.value,Me(Tl,s._currentValue),s._currentValue=o,i!==null)if(kr(i.value,o)){if(i.children===n.children&&!zt.current){e=ns(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=es(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ou(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),ou(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Nt(t,e,n.children,r),e=e.child}return e;case 9:return n=e.type,s=e.pendingProps.children,oi(e,r),n=or(n),s=s(n),e.flags|=1,Nt(t,e,s,r),e.child;case 14:return s=e.type,n=fr(s,e.pendingProps),n=fr(s.type,n),Sp(t,e,s,n,r);case 15:return Cx(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:fr(s,n),cl(t,e),e.tag=1,Ft(s)?(t=!0,Dl(e)):t=!1,oi(e,r),_x(e,s,n),cu(e,s,n,r),hu(null,e,s,!0,t,r);case 19:return Tx(t,e,r);case 22:return Ex(t,e,r)}throw Error(X(156,e.tag))};function Gx(t,e){return w0(t,e)}function Rk(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(t,e,r,s){return new Rk(t,e,r,s)}function Jh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Lk(t){if(typeof t=="function")return Jh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ph)return 11;if(t===mh)return 14}return 2}function Os(t,e){var r=t.alternate;return r===null?(r=sr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function hl(t,e,r,s,n,i){var o=2;if(s=t,typeof t=="function")Jh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qn:return un(r.children,n,i,e);case fh:o=8,n|=8;break;case Od:return t=sr(12,r,e,n|2),t.elementType=Od,t.lanes=i,t;case Ad:return t=sr(13,r,e,n),t.elementType=Ad,t.lanes=i,t;case Id:return t=sr(19,r,e,n),t.elementType=Id,t.lanes=i,t;case n0:return yc(r,n,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case r0:o=10;break e;case s0:o=9;break e;case ph:o=11;break e;case mh:o=14;break e;case ms:o=16,s=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=sr(o,r,e,n),e.elementType=t,e.type=s,e.lanes=i,e}function un(t,e,r,s){return t=sr(7,t,s,e),t.lanes=r,t}function yc(t,e,r,s){return t=sr(22,t,s,e),t.elementType=n0,t.lanes=r,t.stateNode={isHidden:!1},t}function od(t,e,r){return t=sr(6,t,null,e),t.lanes=r,t}function ld(t,e,r){return e=sr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zk(t,e,r,s,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bc(0),this.expirationTimes=Bc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bc(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Kh(t,e,r,s,n,i,o,l,c){return t=new zk(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=sr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oh(i),t}function Fk(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vn,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function Jx(t){if(!t)return zs;t=t._reactInternals;e:{if(_n(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var r=t.type;if(Ft(r))return J0(t,r,e)}return e}function Kx(t,e,r,s,n,i,o,l,c){return t=Kh(r,s,!0,t,n,i,o,l,c),t.context=Jx(null),r=t.current,s=St(),n=Ts(r),i=es(s,n),i.callback=e??null,Ps(r,i,n),t.current.lanes=n,eo(t,n,s),$t(t,s),t}function vc(t,e,r,s){var n=e.current,i=St(),o=Ts(n);return r=Jx(r),e.context===null?e.context=r:e.pendingContext=r,e=es(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Ps(n,e,o),t!==null&&(vr(t,n,o,i),al(t,n,o)),o}function Bl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Xh(t,e){zp(t,e),(t=t.alternate)&&zp(t,e)}function $k(){return null}var Xx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qh(t){this._internalRoot=t}bc.prototype.render=Qh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));vc(t,e,null,null)};bc.prototype.unmount=Qh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yn(function(){vc(null,t,null,null)}),e[rs]=null}};function bc(t){this._internalRoot=t}bc.prototype.unstable_scheduleHydration=function(t){if(t){var e=E0();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ys.length&&e!==0&&e<ys[r].priority;r++);ys.splice(r,0,t),r===0&&P0(t)}};function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fp(){}function Uk(t,e,r,s,n){if(n){if(typeof s=="function"){var i=s;s=function(){var d=Bl(o);i.call(d)}}var o=Kx(e,s,t,0,null,!1,!1,"",Fp);return t._reactRootContainer=o,t[rs]=o.current,Ta(t.nodeType===8?t.parentNode:t),yn(),o}for(;n=t.lastChild;)t.removeChild(n);if(typeof s=="function"){var l=s;s=function(){var d=Bl(c);l.call(d)}}var c=Kh(t,0,!1,null,null,!1,!1,"",Fp);return t._reactRootContainer=c,t[rs]=c.current,Ta(t.nodeType===8?t.parentNode:t),yn(function(){vc(e,c,r,s)}),c}function kc(t,e,r,s,n){var i=r._reactRootContainer;if(i){var o=i;if(typeof n=="function"){var l=n;n=function(){var c=Bl(o);l.call(c)}}vc(e,o,t,n)}else o=Uk(r,e,t,n,s);return Bl(o)}S0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Xi(e.pendingLanes);r!==0&&(yh(e,r|1),$t(e,Ye()),!(xe&6)&&(vi=Ye()+500,Bs()))}break;case 13:yn(function(){var s=ss(t,1);if(s!==null){var n=St();vr(s,t,1,n)}}),Xh(t,1)}};vh=function(t){if(t.tag===13){var e=ss(t,134217728);if(e!==null){var r=St();vr(e,t,134217728,r)}Xh(t,134217728)}};C0=function(t){if(t.tag===13){var e=Ts(t),r=ss(t,e);if(r!==null){var s=St();vr(r,t,e,s)}Xh(t,e)}};E0=function(){return Ne};D0=function(t,e){var r=Ne;try{return Ne=t,e()}finally{Ne=r}};Vd=function(t,e,r){switch(e){case"input":if(zd(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var n=hc(s);if(!n)throw Error(X(90));a0(s),zd(s,n)}}}break;case"textarea":l0(t,r);break;case"select":e=r.value,e!=null&&si(t,!!r.multiple,e,!1)}};m0=qh;g0=yn;var Bk={usingClientEntryPoint:!1,Events:[ro,Kn,hc,f0,p0,qh]},Fi={findFiberByHostInstance:nn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hk={bundleType:Fi.bundleType,version:Fi.version,rendererPackageName:Fi.rendererPackageName,rendererConfig:Fi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:os.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=v0(t),t===null?null:t.stateNode},findFiberByHostInstance:Fi.findFiberByHostInstance||$k,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mo.isDisabled&&Mo.supportsFiber)try{lc=Mo.inject(Hk),Ar=Mo}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bk;Jt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zh(e))throw Error(X(200));return Fk(t,e,null,r)};Jt.createRoot=function(t,e){if(!Zh(t))throw Error(X(299));var r=!1,s="",n=Xx;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=Kh(t,1,!1,null,null,r,!1,s,n),t[rs]=e.current,Ta(t.nodeType===8?t.parentNode:t),new Qh(e)};Jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=v0(e),t=t===null?null:t.stateNode,t};Jt.flushSync=function(t){return yn(t)};Jt.hydrate=function(t,e,r){if(!wc(e))throw Error(X(200));return kc(null,t,e,!0,r)};Jt.hydrateRoot=function(t,e,r){if(!Zh(t))throw Error(X(405));var s=r!=null&&r.hydratedSources||null,n=!1,i="",o=Xx;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Kx(e,null,t,1,r??null,n,!1,i,o),t[rs]=e.current,Ta(t),s)for(t=0;t<s.length;t++)r=s[t],n=r._getVersion,n=n(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,n]:e.mutableSourceEagerHydrationData.push(r,n);return new bc(e)};Jt.render=function(t,e,r){if(!wc(e))throw Error(X(200));return kc(null,t,e,!1,r)};Jt.unmountComponentAtNode=function(t){if(!wc(t))throw Error(X(40));return t._reactRootContainer?(yn(function(){kc(null,null,t,!1,function(){t._reactRootContainer=null,t[rs]=null})}),!0):!1};Jt.unstable_batchedUpdates=qh;Jt.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!wc(r))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return kc(t,e,r,!1,s)};Jt.version="18.3.1-next-f1338f8080-20240426";function Qx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qx)}catch(t){console.error(t)}}Qx(),Qg.exports=Jt;var Wk=Qg.exports,Zx,$p=Wk;Zx=$p.createRoot,$p.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),se=(t,e)=>{const r=M.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>M.createElement("svg",{ref:u,...Vk,width:n,height:n,stroke:s,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${qk(t)}`,l].join(" "),...d},[...e.map(([h,f])=>M.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=se("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=se("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=se("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=se("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=se("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=se("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=se("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=se("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=se("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=se("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=se("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=se("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=se("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=se("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=se("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=se("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=se("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=se("Headset",[["path",{d:"M3 11h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5Zm0 0a9 9 0 1 1 18 0m0 0v5a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3Z",key:"12oyoe"}],["path",{d:"M21 16v2a4 4 0 0 1-4 4h-5",key:"1x7m43"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=se("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=se("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=se("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=se("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=se("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=se("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=se("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=se("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=se("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=se("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=se("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=se("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=se("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=se("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=se("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=se("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=se("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=se("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=se("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=se("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=se("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=se("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var ly={exports:{}};(function(t,e){(function(r,s){t.exports=s(r)})(typeof bt<"u"?bt:window||bt.window||bt.global,function(r){var s={},n="iziToast";document.querySelector("body");var i=!!/Mobi/.test(navigator.userAgent),o=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),l=typeof InstallTrigger<"u",c="ontouchstart"in document.documentElement,d=["bottomRight","bottomLeft","bottomCenter","topRight","topLeft","topCenter","center"],u={info:{color:"blue",icon:"ico-info"},success:{color:"green",icon:"ico-success"},warning:{color:"orange",icon:"ico-warning"},error:{color:"red",icon:"ico-error"},question:{color:"yellow",icon:"ico-question"}},h=568,f={};s.children={};var p={id:null,class:"",title:"",titleColor:"",titleSize:"",titleLineHeight:"",message:"",messageColor:"",messageSize:"",messageLineHeight:"",backgroundColor:"",theme:"light",color:"",icon:"",iconText:"",iconColor:"",iconUrl:null,image:"",imageWidth:50,maxWidth:null,zindex:null,layout:1,balloon:!1,close:!0,closeOnEscape:!1,closeOnClick:!1,displayMode:0,position:"bottomRight",target:"",targetFirst:!0,timeout:5e3,rtl:!1,animateInside:!0,drag:!0,pauseOnHover:!0,resetOnHover:!1,progressBar:!0,progressBarColor:"",progressBarEasing:"linear",overlay:!1,overlayClose:!1,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInUp",transitionOut:"fadeOut",transitionInMobile:"fadeInUp",transitionOutMobile:"fadeOutDown",buttons:{},inputs:{},onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){}};if("remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof window.CustomEvent!="function"){var v=function(_,N){N=N||{bubbles:!1,cancelable:!1,detail:void 0};var b=document.createEvent("CustomEvent");return b.initCustomEvent(_,N.bubbles,N.cancelable,N.detail),b};v.prototype=window.Event.prototype,window.CustomEvent=v}var g=function(_,N,b){if(Object.prototype.toString.call(_)==="[object Object]")for(var k in _)Object.prototype.hasOwnProperty.call(_,k)&&N.call(b,_[k],k,_);else if(_)for(var I=0,T=_.length;I<T;I++)N.call(b,_[I],I,_)},j=function(_,N){var b={};return g(_,function(k,I){b[I]=_[I]}),g(N,function(k,I){b[I]=N[I]}),b},y=function(_){var N=document.createDocumentFragment(),b=document.createElement("div");for(b.innerHTML=_;b.firstChild;)N.appendChild(b.firstChild);return N},m=function(_){var N=btoa(encodeURIComponent(_));return N.replace(/=/g,"")},x=function(_){return _.substring(0,1)=="#"||_.substring(0,3)=="rgb"||_.substring(0,3)=="hsl"},w=function(_){try{return btoa(atob(_))==_}catch{return!1}},C=function(){return{move:function(_,N,b,k){var I,T=.3,O=180;k!==0&&(_.classList.add(n+"-dragged"),_.style.transform="translateX("+k+"px)",k>0?(I=(O-k)/O,I<T&&N.hide(j(b,{transitionOut:"fadeOutRight",transitionOutMobile:"fadeOutRight"}),_,"drag")):(I=(O+k)/O,I<T&&N.hide(j(b,{transitionOut:"fadeOutLeft",transitionOutMobile:"fadeOutLeft"}),_,"drag")),_.style.opacity=I,I<T&&((o||l)&&(_.style.left=k+"px"),_.parentNode.style.opacity=T,this.stopMoving(_,null)))},startMoving:function(_,N,b,k){k=k||window.event;var I=c?k.touches[0].clientX:k.clientX,T=_.style.transform.replace("px)","");T=T.replace("translateX(","");var O=I-T;b.transitionIn&&_.classList.remove(b.transitionIn),b.transitionInMobile&&_.classList.remove(b.transitionInMobile),_.style.transition="",c?document.ontouchmove=function($){$.preventDefault(),$=$||window.event;var V=$.touches[0].clientX,R=V-O;C.move(_,N,b,R)}:document.onmousemove=function($){$.preventDefault(),$=$||window.event;var V=$.clientX,R=V-O;C.move(_,N,b,R)}},stopMoving:function(_,N){c?document.ontouchmove=function(){}:document.onmousemove=function(){},_.style.opacity="",_.style.transform="",_.classList.contains(n+"-dragged")&&(_.classList.remove(n+"-dragged"),_.style.transition="transform 0.4s ease, opacity 0.4s ease",setTimeout(function(){_.style.transition=""},400))}}}();return s.setSetting=function(_,N,b){s.children[_][N]=b},s.getSetting=function(_,N){return s.children[_][N]},s.destroy=function(){g(document.querySelectorAll("."+n+"-overlay"),function(_,N){_.remove()}),g(document.querySelectorAll("."+n+"-wrapper"),function(_,N){_.remove()}),g(document.querySelectorAll("."+n),function(_,N){_.remove()}),this.children={},document.removeEventListener(n+"-opened",{},!1),document.removeEventListener(n+"-opening",{},!1),document.removeEventListener(n+"-closing",{},!1),document.removeEventListener(n+"-closed",{},!1),document.removeEventListener("keyup",{},!1),f={}},s.settings=function(_){s.destroy(),f=_,p=j(p,_||{})},g(u,function(_,N){s[N]=function(b){var k=j(f,b||{});k=j(_,k||{}),this.show(k)}}),s.progress=function(_,N,b){var k=this,I=N.getAttribute("data-iziToast-ref"),T=j(this.children[I],_||{}),O=N.querySelector("."+n+"-progressbar div");return{start:function(){typeof T.time.REMAINING>"u"&&(N.classList.remove(n+"-reseted"),O!==null&&(O.style.transition="width "+T.timeout+"ms "+T.progressBarEasing,O.style.width="0%"),T.time.START=new Date().getTime(),T.time.END=T.time.START+T.timeout,T.time.TIMER=setTimeout(function(){clearTimeout(T.time.TIMER),N.classList.contains(n+"-closing")||(k.hide(T,N,"timeout"),typeof b=="function"&&b.apply(k))},T.timeout),k.setSetting(I,"time",T.time))},pause:function(){if(typeof T.time.START<"u"&&!N.classList.contains(n+"-paused")&&!N.classList.contains(n+"-reseted")){if(N.classList.add(n+"-paused"),T.time.REMAINING=T.time.END-new Date().getTime(),clearTimeout(T.time.TIMER),k.setSetting(I,"time",T.time),O!==null){var $=window.getComputedStyle(O),V=$.getPropertyValue("width");O.style.transition="none",O.style.width=V}typeof b=="function"&&setTimeout(function(){b.apply(k)},10)}},resume:function(){typeof T.time.REMAINING<"u"?(N.classList.remove(n+"-paused"),O!==null&&(O.style.transition="width "+T.time.REMAINING+"ms "+T.progressBarEasing,O.style.width="0%"),T.time.END=new Date().getTime()+T.time.REMAINING,T.time.TIMER=setTimeout(function(){clearTimeout(T.time.TIMER),N.classList.contains(n+"-closing")||(k.hide(T,N,"timeout"),typeof b=="function"&&b.apply(k))},T.time.REMAINING),k.setSetting(I,"time",T.time)):this.start()},reset:function(){clearTimeout(T.time.TIMER),delete T.time.REMAINING,k.setSetting(I,"time",T.time),N.classList.add(n+"-reseted"),N.classList.remove(n+"-paused"),O!==null&&(O.style.transition="none",O.style.width="100%"),typeof b=="function"&&setTimeout(function(){b.apply(k)},10)}}},s.hide=function(_,N,b){typeof N!="object"&&(N=document.querySelector(N));var k=this,I=j(this.children[N.getAttribute("data-iziToast-ref")],_||{});I.closedBy=b||null,delete I.time.REMAINING,N.classList.add(n+"-closing"),function(){var $=document.querySelector("."+n+"-overlay");if($!==null){var V=$.getAttribute("data-iziToast-ref");V=V.split(",");var R=V.indexOf(String(I.ref));R!==-1&&V.splice(R,1),$.setAttribute("data-iziToast-ref",V.join()),V.length===0&&($.classList.remove("fadeIn"),$.classList.add("fadeOut"),setTimeout(function(){$.remove()},700))}}(),I.transitionIn&&N.classList.remove(I.transitionIn),I.transitionInMobile&&N.classList.remove(I.transitionInMobile),i||window.innerWidth<=h?I.transitionOutMobile&&N.classList.add(I.transitionOutMobile):I.transitionOut&&N.classList.add(I.transitionOut);var T=N.parentNode.offsetHeight;N.parentNode.style.height=T+"px",N.style.pointerEvents="none",(!i||window.innerWidth>h)&&(N.parentNode.style.transitionDelay="0.2s");try{var O=new CustomEvent(n+"-closing",{detail:I,bubbles:!0,cancelable:!0});document.dispatchEvent(O)}catch($){console.warn($)}setTimeout(function(){N.parentNode.style.height="0px",N.parentNode.style.overflow="",setTimeout(function(){delete k.children[I.ref],N.parentNode.remove();try{var $=new CustomEvent(n+"-closed",{detail:I,bubbles:!0,cancelable:!0});document.dispatchEvent($)}catch(V){console.warn(V)}typeof I.onClosed<"u"&&I.onClosed.apply(null,[I,N,b])},1e3)},200),typeof I.onClosing<"u"&&I.onClosing.apply(null,[I,N,b])},s.show=function(_){var N=this,b=j(f,_||{});if(b=j(p,b),b.time={},b.id===null&&(b.id=m(b.title+b.message+b.color)),b.displayMode===1||b.displayMode=="once")try{if(document.querySelectorAll("."+n+"#"+b.id).length>0)return!1}catch{console.warn("["+n+"] Could not find an element with this selector: #"+b.id+". Try to set an valid id.")}if(b.displayMode===2||b.displayMode=="replace")try{g(document.querySelectorAll("."+n+"#"+b.id),function(O,$){N.hide(b,O,"replaced")})}catch{console.warn("["+n+"] Could not find an element with this selector: #"+b.id+". Try to set an valid id.")}b.ref=new Date().getTime()+Math.floor(Math.random()*1e7+1),s.children[b.ref]=b;var k={body:document.querySelector("body"),overlay:document.createElement("div"),toast:document.createElement("div"),toastBody:document.createElement("div"),toastTexts:document.createElement("div"),toastCapsule:document.createElement("div"),cover:document.createElement("div"),buttons:document.createElement("div"),inputs:document.createElement("div"),icon:b.iconUrl?document.createElement("img"):document.createElement("i"),wrapper:null};k.toast.setAttribute("data-iziToast-ref",b.ref),k.toast.appendChild(k.toastBody),k.toastCapsule.appendChild(k.toast),function(){if(k.toast.classList.add(n),k.toast.classList.add(n+"-opening"),k.toastCapsule.classList.add(n+"-capsule"),k.toastBody.classList.add(n+"-body"),k.toastTexts.classList.add(n+"-texts"),i||window.innerWidth<=h?b.transitionInMobile&&k.toast.classList.add(b.transitionInMobile):b.transitionIn&&k.toast.classList.add(b.transitionIn),b.class){var O=b.class.split(" ");g(O,function($,V){k.toast.classList.add($)})}b.id&&(k.toast.id=b.id),b.rtl&&(k.toast.classList.add(n+"-rtl"),k.toast.setAttribute("dir","rtl")),b.layout>1&&k.toast.classList.add(n+"-layout"+b.layout),b.balloon&&k.toast.classList.add(n+"-balloon"),b.maxWidth&&(isNaN(b.maxWidth)?k.toast.style.maxWidth=b.maxWidth:k.toast.style.maxWidth=b.maxWidth+"px"),(b.theme!==""||b.theme!=="light")&&k.toast.classList.add(n+"-theme-"+b.theme),b.color&&(x(b.color)?k.toast.style.background=b.color:k.toast.classList.add(n+"-color-"+b.color)),b.backgroundColor&&(k.toast.style.background=b.backgroundColor,b.balloon&&(k.toast.style.borderColor=b.backgroundColor))}(),function(){b.image&&(k.cover.classList.add(n+"-cover"),k.cover.style.width=b.imageWidth+"px",w(b.image.replace(/ /g,""))?k.cover.style.backgroundImage="url(data:image/png;base64,"+b.image.replace(/ /g,"")+")":k.cover.style.backgroundImage="url("+b.image+")",b.rtl?k.toastBody.style.marginRight=b.imageWidth+10+"px":k.toastBody.style.marginLeft=b.imageWidth+10+"px",k.toast.appendChild(k.cover))}(),function(){b.close?(k.buttonClose=document.createElement("button"),k.buttonClose.type="button",k.buttonClose.classList.add(n+"-close"),k.buttonClose.addEventListener("click",function(O){O.target,N.hide(b,k.toast,"button")}),k.toast.appendChild(k.buttonClose)):b.rtl?k.toast.style.paddingLeft="18px":k.toast.style.paddingRight="18px"}(),function(){b.progressBar&&(k.progressBar=document.createElement("div"),k.progressBarDiv=document.createElement("div"),k.progressBar.classList.add(n+"-progressbar"),k.progressBarDiv.style.background=b.progressBarColor,k.progressBar.appendChild(k.progressBarDiv),k.toast.appendChild(k.progressBar)),b.timeout&&(b.pauseOnHover&&!b.resetOnHover&&(k.toast.addEventListener("mouseenter",function(O){N.progress(b,k.toast).pause()}),k.toast.addEventListener("mouseleave",function(O){N.progress(b,k.toast).resume()})),b.resetOnHover&&(k.toast.addEventListener("mouseenter",function(O){N.progress(b,k.toast).reset()}),k.toast.addEventListener("mouseleave",function(O){N.progress(b,k.toast).start()})))}(),function(){b.iconUrl?(k.icon.setAttribute("class",n+"-icon"),k.icon.setAttribute("src",b.iconUrl)):b.icon&&(k.icon.setAttribute("class",n+"-icon "+b.icon),b.iconText&&k.icon.appendChild(document.createTextNode(b.iconText)),b.iconColor&&(k.icon.style.color=b.iconColor)),(b.icon||b.iconUrl)&&(b.rtl?k.toastBody.style.paddingRight="33px":k.toastBody.style.paddingLeft="33px",k.toastBody.appendChild(k.icon))}(),function(){b.title.length>0&&(k.strong=document.createElement("strong"),k.strong.classList.add(n+"-title"),k.strong.appendChild(y(b.title)),k.toastTexts.appendChild(k.strong),b.titleColor&&(k.strong.style.color=b.titleColor),b.titleSize&&(isNaN(b.titleSize)?k.strong.style.fontSize=b.titleSize:k.strong.style.fontSize=b.titleSize+"px"),b.titleLineHeight&&(isNaN(b.titleSize)?k.strong.style.lineHeight=b.titleLineHeight:k.strong.style.lineHeight=b.titleLineHeight+"px")),b.message.length>0&&(k.p=document.createElement("p"),k.p.classList.add(n+"-message"),k.p.appendChild(y(b.message)),k.toastTexts.appendChild(k.p),b.messageColor&&(k.p.style.color=b.messageColor),b.messageSize&&(isNaN(b.titleSize)?k.p.style.fontSize=b.messageSize:k.p.style.fontSize=b.messageSize+"px"),b.messageLineHeight&&(isNaN(b.titleSize)?k.p.style.lineHeight=b.messageLineHeight:k.p.style.lineHeight=b.messageLineHeight+"px")),b.title.length>0&&b.message.length>0&&(b.rtl?k.strong.style.marginLeft="10px":b.layout!==2&&!b.rtl&&(k.strong.style.marginRight="10px"))}(),k.toastBody.appendChild(k.toastTexts);var I;(function(){b.inputs.length>0&&(k.inputs.classList.add(n+"-inputs"),g(b.inputs,function(O,$){k.inputs.appendChild(y(O[0])),I=k.inputs.childNodes,I[$].classList.add(n+"-inputs-child"),O[3]&&setTimeout(function(){I[$].focus()},300),I[$].addEventListener(O[1],function(V){var R=O[2];return R(N,k.toast,this,V)})}),k.toastBody.appendChild(k.inputs))})(),function(){b.buttons.length>0&&(k.buttons.classList.add(n+"-buttons"),g(b.buttons,function(O,$){k.buttons.appendChild(y(O[0]));var V=k.buttons.childNodes;V[$].classList.add(n+"-buttons-child"),O[2]&&setTimeout(function(){V[$].focus()},300),V[$].addEventListener("click",function(R){R.preventDefault();var J=O[1];return J(N,k.toast,this,R,I)})})),k.toastBody.appendChild(k.buttons)}(),b.message.length>0&&(b.inputs.length>0||b.buttons.length>0)&&(k.p.style.marginBottom="0"),(b.inputs.length>0||b.buttons.length>0)&&(b.rtl?k.toastTexts.style.marginLeft="10px":k.toastTexts.style.marginRight="10px",b.inputs.length>0&&b.buttons.length>0&&(b.rtl?k.inputs.style.marginLeft="8px":k.inputs.style.marginRight="8px")),function(){k.toastCapsule.style.visibility="hidden",setTimeout(function(){var O=k.toast.offsetHeight,$=k.toast.currentStyle||window.getComputedStyle(k.toast),V=$.marginTop;V=V.split("px"),V=parseInt(V[0]);var R=$.marginBottom;R=R.split("px"),R=parseInt(R[0]),k.toastCapsule.style.visibility="",k.toastCapsule.style.height=O+R+V+"px",setTimeout(function(){k.toastCapsule.style.height="auto",b.target&&(k.toastCapsule.style.overflow="visible")},500),b.timeout&&N.progress(b,k.toast).start()},100)}(),function(){var O=b.position;if(b.target)k.wrapper=document.querySelector(b.target),k.wrapper.classList.add(n+"-target"),b.targetFirst?k.wrapper.insertBefore(k.toastCapsule,k.wrapper.firstChild):k.wrapper.appendChild(k.toastCapsule);else{if(d.indexOf(b.position)==-1){console.warn("["+n+`] Incorrect position.
It can be  `+d);return}i||window.innerWidth<=h?b.position=="bottomLeft"||b.position=="bottomRight"||b.position=="bottomCenter"?O=n+"-wrapper-bottomCenter":b.position=="topLeft"||b.position=="topRight"||b.position=="topCenter"?O=n+"-wrapper-topCenter":O=n+"-wrapper-center":O=n+"-wrapper-"+O,k.wrapper=document.querySelector("."+n+"-wrapper."+O),k.wrapper||(k.wrapper=document.createElement("div"),k.wrapper.classList.add(n+"-wrapper"),k.wrapper.classList.add(O),document.body.appendChild(k.wrapper)),b.position=="topLeft"||b.position=="topCenter"||b.position=="topRight"?k.wrapper.insertBefore(k.toastCapsule,k.wrapper.firstChild):k.wrapper.appendChild(k.toastCapsule)}isNaN(b.zindex)?console.warn("["+n+"] Invalid zIndex."):k.wrapper.style.zIndex=b.zindex}(),function(){b.overlay&&(document.querySelector("."+n+"-overlay.fadeIn")!==null?(k.overlay=document.querySelector("."+n+"-overlay"),k.overlay.setAttribute("data-iziToast-ref",k.overlay.getAttribute("data-iziToast-ref")+","+b.ref),!isNaN(b.zindex)&&b.zindex!==null&&(k.overlay.style.zIndex=b.zindex-1)):(k.overlay.classList.add(n+"-overlay"),k.overlay.classList.add("fadeIn"),k.overlay.style.background=b.overlayColor,k.overlay.setAttribute("data-iziToast-ref",b.ref),!isNaN(b.zindex)&&b.zindex!==null&&(k.overlay.style.zIndex=b.zindex-1),document.querySelector("body").appendChild(k.overlay)),b.overlayClose?(k.overlay.removeEventListener("click",{}),k.overlay.addEventListener("click",function(O){N.hide(b,k.toast,"overlay")})):k.overlay.removeEventListener("click",{}))}(),function(){if(b.animateInside){k.toast.classList.add(n+"-animateInside");var O=[200,100,300];(b.transitionIn=="bounceInLeft"||b.transitionIn=="bounceInRight")&&(O=[400,200,400]),b.title.length>0&&setTimeout(function(){k.strong.classList.add("slideIn")},O[0]),b.message.length>0&&setTimeout(function(){k.p.classList.add("slideIn")},O[1]),(b.icon||b.iconUrl)&&setTimeout(function(){k.icon.classList.add("revealIn")},O[2]);var $=150;b.buttons.length>0&&k.buttons&&setTimeout(function(){g(k.buttons.childNodes,function(V,R){setTimeout(function(){V.classList.add("revealIn")},$),$=$+150})},b.inputs.length>0?150:0),b.inputs.length>0&&k.inputs&&($=150,g(k.inputs.childNodes,function(V,R){setTimeout(function(){V.classList.add("revealIn")},$),$=$+150}))}}(),b.onOpening.apply(null,[b,k.toast]);try{var T=new CustomEvent(n+"-opening",{detail:b,bubbles:!0,cancelable:!0});document.dispatchEvent(T)}catch(O){console.warn(O)}setTimeout(function(){k.toast.classList.remove(n+"-opening"),k.toast.classList.add(n+"-opened");try{var O=new CustomEvent(n+"-opened",{detail:b,bubbles:!0,cancelable:!0});document.dispatchEvent(O)}catch($){console.warn($)}b.onOpened.apply(null,[b,k.toast])},1e3),b.drag&&(c?(k.toast.addEventListener("touchstart",function(O){C.startMoving(this,N,b,O)},!1),k.toast.addEventListener("touchend",function(O){C.stopMoving(this,O)},!1)):(k.toast.addEventListener("mousedown",function(O){O.preventDefault(),C.startMoving(this,N,b,O)},!1),k.toast.addEventListener("mouseup",function(O){O.preventDefault(),C.stopMoving(this,O)},!1))),b.closeOnEscape&&document.addEventListener("keyup",function(O){O=O||window.event,O.keyCode==27&&N.hide(b,k.toast,"esc")}),b.closeOnClick&&k.toast.addEventListener("click",function(O){N.hide(b,k.toast,"toast")}),N.toast=k.toast},s})})(ly);var f1=ly.exports;const Xe=nh(f1);Xe.settings({timeout:4e3,resetOnHover:!0,transitionIn:"flipInX",transitionOut:"flipOutX",position:"topRight"});const Z={success:(t,e)=>{Xe.success({title:e||"Success",message:t,color:"green",icon:"ico-success"})},error:(t,e)=>{Xe.error({title:e||"Error",message:t,color:"red",icon:"ico-error"})},warning:(t,e)=>{Xe.warning({title:e||"Warning",message:t,color:"yellow",icon:"ico-warning"})},info:(t,e)=>{Xe.info({title:e||"Info",message:t,color:"blue",icon:"ico-info"})},download:t=>{Xe.success({title:"Download Started",message:`${t} download has begun`,color:"green",icon:"ico-success",timeout:3e3})},upload:t=>{Xe.success({title:"Upload Complete",message:`${t} has been uploaded successfully`,color:"green",icon:"ico-success"})},login:t=>{Xe.success({title:"Welcome Back",message:`Hello ${t}! You've successfully signed in.`,color:"green",icon:"ico-success",timeout:3e3})},logout:()=>{Xe.info({title:"Goodbye",message:"You have been signed out successfully",color:"blue",icon:"ico-info",timeout:2e3})},userCreated:(t,e)=>{Xe.success({title:"User Created",message:`${t} has been created and credentials sent to ${e}`,color:"green",icon:"ico-success",timeout:5e3})},themeChanged:t=>{Xe.info({title:"Theme Changed",message:`Switched to ${t} mode`,color:"blue",icon:"ico-info",timeout:2e3})},fileDeleted:t=>{Xe.warning({title:"File Deleted",message:`${t} has been removed`,color:"yellow",icon:"ico-warning",timeout:3e3})},userBlocked:t=>{Xe.warning({title:"User Blocked",message:`${t} has been temporarily blocked`,color:"yellow",icon:"ico-warning"})},userUnblocked:t=>{Xe.success({title:"User Unblocked",message:`${t} has been unblocked`,color:"green",icon:"ico-success"})},gradeUpdated:(t,e)=>{Xe.info({title:"Grade Updated",message:`${t} is now ${e}`,color:"blue",icon:"ico-info"})},patchNotePublished:t=>{Xe.success({title:"Patch Note Published",message:`Version ${t} patch notes are now live`,color:"green",icon:"ico-success"})},guestSession:t=>{Xe.info({title:"Guest Session",message:`Welcome! Your session expires in ${t}`,color:"blue",icon:"ico-info",timeout:5e3})},sessionExpiring:()=>{Xe.warning({title:"Session Expiring",message:"Your guest session will expire in 1 minute",color:"yellow",icon:"ico-warning",timeout:1e4})},ipBlocked:t=>{Xe.warning({title:"IP Protection Active",message:`Your IP has been blocked for ${t} to prevent guest session abuse`,color:"yellow",icon:"ico-warning",timeout:8e3})},ipUnblocked:t=>{Xe.success({title:"IP Unblocked",message:`IP address ${t} has been manually unblocked`,color:"green",icon:"ico-success"})}},cy=M.createContext(void 0),dy=()=>{const t=M.useContext(cy);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},p1=({children:t})=>{const[e,r]=M.useState(()=>{const n=localStorage.getItem("prodomo_theme");return n!==null?JSON.parse(n):window.matchMedia("(prefers-color-scheme: dark)").matches});M.useEffect(()=>{localStorage.setItem("prodomo_theme",JSON.stringify(e));const n=document.documentElement;e?n.classList.add("dark"):n.classList.remove("dark"),console.log("ThemeContext: Theme applied:",e?"dark":"light")},[e]),M.useEffect(()=>{const n=window.matchMedia("(prefers-color-scheme: dark)"),i=o=>{localStorage.getItem("prodomo_theme")===null&&r(o.matches)};return n.addEventListener?n.addEventListener("change",i):n.addListener(i),()=>{n.removeEventListener?n.removeEventListener("change",i):n.removeListener(i)}},[]);const s=()=>{console.log("ThemeContext: Toggling theme from",e?"dark":"light","to",e?"light":"dark"),r(!e),setTimeout(()=>{Z.themeChanged(e?"light":"dark")},100)};return a.jsx(cy.Provider,{value:{isDark:e,toggleTheme:s},children:t})},uy="prodomo_ip_records",hy="prodomo_guest_sessions",fy="prodomo_ip_protection_enabled",m1=3*24*60*60*1e3,Wp=3,Vt=()=>{try{const t=localStorage.getItem(fy);return t===null?!0:t==="true"}catch(t){return console.error("Failed to check IP protection status:",t),!0}},g1=t=>{try{localStorage.setItem(fy,t.toString()),console.log(`IP Protection ${t?"enabled":"disabled"}`)}catch(e){console.error("Failed to set IP protection status:",e)}},rf=async()=>{try{const t=document.createElement("canvas"),e=t.getContext("2d");if(e){e.textBaseline="top",e.font="14px Arial",e.fillText("IP fingerprint",2,2);const r=t.toDataURL();let s=0;for(let c=0;c<r.length;c++){const d=r.charCodeAt(c);s=(s<<5)-s+d,s=s&s}const n=Math.abs(s)%256,i=Math.abs(s>>8)%256,o=Math.abs(s>>16)%256,l=Math.abs(s>>24)%256;return`${n}.${i}.${o}.${l}`}return"192.168.1."+(Math.floor(Math.random()*254)+1)}catch(t){return console.error("Failed to get IP:",t),"192.168.1."+(Math.floor(Math.random()*254)+1)}},Cn=()=>{try{const t=localStorage.getItem(uy);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to load IP records:",t),[]}},io=t=>{try{localStorage.setItem(uy,JSON.stringify(t))}catch(e){console.error("Failed to save IP records:",e)}},bi=()=>{try{const t=localStorage.getItem(hy);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to load guest sessions:",t),[]}},Vl=t=>{try{localStorage.setItem(hy,JSON.stringify(t))}catch(e){console.error("Failed to save guest sessions:",e)}},ql=t=>{if(!Vt())return{blocked:!1};const e=Cn(),r=e.find(o=>o.ip===t);if(!r)return{blocked:!1};if(r.blockedUntil){const o=new Date(r.blockedUntil),l=new Date;if(l<o)return{blocked:!0,reason:`IP blocked due to guest session abuse. ${Math.ceil((o.getTime()-l.getTime())/36e5)} hours remaining.`,unblockTime:r.blockedUntil};r.blockedUntil=void 0,r.attemptCount=0,io(e)}const s=new Date(Date.now()-24*60*60*1e3);return bi().filter(o=>o.ip===t&&new Date(o.startTime)>s).length>=Wp?{blocked:!0,reason:`Maximum ${Wp} guest sessions per day exceeded. Try again tomorrow.`}:{blocked:!1}},x1=async t=>{try{const e=await rf(),r=navigator.userAgent,s=ql(e);if(s.blocked)return{success:!1,error:s.reason};const n={id:`guest_session_${Date.now()}`,ip:e,userAgent:r,startTime:new Date().toISOString(),expired:!1,userId:t},i=bi();i.push(n),Vl(i);const o=Cn();let l=o.find(c=>c.ip===e);return l?(l.lastGuestSession=new Date().toISOString(),l.attemptCount+=1,l.userAgent=r):(l={ip:e,lastGuestSession:new Date().toISOString(),attemptCount:1,firstAttempt:new Date().toISOString(),userAgent:r,location:"Unknown"},o.push(l)),io(o),console.log(" Guest session registered for IP:",e),{success:!0}}catch(e){return console.error("Failed to register guest session:",e),{success:!1,error:"Failed to register guest session"}}},Vp=async t=>{try{if(!Vt()){const o=bi(),l=o.find(c=>c.userId===t&&!c.expired);l&&(l.expired=!0,l.endTime=new Date().toISOString(),Vl(o));return}const e=await rf(),r=bi(),s=r.find(o=>o.userId===t&&!o.expired);s&&(s.expired=!0,s.endTime=new Date().toISOString(),Vl(r));const n=Cn();let i=n.find(o=>o.ip===e);if(i){const o=new Date(Date.now()+m1);i.blockedUntil=o.toISOString(),i.lastGuestSession=new Date().toISOString(),io(n),console.log(" IP blocked for 3 days:",e,"until:",o.toLocaleString())}}catch(e){console.error("Failed to expire guest session:",e)}},y1=()=>{const t=Cn(),e=bi(),r=new Date,s=t.filter(o=>o.blockedUntil?new Date(o.blockedUntil)>r:!1),n=e.filter(o=>{const l=new Date(o.startTime),c=new Date(r.getTime()-24*60*60*1e3);return l>c}),i=new Set(n.map(o=>o.ip)).size;return{totalTrackedIPs:t.length,blockedIPs:s.length,guestSessionsToday:n.length,uniqueIPsToday:i,records:t.slice(0,10),recentSessions:e.slice(-10),protectionEnabled:Vt()}},py=()=>{try{const t=new Date(Date.now()-2592e6),e=Cn(),r=e.filter(i=>new Date(i.lastGuestSession)>t||i.blockedUntil&&new Date(i.blockedUntil)>new Date);r.length!==e.length&&(io(r),console.log(" Cleaned up",e.length-r.length,"old IP records"));const s=bi(),n=s.filter(i=>new Date(i.startTime)>t);n.length!==s.length&&(Vl(n),console.log(" Cleaned up",s.length-n.length,"old guest sessions"))}catch(t){console.error("Failed to cleanup old records:",t)}},v1=t=>{try{const e=Cn(),r=e.find(s=>s.ip===t);return r?(r.blockedUntil=void 0,r.attemptCount=0,io(e),console.log(" Force unblocked IP:",t),!0):!1}catch(e){return console.error("Failed to force unblock IP:",e),!1}},b1=t=>Cn().find(r=>r.ip===t)||null;class w1{constructor(){this.rateLimits=new Map,this.securityEvents=[],this.ddosMetrics={requestsPerSecond:0,uniqueIPs:0,suspiciousPatterns:0,blockedRequests:0,totalRequests:0},this.configs={login:{windowMs:15*60*1e3,maxRequests:5,blockDuration:30*1e3,enabled:!1},api:{windowMs:60*1e3,maxRequests:100,blockDuration:5*60*1e3,enabled:!0},download:{windowMs:60*1e3,maxRequests:10,blockDuration:10*60*1e3,enabled:!0},guest:{windowMs:24*60*60*1e3,maxRequests:3,blockDuration:24*60*60*1e3,enabled:!0},upload:{windowMs:60*1e3,maxRequests:5,blockDuration:15*60*1e3,enabled:!0},bruteforce:{windowMs:5*60*1e3,maxRequests:10,blockDuration:60*60*1e3,enabled:!0}},this.loadFromStorage(),this.startCleanupInterval(),this.startMetricsCollection()}async getUserIP(){try{const e=[()=>this.getIPFromWebRTC(),()=>this.getIPFromFingerprint(),()=>this.getIPFromHeaders()];for(const r of e)try{const s=await r();if(s&&this.isValidIP(s))return s}catch(s){console.warn("IP detection method failed:",s)}return this.generateConsistentIP()}catch(e){return console.error("Failed to get IP:",e),this.generateConsistentIP()}}async getIPFromWebRTC(){return new Promise((e,r)=>{const s=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});s.createDataChannel(""),s.onicecandidate=n=>{if(n.candidate){const o=n.candidate.candidate.match(/(\d+\.\d+\.\d+\.\d+)/);o&&(s.close(),e(o[1]))}},s.createOffer().then(n=>s.setLocalDescription(n)),setTimeout(()=>{s.close(),r(new Error("WebRTC IP detection timeout"))},3e3)})}async getIPFromFingerprint(){const e=document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("Canvas not supported");r.textBaseline="top",r.font="14px Arial",r.fillText("Security fingerprint",2,2);const s=e.toDataURL(),n=navigator.userAgent,i=`${window.screen.width}x${window.screen.height}`,o=Intl.DateTimeFormat().resolvedOptions().timeZone,l=s+n+i+o;let c=0;for(let p=0;p<l.length;p++){const v=l.charCodeAt(p);c=(c<<5)-c+v,c=c&c}const d=Math.abs(c)%256,u=Math.abs(c>>8)%256,h=Math.abs(c>>16)%256,f=Math.abs(c>>24)%256;return`${d}.${u}.${h}.${f}`}async getIPFromHeaders(){const e={"X-Forwarded-For":"203.0.113."+(Math.floor(Math.random()*254)+1),"X-Real-IP":"198.51.100."+(Math.floor(Math.random()*254)+1)};return e["X-Forwarded-For"]||e["X-Real-IP"]}generateConsistentIP(){const e=localStorage.getItem("security_consistent_ip");if(e)return e;const r=`192.168.1.${Math.floor(Math.random()*254)+1}`;return localStorage.setItem("security_consistent_ip",r),r}isValidIP(e){return/^(\d{1,3}\.){3}\d{1,3}$/.test(e)?e.split(".").map(Number).every(n=>n>=0&&n<=255):!1}toggleRateLimit(e,r){return this.configs[e]?(this.configs[e].enabled=r,this.saveToStorage(),!0):!1}getRateLimitStatus(e){var r;return((r=this.configs[e])==null?void 0:r.enabled)||!1}async checkRateLimit(e,r){const s=r||await this.getUserIP(),n=this.configs[e]||this.configs.api;if(!n.enabled)return{allowed:!0};const i=`${s}:${e}`,o=Date.now();let l=this.rateLimits.get(i);if(l||(l={count:0,firstRequest:o,blocked:!1},this.rateLimits.set(i,l)),l.blocked&&l.blockedUntil&&o<l.blockedUntil){const c=Math.ceil((l.blockedUntil-o)/1e3);return this.logSecurityEvent("rate_limit",s,`Rate limit exceeded for ${e}`,"medium",!0),{allowed:!1,reason:"Rate limit exceeded",retryAfter:c}}return o-l.firstRequest>n.windowMs&&(l.count=0,l.firstRequest=o,l.blocked=!1,l.blockedUntil=void 0),l.count++,l.count>n.maxRequests?(l.blocked=!0,l.blockedUntil=o+n.blockDuration,this.logSecurityEvent("rate_limit",s,`Rate limit exceeded for ${e} (${l.count} requests)`,"high",!0),{allowed:!1,reason:"Rate limit exceeded",retryAfter:Math.ceil(n.blockDuration/1e3)}):(this.rateLimits.set(i,l),this.saveToStorage(),{allowed:!0})}async detectDDoS(){const e=Date.now(),r=e-1e3,s=e-6e4,n=this.securityEvents.filter(f=>new Date(f.timestamp).getTime()>r),i=this.securityEvents.filter(f=>new Date(f.timestamp).getTime()>s),o=n.length,l=new Set(i.map(f=>f.ip)).size,c=this.detectSuspiciousPatterns(i),d=i.filter(f=>f.blocked).length;this.ddosMetrics={requestsPerSecond:o,uniqueIPs:l,suspiciousPatterns:c,blockedRequests:d,totalRequests:i.length};const u=o>50||l<5&&i.length>100||c>10;let h="low";return o>100||c>20?h="critical":o>75||c>15?h="high":(o>50||c>10)&&(h="medium"),u&&(this.logSecurityEvent("ddos_attempt","multiple",`DDoS detected: ${o} req/s`,h,!0),this.activateEmergencyMode()),{isDDoS:u,severity:h,metrics:this.ddosMetrics}}detectSuspiciousPatterns(e){let r=0;const s=e.reduce((i,o)=>(i[o.ip]=(i[o.ip]||0)+1,i),{});Object.values(s).forEach(i=>{i>20&&r++});const n=e.sort((i,o)=>new Date(i.timestamp).getTime()-new Date(o.timestamp).getTime());for(let i=1;i<n.length;i++)new Date(n[i].timestamp).getTime()-new Date(n[i-1].timestamp).getTime()<100&&n[i].ip===n[i-1].ip&&r++;return r}activateEmergencyMode(){console.warn(" EMERGENCY MODE ACTIVATED - DDoS DETECTED"),Object.keys(this.configs).forEach(e=>{this.configs[e].maxRequests=Math.floor(this.configs[e].maxRequests*.1),this.configs[e].blockDuration*=2}),Z.error("DDoS attack detected! Emergency protection activated.","Security Alert"),setTimeout(()=>{this.deactivateEmergencyMode()},10*60*1e3)}deactivateEmergencyMode(){console.log(" Emergency mode deactivated"),this.configs={login:{windowMs:15*60*1e3,maxRequests:5,blockDuration:30*1e3,enabled:!1},api:{windowMs:60*1e3,maxRequests:100,blockDuration:5*60*1e3,enabled:!0},download:{windowMs:60*1e3,maxRequests:10,blockDuration:10*60*1e3,enabled:!0},guest:{windowMs:24*60*60*1e3,maxRequests:3,blockDuration:24*60*60*1e3,enabled:!0},upload:{windowMs:60*1e3,maxRequests:5,blockDuration:15*60*1e3,enabled:!0},bruteforce:{windowMs:5*60*1e3,maxRequests:10,blockDuration:60*60*1e3,enabled:!0}},Z.success("Emergency protection deactivated. Normal operation resumed.","Security Status")}async checkBruteForce(e,r){const s=`bruteforce:${e}:${r}`;return this.checkRateLimit("bruteforce",s)}logSecurityEvent(e,r,s,n,i=!1){const o={id:`sec_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:e,ip:r,timestamp:new Date().toISOString(),details:s,severity:n,blocked:i};this.securityEvents.unshift(o),this.securityEvents.length>1e3&&(this.securityEvents=this.securityEvents.slice(0,1e3)),this.saveToStorage(),console.log(` Security Event [${n.toUpperCase()}]: ${s}`)}getSecurityStats(){const e=Date.now(),r=e-60*60*1e3,s=e-24*60*60*1e3,n=this.securityEvents.filter(o=>new Date(o.timestamp).getTime()>r),i=this.securityEvents.filter(o=>new Date(o.timestamp).getTime()>s);return{totalEvents:this.securityEvents.length,recentEvents:n.length,dailyEvents:i.length,blockedRequests:this.securityEvents.filter(o=>o.blocked).length,criticalEvents:this.securityEvents.filter(o=>o.severity==="critical").length,ddosMetrics:this.ddosMetrics,rateLimitedIPs:Array.from(this.rateLimits.entries()).filter(([o,l])=>l.blocked).map(([o,l])=>({key:o,blockedUntil:l.blockedUntil,count:l.count})),rateLimitConfigs:this.configs}}getSecurityEvents(e=50){return this.securityEvents.slice(0,e)}clearSecurityEvents(){this.securityEvents=[],this.saveToStorage()}unblockIP(e){let r=!1;for(const[s,n]of this.rateLimits.entries())s.startsWith(e+":")&&(n.blocked=!1,n.blockedUntil=void 0,n.count=0,r=!0);return r&&(this.saveToStorage(),this.logSecurityEvent("rate_limit",e,"IP manually unblocked by admin","low",!1)),r}blockIP(e,r=60*60*1e3){const s=Date.now();let n=!1;return Object.keys(this.configs).forEach(i=>{const o=`${e}:${i}`;this.rateLimits.set(o,{count:999,firstRequest:s,blocked:!0,blockedUntil:s+r}),n=!0}),n&&(this.saveToStorage(),this.logSecurityEvent("rate_limit",e,`IP manually blocked by admin for ${r/1e3}s`,"high",!0)),n}saveToStorage(){try{const e={rateLimits:Array.from(this.rateLimits.entries()),securityEvents:this.securityEvents.slice(0,500),ddosMetrics:this.ddosMetrics,configs:this.configs};localStorage.setItem("security_manager_data",JSON.stringify(e))}catch(e){console.error("Failed to save security data:",e)}}loadFromStorage(){try{const e=localStorage.getItem("security_manager_data");if(e){const r=JSON.parse(e);this.rateLimits=new Map(r.rateLimits||[]),this.securityEvents=r.securityEvents||[],this.ddosMetrics=r.ddosMetrics||this.ddosMetrics,r.configs&&Object.keys(r.configs).forEach(s=>{this.configs[s]&&(this.configs[s]={...this.configs[s],...r.configs[s],enabled:r.configs[s].hasOwnProperty("enabled")?r.configs[s].enabled:this.configs[s].enabled})})}}catch(e){console.error("Failed to load security data:",e)}}startCleanupInterval(){setInterval(()=>{const e=Date.now();for(const[s,n]of this.rateLimits.entries())n.blockedUntil&&e>n.blockedUntil&&(n.blocked=!1,n.blockedUntil=void 0),e-n.firstRequest>24*60*60*1e3&&this.rateLimits.delete(s);const r=e-24*60*60*1e3;this.securityEvents=this.securityEvents.filter(s=>new Date(s.timestamp).getTime()>r),this.saveToStorage()},5*60*1e3)}startMetricsCollection(){setInterval(()=>{this.detectDDoS()},1e3)}}const er=new w1,cd=t=>t?t.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim().substring(0,1e3):"",k1="modulepreload",j1=function(t){return"/"+t},qp={},ao=function(e,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(r.map(c=>{if(c=j1(c),c in qp)return;qp[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":k1,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},_1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ao(async()=>{const{default:s}=await Promise.resolve().then(()=>Di);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class sf extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class N1 extends sf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class S1 extends sf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class C1 extends sf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Mu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Mu||(Mu={}));var E1=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};class D1{constructor(e,{headers:r={},customFetch:s,region:n=Mu.Any}={}){this.url=e,this.headers=r,this.region=n,this.fetch=_1(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var s;return E1(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:d}).catch(v=>{throw new N1(v)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new S1(u);if(!u.ok)throw new C1(u);let f=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield u.json():f==="application/octet-stream"?p=yield u.blob():f==="text/event-stream"?p=u:f==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(n){return{data:null,error:n}}})}}var At={},nf={},_c={},oo={},Nc={},Sc={},P1=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},wi=P1();const M1=wi.fetch,my=wi.fetch.bind(wi),gy=wi.Headers,T1=wi.Request,O1=wi.Response,Di=Object.freeze(Object.defineProperty({__proto__:null,Headers:gy,Request:T1,Response:O1,default:my,fetch:M1},Symbol.toStringTag,{value:"Module"})),A1=yb(Di);var Cc={};Object.defineProperty(Cc,"__esModule",{value:!0});let I1=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Cc.default=I1;var xy=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sc,"__esModule",{value:!0});const R1=xy(A1),L1=xy(Cc);let z1=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=R1.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,u=null,h=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),j=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&j&&j.length>1&&(h=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{d=JSON.parse(g),Array.isArray(d)&&i.status===404&&(u=[],d=null,f=200,p="OK")}catch{i.status===404&&g===""?(f=204,p="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,p="OK"),d&&this.shouldThrowOnError)throw new L1.default(d)}return{error:d,data:u,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,r)}returns(){return this}overrideTypes(){return this}};Sc.default=z1;var F1=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nc,"__esModule",{value:!0});const $1=F1(Sc);let U1=class extends $1.default{select(e){let r=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,r,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Nc.default=U1;var B1=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oo,"__esModule",{value:!0});const H1=B1(Nc);let W1=class extends H1.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const s=Array.from(new Set(r)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(e,r,s){return this.url.searchParams.append(e,`not.${r}.${s}`),this}or(e,{foreignTable:r,referencedTable:s=r}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,r,s){return this.url.searchParams.append(e,`${r}.${s}`),this}};oo.default=W1;var V1=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_c,"__esModule",{value:!0});const $i=V1(oo);let q1=class{constructor(e,{headers:r={},schema:s,fetch:n}){this.url=e,this.headers=r,this.schema=s,this.fetch=n}select(e,{head:r=!1,count:s}={}){const n=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new $i.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new $i.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new $i.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),this.headers.Prefer=n.join(","),new $i.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new $i.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};_c.default=q1;var Ec={},Dc={};Object.defineProperty(Dc,"__esModule",{value:!0});Dc.version=void 0;Dc.version="0.0.0-automated";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.DEFAULT_HEADERS=void 0;const Y1=Dc;Ec.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Y1.version}`};var yy=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nf,"__esModule",{value:!0});const G1=yy(_c),J1=yy(oo),K1=Ec;let X1=class vy{constructor(e,{headers:r={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},K1.DEFAULT_HEADERS),r),this.schemaName=s,this.fetch=n}from(e){const r=new URL(`${this.url}/${e}`);return new G1.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new vy(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;s||n?(o=s?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=r);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new J1.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};nf.default=X1;var Pi=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(At,"__esModule",{value:!0});At.PostgrestError=At.PostgrestBuilder=At.PostgrestTransformBuilder=At.PostgrestFilterBuilder=At.PostgrestQueryBuilder=At.PostgrestClient=void 0;const by=Pi(nf);At.PostgrestClient=by.default;const wy=Pi(_c);At.PostgrestQueryBuilder=wy.default;const ky=Pi(oo);At.PostgrestFilterBuilder=ky.default;const jy=Pi(Nc);At.PostgrestTransformBuilder=jy.default;const _y=Pi(Sc);At.PostgrestBuilder=_y.default;const Ny=Pi(Cc);At.PostgrestError=Ny.default;var Q1=At.default={PostgrestClient:by.default,PostgrestQueryBuilder:wy.default,PostgrestFilterBuilder:ky.default,PostgrestTransformBuilder:jy.default,PostgrestBuilder:_y.default,PostgrestError:Ny.default};const{PostgrestClient:Z1,PostgrestQueryBuilder:fD,PostgrestFilterBuilder:pD,PostgrestTransformBuilder:mD,PostgrestBuilder:gD,PostgrestError:xD}=Q1;function e2(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const t2=e2(),r2="2.11.15",s2=`realtime-js/${r2}`,n2="1.0.0",Sy=1e4,i2=1e3;var ma;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ma||(ma={}));var xt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(xt||(xt={}));var mr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(mr||(mr={}));var Tu;(function(t){t.websocket="websocket"})(Tu||(Tu={}));var rn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(rn||(rn={}));class a2{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const n=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+n));o=o+n;const c=s.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Cy{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Pe||(Pe={}));const Yp=(t,e,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=o2(o,t,e,n),i),{})},o2=(t,e,r,s)=>{const n=e.find(l=>l.name===t),i=n==null?void 0:n.type,o=r[t];return i&&!s.includes(i)?Ey(i,o):Ou(o)},Ey=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return u2(e,r)}switch(t){case Pe.bool:return l2(e);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return c2(e);case Pe.json:case Pe.jsonb:return d2(e);case Pe.timestamp:return h2(e);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return Ou(e);default:return Ou(e)}},Ou=t=>t,l2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},c2=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},d2=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},u2=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Ey(e,l))}return t},h2=t=>typeof t=="string"?t.replace(" ","T"):t,Dy=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class dd{constructor(e,r,s={},n=Sy){this.channel=e,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Gp;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Gp||(Gp={}));class ga{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ga.syncState(this.state,n,i,o),this.pendingDiffs.forEach(c=>{this.state=ga.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ga.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,n){const i=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const f=u.map(j=>j.presence_ref),p=h.map(j=>j.presence_ref),v=u.filter(j=>p.indexOf(j.presence_ref)<0),g=h.filter(j=>f.indexOf(j.presence_ref)<0);v.length>0&&(l[d]=v),g.length>0&&(c[d]=g)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},s,n)}static syncDiff(e,r,s,n){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...f)}s(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,n(l,d,c),d.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const n=e[s];return"metas"in n?r[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=n,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jp;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Jp||(Jp={}));var Kp;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Kp||(Kp={}));var Vr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Vr||(Vr={}));class af{constructor(e,r={config:{}},s){this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new dd(this,mr.join,this.params,this.timeout),this.rejoinTimer=new Cy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xt.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mr.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new ga(this),this.broadcastEndpointURL=Dy(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==xt.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(Vr.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Vr.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(Vr.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,v=[];for(let g=0;g<p;g++){const j=f[g],{filter:{event:y,schema:m,table:x,filter:w}}=j,C=u&&u[g];if(C&&C.event===y&&C.schema===m&&C.table===x&&C.filter===w)v.push(Object.assign(Object.assign({},j),{id:C.id}));else{this.unsubscribe(),this.state=xt.errored,e==null||e(Vr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Vr.SUBSCRIBED);return}}).receive("error",u=>{this.state=xt.errored,e==null||e(Vr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Vr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this._on(e,r,s)}async send(e,r={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=xt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new dd(this,mr.leave,{},e),s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),o}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new dd(this,e,r,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=mr;if(s&&[l,c,d,u].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var v,g,j;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((j=(g=p.filter)===null||g===void 0?void 0:g.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(p=>p.callback(f,s)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,g,j,y,m,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const w=p.id,C=(v=p.filter)===null||v===void 0?void 0:v.event;return w&&((g=r.ids)===null||g===void 0?void 0:g.includes(w))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const w=(m=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return w==="*"||w===((x=r==null?void 0:r.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:g,table:j,commit_timestamp:y,type:m,errors:x}=v;f=Object.assign(Object.assign({},{schema:g,table:j,commit_timestamp:y,eventType:m,new:{},old:{},errors:x}),this._getPayloadRecords(v))}p.callback(f,s)})}_isClosed(){return this.state===xt.closed}_isJoined(){return this.state===xt.joined}_isJoining(){return this.state===xt.joining}_isLeaving(){return this.state===xt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const n=e.toLocaleLowerCase(),i={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&af.isEqual(n.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(mr.close,{},e)}_onError(e){this._on(mr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Yp(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Yp(e.columns,e.old_record)),r}}const Xp=()=>{},f2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class p2{constructor(e,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Sy,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xp,this.ref=0,this.logger=Xp,this.conn=null,this.sendBuffer=[],this.serializer=new a2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>ao(async()=>{const{default:c}=await Promise.resolve().then(()=>Di);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Tu.websocket}`,this.httpEndpoint=Dy(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const n=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Cy(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=t2),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:n2}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ma.connecting:return rn.Connecting;case ma.open:return rn.Open;case ma.closing:return rn.Closing;default:return rn.Closed}}isConnected(){return this.connectionState()===rn.Open}channel(e,r={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===s);if(n)return n;{const i=new af(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:s,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const n={access_token:r,version:s2};r&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(mr.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(i2,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:s,event:n,payload:i,ref:o}=r;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(mr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${e}${s}${n}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([f2],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class of extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function nt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class m2 extends of{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Au extends of{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var g2=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const Py=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ao(async()=>{const{default:s}=await Promise.resolve().then(()=>Di);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},x2=()=>g2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ao(()=>Promise.resolve().then(()=>Di),void 0)).Response:Response}),Iu=t=>{if(Array.isArray(t))return t.map(r=>Iu(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=Iu(s)}),e};var En=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const ud=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),y2=(t,e,r)=>En(void 0,void 0,void 0,function*(){const s=yield x2();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{e(new m2(ud(n),t.status||500))}).catch(n=>{e(new Au(ud(n),n))}):e(new Au(ud(t),t))}),v2=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),r))};function lo(t,e,r,s,n,i){return En(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,v2(e,s,n,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>y2(c,l,s))})})}function Yl(t,e,r,s){return En(this,void 0,void 0,function*(){return lo(t,"GET",e,r,s)})}function xs(t,e,r,s,n){return En(this,void 0,void 0,function*(){return lo(t,"POST",e,s,n,r)})}function b2(t,e,r,s,n){return En(this,void 0,void 0,function*(){return lo(t,"PUT",e,s,n,r)})}function w2(t,e,r,s){return En(this,void 0,void 0,function*(){return lo(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function My(t,e,r,s,n){return En(this,void 0,void 0,function*(){return lo(t,"DELETE",e,s,n,r)})}var Mt=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const k2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class j2{constructor(e,r={},s,n){this.url=e,this.headers=r,this.bucketId=s,this.fetch=Py(n)}uploadOrUpdate(e,r,s,n){return Mt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Qp),n);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(nt(i))return{data:null,error:i};throw i}})}upload(e,r,s){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,n){return Mt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:Qp.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(nt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Mt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const i=yield xs(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new of("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}})}update(e,r,s){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return Mt(this,void 0,void 0,function*(){try{return{data:yield xs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}})}copy(e,r,s){return Mt(this,void 0,void 0,function*(){try{return{data:{path:(yield xs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}})}createSignedUrl(e,r,s){return Mt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield xs(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}})}createSignedUrls(e,r,s){return Mt(this,void 0,void 0,function*(){try{const n=yield xs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}})}download(e,r){return Mt(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Yl(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(nt(l))return{data:null,error:l};throw l}})}info(e){return Mt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield Yl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Iu(s),error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}})}exists(e){return Mt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield w2(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(nt(s)&&s instanceof Au){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),n=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(e){return Mt(this,void 0,void 0,function*(){try{return{data:yield My(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}})}list(e,r,s){return Mt(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},k2),r),{prefix:e||""});return{data:yield xs(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const _2="2.7.1",N2={"X-Client-Info":`storage-js/${_2}`};var Ln=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};class S2{constructor(e,r={},s){this.url=e,this.headers=Object.assign(Object.assign({},N2),r),this.fetch=Py(s)}listBuckets(){return Ln(this,void 0,void 0,function*(){try{return{data:yield Yl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(nt(e))return{data:null,error:e};throw e}})}getBucket(e){return Ln(this,void 0,void 0,function*(){try{return{data:yield Yl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Ln(this,void 0,void 0,function*(){try{return{data:yield xs(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return Ln(this,void 0,void 0,function*(){try{return{data:yield b2(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Ln(this,void 0,void 0,function*(){try{return{data:yield xs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ln(this,void 0,void 0,function*(){try{return{data:yield My(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}})}}class C2 extends S2{constructor(e,r={},s){super(e,r,s)}from(e){return new j2(this.url,this.headers,e,this.fetch)}}const E2="2.50.2";let Zi="";typeof Deno<"u"?Zi="deno":typeof document<"u"?Zi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zi="react-native":Zi="node";const D2={"X-Client-Info":`supabase-js-${Zi}/${E2}`},P2={headers:D2},M2={schema:"public"},T2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},O2={};var A2=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const I2=t=>{let e;return t?e=t:typeof fetch>"u"?e=my:e=fetch,(...r)=>e(...r)},R2=()=>typeof Headers>"u"?gy:Headers,L2=(t,e,r)=>{const s=I2(r),n=R2();return(i,o)=>A2(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new n(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:d}))})};var z2=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};function F2(t){return t.endsWith("/")?t:t+"/"}function $2(t,e){var r,s;const{db:n,auth:i,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>z2(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const Ty="2.70.0",Wn=30*1e3,Ru=3,hd=Ru*Wn,U2="http://localhost:9999",B2="supabase.auth.token",H2={"X-Client-Info":`gotrue-js/${Ty}`},Lu="X-Supabase-Api-Version",Oy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},W2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V2=6e5;class lf extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function de(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class q2 extends lf{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Y2(t){return de(t)&&t.name==="AuthApiError"}class Ay extends lf{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Hs extends lf{constructor(e,r,s,n){super(e,s,n),this.name=r,this.status=s}}class ps extends Hs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function G2(t){return de(t)&&t.name==="AuthSessionMissingError"}class Oo extends Hs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ao extends Hs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Io extends Hs{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function J2(t){return de(t)&&t.name==="AuthImplicitGrantRedirectError"}class Zp extends Hs{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zu extends Hs{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function fd(t){return de(t)&&t.name==="AuthRetryableFetchError"}class em extends Hs{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class xa extends Hs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Gl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tm=` 	
\r=`.split(""),K2=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<tm.length;e+=1)t[tm[e].charCodeAt(0)]=-2;for(let e=0;e<Gl.length;e+=1)t[Gl[e].charCodeAt(0)]=e;return t})();function rm(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Gl[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Gl[s]),e.queuedBits-=6}}function Iy(t,e,r){const s=K2[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function sm(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{Z2(o,s,r)};for(let o=0;o<t.length;o+=1)Iy(t.charCodeAt(o),n,i);return e.join("")}function X2(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Q2(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}X2(s,e)}}function Z2(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ej(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)Iy(t.charCodeAt(n),r,s);return new Uint8Array(e)}function tj(t){const e=[];return Q2(t,r=>e.push(r)),new Uint8Array(e)}function rj(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};return t.forEach(n=>rm(n,r,s)),rm(null,r,s),e.join("")}function sj(t){return Math.round(Date.now()/1e3)+t}function nj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const hr=()=>typeof window<"u"&&typeof document<"u",qs={tested:!1,writable:!1},ya=()=>{if(!hr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qs.tested)return qs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),qs.tested=!0,qs.writable=!0}catch{qs.tested=!0,qs.writable=!1}return qs.writable};function ij(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return r.searchParams.forEach((s,n)=>{e[n]=s}),e}const Ry=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ao(async()=>{const{default:s}=await Promise.resolve().then(()=>Di);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},aj=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ly=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Ro=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Lo=async(t,e)=>{await t.removeItem(e)};class Pc{constructor(){this.promise=new Pc.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Pc.promiseConstructor=Promise;function pd(t){const e=t.split(".");if(e.length!==3)throw new xa("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!W2.test(e[s]))throw new xa("JWT not in base64url format");return{header:JSON.parse(sm(e[0])),payload:JSON.parse(sm(e[1])),signature:ej(e[2]),raw:{header:e[0],payload:e[1]}}}async function oj(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function lj(t,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function cj(t){return("0"+t.toString(16)).substr(-2)}function dj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,cj).join("")}async function uj(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function hj(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await uj(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zn(t,e,r=!1){const s=dj();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await Ly(t,`${e}-code-verifier`,n);const i=await hj(s);return[i,s===i?"plain":"s256"]}const fj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pj(t){const e=t.headers.get(Lu);if(!e||!e.match(fj))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function mj(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function gj(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fn(t){if(!xj.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var yj=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};const Qs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),vj=[502,503,504];async function nm(t){var e;if(!aj(t))throw new zu(Qs(t),0);if(vj.includes(t.status))throw new zu(Qs(t),t.status);let r;try{r=await t.json()}catch(i){throw new Ay(Qs(i),i)}let s;const n=pj(t);if(n&&n.getTime()>=Oy["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new em(Qs(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new ps}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new em(Qs(r),t.status,r.weak_password.reasons);throw new q2(Qs(r),t.status||500,s)}const bj=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function me(t,e,r,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[Lu]||(i[Lu]=Oy["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await wj(t,e,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function wj(t,e,r,s,n,i){const o=bj(e,s,n,i);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new zu(Qs(c),0)}if(l.ok||await nm(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await nm(c)}}function Ur(t){var e;let r=null;Nj(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=sj(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function im(t){const e=Ur(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function bs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function kj(t){return{data:t,error:null}}function jj(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i}=t,o=yj(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function _j(t){return t}function Nj(t){return t.access_token&&t.refresh_token&&t.expires_in}const md=["global","local","others"];var Sj=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};class Cj{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=Ry(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=md[0]){if(md.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${md.join(", ")}`);try{return await me(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:bs})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=Sj(e,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:jj,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(de(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:bs})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,n,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:_j});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(v.split(";")[1].split("=")[1]);d[`${j}Page`]=g}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(de(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Fn(e);try{return await me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:bs})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Fn(e);try{return await me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:bs})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){Fn(e);try{return await me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:bs})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Fn(e.userId);try{const{data:r,error:s}=await me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(de(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Fn(e.userId),Fn(e.id);try{return{data:await me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}}const Ej={getItem:t=>ya()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ya()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ya()&&globalThis.localStorage.removeItem(t)}};function am(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Dj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const $n={debug:!!(globalThis&&ya()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zy extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Pj extends zy{}async function Mj(t,e,r){$n.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),$n.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){$n.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await r()}finally{$n.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw $n.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Pj(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if($n.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Dj();const Tj={url:U2,storageKey:B2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:H2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function om(t,e,r){return await r()}class Ba{constructor(e){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ba.nextInstanceID,Ba.nextInstanceID+=1,this.instanceID>0&&hr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Tj),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Cj({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Ry(n.fetch),this.lock=n.lock||om,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:hr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Mj:this.lock=om,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:ya()?this.storage=Ej:(this.memoryStorage={},this.storage=am(this.memoryStorage)):(this.memoryStorage={},this.storage=am(this.memoryStorage)),hr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ty}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=ij(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),hr()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),J2(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return de(r)?{error:r}:{error:new Ay("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,n;try{const i=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Ur}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(de(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,s,n;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await zn(this.storage,this.storageKey)),i=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},xform:Ur})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ur})}else throw new Ao("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(de(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:im})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:im})}else throw new Ao("You must provide either an email or phone number and a password");const{data:s,error:n}=r;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Oo}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(de(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,s,n,i,o,l,c,d,u,h,f,p;let v,g;if("message"in e)v=e.message,g=e.signature;else{const{chain:j,wallet:y,statement:m,options:x}=e;let w;if(hr())if(typeof y=="object")w=y;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))w=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const C=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const _=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),m?{statement:m}:null));let N;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")N=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)N=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)v=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${C.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(n=(s=x==null?void 0:x.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((d=x==null?void 0:x.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(u=x==null?void 0:x.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const _=await w.signMessage(new TextEncoder().encode(v),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=_}}try{const{data:j,error:y}=await me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:rj(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ur});if(y)throw y;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Oo}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:y})}catch(j){if(de(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const r=await Ro(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{const{data:i,error:o}=await me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Ur});if(await Lo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Oo}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(de(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:s,token:n,access_token:i,nonce:o}=e,l=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ur}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Oo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(de(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,n,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await zn(this.storage,this.storageKey));const{error:h}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Ao("You must provide either an email or phone number.")}catch(l){if(de(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,s;try{let n,i;"options"in e&&(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Ur});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var r,s,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await zn(this.storage,this.storageKey)),await me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:kj})}catch(i){if(de(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new ps;const{error:n}=await me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(de(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:o}=await me(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:o,error:l}=await me(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ao("You must provide either an email or phone number and a type")}catch(r){if(de(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Ro(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<hd:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:bs}):await this._useSession(async r=>{var s,n,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ps}:await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:bs})})}catch(r){if(de(r))return G2(r)&&(await this._removeSession(),await Lo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new ps;const o=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await zn(this.storage,this.storageKey));const{data:d,error:u}=await me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:bs});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ps;const r=Date.now()/1e3;let s=r,n=!0,i=null;const{payload:o}=pd(e.access_token);if(o.exp&&(s=o.exp,n=s<=r),n){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(de(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new ps;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(de(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!hr())throw new Io("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Io(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Zp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Io("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Zp("No code detected.");const{data:m,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new Io("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const p=f-u;p*1e3<=Wn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=f-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,u);const{data:g,error:j}=await this._getUser(i);if(j)throw j;const y={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(s){if(de(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Ro(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return{error:i};const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Y2(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Lo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=nj(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,n;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await zn(this.storage,this.storageKey,!0));try{return await me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(de(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:s,error:n}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await me(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return hr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(de(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:o}=r;if(o)throw o;return await me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await lj(async n=>(n>0&&await oj(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ur})),(n,i)=>{const o=200*Math.pow(2,n);return i&&fd(i)&&Date.now()+o-s<Wn})}catch(s){if(this._debug(r,"error",s),de(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),hr()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Ro(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const n=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<hd;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${hd}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),fd(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new ps;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Pc;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ps;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),de(i)){const o={session:null,error:i};return fd(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,r,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ly(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Lo(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&hr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Wn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Wn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Wn}ms, refresh threshold is ${Ru} ticks`),n<=Ru&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof zy)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!hr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await zn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?{data:null,error:i}:await me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await me(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(de(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?{data:null,error:i}:await me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(de(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(e==null?void 0:e.factors)||[],n=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=pd(n.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(r=n.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(o=>o.kid===e);if(s||(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+V2>Date.now()))return s;const{data:n,error:i}=await me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new xa("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find(o=>o.kid===e),!s)throw new xa("No matching signing key found in JWKS");return s}async getClaims(e,r={keys:[]}){try{let s=e;if(!s){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};s=p.session.access_token}const{header:n,payload:i,signature:o,raw:{header:l,payload:c}}=pd(s);if(mj(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:i,header:n,signature:o},error:null}}const d=gj(n.alg),u=await this.fetchJwk(n.kid,r),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,tj(`${l}.${c}`)))throw new xa("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}}}Ba.nextInstanceID=0;const Oj=Ba;class Aj extends Oj{constructor(e){super(e)}}var Ij=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};class Rj{constructor(e,r,s){var n,i,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=F2(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:M2,realtime:O2,auth:Object.assign(Object.assign({},T2),{storageKey:d}),global:P2},h=$2(s??{},u);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=L2(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Z1(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new D1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new C2(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Ij(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,storageKey:i,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Aj({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new p2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Lj=(t,e,r)=>new Rj(t,e,r),Fy="https://nsauxespetsxavgmsexh.supabase.co",$y="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5zYXV4ZXNwZXRzeGF2Z21zZXhoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEyMDk3MjMsImV4cCI6MjA2Njc4NTcyM30.k9920R_uqAV4zNYwGcHHUHDjsNTjSaIlYUnMoCtCgig";console.log("Supabase URL:",Fy);console.log("Supabase Key exists:",!!$y);const he=Lj(Fy,$y,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1}}),zj=async()=>{try{console.log("Checking Supabase database...");const{data:t,error:e}=await he.from("users").select("id").limit(1);if(e)return console.error("Error checking users table:",e),!1;if(t&&t.length>0)return console.log("Database already has data"),!0;console.log("Database needs initialization, creating sample data...");const r=[{id:"11111111-1111-1111-1111-111111111111",name:"Admin User",email:"admin@prodomo.local",grade:"Admin",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1,admin_notes:"System administrator account"},{id:"22222222-2222-2222-2222-222222222222",name:"V4 User",email:"v4@prodomo.local",grade:"V4",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:5,is_guest:!1,is_blocked:!1,admin_notes:"Standard V4 user account"},{id:"33333333-3333-3333-3333-333333333333",name:"V5 User",email:"v5@prodomo.local",grade:"V5",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:12,is_guest:!1,is_blocked:!1,admin_notes:"Advanced V5 user account"},{id:"44444444-4444-4444-4444-444444444444",name:"Support User",email:"support@prodomo.local",grade:"Support",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:3,is_guest:!1,is_blocked:!1,admin_notes:"Support team member with bug management access"}],{error:s}=await he.from("users").insert(r);return s?(console.error("Error inserting default users:",s),!1):(console.log(" Database initialized with default users"),!0)}catch(t){return console.error("Failed to initialize database:",t),!1}},Uy=M.createContext(void 0),pt=()=>{const t=M.useContext(Uy);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Fj=({children:t})=>{const[e,r]=M.useState(null),[s,n]=M.useState(!1),[i,o]=M.useState(null),[l,c]=M.useState(null),[d,u]=M.useState(0),h=["Guest","V4","V5","Support","Admin"];M.useEffect(()=>{py(),(async()=>{try{const m=localStorage.getItem("prodomo_current_user");if(m){const C=JSON.parse(m);if(C.is_guest&&C.guest_expires_at){const _=new Date(C.guest_expires_at).getTime();if(new Date().getTime()>_){localStorage.removeItem("prodomo_current_user");return}}r(C),console.log("AuthContext: Restored user session from localStorage:",C.name),await f(C);return}const{data:{session:x},error:w}=await he.auth.getSession();if(w){console.error("Error checking session:",w);return}if(x){const{data:C,error:_}=await he.from("users").select("*").eq("id",x.user.id);if(_){console.error("Error fetching user data:",_);return}C&&C.length>0&&(r(C[0]),localStorage.setItem("prodomo_current_user",JSON.stringify(C[0])),console.log("AuthContext: Restored user session from Supabase:",C[0].name))}}catch(m){console.error("AuthContext: Failed to check session:",m)}})()},[]),M.useEffect(()=>{let y;return e!=null&&e.is_guest&&e.guest_expires_at?y=setInterval(()=>{const m=new Date(e.guest_expires_at).getTime(),x=new Date().getTime(),w=Math.max(0,m-x);c(w),w<=6e4&&w>59e3&&Z.sessionExpiring(),w<=0&&(console.log("AuthContext: Guest session expired"),Vt()&&Vp(e.id),g())},1e3):c(null),()=>{y&&clearInterval(y)}},[e]);const f=async y=>{try{const{data:m,error:x}=await he.from("users").select("id").eq("id",y.id);if(x){console.error("Error checking if user exists:",x);return}if(!m||m.length===0){const{error:w}=await he.from("users").insert({id:y.id,name:y.name,email:y.email,grade:y.grade,join_date:y.join_date,last_active:y.last_active,total_downloads:y.total_downloads,is_guest:y.is_guest||!1,guest_expires_at:y.guest_expires_at||null,is_blocked:y.is_blocked||!1,blocked_until:y.blocked_until||null,admin_notes:y.admin_notes||null});w?console.error("Error creating user in database:",w):console.log("User created in database:",y.name)}else{const{error:w}=await he.from("users").update({last_active:new Date().toISOString()}).eq("id",y.id);w&&console.error("Error updating user last_active:",w)}}catch(m){console.error("Error ensuring user exists in database:",m)}},p=async(y,m,x)=>{try{if(er.getRateLimitStatus("login")){const I=await er.checkRateLimit("login");if(!I.allowed)throw new Error(`Rate limit exceeded. Please try again in ${I.retryAfter} seconds.`)}console.log("AuthContext: Sign in attempt for:",y),n(!0),o(null);const C=cd(y),_=cd(m),N=x?cd(x):void 0;if((C.includes("admin")||N)&&N!=="T0KEN")throw u(I=>I+1),new Error("Invalid admin token");let k=null;if(C==="admin@prodomo.local"&&_==="admin123")k={id:"11111111-1111-1111-1111-111111111111",name:"Admin User",email:"admin@prodomo.local",grade:"Admin",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1};else if(C==="v4@prodomo.local"&&_==="v4pass")k={id:"22222222-2222-2222-2222-222222222222",name:"V4 User",email:"v4@prodomo.local",grade:"V4",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1};else if(C==="v5@prodomo.local"&&_==="v5pass")k={id:"33333333-3333-3333-3333-333333333333",name:"V5 User",email:"v5@prodomo.local",grade:"V5",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1};else if(C==="support@prodomo.local"&&_==="support123")k={id:"44444444-4444-4444-4444-444444444444",name:"Support User",email:"support@prodomo.local",grade:"Support",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1};else throw u(I=>I+1),new Error("Invalid credentials");if(!k)throw new Error("User not found");await f(k),localStorage.setItem("prodomo_current_user",JSON.stringify(k)),r(k),u(0),o(null),Z.login(k.name),console.log("AuthContext: Sign in successful")}catch(w){if(console.error("AuthContext: Sign in error:",w),o(w instanceof Error?w.message:"Failed to sign in"),d>=5&&er.getRateLimitStatus("login")){const C=await er.getUserIP();er.blockIP(C,15*60*1e3),Z.error("Too many failed login attempts. Your IP has been temporarily blocked.","Security Alert"),u(0)}throw w}finally{n(!1)}},v=async()=>{try{const y=await er.checkRateLimit("guest");console.log("AuthContext: Creating guest session"),n(!0),o(null);const m=await er.getUserIP(),x=ql(m);if(x.blocked)throw new Error(x.reason||"IP is blocked from creating guest sessions");const w=crypto.randomUUID(),C=new Date(Date.now()+5*60*1e3),_={id:w,name:"Guest User",email:`${w}@temp.local`,grade:"Guest",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!0,guest_expires_at:C.toISOString(),is_blocked:!1},N=await x1(w);if(!N.success)throw new Error(N.error||"Failed to create guest session");await f(_);try{const b="prodomo_users",k=localStorage.getItem(b),I=k?JSON.parse(k):[];I.push(_),localStorage.setItem(b,JSON.stringify(I)),localStorage.setItem("prodomo_current_user",JSON.stringify(_)),console.log("Guest user stored in localStorage")}catch(b){console.error("Failed to store guest user in localStorage:",b)}r(_),o(null),Z.guestSession("5 minutes"),Vt()?Z.info("Your IP will be blocked for 3 days after this session expires","IP Protection Active"):Z.info("IP protection is currently disabled","Protection Status"),console.log("AuthContext: Guest session created with IP protection status:",Vt()?"enabled":"disabled")}catch(y){throw console.error("AuthContext: Guest sign in error:",y),o(y instanceof Error?y.message:"Failed to create guest session"),y instanceof Error&&(y.message.includes("blocked")||y.message.includes("exceeded"))&&Z.error(y.message,"Access Restricted"),y}finally{n(!1)}},g=async()=>{try{if(console.log("AuthContext: Signing out user"),e!=null&&e.is_guest){Vt()?(await Vp(e.id),Z.warning("Guest session ended. Your IP is now blocked for 3 days.","IP Protection Applied")):Z.info("Guest session ended.","Session Expired");try{await he.from("users").delete().eq("id",e.id),console.log("Guest user removed from database")}catch(y){console.error("Failed to delete guest user from database:",y)}try{const y="prodomo_users",m=localStorage.getItem(y);if(m){const w=JSON.parse(m).filter(C=>C.id!==e.id);localStorage.setItem(y,JSON.stringify(w))}}catch(y){console.error("Failed to delete guest user from localStorage:",y)}}else Z.logout();localStorage.removeItem("prodomo_current_user");try{await he.auth.signOut()}catch(y){console.error("Error signing out from Supabase:",y)}r(null),c(null),o(null),console.log("AuthContext: Sign out complete")}catch(y){console.error("AuthContext: Error signing out:",y)}},j=y=>{if(!e)return!1;if(y==="Support"&&e.grade==="Support"||e.grade==="Admin"||e.grade==="Support"&&(y==="V4"||y==="V5"||y==="Guest"))return!0;const m=h.indexOf(e.grade),x=h.indexOf(y);return m>=x};return a.jsx(Uy.Provider,{value:{user:e,loading:s,error:i,signIn:p,signInAsGuest:v,signOut:g,isAuthenticated:!!e,hasAccess:j,timeRemaining:l},children:t})},By=()=>{const{user:t}=pt(),[e,r]=M.useState([]),[s,n]=M.useState(0),i=()=>`prodomo_notifications_${(t==null?void 0:t.id)||"guest"}`;M.useEffect(()=>{if(t){const p=localStorage.getItem(i());if(p)try{const v=JSON.parse(p);r(v),n(v.filter(g=>!g.read).length)}catch(v){console.error("Failed to parse notifications:",v)}}},[t]);const o=p=>{t&&(localStorage.setItem(i(),JSON.stringify(p)),r(p),n(p.filter(v=>!v.read).length))},l=p=>{const v={...p,id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,created_at:new Date().toISOString(),read:!1},g=[v,...e].slice(0,50);o(g),console.log("Notification added:",v)};return{notifications:e,unreadCount:s,addNotification:l,markAsRead:p=>{const v=e.map(g=>g.id===p?{...g,read:!0}:g);o(v)},markAllAsRead:()=>{const p=e.map(v=>({...v,read:!0}));o(p)},removeNotification:p=>{const v=e.filter(g=>g.id!==p);o(v)},clearAll:()=>{o([])},addBugStatusNotification:(p,v,g,j,y)=>{if((t==null?void 0:t.id)!==y)return;let m="",x="info";switch(g){case"in-progress":m=`Your bug report "${p}" is now being worked on by our team.`,x="info";break;case"resolved":m=`Great news! Your bug report "${p}" has been resolved.`,x="success";break;case"closed":m=`Your bug report "${p}" has been closed.`,x="info";break;default:m=`Your bug report "${p}" status changed from ${v} to ${g}.`,x="info"}l({title:"Bug Report Update",message:m,type:x,related_id:j,action_url:"/bug-report"})}}},$j=()=>{const{notifications:t,unreadCount:e,markAsRead:r,markAllAsRead:s,removeNotification:n,clearAll:i}=By(),[o,l]=M.useState(!1),c=M.useRef(null),d=M.useRef(null);M.useEffect(()=>{const p=v=>{c.current&&!c.current.contains(v.target)&&l(!1)};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[]);const u=p=>{switch(p){case"success":return a.jsx(dt,{size:16,className:"text-emerald-500"});case"warning":return a.jsx(Xr,{size:16,className:"text-amber-500"});case"error":return a.jsx(h1,{size:16,className:"text-red-500"});default:return a.jsx(t1,{size:16,className:"text-blue-500"})}},h=p=>{const v=new Date(p),j=Math.floor((new Date().getTime()-v.getTime())/1e3);return j<60?`${j}s ago`:j<3600?`${Math.floor(j/60)}m ago`:j<86400?`${Math.floor(j/3600)}h ago`:`${Math.floor(j/86400)}d ago`},f=p=>{p.read||r(p.id),p.action_url&&console.log("Navigate to:",p.action_url)};return a.jsxs("div",{className:"relative",ref:c,children:[a.jsxs("button",{ref:d,onClick:()=>l(!o),className:"relative p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[a.jsx(vn,{size:18}),e>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium animate-pulse",children:e>9?"9+":e})]}),o&&a.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-96 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-[100] max-h-96 overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notifications"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[e>0&&a.jsx("button",{onClick:s,className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200 rounded",title:"Mark all as read",children:a.jsx(Gk,{size:16})}),t.length>0&&a.jsx("button",{onClick:i,className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200 rounded",title:"Clear all",children:a.jsx(Ut,{size:16})}),a.jsx("button",{onClick:()=>l(!1),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 rounded",children:a.jsx(_e,{size:16})})]})]}),e>0&&a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e," unread notification",e!==1?"s":""]})]}),a.jsx("div",{className:"max-h-80 overflow-y-auto",children:t.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(vn,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No notifications"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You're all caught up! "})]}):a.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(p=>a.jsx("div",{className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 cursor-pointer relative group ${p.read?"":"bg-blue-50 dark:bg-blue-900/10 border-l-4 border-blue-500"}`,onClick:()=>f(p),children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:u(p.type)}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 pr-2",children:[a.jsx("p",{className:`text-sm font-medium ${p.read?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:p.title}),a.jsx("p",{className:`text-sm mt-1 break-words ${p.read?"text-gray-500 dark:text-gray-400":"text-gray-700 dark:text-gray-300"}`,children:p.message}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:h(p.created_at)})]}),a.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 ml-2",children:[!p.read&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),a.jsx("button",{onClick:v=>{v.stopPropagation(),n(p.id)},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200 rounded opacity-0 group-hover:opacity-100",children:a.jsx(_e,{size:12})})]})]})})]})},p.id))})}),t.length>0&&a.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:a.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400",children:"Notifications are stored locally and will persist across sessions"})})]})]})},Uj=({activeSection:t,setActiveSection:e})=>{const{isDark:r,toggleTheme:s}=dy(),{user:n,hasAccess:i,signOut:o,timeRemaining:l}=pt(),[c,d]=M.useState(!1),[u,h]=M.useState(!1),f=M.useRef(null),p=[{id:"dashboard",label:"Dashboard",icon:e1,requiresAccess:"Guest"},{id:"downloads",label:"Downloads",icon:ht,requiresAccess:"Guest"},{id:"documentation",label:"Documentation",icon:_u,requiresAccess:"Guest"},{id:"patch-notes",label:"Patch Notes",icon:br,requiresAccess:"Guest"},{id:"bug-report",label:"Bug Reports",icon:Gr,requiresAccess:"V4"},{id:"file-manager",label:"File Manager",icon:sy,requiresAccess:"Admin"},{id:"bug-management",label:"Bug Management",icon:Gr,requiresAccess:["Admin","Support"]},{id:"analytics",label:"Analytics",icon:ey,requiresAccess:"Admin"},{id:"user-management",label:"User Management",icon:wr,requiresAccess:"Admin"},{id:"activity-logs",label:"Activity Logs",icon:at,requiresAccess:"Admin"},{id:"ip-protection",label:"IP Protection",icon:Qr,requiresAccess:"Admin"}];M.useEffect(()=>{const _=N=>{f.current&&!f.current.contains(N.target)&&h(!1)};return document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[]);const v=_=>{switch(_){case"Admin":return"text-red-500 bg-red-100 dark:bg-red-900/20";case"Support":return"text-amber-500 bg-amber-100 dark:bg-amber-900/20";case"V5":return"text-purple-500 bg-purple-100 dark:bg-purple-900/20";case"V4":return"text-blue-500 bg-blue-100 dark:bg-blue-900/20";default:return"text-gray-500 bg-gray-100 dark:bg-gray-800"}},g=_=>{const N=Math.floor(_/6e4),b=Math.floor(_%6e4/1e3);return`${N}:${b.toString().padStart(2,"0")}`},j=async()=>{console.log("Sidebar: Sign out clicked"),h(!1);try{await o()}catch(_){console.error("Sidebar: Error signing out:",_)}},y=()=>{console.log("Sidebar: Theme toggle clicked"),s()},m=_=>{console.log("Sidebar: Navigation clicked:",_),e(_),window.innerWidth<1024&&d(!0)},x=()=>{console.log("Sidebar: User profile clicked"),e("profile"),h(!1),window.innerWidth<1024&&d(!0)},w=()=>{console.log("Sidebar: Settings clicked"),e("settings"),h(!1),window.innerWidth<1024&&d(!0)},C=_=>Array.isArray(_)?_.some(N=>i(N)):i(_);return n?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>d(!c),className:"lg:hidden fixed top-4 left-4 z-50 p-2 rounded-lg bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700",children:c?a.jsx(n1,{size:20,className:"text-gray-600 dark:text-gray-300"}):a.jsx(_e,{size:20,className:"text-gray-600 dark:text-gray-300"})}),a.jsx("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-white dark:bg-gray-800 shadow-xl transform transition-transform duration-300 ease-in-out border-r border-gray-200 dark:border-gray-700 ${c?"-translate-x-full lg:translate-x-0":"translate-x-0"}`,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:a.jsx(bn,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Prodomo"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Server Dashboard"})]})]})}),a.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"relative",ref:f,children:[a.jsxs("button",{onClick:()=>h(!u),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 group",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold",children:n.name.charAt(0)})}),a.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-emerald-500 border-2 border-white dark:border-gray-800 rounded-full"})]}),a.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-200",children:[n.name,n.is_guest&&a.jsx("span",{className:"ml-1 text-xs text-blue-600 dark:text-blue-400",children:"(Guest)"})]}),a.jsx("div",{className:"flex flex-wrap items-center gap-2",children:n.grade==="Support"?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:`text-xs px-2 py-1 rounded-full flex items-center ${v("V4")}`,children:[a.jsx(Ce,{size:10,className:"mr-1"}),"V4"]}),a.jsxs("span",{className:`text-xs px-2 py-1 rounded-full flex items-center ${v("Support")}`,children:[a.jsx(As,{size:10,className:"mr-1"}),"Support"]})]}):a.jsxs("span",{className:`text-xs px-2 py-1 rounded-full flex items-center ${v(n.grade)}`,children:[a.jsx(Ce,{size:10,className:"mr-1"}),n.grade]})}),n.is_guest&&l&&a.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[a.jsx(Wt,{size:12,className:"text-amber-500"}),a.jsx("span",{className:"text-xs text-amber-600 dark:text-amber-400",children:g(l)})]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{onClick:_=>_.stopPropagation(),children:a.jsx($j,{})}),a.jsx(Nu,{size:16,className:`text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-all duration-200 ${u?"rotate-180":""}`})]})]}),u&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-[70] overflow-hidden",children:[a.jsxs("button",{onClick:x,className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[a.jsx(as,{size:16,className:"text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"View Profile"})]}),!n.is_guest&&a.jsxs("button",{onClick:w,className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[a.jsx(ef,{size:16,className:"text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Settings"})]}),a.jsxs("button",{onClick:y,className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[r?a.jsx(ay,{size:16,className:"text-amber-400"}):a.jsx(iy,{size:16,className:"text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r?"Light Mode":"Dark Mode"})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700",children:a.jsxs("button",{onClick:j,className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors duration-200",children:[a.jsx(ny,{size:16,className:"text-red-500"}),a.jsx("span",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:"Sign Out"})]})})]})]})}),a.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:p.map(_=>{if(!C(_.requiresAccess))return null;const N=t===_.id,b=_.icon;return a.jsxs("button",{onClick:()=>m(_.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-all duration-200 ${N?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border-r-2 border-blue-600":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[a.jsx(b,{size:20}),a.jsx("span",{className:"font-medium",children:_.label})]},_.id)})})]})}),!c&&a.jsx("div",{className:"lg:hidden fixed inset-0 z-30 bg-black bg-opacity-50",onClick:()=>d(!0)})]}):null},Xt=()=>{const[t,e]=M.useState(!1),[r,s]=M.useState(null),[n,i]=M.useState(!1);M.useEffect(()=>{(async()=>{try{const E=await zj();i(E),E||(console.error("Failed to initialize database"),s("Failed to connect to database"))}catch(E){console.error("Database initialization error:",E),s("Database initialization error")}})()},[]);const o=()=>{try{const A=[{id:"11111111-1111-1111-1111-111111111111",name:"Admin User",email:"admin@prodomo.local",grade:"Admin",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1,admin_notes:"System administrator account"},{id:"22222222-2222-2222-2222-222222222222",name:"V4 User",email:"v4@prodomo.local",grade:"V4",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:5,is_guest:!1,is_blocked:!1,admin_notes:"Standard V4 user account"},{id:"33333333-3333-3333-3333-333333333333",name:"V5 User",email:"v5@prodomo.local",grade:"V5",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:12,is_guest:!1,is_blocked:!1,admin_notes:"Advanced V5 user account"},{id:"44444444-4444-4444-4444-444444444444",name:"Support User",email:"support@prodomo.local",grade:"Support",join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:3,is_guest:!1,is_blocked:!1,admin_notes:"Support team member with bug management access"}];localStorage.setItem("prodomo_users",JSON.stringify(A));const E=[{id:crypto.randomUUID(),name:"Prodomo Server",version:"2.1.4",description:"Latest stable release of Prodomo Server with enhanced security features and performance improvements.",file_url:"https://example.com/download/prodomo-server-2.1.4.zip",file_size:52428800,file_type:"server",min_grade:"V4",status:"active",download_count:1247,changelog:["Enhanced security protocols","Improved performance by 25%","Fixed memory leak issues","Added new configuration options","Updated dependencies"],created_by:"11111111-1111-1111-1111-111111111111",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:crypto.randomUUID(),name:"Prodomo Server Beta",version:"2.2.0-beta",description:"Beta version with experimental features. Use at your own risk in production environments.",file_url:"https://example.com/download/prodomo-server-2.2.0-beta.zip",file_size:55574528,file_type:"server",min_grade:"V5",status:"beta",download_count:89,changelog:["New experimental API endpoints","Advanced caching mechanisms","Improved logging system","Beta WebSocket support"],created_by:"11111111-1111-1111-1111-111111111111",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:crypto.randomUUID(),name:"Security Plugin",version:"1.0.2",description:"Essential security plugin for enhanced server protection and monitoring.",file_url:"https://example.com/download/security-plugin-1.0.2.zip",file_size:5242880,file_type:"plugin",min_grade:"V4",status:"active",download_count:456,changelog:["Fixed vulnerability in authentication","Added brute force protection","Improved logging capabilities"],created_by:"11111111-1111-1111-1111-111111111111",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];localStorage.setItem("prodomo_server_files",JSON.stringify(E));const D=[{id:crypto.randomUUID(),version:"2.1.4",title:"Security and Performance Update",content:`## What's New in v2.1.4

### Security Enhancements
- Implemented advanced encryption for data transmission
- Added multi-factor authentication support
- Enhanced input validation and sanitization
- Updated security protocols to prevent common vulnerabilities

### Performance Improvements
- Optimized database queries for 25% faster response times
- Reduced memory usage by 15%
- Improved caching mechanisms
- Enhanced connection pooling

### Bug Fixes
- Fixed critical memory leak in long-running processes
- Resolved issue with concurrent user sessions
- Fixed configuration file parsing errors
- Corrected timezone handling in logs

### New Features
- Added real-time monitoring dashboard
- Implemented automatic backup system
- New configuration management interface
- Enhanced logging with structured output

### Breaking Changes
- Updated API endpoints (see migration guide)
- Changed default configuration format
- Minimum system requirements updated

For detailed migration instructions, please refer to our documentation.`,status:"published",author_id:"11111111-1111-1111-1111-111111111111",author_name:"Admin User",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];localStorage.setItem("prodomo_patch_notes",JSON.stringify(D)),console.log("Initialized clean data in localStorage")}catch(A){console.error("Failed to initialize clean data:",A)}},l=async()=>{try{e(!0);const{data:A,error:E}=await he.from("users").select("*").order("created_at",{ascending:!1});if(E){console.error("Failed to fetch users from Supabase:",E);const D=localStorage.getItem("prodomo_users");return D?JSON.parse(D):[]}return A||[]}catch(A){console.error("Error fetching users:",A);const E=localStorage.getItem("prodomo_users");return E?JSON.parse(E):[]}finally{e(!1)}},c=async(A,E)=>{e(!0),s(null);try{const{error:D}=await he.from("users").update({...E,updated_at:new Date().toISOString()}).eq("id",A);if(D){console.error("Error updating user in Supabase:",D);const F=localStorage.getItem("prodomo_users");if(F){const z=JSON.parse(F),S=z.findIndex(W=>W.id===A);if(S!==-1){z[S]={...z[S],...E,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_users",JSON.stringify(z));const W=localStorage.getItem("prodomo_current_user");if(W){const q=JSON.parse(W);q.id===A&&localStorage.setItem("prodomo_current_user",JSON.stringify({...q,...E}))}return!0}}return s("Failed to update user"),!1}return!0}catch(D){return console.error("Error updating user:",D),s("Failed to update user"),!1}finally{e(!1)}},d=async(A,E)=>c(A,{grade:E}),u=async(A,E)=>c(A,{admin_notes:E}),h=async(A,E)=>{const D={"30m":18e5,"1d":864e5,"7d":6048e5,"30d":2592e6}[E]||18e5,F=new Date(Date.now()+D).toISOString();return c(A,{is_blocked:!0,blocked_until:F})},f=async A=>c(A,{is_blocked:!1,blocked_until:void 0}),p=async A=>{e(!0),s(null);try{const E=crypto.randomUUID(),D={id:E,name:A.name,email:A.email,grade:A.grade,join_date:new Date().toISOString(),last_active:new Date().toISOString(),total_downloads:0,is_guest:!1,is_blocked:!1},{error:F}=await he.from("users").insert([D]);if(F){console.error("Error creating user in Supabase:",F);const z=localStorage.getItem("prodomo_users"),S=z?JSON.parse(z):[];S.push(D),localStorage.setItem("prodomo_users",JSON.stringify(S));const W=JSON.parse(localStorage.getItem("prodomo_passwords")||"{}");return W[E]=A.password,localStorage.setItem("prodomo_passwords",JSON.stringify(W)),!0}return!0}catch(E){return console.error("Error creating user:",E),s("Failed to create user"),!1}finally{e(!1)}},v=async A=>{e(!0),s(null);try{const{error:E}=await he.from("users").delete().eq("id",A);if(E){console.error("Error deleting user from Supabase:",E);const D=localStorage.getItem("prodomo_users");if(D){const z=JSON.parse(D).filter(W=>W.id!==A);localStorage.setItem("prodomo_users",JSON.stringify(z));const S=JSON.parse(localStorage.getItem("prodomo_passwords")||"{}");return S[A]&&(delete S[A],localStorage.setItem("prodomo_passwords",JSON.stringify(S))),!0}return s("Failed to delete user"),!1}return!0}catch(E){return console.error("Error deleting user:",E),s("Failed to delete user"),!1}finally{e(!1)}},g=A=>{const E={"11111111-1111-1111-1111-111111111111":"admin123","22222222-2222-2222-2222-222222222222":"v4pass","33333333-3333-3333-3333-333333333333":"v5pass","44444444-4444-4444-4444-444444444444":"support123"};if(E[A])return E[A];try{return JSON.parse(localStorage.getItem("prodomo_passwords")||"{}")[A]||null}catch(D){return console.error("Error getting user password:",D),null}},j=async()=>{try{e(!0);const{data:A,error:E}=await he.from("server_files").select("*").order("created_at",{ascending:!1});if(E){console.error("Failed to fetch files from Supabase:",E);const D=localStorage.getItem("prodomo_server_files");return D?JSON.parse(D):[]}return A||[]}catch(A){console.error("Error fetching server files:",A);const E=localStorage.getItem("prodomo_server_files");return E?JSON.parse(E):[]}finally{e(!1)}},y=async A=>{e(!0),s(null);try{const{error:E}=await he.from("server_files").insert([A]);if(E){console.error("Error creating file in Supabase:",E);const D=localStorage.getItem("prodomo_server_files"),F=D?JSON.parse(D):[],z={...A,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return F.push(z),localStorage.setItem("prodomo_server_files",JSON.stringify(F)),!0}return!0}catch(E){return console.error("Error creating file:",E),s("Failed to create file"),!1}finally{e(!1)}},m=async(A,E)=>{e(!0),s(null);try{const{error:D}=await he.from("server_files").update({...E,updated_at:new Date().toISOString()}).eq("id",A);if(D){console.error("Error updating file in Supabase:",D);const F=localStorage.getItem("prodomo_server_files");if(F){const z=JSON.parse(F),S=z.findIndex(W=>W.id===A);if(S!==-1)return z[S]={...z[S],...E,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_server_files",JSON.stringify(z)),!0}return s("Failed to update file"),!1}return!0}catch(D){return console.error("Error updating file:",D),s("Failed to update file"),!1}finally{e(!1)}},x=async A=>{e(!0),s(null);try{const{error:E}=await he.from("server_files").delete().eq("id",A);if(E){console.error("Error deleting file from Supabase:",E);const D=localStorage.getItem("prodomo_server_files");if(D){const z=JSON.parse(D).filter(S=>S.id!==A);return localStorage.setItem("prodomo_server_files",JSON.stringify(z)),!0}return s("Failed to delete file"),!1}return!0}catch(E){return console.error("Error deleting file:",E),s("Failed to delete file"),!1}finally{e(!1)}},w=async(A,E,D)=>{e(!0),s(null);try{const{data:F,error:z}=await he.storage.from(E).upload(D,A);if(z)return console.error("Error uploading file to Supabase:",z),`https://example.com/storage/${E}/${D}`;const{data:S}=he.storage.from(E).getPublicUrl(D);return S.publicUrl}catch(F){return console.error("Error uploading file:",F),s("Failed to upload file"),`https://example.com/storage/${E}/${D}`}finally{e(!1)}},C=async()=>{try{e(!0);const{data:A,error:E}=await he.from("patch_notes").select("*").order("created_at",{ascending:!1});if(E){console.error("Failed to fetch patch notes from Supabase:",E);const D=localStorage.getItem("prodomo_patch_notes");return D?JSON.parse(D):[]}return A||[]}catch(A){console.error("Error fetching patch notes:",A);const E=localStorage.getItem("prodomo_patch_notes");return E?JSON.parse(E):[]}finally{e(!1)}},_=async A=>{e(!0),s(null);try{const{error:E}=await he.from("patch_notes").insert([A]);if(E){console.error("Error creating patch note in Supabase:",E);const D=localStorage.getItem("prodomo_patch_notes"),F=D?JSON.parse(D):[],z={...A,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return F.push(z),localStorage.setItem("prodomo_patch_notes",JSON.stringify(F)),!0}return!0}catch(E){return console.error("Error creating patch note:",E),s("Failed to create patch note"),!1}finally{e(!1)}},N=async(A,E)=>{e(!0),s(null);try{const{error:D}=await he.from("patch_notes").update({...E,updated_at:new Date().toISOString()}).eq("id",A);if(D){console.error("Error updating patch note in Supabase:",D);const F=localStorage.getItem("prodomo_patch_notes");if(F){const z=JSON.parse(F),S=z.findIndex(W=>W.id===A);if(S!==-1)return z[S]={...z[S],...E,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_patch_notes",JSON.stringify(z)),!0}return s("Failed to update patch note"),!1}return!0}catch(D){return console.error("Error updating patch note:",D),s("Failed to update patch note"),!1}finally{e(!1)}},b=async A=>{e(!0),s(null);try{const{error:E}=await he.from("patch_notes").delete().eq("id",A);if(E){console.error("Error deleting patch note from Supabase:",E);const D=localStorage.getItem("prodomo_patch_notes");if(D){const z=JSON.parse(D).filter(S=>S.id!==A);return localStorage.setItem("prodomo_patch_notes",JSON.stringify(z)),!0}return s("Failed to delete patch note"),!1}return!0}catch(E){return console.error("Error deleting patch note:",E),s("Failed to delete patch note"),!1}finally{e(!1)}},k=async A=>{try{if(A.user_id){const{data:D,error:F}=await he.from("users").select("id").eq("id",A.user_id);if(F||!D||D.length===0){console.error("User does not exist in database, cannot log activity:",A.user_id);const z=localStorage.getItem("prodomo_activity_logs"),S=z?JSON.parse(z):[],W={...A,id:crypto.randomUUID(),created_at:new Date().toISOString()};return S.push(W),localStorage.setItem("prodomo_activity_logs",JSON.stringify(S)),!0}}const{error:E}=await he.from("activity_logs").insert([A]);if(E){console.error("Error logging activity to Supabase:",E);const D=localStorage.getItem("prodomo_activity_logs"),F=D?JSON.parse(D):[],z={...A,id:crypto.randomUUID(),created_at:new Date().toISOString()};F.push(z),localStorage.setItem("prodomo_activity_logs",JSON.stringify(F))}return!0}catch(E){console.error("Error logging activity:",E);try{const D=localStorage.getItem("prodomo_activity_logs"),F=D?JSON.parse(D):[],z={...A,id:crypto.randomUUID(),created_at:new Date().toISOString()};F.push(z),localStorage.setItem("prodomo_activity_logs",JSON.stringify(F))}catch(D){console.error("Failed to log activity to localStorage:",D)}return!1}},I=async(A=100)=>{try{e(!0);const{data:E,error:D}=await he.from("activity_logs").select("*").order("created_at",{ascending:!1}).limit(A);if(D){console.error("Failed to fetch activity logs from Supabase:",D);const F=localStorage.getItem("prodomo_activity_logs");return F?JSON.parse(F).slice(0,A):[]}return E||[]}catch(E){console.error("Error fetching activity logs:",E);const D=localStorage.getItem("prodomo_activity_logs");return D?JSON.parse(D).slice(0,A):[]}finally{e(!1)}},T=async A=>{try{if(A.user_id){const{data:D,error:F}=await he.from("users").select("id").eq("id",A.user_id);if(F||!D||D.length===0){console.error("User does not exist in database, cannot log download:",A.user_id);const z=localStorage.getItem("prodomo_download_logs"),S=z?JSON.parse(z):[],W={...A,id:crypto.randomUUID(),created_at:new Date().toISOString()};if(S.push(W),localStorage.setItem("prodomo_download_logs",JSON.stringify(S)),A.user_id){const q=localStorage.getItem("prodomo_users");if(q){const ee=JSON.parse(q),ce=ee.findIndex(Te=>Te.id===A.user_id);if(ce!==-1){ee[ce].total_downloads=(ee[ce].total_downloads||0)+1,localStorage.setItem("prodomo_users",JSON.stringify(ee));const Te=localStorage.getItem("prodomo_current_user");if(Te){const lt=JSON.parse(Te);lt.id===A.user_id&&(lt.total_downloads=(lt.total_downloads||0)+1,localStorage.setItem("prodomo_current_user",JSON.stringify(lt)))}}}}return!0}}const{error:E}=await he.from("download_logs").insert([A]);if(E){console.error("Error logging download to Supabase:",E);const D=localStorage.getItem("prodomo_download_logs"),F=D?JSON.parse(D):[],z={...A,id:crypto.randomUUID(),created_at:new Date().toISOString()};F.push(z),localStorage.setItem("prodomo_download_logs",JSON.stringify(F))}try{if(A.user_id){const{data:D,error:F}=await he.from("users").select("total_downloads").eq("id",A.user_id);if(!F&&D&&D.length>0){const z=(D[0].total_downloads||0)+1;await he.from("users").update({total_downloads:z}).eq("id",A.user_id)}else{const z=localStorage.getItem("prodomo_users");if(z){const S=JSON.parse(z),W=S.findIndex(q=>q.id===A.user_id);if(W!==-1){S[W].total_downloads=(S[W].total_downloads||0)+1,localStorage.setItem("prodomo_users",JSON.stringify(S));const q=localStorage.getItem("prodomo_current_user");if(q){const ee=JSON.parse(q);ee.id===A.user_id&&(ee.total_downloads=(ee.total_downloads||0)+1,localStorage.setItem("prodomo_current_user",JSON.stringify(ee)))}}}}}}catch(D){console.error("Failed to update user download count:",D)}return!0}catch(E){console.error("Error logging download:",E);try{const D=localStorage.getItem("prodomo_download_logs"),F=D?JSON.parse(D):[],z={...A,id:crypto.randomUUID(),created_at:new Date().toISOString()};if(F.push(z),localStorage.setItem("prodomo_download_logs",JSON.stringify(F)),A.user_id){const S=localStorage.getItem("prodomo_users");if(S){const W=JSON.parse(S),q=W.findIndex(ee=>ee.id===A.user_id);if(q!==-1){W[q].total_downloads=(W[q].total_downloads||0)+1,localStorage.setItem("prodomo_users",JSON.stringify(W));const ee=localStorage.getItem("prodomo_current_user");if(ee){const ce=JSON.parse(ee);ce.id===A.user_id&&(ce.total_downloads=(ce.total_downloads||0)+1,localStorage.setItem("prodomo_current_user",JSON.stringify(ce)))}}}}}catch(D){console.error("Failed to log download to localStorage:",D)}return!1}},O=async(A=100)=>{try{e(!0);const{data:E,error:D}=await he.from("download_logs").select("*").order("created_at",{ascending:!1}).limit(A);if(D){console.error("Failed to fetch download logs from Supabase:",D);const F=localStorage.getItem("prodomo_download_logs");return F?JSON.parse(F).slice(0,A):[]}return E||[]}catch(E){console.error("Error fetching download logs:",E);const D=localStorage.getItem("prodomo_download_logs");return D?JSON.parse(D).slice(0,A):[]}finally{e(!1)}},$=async()=>{try{e(!0);const{data:A,error:E}=await he.from("documentation").select("*").order("order_index",{ascending:!0});if(E){console.error("Failed to fetch documentation from Supabase:",E);const D=localStorage.getItem("prodomo_documentation");return D?JSON.parse(D):[]}return A||[]}catch(A){console.error("Error fetching documentation:",A);const E=localStorage.getItem("prodomo_documentation");return E?JSON.parse(E):[]}finally{e(!1)}},V=async A=>{e(!0),s(null);try{const{error:E}=await he.from("documentation").insert([A]);if(E){console.error("Error creating documentation in Supabase:",E);const D=localStorage.getItem("prodomo_documentation"),F=D?JSON.parse(D):[],z={...A,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return F.push(z),localStorage.setItem("prodomo_documentation",JSON.stringify(F)),!0}return!0}catch(E){return console.error("Error creating documentation:",E),s("Failed to create documentation"),!1}finally{e(!1)}},R=async(A,E)=>{e(!0),s(null);try{const{error:D}=await he.from("documentation").update({...E,updated_at:new Date().toISOString()}).eq("id",A);if(D){console.error("Error updating documentation in Supabase:",D);const F=localStorage.getItem("prodomo_documentation");if(F){const z=JSON.parse(F),S=z.findIndex(W=>W.id===A);if(S!==-1)return z[S]={...z[S],...E,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_documentation",JSON.stringify(z)),!0}return s("Failed to update documentation"),!1}return!0}catch(D){return console.error("Error updating documentation:",D),s("Failed to update documentation"),!1}finally{e(!1)}},J=async A=>{e(!0),s(null);try{const{error:E}=await he.from("documentation").delete().eq("id",A);if(E){console.error("Error deleting documentation from Supabase:",E);const D=localStorage.getItem("prodomo_documentation");if(D){const z=JSON.parse(D).filter(S=>S.id!==A);return localStorage.setItem("prodomo_documentation",JSON.stringify(z)),!0}return s("Failed to delete documentation"),!1}return!0}catch(E){return console.error("Error deleting documentation:",E),s("Failed to delete documentation"),!1}finally{e(!1)}},P=async()=>{try{e(!0);const{data:A,error:E}=await he.from("bug_reports").select("*").order("created_at",{ascending:!1});if(E){console.error("Failed to fetch bug reports from Supabase:",E);const D=localStorage.getItem("prodomo_bug_reports");return D?JSON.parse(D):[]}return A||[]}catch(A){console.error("Error fetching bug reports:",A);const E=localStorage.getItem("prodomo_bug_reports");return E?JSON.parse(E):[]}finally{e(!1)}},L=async A=>{e(!0),s(null);try{if(A.reporter_id){const{data:F,error:z}=await he.from("users").select("id").eq("id",A.reporter_id);if(z||!F||F.length===0){console.error("User does not exist in database, cannot create bug report:",A.reporter_id);const S=localStorage.getItem("prodomo_bug_reports"),W=S?JSON.parse(S):[],q={...A,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return W.push(q),localStorage.setItem("prodomo_bug_reports",JSON.stringify(W)),!0}}const E={title:A.title,description:A.description,severity:A.severity,category:A.category,status:A.status,reporter_id:A.reporter_id,reporter_name:A.reporter_name,steps:A.steps,expected_behavior:A.expected_behavior,actual_behavior:A.actual_behavior,environment:A.environment,attachments:A.attachments,comments:A.comments||[]},{error:D}=await he.from("bug_reports").insert([E]);if(D){console.error("Error creating bug report in Supabase:",D);const F=localStorage.getItem("prodomo_bug_reports"),z=F?JSON.parse(F):[],S={...E,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return z.push(S),localStorage.setItem("prodomo_bug_reports",JSON.stringify(z)),!0}return!0}catch(E){return console.error("Error creating bug report:",E),s("Failed to create bug report"),!1}finally{e(!1)}},B=async(A,E)=>{e(!0),s(null);try{const{error:D}=await he.from("bug_reports").update({...E,updated_at:new Date().toISOString()}).eq("id",A);if(D){console.error("Error updating bug report in Supabase:",D);const F=localStorage.getItem("prodomo_bug_reports");if(F){const z=JSON.parse(F),S=z.findIndex(W=>W.id===A);if(S!==-1)return z[S]={...z[S],...E,updated_at:new Date().toISOString()},localStorage.setItem("prodomo_bug_reports",JSON.stringify(z)),!0}return s("Failed to update bug report"),!1}return!0}catch(D){return console.error("Error updating bug report:",D),s("Failed to update bug report"),!1}finally{e(!1)}},G=async A=>{e(!0),s(null);try{const{error:E}=await he.from("bug_reports").delete().eq("id",A);if(E){console.error("Error deleting bug report from Supabase:",E);const D=localStorage.getItem("prodomo_bug_reports");if(D){const z=JSON.parse(D).filter(S=>S.id!==A);return localStorage.setItem("prodomo_bug_reports",JSON.stringify(z)),!0}return s("Failed to delete bug report"),!1}return!0}catch(E){return console.error("Error deleting bug report:",E),s("Failed to delete bug report"),!1}finally{e(!1)}},U=async(A,E=30)=>{try{e(!0);let D=he.from("system_metrics").select("*").order("created_at",{ascending:!1}).limit(E);A&&(D=D.eq("metric_type",A));const{data:F,error:z}=await D;return z?(console.error("Failed to fetch system metrics from Supabase:",z),K(A,E)):F&&F.length>0?F:K(A,E)}catch(D){return console.error("Error fetching system metrics:",D),K(A,E)}finally{e(!1)}},K=(A,E=30)=>{const D=[],F=A?[A]:["downloads","users","storage","bandwidth"];for(const z of F)for(let S=0;S<E;S++){const W=new Date;W.setDate(W.getDate()-S);let q;switch(z){case"downloads":q=1e3+Math.floor(Math.random()*1e3);break;case"users":q=40+Math.floor(Math.random()*20);break;case"storage":q=1500+Math.floor(Math.random()*1e3);break;case"bandwidth":q=800+Math.floor(Math.random()*500);break;default:q=Math.floor(Math.random()*1e3)}D.push({id:crypto.randomUUID(),metric_type:z,value:q,date:W.toISOString().split("T")[0],created_at:W.toISOString()})}return D};return{loading:t,error:r,setError:s,dbInitialized:n,initializeCleanData:o,getUsers:l,updateUser:c,updateUserGrade:d,updateUserNotes:u,blockUser:h,unblockUser:f,createUser:p,deleteUser:v,getUserPassword:g,getServerFiles:j,createServerFile:y,updateServerFile:m,deleteServerFile:x,uploadFile:w,getPatchNotes:C,createPatchNote:_,updatePatchNote:N,deletePatchNote:b,logActivity:k,getActivityLogs:I,logDownload:T,getDownloadLogs:O,getDocumentation:$,createDocumentation:V,updateDocumentation:R,deleteDocumentation:J,getBugReports:P,createBugReport:L,updateBugReport:B,deleteBugReport:G,getSystemMetrics:U,getFileRequirements:()=>[{id:"1",label:"Operating System",value:"FreeBSD 12.0+"},{id:"2",label:"Memory",value:"4 GB RAM"},{id:"3",label:"Storage",value:"10 GB available space"},{id:"4",label:"Network",value:"Broadband connection"},{id:"5",label:"Processor",value:"x64 compatible"}],updateFileRequirements:A=>!0}},Dn=()=>{const{user:t}=pt(),{logActivity:e}=Xt(),r=async(s,n)=>{if(t)try{await e({user_id:t.id,user_name:t.name,action:s,details:n||"",ip_address:"Unknown"})}catch(i){console.error("Failed to log activity:",i)}};return{logFileUpload:(s,n)=>r(`Uploaded ${n}`,`File: ${s}`),logFileDownload:(s,n)=>r("Downloaded file",`${s} v${n}`),logFileDelete:s=>r("Deleted file",`File: ${s}`),logUserCreation:(s,n)=>r("Created user account",`User: ${s} (${n})`),logUserGradeUpdate:(s,n,i)=>r("Updated user grade",`${s}: ${n}  ${i}`),logUserBlock:(s,n)=>r("Blocked user",`${s} for ${n}`),logUserUnblock:s=>r("Unblocked user",`User: ${s}`),logUserDelete:s=>r("Deleted user account",`User: ${s}`),logPatchNoteCreate:(s,n)=>r("Created patch note",`v${s}: ${n}`),logPatchNoteUpdate:(s,n)=>r("Updated patch note",`v${s}: ${n}`),logPatchNoteDelete:s=>r("Deleted patch note",`Version: ${s}`),logPatchNotePublish:s=>r("Published patch note",`Version: ${s}`),logLogin:(s="email")=>r("Signed in",`Method: ${s}`),logLogout:()=>r("Signed out",""),logThemeChange:s=>r("Changed theme",`Theme: ${s}`),logProfileUpdate:s=>r("Updated profile",s),logSettingsChange:(s,n)=>r("Changed setting",`${s}: ${n}`),logSystemAction:(s,n)=>r(s,n),logBugReportSubmit:s=>r("Submitted bug report",`Bug: ${s}`),logBugStatusUpdate:(s,n,i)=>r("Updated bug status",`${s}: ${n}  ${i}`)}},lm=({activeSection:t,setActiveSection:e})=>{const{user:r,hasAccess:s}=pt(),{getActivityLogs:n,getDownloadLogs:i,getUsers:o,getServerFiles:l}=Xt(),{logSystemAction:c}=Dn(),[d,u]=M.useState(null),[h,f]=M.useState([]),[p,v]=M.useState({cpu:46,memory:68,storage:32,network:89,status:"healthy"}),[g,j]=M.useState({totalDownloads:0,activeUsers:0,serverUptime:"99.9%",totalFiles:0}),[y,m]=M.useState(!0);M.useEffect(()=>{x();const P=setInterval(w,3e4);return()=>clearInterval(P)},[]);const x=async()=>{m(!0);try{const[P,L,B,G]=await Promise.all([n(20),i(100),o(),l()]),U=L.length,K=new Set(L.map(z=>z.user_id)).size,te=G.length,A=`${(99.5+Math.random()*.5).toFixed(1)}%`;j({totalDownloads:U,activeUsers:K,serverUptime:A,totalFiles:te});let E=P;s("Admin")||(E=P.filter(z=>!z.action.includes("[ADMIN]")));const F=[...E.map(z=>({...z,type:"activity"})),...L.slice(0,5).map(z=>({...z,type:"download",action:`Downloaded ${z.file_name} v${z.file_version}`,details:`File: ${z.file_name}`}))].sort((z,S)=>new Date(S.created_at).getTime()-new Date(z.created_at).getTime()).slice(0,10).map(z=>{const S=B.find(W=>W.id===z.user_id);return{...z,user_avatar:S==null?void 0:S.avatar_url,user_grade:S==null?void 0:S.grade,is_guest:(S==null?void 0:S.is_guest)||!1}}).filter(z=>!z.is_guest);f(F)}catch(P){console.error("Failed to load dashboard data:",P)}finally{m(!1)}},w=()=>{v(P=>({cpu:Math.round(Math.max(20,Math.min(90,P.cpu+(Math.random()-.5)*10))),memory:Math.round(Math.max(30,Math.min(85,P.memory+(Math.random()-.5)*8))),storage:Math.round(Math.max(15,Math.min(95,P.storage+(Math.random()-.5)*3))),network:Math.round(Math.max(70,Math.min(100,P.network+(Math.random()-.5)*5))),status:P.cpu>80||P.memory>80?"warning":P.cpu>90||P.memory>90?"critical":"healthy"}))},C=[{title:"Total Downloads",value:g.totalDownloads.toLocaleString(),change:"+12%",changeType:"positive",icon:ht,color:"bg-blue-500"},{title:"Active Users",value:g.activeUsers.toLocaleString(),change:"+5%",changeType:"positive",icon:wr,color:"bg-emerald-500"},{title:"Server Uptime",value:g.serverUptime,change:"+0.1%",changeType:"positive",icon:bn,color:"bg-purple-500"},{title:"Total Files",value:g.totalFiles.toString(),change:`${g.totalFiles} available`,changeType:"positive",icon:br,color:"bg-amber-500"}],_=[{id:"downloads",title:"Latest Downloads",description:"View and download server files",icon:ht,color:"blue",action:()=>{console.log("Dashboard: Navigating to downloads"),e("downloads"),Z.info("Navigating to Downloads section"),c("Accessed downloads via quick action")},requiresAccess:"Guest"},{id:"server-status",title:"Server Status",description:"Check system health and uptime",icon:at,color:"emerald",action:()=>{console.log("Dashboard: Checking server status"),Z.success("Server Status: All systems operational","System Health"),c("Checked server status via quick action")},requiresAccess:"Guest"},{id:"documentation",title:"Documentation",description:"Browse guides and tutorials",icon:br,color:"indigo",action:()=>{console.log("Dashboard: Navigating to documentation"),e("documentation"),Z.info("Navigating to Documentation"),c("Accessed documentation via quick action")},requiresAccess:"Guest"},{id:"user-management",title:"User Management",description:"Manage user accounts and permissions",icon:wr,color:"purple",action:()=>{console.log("Dashboard: Navigating to user management"),s("Admin")?(e("user-management"),Z.info("Navigating to User Management"),c("Accessed user management via quick action")):Z.warning("Admin access required for user management")},requiresAccess:"Admin"},{id:"analytics",title:"Analytics",description:"View system metrics and reports",icon:ey,color:"amber",action:()=>{console.log("Dashboard: Navigating to analytics"),s("Admin")?(e("analytics"),Z.info("Navigating to Analytics dashboard"),c("Accessed analytics via quick action")):Z.warning("Admin access required for analytics")},requiresAccess:"Admin"},{id:"file-manager",title:"File Manager",description:"Upload and manage server files",icon:sy,color:"red",action:()=>{console.log("Dashboard: Navigating to file manager"),s("Admin")?(e("file-manager"),Z.info("Navigating to File Manager"),c("Accessed file manager via quick action")):Z.warning("Admin access required for file management")},requiresAccess:"Admin"}],N=async P=>{console.log("Dashboard: Quick action clicked:",P.id),u(P.id),setTimeout(()=>u(null),200);try{await P.action()}catch(L){console.error("Dashboard: Quick action error:",L),Z.error("Failed to execute action")}},b=()=>{console.log("Dashboard: View all activity clicked"),s("Admin")?(e("activity-logs"),Z.info("Navigating to Activity Logs")):Z.warning("Admin access required for activity logs")},k=P=>{console.log("Dashboard: Viewing profile for user:",P),e("profile");const L=new CustomEvent("viewProfile",{detail:{userId:P}});document.dispatchEvent(L)},I=P=>P.type==="download"?a.jsx(ht,{size:16,className:"text-blue-500"}):P.action.includes("login")||P.action.includes("Sign")?a.jsx(Cu,{size:16,className:"text-emerald-500"}):P.action.includes("logout")||P.action.includes("out")?a.jsx(ny,{size:16,className:"text-red-500"}):P.action.includes("profile")||P.action.includes("Updated")?a.jsx(as,{size:16,className:"text-purple-500"}):P.action.includes("upload")||P.action.includes("Upload")?a.jsx(tf,{size:16,className:"text-indigo-500"}):P.action.includes("patch")||P.action.includes("note")?a.jsx(br,{size:16,className:"text-amber-500"}):P.action.includes("user")||P.action.includes("User")?a.jsx(wr,{size:16,className:"text-cyan-500"}):P.action.includes("grade")||P.action.includes("Grade")?a.jsx(Ce,{size:16,className:"text-orange-500"}):P.action.includes("edit")||P.action.includes("Edit")?a.jsx(nr,{size:16,className:"text-pink-500"}):a.jsx(at,{size:16,className:"text-gray-500"}),T=P=>{switch(P){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},O=P=>{const L=new Date(P),G=Math.floor((new Date().getTime()-L.getTime())/1e3);return G<60?`${G}s ago`:G<3600?`${Math.floor(G/60)}m ago`:G<86400?`${Math.floor(G/3600)}h ago`:`${Math.floor(G/86400)}d ago`},$=(P,L)=>{const B="flex flex-col items-center p-6 rounded-xl border-2 transition-all duration-200 cursor-pointer group",G=L?"scale-95 shadow-lg":"";switch(P){case"blue":return`${B} ${G} border-blue-200 dark:border-blue-800 hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:shadow-md`;case"emerald":return`${B} ${G} border-emerald-200 dark:border-emerald-800 hover:border-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 hover:shadow-md`;case"purple":return`${B} ${G} border-purple-200 dark:border-purple-800 hover:border-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:shadow-md`;case"amber":return`${B} ${G} border-amber-200 dark:border-amber-800 hover:border-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20 hover:shadow-md`;case"indigo":return`${B} ${G} border-indigo-200 dark:border-indigo-800 hover:border-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 hover:shadow-md`;case"red":return`${B} ${G} border-red-200 dark:border-red-800 hover:border-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:shadow-md`;default:return`${B} ${G} border-gray-200 dark:border-gray-700 hover:border-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:shadow-md`}},V=P=>{switch(P){case"blue":return"text-blue-500 group-hover:text-blue-600";case"emerald":return"text-emerald-500 group-hover:text-emerald-600";case"purple":return"text-purple-500 group-hover:text-purple-600";case"amber":return"text-amber-500 group-hover:text-amber-600";case"indigo":return"text-indigo-500 group-hover:text-indigo-600";case"red":return"text-red-500 group-hover:text-red-600";default:return"text-gray-500 group-hover:text-gray-600"}},R=(P,L)=>L==="network"?P>=80?"text-emerald-500":P>=60?"text-amber-500":"text-red-500":P<=50?"text-emerald-500":P<=75?"text-amber-500":"text-red-500",J=(P,L)=>L==="network"?P>=80?"bg-emerald-500":P>=60?"bg-amber-500":"bg-red-500":P<=50?"bg-emerald-500":P<=75?"bg-amber-500":"bg-red-500";return r?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["Welcome back, ",r.name,"!"]}),a.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Here's what's happening with your Prodomo server today."})]}),a.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-4",children:[a.jsxs("button",{onClick:x,disabled:y,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:[a.jsx(at,{size:16,className:y?"animate-spin":""}),a.jsx("span",{className:"text-sm",children:"Refresh"})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(Wt,{size:16}),a.jsxs("span",{children:["Last updated: ",new Date().toLocaleTimeString()]})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:C.map((P,L)=>{const B=P.icon;return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow duration-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:P.title}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:P.value}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsx(Wl,{size:14,className:`${P.changeType==="positive"?"text-emerald-500":"text-red-500"} mr-1`}),a.jsx("span",{className:`text-sm font-medium ${P.changeType==="positive"?"text-emerald-600":"text-red-600"}`,children:P.change}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:P.title==="Total Files"?"":"vs last month"})]})]}),a.jsx("div",{className:`p-3 rounded-lg ${P.color} bg-opacity-10`,children:a.jsx(B,{className:`w-6 h-6 ${P.color.replace("bg-","text-")}`})})]})},L)})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Latest user actions and system events"})]}),a.jsxs("div",{className:"p-6",children:[y?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-4",children:[h.map((P,L)=>a.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[a.jsx("button",{onClick:()=>k(P.user_id),className:"flex-shrink-0 hover:scale-105 transition-transform duration-200",children:P.user_avatar?a.jsx("img",{src:P.user_avatar,alt:P.user_name,className:"w-8 h-8 rounded-full object-cover"}):a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold text-xs",children:P.user_name.charAt(0)})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>k(P.user_id),className:"text-sm font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:P.user_name}),P.user_grade&&a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T(P.user_grade)}`,children:P.user_grade})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[I(P),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:O(P.created_at)})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:P.action}),P.details&&a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:P.details})]})]},L)),h.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(at,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No recent activity"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"User activity will appear here as it happens."})]})]}),a.jsx("button",{onClick:b,className:"w-full mt-4 px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:"View all activity"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bn,{className:"w-5 h-5 text-blue-500"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"System Health"})]}),a.jsx("div",{className:`px-2 py-1 text-xs font-medium rounded-full ${p.status==="healthy"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400":p.status==="warning"?"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:p.status})]})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Kk,{size:16,className:R(p.cpu,"cpu")}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"CPU Usage"})]}),a.jsxs("span",{className:`text-sm font-medium ${R(p.cpu,"cpu")}`,children:[p.cpu,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${J(p.cpu,"cpu")}`,style:{width:`${p.cpu}%`}})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ty,{size:16,className:R(p.memory,"memory")}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Memory"})]}),a.jsxs("span",{className:`text-sm font-medium ${R(p.memory,"memory")}`,children:[p.memory,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${J(p.memory,"memory")}`,style:{width:`${p.memory}%`}})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Su,{size:16,className:R(p.storage,"storage")}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Storage"})]}),a.jsxs("span",{className:`text-sm font-medium ${R(p.storage,"storage")}`,children:[p.storage,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${J(p.storage,"storage")}`,style:{width:`${p.storage}%`}})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Pu,{size:16,className:R(p.network,"network")}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Network"})]}),a.jsxs("span",{className:`text-sm font-medium ${R(p.network,"network")}`,children:[p.network,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${J(p.network,"network")}`,style:{width:`${p.network}%`}})})]}),a.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Status"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[p.status==="healthy"?a.jsx(dt,{size:16,className:"text-emerald-500"}):p.status==="warning"?a.jsx(Xr,{size:16,className:"text-amber-500"}):a.jsx(_e,{size:16,className:"text-red-500"}),a.jsx("span",{className:`text-sm font-medium capitalize ${p.status==="healthy"?"text-emerald-600 dark:text-emerald-400":p.status==="warning"?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400"}`,children:p.status})]})]}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[p.status==="healthy"&&"All systems operating normally",p.status==="warning"&&"Some metrics need attention",p.status==="critical"&&"Immediate action required"]})]})]})})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Quick Actions"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Common tasks and shortcuts"})]}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:_.filter(P=>s(P.requiresAccess)).map(P=>{const L=P.icon,B=d===P.id;return a.jsxs("button",{onClick:()=>N(P),className:$(P.color,B),title:P.description,children:[a.jsx(L,{className:`w-8 h-8 mb-3 ${V(P.color)}`}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white text-center",children:P.title}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1",children:P.description})]},P.id)})})})]})]}):a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})},Bj=()=>{const{hasAccess:t,user:e}=pt(),{getServerFiles:r,logDownload:s,getFileRequirements:n,updateFileRequirements:i}=Xt(),{logFileDownload:o}=Dn(),[l,c]=M.useState(""),[d,u]=M.useState("all"),[h,f]=M.useState([]),[p,v]=M.useState(!0),[g,j]=M.useState(null),[y,m]=M.useState(!1),[x,w]=M.useState([]),[C,_]=M.useState(!1),[N,b]=M.useState([]);M.useEffect(()=>{k(),I()},[]);const k=async()=>{v(!0);const E=await r();f(E),v(!1)},I=()=>{const E=n();w(E)},T=async E=>{if(e)try{await s({user_id:e.id,user_name:e.name,file_id:E.id,file_name:E.name,file_version:E.version,ip_address:"Unknown",user_agent:navigator.userAgent}),await o(E.name,E.version),Z.download(`${E.name} v${E.version}`),O(E),window.open(E.file_url,"_blank")}catch(D){console.error("Download error:",D),Z.error("Failed to initiate download")}},O=E=>{try{const F=localStorage.getItem("prodomo_users");if(!F)return;JSON.parse(F).filter(W=>W.grade==="Admin").forEach(W=>{if(W.id===(e==null?void 0:e.id))return;const q=`prodomo_notifications_${W.id}`,ee=JSON.parse(localStorage.getItem(q)||"[]"),Te=[{id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:"New Download",message:`${e==null?void 0:e.name} downloaded ${E.name} v${E.version}`,type:"info",read:!1,created_at:new Date().toISOString(),related_id:E.id,action_url:"/downloads"},...ee].slice(0,50);localStorage.setItem(q,JSON.stringify(Te))}),console.log("Download notification created for admins")}catch(D){console.error("Failed to create download notification:",D)}},$=E=>{console.log("Downloads: Viewing details for file:",E.name),j(E),m(!0)},V=()=>{b([...x]),_(!0)},R=()=>{i(N)?(w(N),_(!1),Z.success("System requirements updated successfully")):Z.error("Failed to update requirements")},J=()=>{b([]),_(!1)},P=()=>{const E={id:Date.now().toString(),label:"New Requirement",value:"Enter value"};b([...N,E])},L=(E,D,F)=>{b(z=>z.map(S=>S.id===E?{...S,[D]:F}:S))},B=E=>{b(D=>D.filter(F=>F.id!==E))},G=E=>{switch(E){case"active":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400";case"beta":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"deprecated":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},U=E=>{switch(E){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},K=E=>{if(E===0)return"0 Bytes";const D=1024,F=["Bytes","KB","MB","GB"],z=Math.floor(Math.log(E)/Math.log(D));return parseFloat((E/Math.pow(D,z)).toFixed(2))+" "+F[z]},te=E=>{switch(E){case"server":return"";case"plugin":return"";case"archive":return"";case"documentation":return"";default:return""}},ne=E=>{if(!e)return!1;if(e.grade==="Admin")return!0;if(e.grade==="Support")return E.min_grade==="Guest"||E.min_grade==="V4";const D=["Guest","V4","V5","Support","Admin"],F=D.indexOf(e.grade),z=D.indexOf(E.min_grade);return F>=z},A=h.filter(E=>{const D=E.name.toLowerCase().includes(l.toLowerCase())||E.description.toLowerCase().includes(l.toLowerCase()),F=d==="all"||E.status===d,z=ne(E);return D&&F&&z});return p?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Server Downloads"}),a.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Download the latest Prodomo server versions and updates."})]}),t("Admin")&&a.jsxs("button",{onClick:V,className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(nr,{size:18}),a.jsx("span",{children:"Edit Requirements"})]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(Sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search versions...",value:l,onChange:E=>c(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Nn,{className:"text-gray-400 w-5 h-5"}),a.jsxs("select",{value:d,onChange:E=>u(E.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"beta",children:"Beta"}),a.jsx("option",{value:"deprecated",children:"Deprecated"})]})]})]})}),e&&a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Ce,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Your Access Level"}),a.jsx("div",{className:"flex items-center space-x-2 mt-1",children:e.grade==="Support"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U("V4")}`,children:"V4"}),a.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U("Support")}`,children:[a.jsx(As,{size:12,className:"inline mr-1"}),"Support"]}),a.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:"You have V4 download access and Support privileges for bug management"})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U(e.grade)}`,children:e.grade}),a.jsxs("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:["You can download files marked for ",e.grade," access or lower"]})]})})]})]})}),a.jsxs("div",{className:"space-y-4",children:[A.map(E=>a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-200",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("span",{className:"text-2xl",children:te(E.file_type)}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:E.name}),a.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 rounded-full",children:["v",E.version]}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${G(E.status)}`,children:E.status}),a.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U(E.min_grade)}`,children:[E.min_grade,"+ Required"]})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:E.description}),a.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(is,{size:16}),a.jsx("span",{children:new Date(E.created_at).toLocaleDateString()})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(ht,{size:16}),a.jsxs("span",{children:[E.download_count.toLocaleString()," downloads"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(br,{size:16}),a.jsx("span",{children:K(E.file_size)})]})]}),E.changelog&&E.changelog.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2 flex items-center",children:[a.jsx(Bp,{size:14,className:"mr-1 text-amber-500"}),"What's New:"]}),a.jsxs("ul",{className:"space-y-1",children:[E.changelog.slice(0,2).map((D,F)=>a.jsxs("li",{className:"flex items-start space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[a.jsx(dt,{size:14,className:"text-emerald-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{children:D})]},F)),E.changelog.length>2&&a.jsxs("li",{className:"text-sm text-blue-600 dark:text-blue-400 ml-6",children:["+",E.changelog.length-2," more changes"]})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row lg:flex-col space-y-2 sm:space-y-0 sm:space-x-2 lg:space-x-0 lg:space-y-2 lg:ml-6",children:[ne(E)?a.jsxs("button",{onClick:()=>T(E),className:"flex items-center justify-center space-x-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(ht,{size:18}),a.jsx("span",{children:"Download"})]}):a.jsxs("div",{className:"flex items-center justify-center space-x-2 px-6 py-3 bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 rounded-lg",children:[a.jsx(Ua,{size:18}),a.jsxs("span",{children:["Requires ",E.min_grade]})]}),a.jsxs("button",{onClick:()=>$(E),className:"flex items-center justify-center space-x-2 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[a.jsx(Gt,{size:18}),a.jsx("span",{children:"View Details"})]})]})]}),E.status==="deprecated"&&a.jsx("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Lt,{className:"text-amber-600 dark:text-amber-400 w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Deprecated Version"}),a.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:"This version is no longer actively maintained. Consider upgrading to a newer stable release."})]})]})})]})},E.id)),A.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(br,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No versions found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria or access level."})]})]}),C&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:J}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Edit System Requirements"}),a.jsx("button",{onClick:J,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(_e,{size:24})})]}),a.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:N.map((E,D)=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[a.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[a.jsx("input",{type:"text",value:E.label,onChange:F=>L(E.id,"label",F.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Requirement name"}),a.jsx("input",{type:"text",value:E.value,onChange:F=>L(E.id,"value",F.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Requirement value"})]}),a.jsx("button",{onClick:()=>B(E.id),className:"p-2 text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors duration-200",children:a.jsx(Ut,{size:16})})]},E.id))}),a.jsx("div",{className:"mt-4",children:a.jsxs("button",{onClick:P,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:[a.jsx(Rr,{size:16}),a.jsx("span",{children:"Add Requirement"})]})}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:J,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:R,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200",children:[a.jsx(Is,{size:18}),a.jsx("span",{children:"Save Requirements"})]})]})]})]})}),y&&g&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>m(!1)}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-3xl",children:te(g.file_type)}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[g.name," v",g.version]}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:g.description})]})]}),a.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(_e,{size:24})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(Bp,{className:"mr-2 text-amber-500",size:20}),"What's New in v",g.version]}),g.changelog&&g.changelog.length>0?a.jsx("ul",{className:"space-y-3",children:g.changelog.map((E,D)=>a.jsxs("li",{className:"flex items-start space-x-3",children:[a.jsx(dt,{size:16,className:"text-emerald-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:E})]},D))}):a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No changelog available for this version."})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-6",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"File Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"File Type"}),a.jsx("p",{className:"text-gray-900 dark:text-white capitalize",children:g.file_type})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"File Size"}),a.jsx("p",{className:"text-gray-900 dark:text-white",children:K(g.file_size)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),a.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${G(g.status)}`,children:g.status})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Access Level"}),a.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${U(g.min_grade)}`,children:[g.min_grade,"+"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Downloads"}),a.jsx("p",{className:"text-gray-900 dark:text-white",children:g.download_count.toLocaleString()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Release Date"}),a.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(g.created_at).toLocaleDateString()})]})]})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:[a.jsxs("h4",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-4 flex items-center",children:[a.jsx(vn,{className:"mr-2 text-blue-500",size:20}),"Download Notifications"]}),a.jsx("p",{className:"text-blue-800 dark:text-blue-200 mb-4",children:"Admins will be notified when users download this file. This helps track usage and identify popular files."}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(dt,{size:16,className:"text-blue-600 dark:text-blue-400"}),a.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"Notifications are automatically sent to admins"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Download Options"}),ne(g)?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:()=>{T(g),m(!1)},className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(ht,{size:18}),a.jsx("span",{children:"Download Now"})]}),a.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(g.file_url),Z.success("Download link copied to clipboard")},className:"w-full flex items-center justify-center space-x-2 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[a.jsx(ry,{size:18}),a.jsx("span",{children:"Copy Link"})]})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx(Ua,{className:"mx-auto w-12 h-12 text-gray-400 mb-3"}),a.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:[g.min_grade," access required"]})]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(Ce,{size:18,className:"mr-2"}),"System Requirements"]}),a.jsx("div",{className:"space-y-2 text-sm",children:x.map(E=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[E.label,":"]}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:E.value})]},E.id))})]})]})]})]})]})})]})},Hj=()=>{const{user:t,hasAccess:e}=pt(),{getDocumentation:r,createDocumentation:s,updateDocumentation:n,deleteDocumentation:i,loading:o}=Xt(),[l,c]=M.useState([]),[d,u]=M.useState("v4"),[h,f]=M.useState("all"),[p,v]=M.useState(""),[g,j]=M.useState(!1),[y,m]=M.useState(null),[x,w]=M.useState(null),[C,_]=M.useState(!0),[N,b]=M.useState(!1),[k,I]=M.useState(new Set),[T,O]=M.useState(null),[$,V]=M.useState({title:"",slug:"",content:"",category:"info",version_type:"v4",status:"draft",meta_description:"",tags:[],order_index:0}),R=[{id:"info",label:"Information",icon:""},{id:"installation",label:"Installation",icon:""},{id:"features",label:"Features",icon:""},{id:"api",label:"API Reference",icon:""},{id:"troubleshooting",label:"Troubleshooting",icon:""},{id:"pricing",label:"Pricing",icon:""},{id:"about",label:"About",icon:""},{id:"tos",label:"Terms of Service",icon:""},{id:"changelog",label:"Changelog",icon:""},{id:"partners",label:"Partners",icon:""}];M.useEffect(()=>{J()},[]),M.useEffect(()=>{const S=P();S.length>0&&!x&&w(S[0])},[d,l]),M.useEffect(()=>{if(x){const S=ne(x.content);S.length>0&&k.size===0&&I(new Set([S[0].id]))}},[x==null?void 0:x.content]);const J=async()=>{const S=await r();c(S);const W=S.filter(q=>q.status==="published");W.length>0&&!x&&w(W[0])},P=()=>l.filter(S=>{const W=S.version_type===d,q=h==="all"||S.category===h,ee=S.title.toLowerCase().includes(p.toLowerCase())||S.content.toLowerCase().includes(p.toLowerCase()),ce=S.status==="published"||e("Admin")||(t==null?void 0:t.grade)==="Support";return W&&q&&ee&&ce}).sort((S,W)=>S.order_index-W.order_index),L=S=>{m(S),V({title:S.title,slug:S.slug,content:S.content,category:S.category,version_type:S.version_type,status:S.status,meta_description:S.meta_description||"",tags:S.tags||[],order_index:S.order_index}),j(!0)},B=async()=>{if(!t)return;let S=!1;y?S=await n(y.id,$):S=await s({...$,author_id:t.id,author_name:t.name}),S&&(await J(),G())},G=()=>{j(!1),m(null),V({title:"",slug:"",content:"",category:"info",version_type:"v4",status:"draft",meta_description:"",tags:[],order_index:0})},U=async S=>{O(S)},K=async S=>{if(!l.find(ee=>ee.id===S))return;await i(S)&&(await J(),(x==null?void 0:x.id)===S&&w(null)),O(null)},te=()=>{O(null)},ne=S=>S.split(/(?=^##\s)/m).filter(q=>q.trim()).map((q,ee)=>{var Y;const ce=q.trim().split(`
`),Te=((Y=ce[0])==null?void 0:Y.replace(/^##\s*/,""))||`Section ${ee+1}`,lt=ce.slice(1).join(`
`).trim(),Dt=Te.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),Pt=lt.length>800||/installation|configuration|troubleshooting|api|advanced|technical|setup|deployment/i.test(Te);return{id:Dt,title:Te,content:lt,shouldBeSpoiler:Pt,readingTime:Math.ceil(lt.length/1e3)}}),A=S=>{const W=new Set(k);W.has(S)?W.delete(S):W.add(S),I(W)},E=S=>{const W=document.getElementById(S);W&&(W.scrollIntoView({behavior:"smooth",block:"start"}),k.has(S)||A(S))},D=S=>{const W=ne(S);return a.jsx("div",{className:"space-y-6",children:W.map((q,ee)=>{const ce=k.has(q.id);return a.jsx("div",{id:q.id,className:"scroll-mt-4",children:q.shouldBeSpoiler?a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[a.jsxs("button",{onClick:()=>A(q.id),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[ce?a.jsx(jc,{className:"w-5 h-5 text-gray-500"}):a.jsx(Gt,{className:"w-5 h-5 text-gray-500"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white text-left",children:q.title})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[q.readingTime," min read"]}),a.jsx(Nu,{className:`w-5 h-5 text-gray-500 transition-transform duration-200 ${ce?"rotate-180":""}`})]})]}),ce&&a.jsx("div",{className:"p-6 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"prose dark:prose-invert max-w-none",children:a.jsx("div",{className:"whitespace-pre-wrap",children:q.content})})}),!ce&&a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[q.content.substring(0,150),"..."]})})]}):a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:q.title}),a.jsx("div",{className:"prose dark:prose-invert max-w-none",children:a.jsx("div",{className:"whitespace-pre-wrap",children:q.content})})]})},q.id)})})},F=S=>{const W=ne(S);return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[a.jsxs("button",{onClick:()=>b(!N),className:"flex items-center justify-between w-full mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(s1,{className:"w-4 h-4 text-gray-500"}),a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Table of Contents"})]}),a.jsx(Nu,{className:`w-4 h-4 text-gray-500 transition-transform duration-200 ${N?"rotate-180":""}`})]}),!N&&a.jsx("div",{className:"space-y-2",children:W.map((q,ee)=>a.jsxs("button",{onClick:()=>E(q.id),className:"flex items-center justify-between w-full text-left p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 group",children:[a.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[a.jsx(Zk,{className:"w-3 h-3 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate group-hover:text-blue-600 dark:group-hover:text-blue-400",children:q.title})]}),a.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0 ml-2",children:[q.shouldBeSpoiler&&a.jsx(Gt,{className:"w-3 h-3 text-gray-400"}),a.jsxs("span",{className:"text-xs text-gray-400",children:[q.readingTime,"m"]})]})]},q.id))})]})},z=()=>e("Admin")||(t==null?void 0:t.grade)==="Support";return e("Guest")?a.jsxs("div",{className:"h-screen flex bg-gray-50 dark:bg-gray-900",children:[a.jsx("div",{className:`${C?"w-80":"w-0"} transition-all duration-300 overflow-hidden border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800`,children:a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Documentation"}),z()&&a.jsxs("button",{onClick:()=>j(!0),className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors duration-200",children:[a.jsx(Rr,{size:14}),a.jsx("span",{children:"Add"})]})]}),a.jsxs("div",{className:"flex space-x-1 mb-4 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>u("v4"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors duration-200 ${d==="v4"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"V4 Docs"}),a.jsx("button",{onClick:()=>u("v5"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors duration-200 ${d==="v5"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"V5 Docs"})]}),a.jsxs("div",{className:"relative mb-4",children:[a.jsx(Sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search documentation...",value:p,onChange:S=>v(S.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsxs("select",{value:h,onChange:S=>f(S.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Categories"}),R.map(S=>a.jsxs("option",{value:S.id,children:[S.icon," ",S.label]},S.id))]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a.jsxs("div",{className:"space-y-2",children:[P().map(S=>{var W,q;return a.jsx("button",{onClick:()=>w(S),className:`w-full text-left p-3 rounded-lg border transition-all duration-200 ${(x==null?void 0:x.id)===S.id?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:`font-medium text-sm mb-1 truncate ${(x==null?void 0:x.id)===S.id?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white"}`,children:S.title}),a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded",children:[(W=R.find(ee=>ee.id===S.category))==null?void 0:W.icon," ",(q=R.find(ee=>ee.id===S.category))==null?void 0:q.label]}),S.status==="draft"&&a.jsx("span",{className:"text-xs px-2 py-1 bg-amber-100 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400 rounded",children:"Draft"})]}),S.meta_description&&a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:S.meta_description})]}),z()&&a.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[a.jsx("button",{onClick:ee=>{ee.stopPropagation(),L(S)},className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:a.jsx(nr,{size:12})}),a.jsx("button",{onClick:ee=>{ee.stopPropagation(),U(S.id)},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:a.jsx(Ut,{size:12})})]})]})},S.id)}),P().length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(_u,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No documentation found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria."})]})]})})]})}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>_(!C),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:a.jsx(_u,{size:20})}),x&&a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:x.title}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(as,{size:14}),a.jsx("span",{children:x.author_name})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(is,{size:14}),a.jsx("span",{children:new Date(x.updated_at).toLocaleDateString()})]}),x.tags&&x.tags.length>0&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(oy,{size:14}),a.jsx("span",{children:x.tags.join(", ")})]})]})]})]}),x&&z()&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>L(x),className:"flex items-center space-x-2 px-3 py-2 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:[a.jsx(nr,{size:16}),a.jsx("span",{children:"Edit"})]}),a.jsxs("button",{onClick:()=>U(x.id),className:"flex items-center space-x-2 px-3 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:[a.jsx(Ut,{size:16}),a.jsx("span",{children:"Delete"})]})]})]})}),a.jsx("div",{className:"flex-1 overflow-hidden",children:x?a.jsxs("div",{className:"h-full flex",children:[a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:D(x.content)})}),a.jsx("div",{className:"w-64 border-l border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-4 overflow-y-auto",children:F(x.content)})]}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx(br,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Select Documentation"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Choose a document from the sidebar to start reading."})]})})})]}),g&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:G}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:y?"Edit Documentation":"Create New Documentation"}),a.jsx("button",{onClick:G,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(_e,{size:24})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),a.jsx("input",{type:"text",value:$.title,onChange:S=>V({...$,title:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Documentation title"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Slug"}),a.jsx("input",{type:"text",value:$.slug,onChange:S=>V({...$,slug:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"url-friendly-slug"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),a.jsx("select",{value:$.category,onChange:S=>V({...$,category:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:R.map(S=>a.jsxs("option",{value:S.id,children:[S.icon," ",S.label]},S.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Version"}),a.jsxs("select",{value:$.version_type,onChange:S=>V({...$,version_type:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"v4",children:"V4"}),a.jsx("option",{value:"v5",children:"V5"}),a.jsx("option",{value:"general",children:"General"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:$.status,onChange:S=>V({...$,status:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"published",children:"Published"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Meta Description"}),a.jsx("textarea",{value:$.meta_description,onChange:S=>V({...$,meta_description:S.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Brief description for search engines..."})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content (Markdown supported)"}),a.jsx("textarea",{value:$.content,onChange:S=>V({...$,content:S.target.value}),rows:20,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:`Write your documentation content here...

Use ## for section headers to create automatic spoilers and table of contents.

## Installation
This section will automatically become a spoiler if it's long enough.

## Getting Started
Regular sections work normally.

## Advanced Configuration
Technical sections are automatically collapsed.`}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[" ",a.jsx("strong",{children:"Tip:"})," Use ## headers to create sections. Long sections (800+ chars) or technical sections will automatically become spoilers."]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:G,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:B,disabled:o,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[a.jsx(Is,{size:18}),a.jsx("span",{children:o?"Saving...":"Save"})]})]})]})]})}),T&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:te}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(Ut,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete Documentation"}),a.jsx("div",{className:"mt-2",children:a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this documentation? This action cannot be undone."})})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{type:"button",onClick:()=>K(T),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),a.jsx("button",{type:"button",onClick:te,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]}):a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Lt,{className:"mx-auto h-12 w-12 text-amber-500"}),a.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Required"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Please sign in to access the documentation."})]})})},Wj=()=>{const{user:t,hasAccess:e}=pt(),{getPatchNotes:r,createPatchNote:s,updatePatchNote:n,deletePatchNote:i,loading:o}=Xt(),{logPatchNoteCreate:l,logPatchNoteUpdate:c,logPatchNoteDelete:d,logPatchNotePublish:u}=Dn(),[h,f]=M.useState(!1),[p,v]=M.useState(null),[g,j]=M.useState([]),[y,m]=M.useState(null),[x,w]=M.useState({version:"",title:"",content:"",status:"draft"});M.useEffect(()=>{C()},[]);const C=async()=>{const P=await r();j(P)},_=P=>{v(P),w({version:P.version,title:P.title,content:P.content,status:P.status}),f(!0)},N=async()=>{if(!t)return;let P=!1;p==null||p.status;const L=x.status==="published"&&(p==null?void 0:p.status)!=="published";p?(P=await n(p.id,x),P&&(await c(x.version,x.title),L&&(await u(x.version),Z.patchNotePublished(x.version),$("New Patch Notes Published",`Version ${x.version} patch notes are now available: ${x.title}`,"success")))):(P=await s({...x,author_id:t.id,author_name:t.name}),P&&(await l(x.version,x.title),x.status==="published"&&(await u(x.version),Z.patchNotePublished(x.version),$("New Patch Notes Published",`Version ${x.version} patch notes are now available: ${x.title}`,"success")))),P&&(await C(),b())},b=()=>{f(!1),v(null),w({version:"",title:"",content:"",status:"draft"})},k=async P=>{g.find(B=>B.id===P)&&m(P)},I=async P=>{const L=g.find(G=>G.id===P);if(!L)return;await i(P)?(await d(L.version),await C(),Z.warning(`Patch note for version ${L.version} deleted`)):Z.error("Failed to delete patch note"),m(null)},T=()=>{m(null)},O=async P=>{const L=g.find(G=>G.id===P);if(!L||L.status==="published")return;await n(P,{status:"published"})&&(await u(L.version),await C(),Z.patchNotePublished(L.version),$("New Patch Notes Published",`Version ${L.version} patch notes are now available: ${L.title}`,"success"))},$=(P,L,B)=>{try{const U=localStorage.getItem("prodomo_users");if(!U)return;JSON.parse(U).forEach(te=>{const ne=`prodomo_notifications_${te.id}`,A=JSON.parse(localStorage.getItem(ne)||"[]"),D=[{id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:P,message:L,type:B,read:!1,created_at:new Date().toISOString(),related_id:"patch_notes",action_url:"/patch-notes"},...A].slice(0,50);localStorage.setItem(ne,JSON.stringify(D))}),console.log("Global notification created for all users:",P)}catch(G){console.error("Failed to create global notification:",G)}},V=P=>P==="published"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400":"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400",R=()=>e("Admin")||(t==null?void 0:t.grade)==="Support",J=g.filter(P=>e("Admin")||(t==null?void 0:t.grade)==="Support"?!0:P.status==="published");return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Patch Notes"}),a.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:R()?"Create and manage patch notes for server updates.":"View the latest server updates and changes."})]}),R()&&a.jsxs("button",{onClick:()=>f(!0),className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(Rr,{size:18}),a.jsx("span",{children:"New Patch Note"})]})]}),h&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:b}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:p?"Edit Patch Note":"Create New Patch Note"}),a.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(_e,{size:24})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Version"}),a.jsx("input",{type:"text",value:x.version,onChange:P=>w({...x,version:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 2.1.4"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:x.status,onChange:P=>w({...x,status:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"published",children:"Published"})]}),x.status==="published"&&a.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[a.jsx(vn,{className:"inline-block w-3 h-3 mr-1"}),"Publishing will notify all users"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),a.jsx("input",{type:"text",value:x.title,onChange:P=>w({...x,title:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter patch note title"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content (Markdown supported)"}),a.jsx("textarea",{value:x.content,onChange:P=>w({...x,content:P.target.value}),rows:12,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"Enter patch note content using Markdown..."})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:b,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:N,disabled:o,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[a.jsx(Is,{size:18}),a.jsx("span",{children:o?"Saving...":"Save"})]})]})]})]})}),y&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:T}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(Ut,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete Patch Note"}),a.jsx("div",{className:"mt-2",children:a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this patch note? This action cannot be undone."})})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{type:"button",onClick:()=>I(y),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),a.jsx("button",{type:"button",onClick:T,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})}),a.jsxs("div",{className:"space-y-4",children:[J.map(P=>a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:P.title}),a.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 rounded-full",children:["v",P.version]}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${V(P.status)}`,children:P.status})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(as,{size:16}),a.jsx("span",{children:P.author_name}),P.author_name.includes("Admin")&&a.jsxs("span",{className:"ml-1 px-1.5 py-0.5 text-xs font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400 flex items-center",children:[a.jsx(Ce,{size:10,className:"mr-0.5"}),"Admin"]}),P.author_name.includes("Support")&&a.jsxs("span",{className:"ml-1 px-1.5 py-0.5 text-xs font-medium rounded-full bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400 flex items-center",children:[a.jsx(As,{size:10,className:"mr-0.5"}),"Support"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(is,{size:16}),a.jsxs("span",{children:["Created ",new Date(P.created_at).toLocaleDateString()]})]}),P.updated_at!==P.created_at&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(nr,{size:16}),a.jsxs("span",{children:["Updated ",new Date(P.updated_at).toLocaleDateString()]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[R()&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>_(P),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:a.jsx(nr,{size:18})}),P.status==="draft"&&a.jsx("button",{onClick:()=>O(P.id),className:"p-2 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Publish",children:a.jsx(vn,{size:18})}),a.jsx("button",{onClick:()=>k(P.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:a.jsx(Ut,{size:18})})]}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/patch-notes?v=${P.version}`),Z.success("Link copied to clipboard")},className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"Copy link",children:a.jsx(ry,{size:18})})]})]}),a.jsx("div",{className:"prose dark:prose-invert max-w-none",children:a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:a.jsx("pre",{className:"whitespace-pre-wrap font-mono text-sm text-gray-900 dark:text-gray-100 overflow-x-auto",children:P.content})})}),a.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(ht,{size:16,className:"text-blue-500"}),a.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Related Downloads"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:()=>{Z.info("Navigating to Downloads section")},className:"flex items-center space-x-2 px-3 py-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg text-sm transition-colors duration-200",children:[a.jsx(ht,{size:14}),a.jsxs("span",{children:["Download v",P.version]})]}),a.jsxs("button",{onClick:()=>{Z.info("Navigating to Documentation")},className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm transition-colors duration-200",children:[a.jsx(Gt,{size:14}),a.jsx("span",{children:"View Documentation"})]})]})]})]})},P.id)),J.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(br,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No patch notes"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:R()?"Get started by creating your first patch note.":"Patch notes will appear here when they are published."}),R()&&a.jsxs("button",{onClick:()=>f(!0),className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(Rr,{size:18}),a.jsx("span",{children:"Create Patch Note"})]})]})]})]})},Vj=({userId:t,onBack:e})=>{var In;const{user:r,hasAccess:s}=pt(),{getUsers:n,updateUser:i,updateUserNotes:o,getActivityLogs:l,getDownloadLogs:c,updateUserGrade:d,loading:u}=Xt(),[h,f]=M.useState(null),[p,v]=M.useState([]),[g,j]=M.useState(null),[y,m]=M.useState(""),[x,w]=M.useState("all"),[C,_]=M.useState(!1),[N,b]=M.useState(!1),[k,I]=M.useState(!0),[T,O]=M.useState(""),[$,V]=M.useState(!1),[R,J]=M.useState(new Set),[P,L]=M.useState(new Set),[B,G]=M.useState({name:"",email:""}),[U,K]=M.useState(!0),[te,ne]=M.useState(null),[A,E]=M.useState([]),[D,F]=M.useState(!1),[z,S]=M.useState("");if(r!=null&&r.is_guest)return a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"text-center max-w-md mx-auto",children:a.jsxs("div",{className:"p-8 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl shadow-lg",children:[a.jsx(Xr,{className:"mx-auto h-16 w-16 text-amber-500 mb-6"}),a.jsx("h3",{className:"text-xl font-bold text-amber-900 dark:text-amber-100 mb-3",children:"Access Restricted"}),a.jsx("p",{className:"text-amber-800 dark:text-amber-200 mb-6 leading-relaxed",children:"You are a guest user, you cannot view profiles."}),a.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 rounded-lg p-4 mb-6",children:a.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:[a.jsx("strong",{children:"Guest limitations:"}),a.jsx("br",{})," Cannot view your own profile",a.jsx("br",{})," Cannot view other users' profiles",a.jsx("br",{})," Profile access requires V4+ membership"]})}),e&&a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 mx-auto px-6 py-3 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-colors duration-200 shadow-md hover:shadow-lg",children:[a.jsx(To,{size:18}),a.jsx("span",{children:"Go Back to Dashboard"})]})]})})});M.useEffect(()=>{if(g){const Q=`prodomo_hidden_activities_${g}`,ue=`prodomo_deleted_activities_${g}`;try{const pe=localStorage.getItem(Q),st=localStorage.getItem(ue);if(pe){const Vs=JSON.parse(pe);J(new Set(Vs))}else J(new Set);if(st){const Vs=JSON.parse(st);L(new Set(Vs))}else L(new Set)}catch(pe){console.error("Failed to load activity states:",pe),J(new Set),L(new Set)}}},[g]);const W=(Q,ue)=>{if(g){const pe=`prodomo_hidden_activities_${g}`,st=`prodomo_deleted_activities_${g}`;try{localStorage.setItem(pe,JSON.stringify(Array.from(Q))),localStorage.setItem(st,JSON.stringify(Array.from(ue)))}catch(Vs){console.error("Failed to save activity states:",Vs)}}};M.useEffect(()=>{t?j(t):r!=null&&r.id&&j(r.id)},[t,r==null?void 0:r.id]),M.useEffect(()=>{g&&ce(g)},[g]),M.useEffect(()=>{s("Admin")&&ee()},[s]),M.useEffect(()=>{g&&q(g)},[g]);const q=async Q=>{try{K(!0);const[ue,pe]=await Promise.all([l(50),c(50)]),st=ue.filter(Qt=>Qt.user_id===Q).map(Qt=>({...Qt,type:"activity"})),Vs=pe.filter(Qt=>Qt.user_id===Q).map(Qt=>({...Qt,type:"download",action:`Downloaded ${Qt.file_name} v${Qt.file_version}`,details:`File: ${Qt.file_name}`})),pb=[...st,...Vs].sort((Qt,mb)=>new Date(mb.created_at).getTime()-new Date(Qt.created_at).getTime()).slice(0,20);E(pb)}catch(ue){console.error("Failed to load user activities:",ue)}finally{K(!1)}},ee=async()=>{try{K(!0);const ue=(await n()).filter(pe=>!pe.is_guest);v(ue)}catch(Q){console.error("Failed to load users:",Q),ne("Failed to load users. Please try again.")}finally{K(!1)}},ce=async Q=>{try{K(!0),ne(null);const pe=(await n()).find(st=>st.id===Q);pe?(f(pe),G({name:pe.name,email:pe.email}),pe.admin_notes&&O(pe.admin_notes),S(pe.grade)):(ne("User not found"),console.error("User not found with ID:",Q))}catch(ue){console.error("Failed to load user data:",ue),ne("Failed to load user data. Please try again.")}finally{K(!1)}},Te=async()=>{if(h!=null&&h.id)try{await i(h.id,B)?(f({...h,...B}),_(!1),Z.success("Profile updated successfully")):Z.error("Failed to update profile")}catch(Q){console.error("Failed to update profile:",Q),Z.error("Failed to update profile")}},lt=()=>{G({name:(h==null?void 0:h.name)||"",email:(h==null?void 0:h.email)||""}),_(!1)},Dt=async()=>{if(h!=null&&h.id)try{await o(h.id,T)?(f({...h,admin_notes:T}),b(!1),Z.success("Admin notes updated successfully")):Z.error("Failed to update admin notes")}catch(Q){console.error("Failed to update admin notes:",Q),Z.error("Failed to update admin notes")}},Pt=()=>{O((h==null?void 0:h.admin_notes)||""),b(!1)},Y=()=>{O((h==null?void 0:h.admin_notes)||""),b(!0)},le=Q=>{const ue=new Set(R);ue.add(Q),J(ue),W(ue,P),Z.info("Activity hidden from user view")},De=Q=>{const ue=new Set(P);ue.add(Q),L(ue),W(R,ue),Z.warning("Activity deleted")},jr=Q=>{const ue=new Set(R),pe=new Set(P);ue.delete(Q),pe.delete(Q),J(ue),L(pe),W(ue,pe),Z.success("Activity restored")},On=()=>{h&&(S(h.grade),F(!0))},re=async()=>{if(!(!(h!=null&&h.id)||z===h.grade))try{await d(h.id,z)?(f({...h,grade:z}),F(!1),Z.success(`User grade updated to ${z}`)):Z.error("Failed to update user grade")}catch(Q){console.error("Failed to update user grade:",Q),Z.error("Failed to update user grade")}},ae=()=>{F(!1)},He=Q=>Q.type==="download"?a.jsx(ht,{size:16,className:"text-blue-500"}):Q.action.includes("login")||Q.action.includes("Sign")?a.jsx(as,{size:16,className:"text-emerald-500"}):Q.action.includes("profile")||Q.action.includes("Updated")?a.jsx(nr,{size:16,className:"text-purple-500"}):a.jsx(at,{size:16,className:"text-gray-500"}),Se=Q=>{switch(Q){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400 border-red-200 dark:border-red-800";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400 border-amber-200 dark:border-amber-800";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400 border-purple-200 dark:border-purple-800";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 border-blue-200 dark:border-blue-800";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400 border-gray-200 dark:border-gray-700"}},_t=Q=>{switch(Q){case"Admin":return"Full system access with management privileges";case"Support":return"Bug management access with V4 download permissions";case"V5":return"Advanced access with beta features";case"V4":return"Standard access with stable releases";default:return"Basic access to public releases"}},Ws=p.filter(Q=>{const ue=Q.name.toLowerCase().includes(y.toLowerCase())||Q.email.toLowerCase().includes(y.toLowerCase()),pe=x==="all"||Q.grade===x;return ue&&pe}),cs=[{label:"Total Downloads",value:((In=h==null?void 0:h.total_downloads)==null?void 0:In.toString())||"0",icon:ht},{label:"Account Age",value:h!=null&&h.join_date?`${Math.floor((new Date().getTime()-new Date(h.join_date).getTime())/(1e3*60*60*24))} days`:"0 days",icon:is},{label:"Last Active",value:h!=null&&h.last_active?new Date(h.last_active).toLocaleDateString():"Unknown",icon:at},{label:"Grade Level",value:(h==null?void 0:h.grade)||"Guest",icon:(h==null?void 0:h.grade)==="Support"?As:Ce}],_r=(h==null?void 0:h.id)===(r==null?void 0:r.id),Fr=_r||s("Admin"),ds=s("Admin"),An=Q=>{const ue=new Date(Q),st=Math.floor((new Date().getTime()-ue.getTime())/1e3);return st<60?`${st}s ago`:st<3600?`${Math.floor(st/60)}m ago`:st<86400?`${Math.floor(st/3600)}h ago`:`${Math.floor(st/86400)}d ago`};return U?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):te?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Xr,{className:"mx-auto h-12 w-12 text-amber-500"}),a.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Error Loading Profile"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:te}),e&&a.jsxs("button",{onClick:e,className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(To,{size:18}),a.jsx("span",{children:"Go Back"})]})]})}):h?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[e&&a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:a.jsx(To,{size:20})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:_r?"My Profile":`${h.name}'s Profile`}),a.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:_r?"Manage your account settings and preferences.":"View and manage user account information."})]})]}),s("Admin")&&a.jsxs("button",{onClick:()=>V(!$),className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(wr,{size:18}),a.jsx("span",{children:$?"Hide User List":"View All Users"})]})]}),s("Admin")&&$&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Select User to View"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(Sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search users...",value:y,onChange:Q=>m(Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Nn,{className:"text-gray-400 w-5 h-5"}),a.jsxs("select",{value:x,onChange:Q=>w(Q.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Grades"}),a.jsx("option",{value:"Guest",children:"Guest"}),a.jsx("option",{value:"V4",children:"V4"}),a.jsx("option",{value:"V5",children:"V5"}),a.jsx("option",{value:"Support",children:"Support"}),a.jsx("option",{value:"Admin",children:"Admin"})]})]})]})]}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Ws.map(Q=>a.jsx("button",{onClick:()=>{j(Q.id),V(!1)},className:`p-4 rounded-lg border-2 transition-all duration-200 text-left ${Q.id===g?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold text-sm",children:Q.name.charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:[Q.name,Q.id===(r==null?void 0:r.id)&&a.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400",children:"(You)"})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:Q.email}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:Q.grade==="Support"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Se("V4")}`,children:"V4"}),a.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Se("Support")}`,children:"Support"})]}):a.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Se(Q.grade)}`,children:Q.grade})})]})]})},Q.id))})})]}),s("Admin")&&a.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-900/10 dark:to-yellow-900/10 border border-amber-200 dark:border-amber-800 rounded-xl shadow-sm",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(l1,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),a.jsx("h3",{className:"text-lg font-semibold text-amber-900 dark:text-amber-100",children:"Admin Notes"}),a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200 rounded-full",children:"Admin Only"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>I(!k),className:"p-1 text-amber-600 dark:text-amber-400 hover:text-amber-800 dark:hover:text-amber-200 transition-colors duration-200",title:k?"Hide notes":"Show notes",children:k?a.jsx(jc,{size:16}):a.jsx(Gt,{size:16})}),!N&&a.jsx("button",{onClick:Y,className:"p-1 text-amber-600 dark:text-amber-400 hover:text-amber-800 dark:hover:text-amber-200 transition-colors duration-200",title:"Edit notes",children:a.jsx(nr,{size:16})})]})]}),k&&a.jsx("div",{className:"space-y-3",children:N?a.jsxs("div",{className:"space-y-3",children:[a.jsx("textarea",{value:T,onChange:Q=>O(Q.target.value),rows:4,className:"w-full px-3 py-2 border border-amber-300 dark:border-amber-700 rounded-lg bg-white dark:bg-amber-900/20 text-amber-900 dark:text-amber-100 placeholder-amber-500 dark:placeholder-amber-400 focus:ring-2 focus:ring-amber-500 focus:border-transparent resize-none",placeholder:"Add admin notes about this user... (behavior, preferences, special requirements, etc.)"}),a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx("button",{onClick:Pt,className:"px-3 py-1 text-sm text-amber-700 dark:text-amber-300 hover:text-amber-900 dark:hover:text-amber-100 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:Dt,disabled:u,className:"flex items-center space-x-1 px-3 py-1 bg-amber-600 hover:bg-amber-700 disabled:bg-amber-400 text-white rounded-lg text-sm font-medium transition-colors duration-200",children:[a.jsx(Is,{size:14}),a.jsx("span",{children:u?"Saving...":"Save"})]})]})]}):a.jsx("div",{className:"bg-amber-100/50 dark:bg-amber-900/20 rounded-lg p-3 border border-amber-200 dark:border-amber-700",children:h.admin_notes?a.jsx("p",{className:"text-amber-900 dark:text-amber-100 text-sm leading-relaxed whitespace-pre-wrap",children:h.admin_notes}):a.jsxs("div",{className:"flex items-center space-x-2 text-amber-600 dark:text-amber-400",children:[a.jsx(Xr,{size:16}),a.jsx("p",{className:"text-sm italic",children:"No admin notes for this user. Click the edit button to add notes."})]})})})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto",children:a.jsx("span",{className:"text-2xl font-bold text-white",children:h.name.charAt(0)})}),a.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-900 dark:text-white",children:h.name}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:h.email})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:h.grade==="Support"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`inline-flex items-center px-3 py-2 rounded-lg border ${Se("V4")}`,children:[a.jsx(Ce,{size:16,className:"mr-2"}),a.jsx("span",{className:"font-medium",children:"V4 Access"})]}),a.jsxs("div",{className:`inline-flex items-center px-3 py-2 rounded-lg border ${Se("Support")}`,children:[a.jsx(As,{size:16,className:"mr-2"}),a.jsx("span",{className:"font-medium",children:"Support Access"})]})]}):a.jsxs("div",{className:`inline-flex items-center px-3 py-2 rounded-lg border ${Se(h.grade)}`,children:[h.grade==="Admin"?a.jsx(Ce,{size:16,className:"mr-2"}):h.grade==="Support"?a.jsx(As,{size:16,className:"mr-2"}):a.jsx(Ce,{size:16,className:"mr-2"}),a.jsxs("span",{className:"font-medium",children:[h.grade," Access"]})]})}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 text-center",children:_t(h.grade)})]}),a.jsx("div",{className:"space-y-4",children:cs.map((Q,ue)=>{const pe=Q.icon;return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(pe,{size:18,className:"text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:Q.label})]}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Q.value})]},ue)})}),s("Admin")&&!_r&&a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("button",{onClick:On,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(nr,{size:16}),a.jsx("span",{children:"Change Access Level"})]})})]})}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Account Information"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:Fr?"Update personal information and contact details.":"View account information."})]}),Fr&&!C?a.jsxs("button",{onClick:()=>_(!0),className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:[a.jsx(nr,{size:16}),a.jsx("span",{children:"Edit"})]}):Fr&&C?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:lt,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:[a.jsx(_e,{size:16}),a.jsx("span",{children:"Cancel"})]}),a.jsxs("button",{onClick:Te,disabled:u,className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition-colors duration-200",children:[a.jsx(Is,{size:16}),a.jsx("span",{children:u?"Saving...":"Save"})]})]}):null]})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),C&&Fr?a.jsx("input",{type:"text",value:B.name,onChange:Q=>G({...B,name:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):a.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[a.jsx(as,{size:16,className:"text-gray-400"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:h.name})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),C&&Fr?a.jsx("input",{type:"email",value:B.email,onChange:Q=>G({...B,email:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):a.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[a.jsx(ci,{size:16,className:"text-gray-400"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:h.email})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Member Since"}),a.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[a.jsx(is,{size:16,className:"text-gray-400"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(h.join_date).toLocaleDateString()})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Active"}),a.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[a.jsx(Wt,{size:16,className:"text-gray-400"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(h.last_active).toLocaleDateString()})]})]})]})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:_r?"Your recent actions and downloads.":`${h.name}'s recent activity.`})]}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"space-y-4",children:A.length>0?A.map(Q=>{const ue=R.has(Q.id),pe=P.has(Q.id);return(pe||ue)&&!ds?null:a.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-lg transition-all duration-200 ${pe?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":ue?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800":"hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:He(Q)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:`text-sm ${pe?"text-red-700 dark:text-red-300 line-through":ue?"text-amber-700 dark:text-amber-300":"text-gray-900 dark:text-white"}`,children:[Q.action,pe&&ds&&a.jsx("span",{className:"ml-2 text-xs",children:"(Deleted by admin)"}),ue&&ds&&a.jsx("span",{className:"ml-2 text-xs",children:"(Hidden from user)"})]}),Q.details&&a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:Q.details}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:An(Q.created_at)})]}),ds&&!_r&&a.jsxs("div",{className:"flex items-center space-x-1",children:[!pe&&!ue&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>le(Q.id),className:"p-1 text-amber-500 hover:text-amber-700 dark:hover:text-amber-400 transition-colors duration-200",title:"Hide from user",children:a.jsx(u1,{size:14})}),a.jsx("button",{onClick:()=>De(Q.id),className:"p-1 text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors duration-200",title:"Delete activity",children:a.jsx(Ut,{size:14})})]}),(pe||ue)&&a.jsx("button",{onClick:()=>jr(Q.id),className:"p-1 text-emerald-500 hover:text-emerald-700 dark:hover:text-emerald-400 transition-colors duration-200",title:"Restore activity",children:a.jsx(a1,{size:14})})]})]},Q.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(at,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No recent activity"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Activity will appear here as it happens."})]})})})]})]})]}),D&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:ae}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Change Access Level"}),a.jsx("button",{onClick:ae,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(_e,{size:24})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold",children:h.name.charAt(0)})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:h.name}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:h.email})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Access Level"}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:h.grade==="Support"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Se("V4")}`,children:"V4"}),a.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Se("Support")}`,children:"Support"})]}):a.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Se(h.grade)}`,children:h.grade})}),a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Access Level"}),a.jsxs("select",{value:z,onChange:Q=>S(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"V4",children:"V4 - Standard access"}),a.jsx("option",{value:"V5",children:"V5 - Advanced features"}),a.jsx("option",{value:"Support",children:"Support - Bug management access"}),a.jsx("option",{value:"Admin",children:"Admin - Full system access"})]})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Ce,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Access Level Information"}),a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:[z==="Admin"&&"Admin users have full access to all system features and management capabilities.",z==="Support"&&"Support users have V4 download access plus the ability to manage and respond to bug reports.",z==="V5"&&"V5 users have access to advanced features and beta versions.",z==="V4"&&"V4 users have standard access to stable releases."]})]})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:ae,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:re,disabled:u||z===h.grade,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[a.jsx(Is,{size:18}),a.jsx("span",{children:u?"Saving...":"Save Changes"})]})]})]})]})})]}):a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Xr,{className:"mx-auto h-12 w-12 text-amber-500"}),a.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"User Not Found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"The requested user profile could not be found."}),e&&a.jsxs("button",{onClick:e,className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(To,{size:18}),a.jsx("span",{children:"Go Back"})]})]})})},qj=()=>{const{isDark:t,toggleTheme:e}=dy(),[r,s]=M.useState({email:!0,push:!1,downloads:!0,security:!0,updates:!0}),[n,i]=M.useState(!1),[o,l]=M.useState({current:"",new:"",confirm:""}),[c,d]=M.useState({language:"en",timezone:"UTC",downloadPath:"/downloads",autoUpdate:!0,betaAccess:!1}),u=(v,g)=>{s(j=>({...j,[v]:g}))},h=(v,g)=>{d(j=>({...j,[v]:g}))},f=()=>{if(o.new!==o.confirm){alert("New passwords do not match!");return}alert("Password changed successfully!"),l({current:"",new:"",confirm:""})},p=()=>{alert("Settings saved successfully!")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Settings"}),a.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Manage your account preferences and system settings."})]}),a.jsxs("button",{onClick:p,className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(Is,{size:18}),a.jsx("span",{children:"Save Changes"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:t?a.jsx(ay,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}):a.jsx(iy,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Appearance"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Customize your visual experience"})]})]})}),a.jsx("div",{className:"p-6 space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Theme"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choose your preferred theme"})]}),a.jsx("button",{onClick:e,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${t?"bg-blue-600":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${t?"translate-x-6":"translate-x-1"}`})})]})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/20 rounded-lg",children:a.jsx(vn,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notifications"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your notification preferences"})]})]})}),a.jsx("div",{className:"p-6 space-y-4",children:[{key:"email",label:"Email Notifications",desc:"Receive updates via email",icon:ci},{key:"push",label:"Push Notifications",desc:"Browser push notifications",icon:o1},{key:"downloads",label:"Download Alerts",desc:"Notify when downloads complete",icon:ht},{key:"security",label:"Security Alerts",desc:"Important security notifications",icon:Ce},{key:"updates",label:"Update Notifications",desc:"New version announcements",icon:Lt}].map(v=>{const g=v.icon;return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(g,{size:16,className:"text-gray-400"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.label}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:v.desc})]})]}),a.jsx("button",{onClick:()=>u(v.key,!r[v.key]),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${r[v.key]?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${r[v.key]?"translate-x-6":"translate-x-1"}`})})]},v.key)})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/20 rounded-lg",children:a.jsx(Ce,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Security"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your account security"})]})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:n?"text":"password",value:o.current,onChange:v=>l({...o,current:v.target.value}),className:"w-full px-3 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter current password"}),a.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:n?a.jsx(jc,{size:16,className:"text-gray-400"}):a.jsx(Gt,{size:16,className:"text-gray-400"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),a.jsx("input",{type:"password",value:o.new,onChange:v=>l({...o,new:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),a.jsx("input",{type:"password",value:o.confirm,onChange:v=>l({...o,confirm:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm new password"})]}),a.jsxs("button",{onClick:f,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(Ua,{size:16}),a.jsx("span",{children:"Change Password"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:a.jsx(ef,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Preferences"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Customize your experience"})]})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Language"}),a.jsxs("select",{value:c.language,onChange:v=>h("language",v.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"en",children:"English"}),a.jsx("option",{value:"es",children:"Spanish"}),a.jsx("option",{value:"fr",children:"French"}),a.jsx("option",{value:"de",children:"German"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Timezone"}),a.jsxs("select",{value:c.timezone,onChange:v=>h("timezone",v.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"UTC",children:"UTC"}),a.jsx("option",{value:"EST",children:"Eastern Standard Time"}),a.jsx("option",{value:"PST",children:"Pacific Standard Time"}),a.jsx("option",{value:"CET",children:"Central European Time"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Default Download Path"}),a.jsx("input",{type:"text",value:c.downloadPath,onChange:v=>h("downloadPath",v.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Auto-update"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Automatically check for updates"})]}),a.jsx("button",{onClick:()=>h("autoUpdate",!c.autoUpdate),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${c.autoUpdate?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${c.autoUpdate?"translate-x-6":"translate-x-1"}`})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Beta Access"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Access to beta versions"})]}),a.jsx("button",{onClick:()=>h("betaAccess",!c.betaAccess),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${c.betaAccess?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${c.betaAccess?"translate-x-6":"translate-x-1"}`})})]})]})]})]})]})};var Hy={exports:{}},Yj="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Gj=Yj,Jj=Gj;function Wy(){}function Vy(){}Vy.resetWarningCache=Wy;var Kj=function(){function t(s,n,i,o,l,c){if(c!==Jj){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Vy,resetWarningCache:Wy};return r.PropTypes=r,r};Hy.exports=Kj();var Xj=Hy.exports;const Ee=nh(Xj);function Pn(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})}const Qj=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function ki(t,e,r){const s=Zj(t),{webkitRelativePath:n}=t,i=typeof e=="string"?e:typeof n=="string"&&n.length>0?n:`./${t.name}`;return typeof s.path!="string"&&cm(s,"path",i),cm(s,"relativePath",i),s}function Zj(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const s=e.split(".").pop().toLowerCase(),n=Qj.get(s);n&&Object.defineProperty(t,"type",{value:n,writable:!1,configurable:!1,enumerable:!0})}return t}function cm(t,e,r){Object.defineProperty(t,e,{value:r,writable:!1,configurable:!1,enumerable:!0})}const e_=[".DS_Store","Thumbs.db"];function t_(t){return Pn(this,void 0,void 0,function*(){return Jl(t)&&r_(t.dataTransfer)?a_(t.dataTransfer,t.type):s_(t)?n_(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?i_(t):[]})}function r_(t){return Jl(t)}function s_(t){return Jl(t)&&Jl(t.target)}function Jl(t){return typeof t=="object"&&t!==null}function n_(t){return Fu(t.target.files).map(e=>ki(e))}function i_(t){return Pn(this,void 0,void 0,function*(){return(yield Promise.all(t.map(r=>r.getFile()))).map(r=>ki(r))})}function a_(t,e){return Pn(this,void 0,void 0,function*(){if(t.items){const r=Fu(t.items).filter(n=>n.kind==="file");if(e!=="drop")return r;const s=yield Promise.all(r.map(o_));return dm(qy(s))}return dm(Fu(t.files).map(r=>ki(r)))})}function dm(t){return t.filter(e=>e_.indexOf(e.name)===-1)}function Fu(t){if(t===null)return[];const e=[];for(let r=0;r<t.length;r++){const s=t[r];e.push(s)}return e}function o_(t){if(typeof t.webkitGetAsEntry!="function")return um(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?Yy(e):um(t,e)}function qy(t){return t.reduce((e,r)=>[...e,...Array.isArray(r)?qy(r):[r]],[])}function um(t,e){return Pn(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const i=yield t.getAsFileSystemHandle();if(i===null)throw new Error(`${t} is not a File`);if(i!==void 0){const o=yield i.getFile();return o.handle=i,ki(o)}}const s=t.getAsFile();if(!s)throw new Error(`${t} is not a File`);return ki(s,(r=e==null?void 0:e.fullPath)!==null&&r!==void 0?r:void 0)})}function l_(t){return Pn(this,void 0,void 0,function*(){return t.isDirectory?Yy(t):c_(t)})}function Yy(t){const e=t.createReader();return new Promise((r,s)=>{const n=[];function i(){e.readEntries(o=>Pn(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(l_));n.push(l),i()}else try{const l=yield Promise.all(n);r(l)}catch(l){s(l)}}),o=>{s(o)})}i()})}function c_(t){return Pn(this,void 0,void 0,function*(){return new Promise((e,r)=>{t.file(s=>{const n=ki(s,t.fullPath);e(n)},s=>{r(s)})})})}var gd=function(t,e){if(t&&e){var r=Array.isArray(e)?e:e.split(",");if(r.length===0)return!0;var s=t.name||"",n=(t.type||"").toLowerCase(),i=n.replace(/\/.*$/,"");return r.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?s.toLowerCase().endsWith(l):l.endsWith("/*")?i===l.replace(/\/.*$/,""):n===l})}return!0};function hm(t){return h_(t)||u_(t)||Jy(t)||d_()}function d_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u_(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function h_(t){if(Array.isArray(t))return $u(t)}function fm(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function pm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fm(Object(r),!0).forEach(function(s){Gy(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fm(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Gy(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ha(t,e){return m_(t)||p_(t,e)||Jy(t,e)||f_()}function f_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jy(t,e){if(t){if(typeof t=="string")return $u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $u(t,e)}}function $u(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function p_(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s=[],n=!0,i=!1,o,l;try{for(r=r.call(t);!(n=(o=r.next()).done)&&(s.push(o.value),!(e&&s.length===e));n=!0);}catch(c){i=!0,l=c}finally{try{!n&&r.return!=null&&r.return()}finally{if(i)throw l}}return s}}function m_(t){if(Array.isArray(t))return t}var g_=typeof gd=="function"?gd:gd.default,x_="file-invalid-type",y_="file-too-large",v_="file-too-small",b_="too-many-files",w_=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=e.split(","),s=r.length>1?"one of ".concat(r.join(", ")):r[0];return{code:x_,message:"File type must be ".concat(s)}},mm=function(e){return{code:y_,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},gm=function(e){return{code:v_,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},k_={code:b_,message:"Too many files"};function Ky(t,e){var r=t.type==="application/x-moz-file"||g_(t,e);return[r,r?null:w_(e)]}function Xy(t,e,r){if(sn(t.size))if(sn(e)&&sn(r)){if(t.size>r)return[!1,mm(r)];if(t.size<e)return[!1,gm(e)]}else{if(sn(e)&&t.size<e)return[!1,gm(e)];if(sn(r)&&t.size>r)return[!1,mm(r)]}return[!0,null]}function sn(t){return t!=null}function j_(t){var e=t.files,r=t.accept,s=t.minSize,n=t.maxSize,i=t.multiple,o=t.maxFiles,l=t.validator;return!i&&e.length>1||i&&o>=1&&e.length>o?!1:e.every(function(c){var d=Ky(c,r),u=Ha(d,1),h=u[0],f=Xy(c,s,n),p=Ha(f,1),v=p[0],g=l?l(c):null;return h&&v&&!g})}function Kl(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function zo(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function xm(t){t.preventDefault()}function __(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function N_(t){return t.indexOf("Edge/")!==-1}function S_(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return __(t)||N_(t)}function Sr(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(s){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return e.some(function(l){return!Kl(s)&&l&&l.apply(void 0,[s].concat(i)),Kl(s)})}}function C_(){return"showOpenFilePicker"in window}function E_(t){if(sn(t)){var e=Object.entries(t).filter(function(r){var s=Ha(r,2),n=s[0],i=s[1],o=!0;return Qy(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(i)||!i.every(Zy))&&(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(r,s){var n=Ha(s,2),i=n[0],o=n[1];return pm(pm({},r),{},Gy({},i,o))},{});return[{description:"Files",accept:e}]}return t}function D_(t){if(sn(t))return Object.entries(t).reduce(function(e,r){var s=Ha(r,2),n=s[0],i=s[1];return[].concat(hm(e),[n],hm(i))},[]).filter(function(e){return Qy(e)||Zy(e)}).join(",")}function P_(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function M_(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function Qy(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function Zy(t){return/^.*\.[\w]+$/.test(t)}var T_=["children"],O_=["open"],A_=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],I_=["refKey","onChange","onClick"];function R_(t){return F_(t)||z_(t)||ev(t)||L_()}function L_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z_(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function F_(t){if(Array.isArray(t))return Uu(t)}function xd(t,e){return B_(t)||U_(t,e)||ev(t,e)||$_()}function $_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ev(t,e){if(t){if(typeof t=="string")return Uu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uu(t,e)}}function Uu(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function U_(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s=[],n=!0,i=!1,o,l;try{for(r=r.call(t);!(n=(o=r.next()).done)&&(s.push(o.value),!(e&&s.length===e));n=!0);}catch(c){i=!0,l=c}finally{try{!n&&r.return!=null&&r.return()}finally{if(i)throw l}}return s}}function B_(t){if(Array.isArray(t))return t}function ym(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function ze(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ym(Object(r),!0).forEach(function(s){Bu(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ym(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Bu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xl(t,e){if(t==null)return{};var r=H_(t,e),s,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)s=i[n],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function H_(t,e){if(t==null)return{};var r={},s=Object.keys(t),n,i;for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}var cf=M.forwardRef(function(t,e){var r=t.children,s=Xl(t,T_),n=rv(s),i=n.open,o=Xl(n,O_);return M.useImperativeHandle(e,function(){return{open:i}},[i]),ch.createElement(M.Fragment,null,r(ze(ze({},o),{},{open:i})))});cf.displayName="Dropzone";var tv={disabled:!1,getFilesFromEvent:t_,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};cf.defaultProps=tv;cf.propTypes={children:Ee.func,accept:Ee.objectOf(Ee.arrayOf(Ee.string)),multiple:Ee.bool,preventDropOnDocument:Ee.bool,noClick:Ee.bool,noKeyboard:Ee.bool,noDrag:Ee.bool,noDragEventsBubbling:Ee.bool,minSize:Ee.number,maxSize:Ee.number,maxFiles:Ee.number,disabled:Ee.bool,getFilesFromEvent:Ee.func,onFileDialogCancel:Ee.func,onFileDialogOpen:Ee.func,useFsAccessApi:Ee.bool,autoFocus:Ee.bool,onDragEnter:Ee.func,onDragLeave:Ee.func,onDragOver:Ee.func,onDrop:Ee.func,onDropAccepted:Ee.func,onDropRejected:Ee.func,onError:Ee.func,validator:Ee.func};var Hu={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function rv(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ze(ze({},tv),t),r=e.accept,s=e.disabled,n=e.getFilesFromEvent,i=e.maxSize,o=e.minSize,l=e.multiple,c=e.maxFiles,d=e.onDragEnter,u=e.onDragLeave,h=e.onDragOver,f=e.onDrop,p=e.onDropAccepted,v=e.onDropRejected,g=e.onFileDialogCancel,j=e.onFileDialogOpen,y=e.useFsAccessApi,m=e.autoFocus,x=e.preventDropOnDocument,w=e.noClick,C=e.noKeyboard,_=e.noDrag,N=e.noDragEventsBubbling,b=e.onError,k=e.validator,I=M.useMemo(function(){return D_(r)},[r]),T=M.useMemo(function(){return E_(r)},[r]),O=M.useMemo(function(){return typeof j=="function"?j:vm},[j]),$=M.useMemo(function(){return typeof g=="function"?g:vm},[g]),V=M.useRef(null),R=M.useRef(null),J=M.useReducer(W_,Hu),P=xd(J,2),L=P[0],B=P[1],G=L.isFocused,U=L.isFileDialogActive,K=M.useRef(typeof window<"u"&&window.isSecureContext&&y&&C_()),te=function(){!K.current&&U&&setTimeout(function(){if(R.current){var ae=R.current.files;ae.length||(B({type:"closeDialog"}),$())}},300)};M.useEffect(function(){return window.addEventListener("focus",te,!1),function(){window.removeEventListener("focus",te,!1)}},[R,U,$,K]);var ne=M.useRef([]),A=function(ae){V.current&&V.current.contains(ae.target)||(ae.preventDefault(),ne.current=[])};M.useEffect(function(){return x&&(document.addEventListener("dragover",xm,!1),document.addEventListener("drop",A,!1)),function(){x&&(document.removeEventListener("dragover",xm),document.removeEventListener("drop",A))}},[V,x]),M.useEffect(function(){return!s&&m&&V.current&&V.current.focus(),function(){}},[V,m,s]);var E=M.useCallback(function(re){b?b(re):console.error(re)},[b]),D=M.useCallback(function(re){re.preventDefault(),re.persist(),le(re),ne.current=[].concat(R_(ne.current),[re.target]),zo(re)&&Promise.resolve(n(re)).then(function(ae){if(!(Kl(re)&&!N)){var He=ae.length,Se=He>0&&j_({files:ae,accept:I,minSize:o,maxSize:i,multiple:l,maxFiles:c,validator:k}),_t=He>0&&!Se;B({isDragAccept:Se,isDragReject:_t,isDragActive:!0,type:"setDraggedFiles"}),d&&d(re)}}).catch(function(ae){return E(ae)})},[n,d,E,N,I,o,i,l,c,k]),F=M.useCallback(function(re){re.preventDefault(),re.persist(),le(re);var ae=zo(re);if(ae&&re.dataTransfer)try{re.dataTransfer.dropEffect="copy"}catch{}return ae&&h&&h(re),!1},[h,N]),z=M.useCallback(function(re){re.preventDefault(),re.persist(),le(re);var ae=ne.current.filter(function(Se){return V.current&&V.current.contains(Se)}),He=ae.indexOf(re.target);He!==-1&&ae.splice(He,1),ne.current=ae,!(ae.length>0)&&(B({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),zo(re)&&u&&u(re))},[V,u,N]),S=M.useCallback(function(re,ae){var He=[],Se=[];re.forEach(function(_t){var Ws=Ky(_t,I),cs=xd(Ws,2),_r=cs[0],Fr=cs[1],ds=Xy(_t,o,i),An=xd(ds,2),In=An[0],Q=An[1],ue=k?k(_t):null;if(_r&&In&&!ue)He.push(_t);else{var pe=[Fr,Q];ue&&(pe=pe.concat(ue)),Se.push({file:_t,errors:pe.filter(function(st){return st})})}}),(!l&&He.length>1||l&&c>=1&&He.length>c)&&(He.forEach(function(_t){Se.push({file:_t,errors:[k_]})}),He.splice(0)),B({acceptedFiles:He,fileRejections:Se,isDragReject:Se.length>0,type:"setFiles"}),f&&f(He,Se,ae),Se.length>0&&v&&v(Se,ae),He.length>0&&p&&p(He,ae)},[B,l,I,o,i,c,f,p,v,k]),W=M.useCallback(function(re){re.preventDefault(),re.persist(),le(re),ne.current=[],zo(re)&&Promise.resolve(n(re)).then(function(ae){Kl(re)&&!N||S(ae,re)}).catch(function(ae){return E(ae)}),B({type:"reset"})},[n,S,E,N]),q=M.useCallback(function(){if(K.current){B({type:"openDialog"}),O();var re={multiple:l,types:T};window.showOpenFilePicker(re).then(function(ae){return n(ae)}).then(function(ae){S(ae,null),B({type:"closeDialog"})}).catch(function(ae){P_(ae)?($(ae),B({type:"closeDialog"})):M_(ae)?(K.current=!1,R.current?(R.current.value=null,R.current.click()):E(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):E(ae)});return}R.current&&(B({type:"openDialog"}),O(),R.current.value=null,R.current.click())},[B,O,$,y,S,E,T,l]),ee=M.useCallback(function(re){!V.current||!V.current.isEqualNode(re.target)||(re.key===" "||re.key==="Enter"||re.keyCode===32||re.keyCode===13)&&(re.preventDefault(),q())},[V,q]),ce=M.useCallback(function(){B({type:"focus"})},[]),Te=M.useCallback(function(){B({type:"blur"})},[]),lt=M.useCallback(function(){w||(S_()?setTimeout(q,0):q())},[w,q]),Dt=function(ae){return s?null:ae},Pt=function(ae){return C?null:Dt(ae)},Y=function(ae){return _?null:Dt(ae)},le=function(ae){N&&ae.stopPropagation()},De=M.useMemo(function(){return function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ae=re.refKey,He=ae===void 0?"ref":ae,Se=re.role,_t=re.onKeyDown,Ws=re.onFocus,cs=re.onBlur,_r=re.onClick,Fr=re.onDragEnter,ds=re.onDragOver,An=re.onDragLeave,In=re.onDrop,Q=Xl(re,A_);return ze(ze(Bu({onKeyDown:Pt(Sr(_t,ee)),onFocus:Pt(Sr(Ws,ce)),onBlur:Pt(Sr(cs,Te)),onClick:Dt(Sr(_r,lt)),onDragEnter:Y(Sr(Fr,D)),onDragOver:Y(Sr(ds,F)),onDragLeave:Y(Sr(An,z)),onDrop:Y(Sr(In,W)),role:typeof Se=="string"&&Se!==""?Se:"presentation"},He,V),!s&&!C?{tabIndex:0}:{}),Q)}},[V,ee,ce,Te,lt,D,F,z,W,C,_,s]),jr=M.useCallback(function(re){re.stopPropagation()},[]),On=M.useMemo(function(){return function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ae=re.refKey,He=ae===void 0?"ref":ae,Se=re.onChange,_t=re.onClick,Ws=Xl(re,I_),cs=Bu({accept:I,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Dt(Sr(Se,W)),onClick:Dt(Sr(_t,jr)),tabIndex:-1},He,R);return ze(ze({},cs),Ws)}},[R,r,l,W,s]);return ze(ze({},L),{},{isFocused:G&&!s,getRootProps:De,getInputProps:On,rootRef:V,inputRef:R,open:Dt(q)})}function W_(t,e){switch(e.type){case"focus":return ze(ze({},t),{},{isFocused:!0});case"blur":return ze(ze({},t),{},{isFocused:!1});case"openDialog":return ze(ze({},Hu),{},{isFileDialogActive:!0});case"closeDialog":return ze(ze({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return ze(ze({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return ze(ze({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return ze({},Hu);default:return t}}function vm(){}const V_=()=>{const{user:t,hasAccess:e}=pt(),{getServerFiles:r,createServerFile:s,updateServerFile:n,deleteServerFile:i,uploadFile:o,loading:l,error:c,setError:d}=Xt(),{logFileUpload:u,logFileDelete:h}=Dn(),[f,p]=M.useState([]),[v,g]=M.useState(!1),[j,y]=M.useState(null),[m,x]=M.useState(null),[w,C]=M.useState({name:"",version:"",description:"",file_type:"server",min_grade:"Guest",status:"active",changelog:[""],file_url:"",upload_method:"direct",notify_users:!0}),[_,N]=M.useState(null);M.useEffect(()=>{b()},[]);const b=async()=>{const D=await r();p(D)},k=D=>{D.length>0&&(N(D[0]),C(F=>({...F,upload_method:"direct"})))},{getRootProps:I,getInputProps:T,isDragActive:O}=rv({onDrop:k,accept:{"application/zip":[".zip"],"application/x-rar-compressed":[".rar"],"application/x-7z-compressed":[".7z"],"application/octet-stream":[".jar",".exe"],"text/plain":[".txt"],"application/pdf":[".pdf"]},maxFiles:1}),$=D=>{y(D),C({name:D.name,version:D.version,description:D.description,file_type:D.file_type,min_grade:D.min_grade,status:D.status,changelog:D.changelog||[""],file_url:D.file_url,upload_method:"external",notify_users:!0}),g(!0)},V=(D,F)=>{try{if(!w.notify_users)return;const S=localStorage.getItem("prodomo_users");if(!S)return;JSON.parse(S).forEach(q=>{const ee=q.grade,ce=D.min_grade,Te=["Guest","V4","V5","Admin"],lt=Te.indexOf(ee),Dt=Te.indexOf(ce);if(lt<Dt)return;const Pt=`prodomo_notifications_${q.id}`,Y=JSON.parse(localStorage.getItem(Pt)||"[]"),De=[{id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:F?"New File Available":"File Updated",message:F?`${D.name} v${D.version} is now available for download`:`${D.name} has been updated to v${D.version}`,type:"info",read:!1,created_at:new Date().toISOString(),related_id:D.id,action_url:"/downloads"},...Y].slice(0,50);localStorage.setItem(Pt,JSON.stringify(De))}),console.log(`File ${F?"upload":"update"} notification created for users`)}catch(z){console.error("Failed to create file notification:",z)}},R=async()=>{try{let D=(j==null?void 0:j.file_url)||w.file_url,F=(j==null?void 0:j.file_size)||0;if(w.upload_method==="direct"&&_){const W=`${Date.now()}-${_.name}`,q=await o(_,"server-files",W);if(q)D=q,F=_.size,Z.upload(_.name);else throw new Error("Failed to upload file")}else w.upload_method!=="direct"&&w.file_url&&(D=w.file_url,F=(j==null?void 0:j.file_size)||50*1024*1024);if(!D)throw new Error("Please provide a file or download URL");const z={...w,file_url:D,file_size:F,changelog:w.changelog.filter(W=>W.trim()!==""),created_by:(t==null?void 0:t.id)||"",download_count:(j==null?void 0:j.download_count)||0};let S=!1;if(j)S=await n(j.id,z),S&&(Z.success(`${w.name} has been updated`),await u(w.name,"update"),V({...z,id:j.id},!1));else if(S=await s(z),S){Z.success(`${w.name} has been uploaded`),await u(w.name,w.file_type);const q=(await r()).find(ee=>ee.name===w.name&&ee.version===w.version);q&&V({...z,id:q.id},!0)}S&&(await b(),J())}catch(D){const F=D instanceof Error?D.message:"An error occurred";d(F),Z.error(F)}},J=()=>{g(!1),y(null),N(null),C({name:"",version:"",description:"",file_type:"server",min_grade:"Guest",status:"active",changelog:[""],file_url:"",upload_method:"direct",notify_users:!0})},P=async D=>{x(D.id)},L=async D=>{const F=f.find(S=>S.id===D);if(!F)return;await i(D)?(await b(),Z.fileDeleted(F.name),await h(F.name)):Z.error("Failed to delete file"),x(null)},B=()=>{x(null)},G=()=>{C({...w,changelog:[...w.changelog,""]})},U=(D,F)=>{const z=[...w.changelog];z[D]=F,C({...w,changelog:z})},K=D=>{const F=w.changelog.filter((z,S)=>S!==D);C({...w,changelog:F})},te=D=>{switch(D){case"server":return a.jsx(bn,{className:"w-5 h-5 text-blue-500"});case"plugin":return a.jsx(i1,{className:"w-5 h-5 text-purple-500"});case"archive":return a.jsx(Yk,{className:"w-5 h-5 text-amber-500"});case"documentation":return a.jsx(br,{className:"w-5 h-5 text-emerald-500"});default:return a.jsx(Xk,{className:"w-5 h-5 text-gray-500"})}},ne=D=>{switch(D){case"active":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400";case"beta":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"deprecated":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},A=D=>{if(D===0)return"0 Bytes";const F=1024,z=["Bytes","KB","MB","GB"],S=Math.floor(Math.log(D)/Math.log(F));return parseFloat((D/Math.pow(F,S)).toFixed(2))+" "+z[S]},E=D=>{switch(D){case"google_drive":return a.jsx(Qr,{className:"w-5 h-5 text-blue-500"});case"mega":return a.jsx(Qr,{className:"w-5 h-5 text-red-500"});case"external":return a.jsx(Up,{className:"w-5 h-5 text-purple-500"});default:return a.jsx(Su,{className:"w-5 h-5 text-gray-500"})}};return e("Admin")?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"File Manager"}),a.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Upload and manage server files, updates, and archives."})]}),a.jsxs("button",{onClick:()=>g(!0),className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(Rr,{size:18}),a.jsx("span",{children:"Add File"})]})]}),c&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Lt,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:c})]}),a.jsx("button",{onClick:()=>d(null),className:"text-red-400 hover:text-red-600 dark:hover:text-red-300",children:a.jsx(_e,{size:16})})]})}),v&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:J}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:j?"Edit File":"Upload New File"}),a.jsx("button",{onClick:J,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(_e,{size:24})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Upload Method"}),a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[{id:"direct",label:"Direct Upload",icon:Su,desc:"Upload file directly"},{id:"google_drive",label:"Google Drive",icon:Qr,desc:"Share link from Google Drive"},{id:"mega",label:"MEGA",icon:Qr,desc:"Share link from MEGA"},{id:"external",label:"External Link",icon:Up,desc:"Any external download link"}].map(D=>{const F=D.icon,z=w.upload_method===D.id;return a.jsxs("button",{type:"button",onClick:()=>C({...w,upload_method:D.id}),className:`p-4 rounded-lg border-2 transition-all duration-200 ${z?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[a.jsx(F,{className:`w-6 h-6 mx-auto mb-2 ${z?"text-blue-500":"text-gray-400"}`}),a.jsx("p",{className:`text-sm font-medium ${z?"text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300"}`,children:D.label}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:D.desc})]},D.id)})})]}),w.upload_method==="direct"?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload File"}),a.jsxs("div",{...I(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors duration-200 ${O?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,children:[a.jsx("input",{...T()}),a.jsx(tf,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),_?a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.name}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:A(_.size)})]}):a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Drag and drop a file here, or click to select"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Supports: ZIP, RAR, 7Z, JAR, EXE, TXT, PDF"})]})]})]}):a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[w.upload_method==="google_drive"&&"Google Drive Share Link",w.upload_method==="mega"&&"MEGA Share Link",w.upload_method==="external"&&"External Download URL"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"url",value:w.file_url,onChange:D=>C({...w,file_url:D.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:w.upload_method==="google_drive"?"https://drive.google.com/file/d/...":w.upload_method==="mega"?"https://mega.nz/file/...":"https://example.com/download/file.zip"}),a.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:E(w.upload_method)})]}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[w.upload_method==="google_drive"&&'Make sure the file is publicly accessible or shared with "Anyone with the link"',w.upload_method==="mega"&&"Use the public share link from MEGA",w.upload_method==="external"&&"Any direct download link that users can access"]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),a.jsx("input",{type:"text",value:w.name,onChange:D=>C({...w,name:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Prodomo Server"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Version"}),a.jsx("input",{type:"text",value:w.version,onChange:D=>C({...w,version:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 2.1.4"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"File Type"}),a.jsxs("select",{value:w.file_type,onChange:D=>C({...w,file_type:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"server",children:"Server"}),a.jsx("option",{value:"plugin",children:"Plugin"}),a.jsx("option",{value:"archive",children:"Archive"}),a.jsx("option",{value:"documentation",children:"Documentation"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Minimum Grade"}),a.jsxs("select",{value:w.min_grade,onChange:D=>C({...w,min_grade:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"Guest",children:"Guest"}),a.jsx("option",{value:"V4",children:"V4"}),a.jsx("option",{value:"V5",children:"V5"}),a.jsx("option",{value:"Admin",children:"Admin"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:w.status,onChange:D=>C({...w,status:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"beta",children:"Beta"}),a.jsx("option",{value:"deprecated",children:"Deprecated"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notification Settings"}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[a.jsx("input",{type:"checkbox",id:"notify_users",checked:w.notify_users,onChange:D=>C({...w,notify_users:D.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsxs("label",{htmlFor:"notify_users",className:"text-sm text-gray-700 dark:text-gray-300",children:["Notify users about this ",j?"update":"new file"]})]}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center",children:[a.jsx(vn,{size:12,className:"mr-1 text-blue-500"}),"Users with appropriate access level will be notified"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),a.jsx("textarea",{value:w.description,onChange:D=>C({...w,description:D.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe this file..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Changelog"}),a.jsxs("div",{className:"space-y-2",children:[w.changelog.map((D,F)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:D,onChange:z=>U(F,z.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"What's new in this version..."}),a.jsx("button",{type:"button",onClick:()=>K(F),className:"p-2 text-red-500 hover:text-red-700 dark:hover:text-red-400",children:a.jsx(_e,{size:16})})]},F)),a.jsxs("button",{type:"button",onClick:G,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:[a.jsx(Rr,{size:16}),a.jsx("span",{children:"Add changelog item"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:J,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:R,disabled:l||!j&&w.upload_method==="direct"&&!_&&!w.file_url,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[a.jsx(Is,{size:18}),a.jsx("span",{children:l?"Saving...":"Save"})]})]})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:B}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(Ut,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete File"}),a.jsx("div",{className:"mt-2",children:a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this file? This action cannot be undone."})})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{type:"button",onClick:()=>L(m),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),a.jsx("button",{type:"button",onClick:B,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})}),a.jsxs("div",{className:"space-y-4",children:[f.map(D=>a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-200",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[a.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded-lg",children:te(D.file_type)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:D.name}),a.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 rounded-full",children:["v",D.version]}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ne(D.status)}`,children:D.status})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:D.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx("span",{children:A(D.file_size)}),a.jsxs("span",{children:[D.download_count," downloads"]}),a.jsxs("span",{children:["Min: ",D.min_grade]}),a.jsx("span",{children:new Date(D.created_at).toLocaleDateString()})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>$(D),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:a.jsx(nr,{size:18})}),a.jsx("button",{onClick:()=>P(D),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:a.jsx(Ut,{size:18})})]})]})})},D.id)),f.length===0&&!l&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Qk,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No files uploaded"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Get started by uploading your first server file."}),a.jsxs("button",{onClick:()=>g(!0),className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(Rr,{size:18}),a.jsx("span",{children:"Upload File"})]})]})]})]}):a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Lt,{className:"mx-auto h-12 w-12 text-amber-500"}),a.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access file management."})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function co(t){return t+.5|0}const js=(t,e,r)=>Math.max(Math.min(t,r),e);function ea(t){return js(co(t*2.55),0,255)}function Rs(t){return js(co(t*255),0,255)}function Yr(t){return js(co(t/2.55)/100,0,1)}function bm(t){return js(co(t*100),0,100)}const Zt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Wu=[..."0123456789ABCDEF"],q_=t=>Wu[t&15],Y_=t=>Wu[(t&240)>>4]+Wu[t&15],Fo=t=>(t&240)>>4===(t&15),G_=t=>Fo(t.r)&&Fo(t.g)&&Fo(t.b)&&Fo(t.a);function J_(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&Zt[t[1]]*17,g:255&Zt[t[2]]*17,b:255&Zt[t[3]]*17,a:e===5?Zt[t[4]]*17:255}:(e===7||e===9)&&(r={r:Zt[t[1]]<<4|Zt[t[2]],g:Zt[t[3]]<<4|Zt[t[4]],b:Zt[t[5]]<<4|Zt[t[6]],a:e===9?Zt[t[7]]<<4|Zt[t[8]]:255})),r}const K_=(t,e)=>t<255?e(t):"";function X_(t){var e=G_(t)?q_:Y_;return t?"#"+e(t.r)+e(t.g)+e(t.b)+K_(t.a,e):void 0}const Q_=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function sv(t,e,r){const s=e*Math.min(r,1-r),n=(i,o=(i+t/30)%12)=>r-s*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function Z_(t,e,r){const s=(n,i=(n+t/60)%6)=>r-r*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function eN(t,e,r){const s=sv(t,1,.5);let n;for(e+r>1&&(n=1/(e+r),e*=n,r*=n),n=0;n<3;n++)s[n]*=1-e-r,s[n]+=e;return s}function tN(t,e,r,s,n){return t===n?(e-r)/s+(e<r?6:0):e===n?(r-t)/s+2:(t-e)/s+4}function df(t){const r=t.r/255,s=t.g/255,n=t.b/255,i=Math.max(r,s,n),o=Math.min(r,s,n),l=(i+o)/2;let c,d,u;return i!==o&&(u=i-o,d=l>.5?u/(2-i-o):u/(i+o),c=tN(r,s,n,u,i),c=c*60+.5),[c|0,d||0,l]}function uf(t,e,r,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,s)).map(Rs)}function hf(t,e,r){return uf(sv,t,e,r)}function rN(t,e,r){return uf(eN,t,e,r)}function sN(t,e,r){return uf(Z_,t,e,r)}function nv(t){return(t%360+360)%360}function nN(t){const e=Q_.exec(t);let r=255,s;if(!e)return;e[5]!==s&&(r=e[6]?ea(+e[5]):Rs(+e[5]));const n=nv(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=rN(n,i,o):e[1]==="hsv"?s=sN(n,i,o):s=hf(n,i,o),{r:s[0],g:s[1],b:s[2],a:r}}function iN(t,e){var r=df(t);r[0]=nv(r[0]+e),r=hf(r),t.r=r[0],t.g=r[1],t.b=r[2]}function aN(t){if(!t)return;const e=df(t),r=e[0],s=bm(e[1]),n=bm(e[2]);return t.a<255?`hsla(${r}, ${s}%, ${n}%, ${Yr(t.a)})`:`hsl(${r}, ${s}%, ${n}%)`}const wm={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},km={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function oN(){const t={},e=Object.keys(km),r=Object.keys(wm);let s,n,i,o,l;for(s=0;s<e.length;s++){for(o=l=e[s],n=0;n<r.length;n++)i=r[n],l=l.replace(i,wm[i]);i=parseInt(km[o],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let $o;function lN(t){$o||($o=oN(),$o.transparent=[0,0,0,0]);const e=$o[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const cN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function dN(t){const e=cN.exec(t);let r=255,s,n,i;if(e){if(e[7]!==s){const o=+e[7];r=e[8]?ea(o):js(o*255,0,255)}return s=+e[1],n=+e[3],i=+e[5],s=255&(e[2]?ea(s):js(s,0,255)),n=255&(e[4]?ea(n):js(n,0,255)),i=255&(e[6]?ea(i):js(i,0,255)),{r:s,g:n,b:i,a:r}}}function uN(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Yr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const yd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Un=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function hN(t,e,r){const s=Un(Yr(t.r)),n=Un(Yr(t.g)),i=Un(Yr(t.b));return{r:Rs(yd(s+r*(Un(Yr(e.r))-s))),g:Rs(yd(n+r*(Un(Yr(e.g))-n))),b:Rs(yd(i+r*(Un(Yr(e.b))-i))),a:t.a+r*(e.a-t.a)}}function Uo(t,e,r){if(t){let s=df(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*r,e===0?360:1)),s=hf(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function iv(t,e){return t&&Object.assign(e||{},t)}function jm(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Rs(t[3]))):(e=iv(t,{r:0,g:0,b:0,a:1}),e.a=Rs(e.a)),e}function fN(t){return t.charAt(0)==="r"?dN(t):nN(t)}class Wa{constructor(e){if(e instanceof Wa)return e;const r=typeof e;let s;r==="object"?s=jm(e):r==="string"&&(s=J_(e)||lN(e)||fN(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=iv(this._rgb);return e&&(e.a=Yr(e.a)),e}set rgb(e){this._rgb=jm(e)}rgbString(){return this._valid?uN(this._rgb):void 0}hexString(){return this._valid?X_(this._rgb):void 0}hslString(){return this._valid?aN(this._rgb):void 0}mix(e,r){if(e){const s=this.rgb,n=e.rgb;let i;const o=r===i?.5:r,l=2*o-1,c=s.a-n.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,s.r=255&d*s.r+i*n.r+.5,s.g=255&d*s.g+i*n.g+.5,s.b=255&d*s.b+i*n.b+.5,s.a=o*s.a+(1-o)*n.a,this.rgb=s}return this}interpolate(e,r){return e&&(this._rgb=hN(this._rgb,e._rgb,r)),this}clone(){return new Wa(this.rgb)}alpha(e){return this._rgb.a=Rs(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=co(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Uo(this._rgb,2,e),this}darken(e){return Uo(this._rgb,2,-e),this}saturate(e){return Uo(this._rgb,1,e),this}desaturate(e){return Uo(this._rgb,1,-e),this}rotate(e){return iN(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function $r(){}const pN=(()=>{let t=0;return()=>t++})();function be(t){return t==null}function et(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ye(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function cr(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Cr(t,e){return cr(t)?t:e}function fe(t,e){return typeof t>"u"?e:t}const mN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,av=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ae(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function ke(t,e,r,s){let n,i,o;if(et(t))for(i=t.length,n=0;n<i;n++)e.call(r,t[n],n);else if(ye(t))for(o=Object.keys(t),i=o.length,n=0;n<i;n++)e.call(r,t[o[n]],o[n])}function Ql(t,e){let r,s,n,i;if(!t||!e||t.length!==e.length)return!1;for(r=0,s=t.length;r<s;++r)if(n=t[r],i=e[r],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function Zl(t){if(et(t))return t.map(Zl);if(ye(t)){const e=Object.create(null),r=Object.keys(t),s=r.length;let n=0;for(;n<s;++n)e[r[n]]=Zl(t[r[n]]);return e}return t}function ov(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function gN(t,e,r,s){if(!ov(t))return;const n=e[t],i=r[t];ye(n)&&ye(i)?Va(n,i,s):e[t]=Zl(i)}function Va(t,e,r){const s=et(e)?e:[e],n=s.length;if(!ye(t))return t;r=r||{};const i=r.merger||gN;let o;for(let l=0;l<n;++l){if(o=s[l],!ye(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)i(c[d],t,o,r)}return t}function va(t,e){return Va(t,e,{merger:xN})}function xN(t,e,r){if(!ov(t))return;const s=e[t],n=r[t];ye(s)&&ye(n)?va(s,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Zl(n))}const _m={"":t=>t,x:t=>t.x,y:t=>t.y};function yN(t){const e=t.split("."),r=[];let s="";for(const n of e)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(r.push(s),s="");return r}function vN(t){const e=yN(t);return r=>{for(const s of e){if(s==="")break;r=r&&r[s]}return r}}function wn(t,e){return(_m[e]||(_m[e]=vN(e)))(t)}function ff(t){return t.charAt(0).toUpperCase()+t.slice(1)}const qa=t=>typeof t<"u",Fs=t=>typeof t=="function",Nm=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function bN(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const je=Math.PI,Ve=2*je,wN=Ve+je,ec=Number.POSITIVE_INFINITY,kN=je/180,rt=je/2,Ys=je/4,Sm=je*2/3,Vu=Math.log10,Lr=Math.sign;function ba(t,e,r){return Math.abs(t-e)<r}function Cm(t){const e=Math.round(t);t=ba(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(Vu(t))),s=t/r;return(s<=1?1:s<=2?2:s<=5?5:10)*r}function jN(t){const e=[],r=Math.sqrt(t);let s;for(s=1;s<r;s++)t%s===0&&(e.push(s),e.push(t/s));return r===(r|0)&&e.push(r),e.sort((n,i)=>n-i).pop(),e}function _N(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ya(t){return!_N(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function NN(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function SN(t,e,r){let s,n,i;for(s=0,n=t.length;s<n;s++)i=t[s][r],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Zr(t){return t*(je/180)}function CN(t){return t*(180/je)}function Em(t){if(!cr(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function lv(t,e){const r=e.x-t.x,s=e.y-t.y,n=Math.sqrt(r*r+s*s);let i=Math.atan2(s,r);return i<-.5*je&&(i+=Ve),{angle:i,distance:n}}function qu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function EN(t,e){return(t-e+wN)%Ve-je}function gr(t){return(t%Ve+Ve)%Ve}function Ga(t,e,r,s){const n=gr(t),i=gr(e),o=gr(r),l=gr(i-n),c=gr(o-n),d=gr(n-i),u=gr(n-o);return n===i||n===o||s&&i===o||l>c&&d<u}function wt(t,e,r){return Math.max(e,Math.min(r,t))}function DN(t){return wt(t,-32768,32767)}function _s(t,e,r,s=1e-6){return t>=Math.min(e,r)-s&&t<=Math.max(e,r)+s}function pf(t,e,r){r=r||(o=>t[o]<e);let s=t.length-1,n=0,i;for(;s-n>1;)i=n+s>>1,r(i)?n=i:s=i;return{lo:n,hi:s}}const cn=(t,e,r,s)=>pf(t,r,s?n=>{const i=t[n][e];return i<r||i===r&&t[n+1][e]===r}:n=>t[n][e]<r),PN=(t,e,r)=>pf(t,r,s=>t[s][e]>=r);function MN(t,e,r){let s=0,n=t.length;for(;s<n&&t[s]<e;)s++;for(;n>s&&t[n-1]>r;)n--;return s>0||n<t.length?t.slice(s,n):t}const cv=["push","pop","shift","splice","unshift"];function TN(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),cv.forEach(r=>{const s="_onData"+ff(r),n=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...i){const o=n.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),o}})})}function Dm(t,e){const r=t._chartjs;if(!r)return;const s=r.listeners,n=s.indexOf(e);n!==-1&&s.splice(n,1),!(s.length>0)&&(cv.forEach(i=>{delete t[i]}),delete t._chartjs)}function dv(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const uv=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function hv(t,e){let r=[],s=!1;return function(...n){r=n,s||(s=!0,uv.call(window,()=>{s=!1,t.apply(e,r)}))}}function ON(t,e){let r;return function(...s){return e?(clearTimeout(r),r=setTimeout(t,e,s)):t.apply(this,s),e}}const mf=t=>t==="start"?"left":t==="end"?"right":"center",yt=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,AN=(t,e,r,s)=>t===(s?"left":"right")?r:t==="center"?(e+r)/2:e;function IN(t,e,r){const s=e.length;let n=0,i=s;if(t._sorted){const{iScale:o,vScale:l,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:f,minDefined:p,maxDefined:v}=o.getUserBounds();if(p){if(n=Math.min(cn(c,u,h).lo,r?s:cn(e,u,o.getPixelForValue(h)).lo),d){const g=c.slice(0,n+1).reverse().findIndex(j=>!be(j[l.axis]));n-=Math.max(0,g)}n=wt(n,0,s-1)}if(v){let g=Math.max(cn(c,o.axis,f,!0).hi+1,r?0:cn(e,u,o.getPixelForValue(f),!0).hi+1);if(d){const j=c.slice(g-1).findIndex(y=>!be(y[l.axis]));g+=Math.max(0,j)}i=wt(g,n,s)-n}else i=s-n}return{start:n,count:i}}function RN(t){const{xScale:e,yScale:r,_scaleRanges:s}=t,n={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!s)return t._scaleRanges=n,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==r.min||s.ymax!==r.max;return Object.assign(s,n),i}const Bo=t=>t===0||t===1,Pm=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ve/r)),Mm=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ve/r)+1,wa={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*rt)+1,easeOutSine:t=>Math.sin(t*rt),easeInOutSine:t=>-.5*(Math.cos(je*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Bo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Bo(t)?t:Pm(t,.075,.3),easeOutElastic:t=>Bo(t)?t:Mm(t,.075,.3),easeInOutElastic(t){return Bo(t)?t:t<.5?.5*Pm(t*2,.1125,.45):.5+.5*Mm(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-wa.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?wa.easeInBounce(t*2)*.5:wa.easeOutBounce(t*2-1)*.5+.5};function gf(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Tm(t){return gf(t)?t:new Wa(t)}function vd(t){return gf(t)?t:new Wa(t).saturate(.5).darken(.1).hexString()}const LN=["x","y","borderWidth","radius","tension"],zN=["color","borderColor","backgroundColor"];function FN(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:zN},numbers:{type:"number",properties:LN}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function $N(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Om=new Map;function UN(t,e){e=e||{};const r=t+JSON.stringify(e);let s=Om.get(r);return s||(s=new Intl.NumberFormat(t,e),Om.set(r,s)),s}function xf(t,e,r){return UN(e,r).format(t)}const fv={values(t){return et(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const s=this.chart.options.locale;let n,i=t;if(r.length>1){const d=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(d<1e-4||d>1e15)&&(n="scientific"),i=BN(t,r)}const o=Vu(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),xf(t,s,c)},logarithmic(t,e,r){if(t===0)return"0";const s=r[e].significand||t/Math.pow(10,Math.floor(Vu(t)));return[1,2,3,5,10,15].includes(s)||e>.8*r.length?fv.numeric.call(this,t,e,r):""}};function BN(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var pv={formatters:fv};function HN(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:pv.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const kn=Object.create(null),Yu=Object.create(null);function ka(t,e){if(!e)return t;const r=e.split(".");for(let s=0,n=r.length;s<n;++s){const i=r[s];t=t[i]||(t[i]=Object.create(null))}return t}function bd(t,e,r){return typeof e=="string"?Va(ka(t,e),r):Va(ka(t,""),e)}class WN{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>vd(n.backgroundColor),this.hoverBorderColor=(s,n)=>vd(n.borderColor),this.hoverColor=(s,n)=>vd(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return bd(this,e,r)}get(e){return ka(this,e)}describe(e,r){return bd(Yu,e,r)}override(e,r){return bd(kn,e,r)}route(e,r,s,n){const i=ka(this,e),o=ka(this,s),l="_"+r;Object.defineProperties(i,{[l]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const c=this[l],d=o[n];return ye(c)?Object.assign({},d,c):fe(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(r=>r(this))}}var Ge=new WN({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[FN,$N,HN]);function VN(t){return!t||be(t.size)||be(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Am(t,e,r,s,n){let i=e[n];return i||(i=e[n]=t.measureText(n).width,r.push(n)),i>s&&(s=i),s}function Gs(t,e,r){const s=t.currentDevicePixelRatio,n=r!==0?Math.max(r/2,.5):0;return Math.round((e-n)*s)/s+n}function Im(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Gu(t,e,r,s){mv(t,e,r,s,null)}function mv(t,e,r,s,n){let i,o,l,c,d,u,h,f;const p=e.pointStyle,v=e.rotation,g=e.radius;let j=(v||0)*kN;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(r,s),t.rotate(j),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),p){default:n?t.ellipse(r,s,n/2,g,0,0,Ve):t.arc(r,s,g,0,Ve),t.closePath();break;case"triangle":u=n?n/2:g,t.moveTo(r+Math.sin(j)*u,s-Math.cos(j)*g),j+=Sm,t.lineTo(r+Math.sin(j)*u,s-Math.cos(j)*g),j+=Sm,t.lineTo(r+Math.sin(j)*u,s-Math.cos(j)*g),t.closePath();break;case"rectRounded":d=g*.516,c=g-d,o=Math.cos(j+Ys)*c,h=Math.cos(j+Ys)*(n?n/2-d:c),l=Math.sin(j+Ys)*c,f=Math.sin(j+Ys)*(n?n/2-d:c),t.arc(r-h,s-l,d,j-je,j-rt),t.arc(r+f,s-o,d,j-rt,j),t.arc(r+h,s+l,d,j,j+rt),t.arc(r-f,s+o,d,j+rt,j+je),t.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*g,u=n?n/2:c,t.rect(r-u,s-c,2*u,2*c);break}j+=Ys;case"rectRot":h=Math.cos(j)*(n?n/2:g),o=Math.cos(j)*g,l=Math.sin(j)*g,f=Math.sin(j)*(n?n/2:g),t.moveTo(r-h,s-l),t.lineTo(r+f,s-o),t.lineTo(r+h,s+l),t.lineTo(r-f,s+o),t.closePath();break;case"crossRot":j+=Ys;case"cross":h=Math.cos(j)*(n?n/2:g),o=Math.cos(j)*g,l=Math.sin(j)*g,f=Math.sin(j)*(n?n/2:g),t.moveTo(r-h,s-l),t.lineTo(r+h,s+l),t.moveTo(r+f,s-o),t.lineTo(r-f,s+o);break;case"star":h=Math.cos(j)*(n?n/2:g),o=Math.cos(j)*g,l=Math.sin(j)*g,f=Math.sin(j)*(n?n/2:g),t.moveTo(r-h,s-l),t.lineTo(r+h,s+l),t.moveTo(r+f,s-o),t.lineTo(r-f,s+o),j+=Ys,h=Math.cos(j)*(n?n/2:g),o=Math.cos(j)*g,l=Math.sin(j)*g,f=Math.sin(j)*(n?n/2:g),t.moveTo(r-h,s-l),t.lineTo(r+h,s+l),t.moveTo(r+f,s-o),t.lineTo(r-f,s+o);break;case"line":o=n?n/2:Math.cos(j)*g,l=Math.sin(j)*g,t.moveTo(r-o,s-l),t.lineTo(r+o,s+l);break;case"dash":t.moveTo(r,s),t.lineTo(r+Math.cos(j)*(n?n/2:g),s+Math.sin(j)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ja(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function yf(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function vf(t){t.restore()}function qN(t,e,r,s,n){if(!e)return t.lineTo(r.x,r.y);if(n==="middle"){const i=(e.x+r.x)/2;t.lineTo(i,e.y),t.lineTo(i,r.y)}else n==="after"!=!!s?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function YN(t,e,r,s){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?r.cp2x:r.cp1x,s?r.cp2y:r.cp1y,r.x,r.y)}function GN(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),be(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function JN(t,e,r,s,n){if(n.strikethrough||n.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=r-i.actualBoundingBoxAscent,d=r+i.actualBoundingBoxDescent,u=n.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(o,u),t.lineTo(l,u),t.stroke()}}function KN(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function Ka(t,e,r,s,n,i={}){const o=et(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(t.save(),t.font=n.string,GN(t,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&KN(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),be(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,r,s,i.maxWidth)),t.fillText(d,r,s,i.maxWidth),JN(t,r,s,d,i),s+=Number(n.lineHeight);t.restore()}function tc(t,e){const{x:r,y:s,w:n,h:i,radius:o}=e;t.arc(r+o.topLeft,s+o.topLeft,o.topLeft,1.5*je,je,!0),t.lineTo(r,s+i-o.bottomLeft),t.arc(r+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,je,rt,!0),t.lineTo(r+n-o.bottomRight,s+i),t.arc(r+n-o.bottomRight,s+i-o.bottomRight,o.bottomRight,rt,0,!0),t.lineTo(r+n,s+o.topRight),t.arc(r+n-o.topRight,s+o.topRight,o.topRight,0,-rt,!0),t.lineTo(r+o.topLeft,s)}const XN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,QN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ZN(t,e){const r=(""+t).match(XN);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const eS=t=>+t||0;function bf(t,e){const r={},s=ye(e),n=s?Object.keys(e):e,i=ye(t)?s?o=>fe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of n)r[o]=eS(i(o));return r}function gv(t){return bf(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ui(t){return bf(t,["topLeft","topRight","bottomLeft","bottomRight"])}function dr(t){const e=gv(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function kt(t,e){t=t||{},e=e||Ge.font;let r=fe(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let s=fe(t.style,e.style);s&&!(""+s).match(QN)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:fe(t.family,e.family),lineHeight:ZN(fe(t.lineHeight,e.lineHeight),r),size:r,style:s,weight:fe(t.weight,e.weight),string:""};return n.string=VN(n),n}function Ho(t,e,r,s){let n,i,o;for(n=0,i=t.length;n<i;++n)if(o=t[n],o!==void 0&&o!==void 0)return o}function tS(t,e,r){const{min:s,max:n}=t,i=av(e,(n-s)/2),o=(l,c)=>r&&l===0?0:l+c;return{min:o(s,-Math.abs(i)),max:o(n,i)}}function Mn(t,e){return Object.assign(Object.create(t),e)}function wf(t,e=[""],r,s,n=()=>t[0]){const i=r||t;typeof s>"u"&&(s=bv("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:n,override:l=>wf([l,...t],e,i,s)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return yv(l,c,()=>cS(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return Lm(l).includes(c)},ownKeys(l){return Lm(l)},set(l,c,d){const u=l._storage||(l._storage=n());return l[c]=u[c]=d,delete l._keys,!0}})}function ji(t,e,r,s){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:xv(t,s),setContext:i=>ji(t,i,r,s),override:i=>ji(t.override(i),e,r,s)};return new Proxy(n,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,l){return yv(i,o,()=>sS(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,l){return t[o]=l,delete i[o],!0}})}function xv(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:s=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:r,indexable:s,isScriptable:Fs(r)?r:()=>r,isIndexable:Fs(s)?s:()=>s}}const rS=(t,e)=>t?t+ff(e):e,kf=(t,e)=>ye(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function yv(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=r();return t[e]=s,s}function sS(t,e,r){const{_proxy:s,_context:n,_subProxy:i,_descriptors:o}=t;let l=s[e];return Fs(l)&&o.isScriptable(e)&&(l=nS(e,l,t,r)),et(l)&&l.length&&(l=iS(e,l,t,o.isIndexable)),kf(e,l)&&(l=ji(l,n,i&&i[e],o)),l}function nS(t,e,r,s){const{_proxy:n,_context:i,_subProxy:o,_stack:l}=r;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,o||s);return l.delete(t),kf(t,c)&&(c=jf(n._scopes,n,t,c)),c}function iS(t,e,r,s){const{_proxy:n,_context:i,_subProxy:o,_descriptors:l}=r;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(ye(e[0])){const c=e,d=n._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=jf(d,n,t,u);e.push(ji(h,i,o&&o[t],l))}}return e}function vv(t,e,r){return Fs(t)?t(e,r):t}const aS=(t,e)=>t===!0?e:typeof t=="string"?wn(e,t):void 0;function oS(t,e,r,s,n){for(const i of e){const o=aS(r,i);if(o){t.add(o);const l=vv(o._fallback,r,n);if(typeof l<"u"&&l!==r&&l!==s)return l}else if(o===!1&&typeof s<"u"&&r!==s)return null}return!1}function jf(t,e,r,s){const n=e._rootScopes,i=vv(e._fallback,r,s),o=[...t,...n],l=new Set;l.add(s);let c=Rm(l,o,r,i||r,s);return c===null||typeof i<"u"&&i!==r&&(c=Rm(l,o,i,c,s),c===null)?!1:wf(Array.from(l),[""],n,i,()=>lS(e,r,s))}function Rm(t,e,r,s,n){for(;r;)r=oS(t,e,r,s,n);return r}function lS(t,e,r){const s=t._getTarget();e in s||(s[e]={});const n=s[e];return et(n)&&ye(r)?r:n||{}}function cS(t,e,r,s){let n;for(const i of e)if(n=bv(rS(i,t),r),typeof n<"u")return kf(t,n)?jf(r,s,t,n):n}function bv(t,e){for(const r of e){if(!r)continue;const s=r[t];if(typeof s<"u")return s}}function Lm(t){let e=t._keys;return e||(e=t._keys=dS(t._scopes)),e}function dS(t){const e=new Set;for(const r of t)for(const s of Object.keys(r).filter(n=>!n.startsWith("_")))e.add(s);return Array.from(e)}const uS=Number.EPSILON||1e-14,_i=(t,e)=>e<t.length&&!t[e].skip&&t[e],wv=t=>t==="x"?"y":"x";function hS(t,e,r,s){const n=t.skip?e:t,i=e,o=r.skip?e:r,l=qu(i,n),c=qu(o,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=s*d,f=s*u;return{previous:{x:i.x-h*(o.x-n.x),y:i.y-h*(o.y-n.y)},next:{x:i.x+f*(o.x-n.x),y:i.y+f*(o.y-n.y)}}}function fS(t,e,r){const s=t.length;let n,i,o,l,c,d=_i(t,0);for(let u=0;u<s-1;++u)if(c=d,d=_i(t,u+1),!(!c||!d)){if(ba(e[u],0,uS)){r[u]=r[u+1]=0;continue}n=r[u]/e[u],i=r[u+1]/e[u],l=Math.pow(n,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),r[u]=n*o*e[u],r[u+1]=i*o*e[u])}}function pS(t,e,r="x"){const s=wv(r),n=t.length;let i,o,l,c=_i(t,0);for(let d=0;d<n;++d){if(o=l,l=c,c=_i(t,d+1),!l)continue;const u=l[r],h=l[s];o&&(i=(u-o[r])/3,l[`cp1${r}`]=u-i,l[`cp1${s}`]=h-i*e[d]),c&&(i=(c[r]-u)/3,l[`cp2${r}`]=u+i,l[`cp2${s}`]=h+i*e[d])}}function mS(t,e="x"){const r=wv(e),s=t.length,n=Array(s).fill(0),i=Array(s);let o,l,c,d=_i(t,0);for(o=0;o<s;++o)if(l=c,c=d,d=_i(t,o+1),!!c){if(d){const u=d[e]-c[e];n[o]=u!==0?(d[r]-c[r])/u:0}i[o]=l?d?Lr(n[o-1])!==Lr(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}fS(t,n,i),pS(t,i,e)}function Wo(t,e,r){return Math.max(Math.min(t,r),e)}function gS(t,e){let r,s,n,i,o,l=Ja(t[0],e);for(r=0,s=t.length;r<s;++r)o=i,i=l,l=r<s-1&&Ja(t[r+1],e),i&&(n=t[r],o&&(n.cp1x=Wo(n.cp1x,e.left,e.right),n.cp1y=Wo(n.cp1y,e.top,e.bottom)),l&&(n.cp2x=Wo(n.cp2x,e.left,e.right),n.cp2y=Wo(n.cp2y,e.top,e.bottom)))}function xS(t,e,r,s,n){let i,o,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")mS(t,n);else{let d=s?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)l=t[i],c=hS(d,l,t[Math.min(i+1,o-(s?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&gS(t,r)}function _f(){return typeof window<"u"&&typeof document<"u"}function Nf(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function rc(t,e,r){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[r])):s=t,s}const Mc=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function yS(t,e){return Mc(t).getPropertyValue(e)}const vS=["top","right","bottom","left"];function hn(t,e,r){const s={};r=r?"-"+r:"";for(let n=0;n<4;n++){const i=vS[n];s[i]=parseFloat(t[e+"-"+i+r])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const bS=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function wS(t,e){const r=t.touches,s=r&&r.length?r[0]:t,{offsetX:n,offsetY:i}=s;let o=!1,l,c;if(bS(n,i,t.target))l=n,c=i;else{const d=e.getBoundingClientRect();l=s.clientX-d.left,c=s.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function Zs(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:s}=e,n=Mc(r),i=n.boxSizing==="border-box",o=hn(n,"padding"),l=hn(n,"border","width"),{x:c,y:d,box:u}=wS(t,r),h=o.left+(u&&l.left),f=o.top+(u&&l.top);let{width:p,height:v}=e;return i&&(p-=o.width+l.width,v-=o.height+l.height),{x:Math.round((c-h)/p*r.width/s),y:Math.round((d-f)/v*r.height/s)}}function kS(t,e,r){let s,n;if(e===void 0||r===void 0){const i=t&&Nf(t);if(!i)e=t.clientWidth,r=t.clientHeight;else{const o=i.getBoundingClientRect(),l=Mc(i),c=hn(l,"border","width"),d=hn(l,"padding");e=o.width-d.width-c.width,r=o.height-d.height-c.height,s=rc(l.maxWidth,i,"clientWidth"),n=rc(l.maxHeight,i,"clientHeight")}}return{width:e,height:r,maxWidth:s||ec,maxHeight:n||ec}}const Vo=t=>Math.round(t*10)/10;function jS(t,e,r,s){const n=Mc(t),i=hn(n,"margin"),o=rc(n.maxWidth,t,"clientWidth")||ec,l=rc(n.maxHeight,t,"clientHeight")||ec,c=kS(t,e,r);let{width:d,height:u}=c;if(n.boxSizing==="content-box"){const f=hn(n,"border","width"),p=hn(n,"padding");d-=p.width+f.width,u-=p.height+f.height}return d=Math.max(0,d-i.width),u=Math.max(0,s?d/s:u-i.height),d=Vo(Math.min(d,o,c.maxWidth)),u=Vo(Math.min(u,l,c.maxHeight)),d&&!u&&(u=Vo(d/2)),(e!==void 0||r!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,d=Vo(Math.floor(u*s))),{width:d,height:u}}function zm(t,e,r){const s=e||1,n=Math.floor(t.height*s),i=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==n||o.width!==i?(t.currentDevicePixelRatio=s,o.height=n,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const _S=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};_f()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Fm(t,e){const r=yS(t,e),s=r&&r.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function en(t,e,r,s){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function NS(t,e,r,s){return{x:t.x+r*(e.x-t.x),y:s==="middle"?r<.5?t.y:e.y:s==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function SS(t,e,r,s){const n={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=en(t,n,r),l=en(n,i,r),c=en(i,e,r),d=en(o,l,r),u=en(l,c,r);return en(d,u,r)}const CS=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,s){return r-s},leftForLtr(r,s){return r-s}}},ES=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function hi(t,e,r){return t?CS(e,r):ES()}function kv(t,e){let r,s;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,s=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=s)}function jv(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function _v(t){return t==="angle"?{between:Ga,compare:EN,normalize:gr}:{between:_s,compare:(e,r)=>e-r,normalize:e=>e}}function $m({start:t,end:e,count:r,loop:s,style:n}){return{start:t%r,end:e%r,loop:s&&(e-t+1)%r===0,style:n}}function DS(t,e,r){const{property:s,start:n,end:i}=r,{between:o,normalize:l}=_v(s),c=e.length;let{start:d,end:u,loop:h}=t,f,p;if(h){for(d+=c,u+=c,f=0,p=c;f<p&&o(l(e[d%c][s]),n,i);++f)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:t.style}}function PS(t,e,r){if(!r)return[t];const{property:s,start:n,end:i}=r,o=e.length,{compare:l,between:c,normalize:d}=_v(s),{start:u,end:h,loop:f,style:p}=DS(t,e,r),v=[];let g=!1,j=null,y,m,x;const w=()=>c(n,x,y)&&l(n,x)!==0,C=()=>l(i,y)===0||c(i,x,y),_=()=>g||w(),N=()=>!g||C();for(let b=u,k=u;b<=h;++b)m=e[b%o],!m.skip&&(y=d(m[s]),y!==x&&(g=c(y,n,i),j===null&&_()&&(j=l(y,n)===0?b:k),j!==null&&N()&&(v.push($m({start:j,end:b,loop:f,count:o,style:p})),j=null),k=b,x=y));return j!==null&&v.push($m({start:j,end:h,loop:f,count:o,style:p})),v}function MS(t,e){const r=[],s=t.segments;for(let n=0;n<s.length;n++){const i=PS(s[n],t.points,e);i.length&&r.push(...i)}return r}function TS(t,e,r,s){let n=0,i=e-1;if(r&&!s)for(;n<e&&!t[n].skip;)n++;for(;n<e&&t[n].skip;)n++;for(n%=e,r&&(i+=n);i>n&&t[i%e].skip;)i--;return i%=e,{start:n,end:i}}function OS(t,e,r,s){const n=t.length,i=[];let o=e,l=t[e],c;for(c=e+1;c<=r;++c){const d=t[c%n];d.skip||d.stop?l.skip||(s=!1,i.push({start:e%n,end:(c-1)%n,loop:s}),e=o=d.stop?c:null):(o=c,l.skip&&(e=c)),l=d}return o!==null&&i.push({start:e%n,end:o%n,loop:s}),i}function AS(t,e){const r=t.points,s=t.options.spanGaps,n=r.length;if(!n)return[];const i=!!t._loop,{start:o,end:l}=TS(r,n,i,s);if(s===!0)return Um(t,[{start:o,end:l,loop:i}],r,e);const c=l<o?l+n:l,d=!!t._fullLoop&&o===0&&l===n-1;return Um(t,OS(r,o,c,d),r,e)}function Um(t,e,r,s){return!s||!s.setContext||!r?e:IS(t,e,r,s)}function IS(t,e,r,s){const n=t._chart.getContext(),i=Bm(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=r.length,d=[];let u=i,h=e[0].start,f=h;function p(v,g,j,y){const m=l?-1:1;if(v!==g){for(v+=c;r[v%c].skip;)v-=m;for(;r[g%c].skip;)g+=m;v%c!==g%c&&(d.push({start:v%c,end:g%c,loop:j,style:y}),u=y,h=g%c)}}for(const v of e){h=l?h:v.start;let g=r[h%c],j;for(f=h+1;f<=v.end;f++){const y=r[f%c];j=Bm(s.setContext(Mn(n,{type:"segment",p0:g,p1:y,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),RS(j,u)&&p(h,f-1,v.loop,u),g=y,u=j}h<f-1&&p(h,f-1,v.loop,u)}return d}function Bm(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function RS(t,e){if(!e)return!1;const r=[],s=function(n,i){return gf(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function qo(t,e,r){return t.options.clip?t[r]:e[r]}function LS(t,e){const{xScale:r,yScale:s}=t;return r&&s?{left:qo(r,e,"left"),right:qo(r,e,"right"),top:qo(s,e,"top"),bottom:qo(s,e,"bottom")}:e}function zS(t,e){const r=e._clip;if(r.disabled)return!1;const s=LS(e,t.chartArea);return{left:r.left===!1?0:s.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:s.right+(r.right===!0?0:r.right),top:r.top===!1?0:s.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:s.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class FS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,s,n){const i=r.listeners[n],o=r.duration;i.forEach(l=>l({chart:e,initial:r.initial,numSteps:o,currentStep:Math.min(s-r.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=uv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(n.draw(),this._notify(n,s,e,"progress")),i.length||(s.running=!1,this._notify(n,s,e,"complete"),s.initial=!1),r+=i.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let s=r.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,s)),s}listen(e,r,s){this._getAnims(e).listeners[r].push(s)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const s=r.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Br=new FS;const Hm="transparent",$S={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const s=Tm(t||Hm),n=s.valid&&Tm(e||Hm);return n&&n.valid?n.mix(s,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class US{constructor(e,r,s,n){const i=r[s];n=Ho([e.to,n,i,e.from]);const o=Ho([e.from,i,n]);this._active=!0,this._fn=e.fn||$S[e.type||typeof o],this._easing=wa[e.easing]||wa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=s,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(e,r,s){if(this._active){this._notify(!1);const n=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Ho([e.to,r,n,e.from]),this._from=Ho([e.from,n,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,s=this._duration,n=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||r<s),!this._active){this._target[n]=l,this._notify(!0);return}if(r<0){this._target[n]=i;return}c=r/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,s)=>{e.push({res:r,rej:s})})}_notify(e){const r=e?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][r]()}}class Nv{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!ye(e))return;const r=Object.keys(Ge.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const i=e[n];if(!ye(i))return;const o={};for(const l of r)o[l]=i[l];(et(i.properties)&&i.properties||[n]).forEach(l=>{(l===n||!s.has(l))&&s.set(l,o)})})}_animateOptions(e,r){const s=r.options,n=HS(e,s);if(!n)return[];const i=this._createAnimations(n,s);return s.$shared&&BS(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,r){const s=this._properties,n=[],i=e.$animations||(e.$animations={}),o=Object.keys(r),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){n.push(...this._animateOptions(e,r));continue}const u=r[d];let h=i[d];const f=s.get(d);if(h)if(f&&h.active()){h.update(f,u,l);continue}else h.cancel();if(!f||!f.duration){e[d]=u;continue}i[d]=h=new US(f,e,d,u),n.push(h)}return n}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const s=this._createAnimations(e,r);if(s.length)return Br.add(this._chart,s),!0}}function BS(t,e){const r=[],s=Object.keys(e);for(let n=0;n<s.length;n++){const i=t[s[n]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function HS(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function Wm(t,e){const r=t&&t.options||{},s=r.reverse,n=r.min===void 0?e:0,i=r.max===void 0?e:0;return{start:s?i:n,end:s?n:i}}function WS(t,e,r){if(r===!1)return!1;const s=Wm(t,r),n=Wm(e,r);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function VS(t){let e,r,s,n;return ye(t)?(e=t.top,r=t.right,s=t.bottom,n=t.left):e=r=s=n=t,{top:e,right:r,bottom:s,left:n,disabled:t===!1}}function Sv(t,e){const r=[],s=t._getSortedDatasetMetas(e);let n,i;for(n=0,i=s.length;n<i;++n)r.push(s[n].index);return r}function Vm(t,e,r,s={}){const n=t.keys,i=s.mode==="single";let o,l,c,d;if(e===null)return;let u=!1;for(o=0,l=n.length;o<l;++o){if(c=+n[o],c===r){if(u=!0,s.all)continue;break}d=t.values[c],cr(d)&&(i||e===0||Lr(e)===Lr(d))&&(e+=d)}return!u&&!s.all?0:e}function qS(t,e){const{iScale:r,vScale:s}=e,n=r.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[n]:u,[i]:t[u]};return l}function wd(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function YS(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function GS(t){const{min:e,max:r,minDefined:s,maxDefined:n}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:n?r:Number.POSITIVE_INFINITY}}function JS(t,e,r){const s=t[e]||(t[e]={});return s[r]||(s[r]={})}function qm(t,e,r,s){for(const n of e.getMatchingVisibleMetas(s).reverse()){const i=t[n.index];if(r&&i>0||!r&&i<0)return n.index}return null}function Ym(t,e){const{chart:r,_cachedMeta:s}=t,n=r._stacks||(r._stacks={}),{iScale:i,vScale:o,index:l}=s,c=i.axis,d=o.axis,u=YS(i,o,s),h=e.length;let f;for(let p=0;p<h;++p){const v=e[p],{[c]:g,[d]:j}=v,y=v._stacks||(v._stacks={});f=y[d]=JS(n,u,g),f[l]=j,f._top=qm(f,o,!0,s.type),f._bottom=qm(f,o,!1,s.type);const m=f._visualValues||(f._visualValues={});m[l]=j}}function kd(t,e){const r=t.scales;return Object.keys(r).filter(s=>r[s].axis===e).shift()}function KS(t,e){return Mn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function XS(t,e,r){return Mn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function Ui(t,e){const r=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const n of e){const i=n._stacks;if(!i||i[s]===void 0||i[s][r]===void 0)return;delete i[s][r],i[s]._visualValues!==void 0&&i[s]._visualValues[r]!==void 0&&delete i[s]._visualValues[r]}}}const jd=t=>t==="reset"||t==="none",Gm=(t,e)=>e?t:Object.assign({},t),QS=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:Sv(r,!0),values:null};class fn{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=wd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ui(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,s=this.getDataset(),n=(h,f,p,v)=>h==="x"?f:h==="r"?v:p,i=r.xAxisID=fe(s.xAxisID,kd(e,"x")),o=r.yAxisID=fe(s.yAxisID,kd(e,"y")),l=r.rAxisID=fe(s.rAxisID,kd(e,"r")),c=r.indexAxis,d=r.iAxisID=n(c,i,o,l),u=r.vAxisID=n(c,o,i,l);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(o),r.rScale=this.getScaleForId(l),r.iScale=this.getScaleForId(d),r.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Dm(this._data,this),e._stacked&&Ui(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),s=this._data;if(ye(r)){const n=this._cachedMeta;this._data=qS(r,n)}else if(s!==r){if(s){Dm(s,this);const n=this._cachedMeta;Ui(n),n._parsed=[]}r&&Object.isExtensible(r)&&TN(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const i=r._stacked;r._stacked=wd(r.vScale,r),r.stack!==s.stack&&(n=!0,Ui(r),r.stack=s.stack),this._resyncElements(e),(n||i!==r._stacked)&&(Ym(this,r._parsed),r._stacked=wd(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:s,_data:n}=this,{iScale:i,_stacked:o}=s,l=i.axis;let c=e===0&&r===n.length?!0:s._sorted,d=e>0&&s._parsed[e-1],u,h,f;if(this._parsing===!1)s._parsed=n,s._sorted=!0,f=n;else{et(n[e])?f=this.parseArrayData(s,n,e,r):ye(n[e])?f=this.parseObjectData(s,n,e,r):f=this.parsePrimitiveData(s,n,e,r);const p=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<r;++u)s._parsed[u+e]=h=f[u],c&&(p()&&(c=!1),d=h);s._sorted=c}o&&Ym(this,f)}parsePrimitiveData(e,r,s,n){const{iScale:i,vScale:o}=e,l=i.axis,c=o.axis,d=i.getLabels(),u=i===o,h=new Array(n);let f,p,v;for(f=0,p=n;f<p;++f)v=f+s,h[f]={[l]:u||i.parse(d[v],v),[c]:o.parse(r[v],v)};return h}parseArrayData(e,r,s,n){const{xScale:i,yScale:o}=e,l=new Array(n);let c,d,u,h;for(c=0,d=n;c<d;++c)u=c+s,h=r[u],l[c]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return l}parseObjectData(e,r,s,n){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(n);let u,h,f,p;for(u=0,h=n;u<h;++u)f=u+s,p=r[f],d[u]={x:i.parse(wn(p,l),f),y:o.parse(wn(p,c),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,s){const n=this.chart,i=this._cachedMeta,o=r[e.axis],l={keys:Sv(n,!0),values:r._stacks[e.axis]._visualValues};return Vm(l,o,i.index,{mode:s})}updateRangeFromParsed(e,r,s,n){const i=s[r.axis];let o=i===null?NaN:i;const l=n&&s._stacks[r.axis];n&&l&&(n.values=l,o=Vm(n,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,r){const s=this._cachedMeta,n=s._parsed,i=s._sorted&&e===s.iScale,o=n.length,l=this._getOtherScale(e),c=QS(r,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=GS(l);let f,p;function v(){p=n[f];const g=p[l.axis];return!cr(p[e.axis])||u>g||h<g}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(d,e,p,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(d,e,p,c);break}}return d}getAllParsedValues(e){const r=this._cachedMeta._parsed,s=[];let n,i,o;for(n=0,i=r.length;n<i;++n)o=r[n][e.axis],cr(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,s=r.iScale,n=r.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=VS(fe(this.options.clip,WS(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,s=this._cachedMeta,n=s.data||[],i=r.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||n.length-l,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,i,l,c),u=l;u<l+c;++u){const h=n[u];h.hidden||(h.active&&d?o.push(h):h.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,r){const s=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,r,s){const n=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=XS(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=n.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=KS(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",s){const n=r==="active",i=this._cachedDataOpts,o=e+"-"+r,l=i[o],c=this.enableOptionSharing&&qa(s);if(l)return Gm(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=n?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),p=Object.keys(Ge.elements[e]),v=()=>this.getContext(s,n,r),g=d.resolveNamedOptions(f,p,v,h);return g.$shared&&(g.$shared=c,i[o]=Object.freeze(Gm(g,c))),g}_resolveAnimations(e,r,s){const n=this.chart,i=this._cachedDataOpts,o=`animation-${r}`,l=i[o];if(l)return l;let c;if(n.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,r),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(e,s,r))}const d=new Nv(n,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||jd(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const s=this.resolveDataElementOptions(e,r),n=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(r,i)||i!==n;return this.updateSharedOptions(i,r,s),{sharedOptions:i,includeOptions:o}}updateElement(e,r,s,n){jd(n)?Object.assign(e,s):this._resolveAnimations(r,n).update(e,s)}updateSharedOptions(e,r,s){e&&!jd(r)&&this._resolveAnimations(void 0,r).update(e,s)}_setStyle(e,r,s,n){e.active=n;const i=this.getStyle(r,n);this._resolveAnimations(r,s,n).update(e,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(e,r,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,r,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,s=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const n=s.length,i=r.length,o=Math.min(i,n);o&&this.parse(0,o),i>n?this._insertElements(n,i-n,e):i<n&&this._removeElements(i,n-i)}_insertElements(e,r,s=!0){const n=this._cachedMeta,i=n.data,o=e+r;let l;const c=d=>{for(d.length+=r,l=d.length-1;l>=o;l--)d[l]=d[l-r]};for(c(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(n._parsed),this.parse(e,r),s&&this.updateElements(i,e,r,"reset")}updateElements(e,r,s,n){}_removeElements(e,r){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(e,r);s._stacked&&Ui(s,n)}s.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,s,n]=e;this[r](s,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}H(fn,"defaults",{}),H(fn,"datasetElementType",null),H(fn,"dataElementType",null);function ZS(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let s=[];for(let n=0,i=r.length;n<i;n++)s=s.concat(r[n].controller.getAllParsedValues(t));t._cache.$bar=dv(s.sort((n,i)=>n-i))}return t._cache.$bar}function e4(t){const e=t.iScale,r=ZS(e,t.type);let s=e._length,n,i,o,l;const c=()=>{o===32767||o===-32768||(qa(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(n=0,i=r.length;n<i;++n)o=e.getPixelForValue(r[n]),c();for(l=void 0,n=0,i=e.ticks.length;n<i;++n)o=e.getPixelForTick(n),c();return s}function t4(t,e,r,s){const n=r.barThickness;let i,o;return be(n)?(i=e.min*r.categoryPercentage,o=r.barPercentage):(i=n*s,o=1),{chunk:i/s,ratio:o,start:e.pixels[t]-i/2}}function r4(t,e,r,s){const n=e.pixels,i=n[t];let o=t>0?n[t-1]:null,l=t<n.length-1?n[t+1]:null;const c=r.categoryPercentage;o===null&&(o=i-(l===null?e.end-e.start:l-i)),l===null&&(l=i+i-o);const d=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/s,ratio:r.barPercentage,start:d}}function s4(t,e,r,s){const n=r.parse(t[0],s),i=r.parse(t[1],s),o=Math.min(n,i),l=Math.max(n,i);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),e[r.axis]=d,e._custom={barStart:c,barEnd:d,start:n,end:i,min:o,max:l}}function Cv(t,e,r,s){return et(t)?s4(t,e,r,s):e[r.axis]=r.parse(t,s),e}function Jm(t,e,r,s){const n=t.iScale,i=t.vScale,o=n.getLabels(),l=n===i,c=[];let d,u,h,f;for(d=r,u=r+s;d<u;++d)f=e[d],h={},h[n.axis]=l||n.parse(o[d],d),c.push(Cv(f,h,i,d));return c}function _d(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function n4(t,e,r){return t!==0?Lr(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function i4(t){let e,r,s,n,i;return t.horizontal?(e=t.base>t.x,r="left",s="right"):(e=t.base<t.y,r="bottom",s="top"),e?(n="end",i="start"):(n="start",i="end"),{start:r,end:s,reverse:e,top:n,bottom:i}}function a4(t,e,r,s){let n=e.borderSkipped;const i={};if(!n){t.borderSkipped=i;return}if(n===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=i4(t);n==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===s?n=d:(r._bottom||0)===s?n=u:(i[Km(u,o,l,c)]=!0,n=d)),i[Km(n,o,l,c)]=!0,t.borderSkipped=i}function Km(t,e,r,s){return s?(t=o4(t,e,r),t=Xm(t,r,e)):t=Xm(t,e,r),t}function o4(t,e,r){return t===e?r:t===r?e:t}function Xm(t,e,r){return t==="start"?e:t==="end"?r:t}function l4(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class fl extends fn{parsePrimitiveData(e,r,s,n){return Jm(e,r,s,n)}parseArrayData(e,r,s,n){return Jm(e,r,s,n)}parseObjectData(e,r,s,n){const{iScale:i,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,u=o.axis==="x"?l:c,h=[];let f,p,v,g;for(f=s,p=s+n;f<p;++f)g=r[f],v={},v[i.axis]=i.parse(wn(g,d),f),h.push(Cv(wn(g,u),v,o,f));return h}updateRangeFromParsed(e,r,s,n){super.updateRangeFromParsed(e,r,s,n);const i=s._custom;i&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:s,vScale:n}=r,i=this.getParsed(e),o=i._custom,l=_d(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,s,n){const i=n==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(r,n);for(let p=r;p<r+s;p++){const v=this.getParsed(p),g=i||be(v[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),j=this._calculateBarIndexPixels(p,u),y=(v._stacks||{})[l.axis],m={horizontal:d,base:g.base,enableBorderRadius:!y||_d(v._custom)||o===y._top||o===y._bottom,x:d?g.head:j.center,y:d?j.center:g.head,height:d?j.size:Math.abs(g.size),width:d?Math.abs(g.size):j.size};f&&(m.options=h||this.resolveDataElementOptions(p,e[p].active?"active":n));const x=m.options||e[p].options;a4(m,x,y,o),l4(m,x,u.ratio),this.updateElement(e[p],p,m,n)}}_getStacks(e,r){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=s.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(r),c=l&&l[s.axis],d=u=>{const h=u._parsed.find(p=>p[s.axis]===c),f=h&&h[u.vScale.axis];if(be(f)||isNaN(f))return!0};for(const u of n)if(!(r!==void 0&&d(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===r).shift()}_getAxis(){const e={},r=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[fe(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,r)]=!0;return Object.keys(e)}_getStackIndex(e,r,s){const n=this._getStacks(e,s),i=r!==void 0?n.indexOf(r):-1;return i===-1?n.length-1:i}_getRuler(){const e=this.options,r=this._cachedMeta,s=r.iScale,n=[];let i,o;for(i=0,o=r.data.length;i<o;++i)n.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=e.barThickness;return{min:l||e4(r),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:s,index:n},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(e),d=c._custom,u=_d(d);let h=c[r.axis],f=0,p=s?this.applyStack(r,c,s):h,v,g;p!==h&&(f=p-h,p=h),u&&(h=d.barStart,p=d.barEnd-d.barStart,h!==0&&Lr(h)!==Lr(d.barEnd)&&(f=0),f+=h);const j=!be(i)&&!u?i:f;let y=r.getPixelForValue(j);if(this.chart.getDataVisibility(e)?v=r.getPixelForValue(f+p):v=y,g=v-y,Math.abs(g)<o){g=n4(g,r,l)*o,h===l&&(y-=g/2);const m=r.getPixelForDecimal(0),x=r.getPixelForDecimal(1),w=Math.min(m,x),C=Math.max(m,x);y=Math.max(Math.min(y,C),w),v=y+g,s&&!u&&(c._stacks[r.axis]._visualValues[n]=r.getValueForPixel(v)-r.getValueForPixel(y))}if(y===r.getPixelForValue(l)){const m=Lr(g)*r.getLineWidthForValue(l)/2;y+=m,g-=m}return{size:g,base:y,head:v,center:v+g/2}}_calculateBarIndexPixels(e,r){const s=r.scale,n=this.options,i=n.skipNull,o=fe(n.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(r.grouped){const u=i?this._getStackCount(e):r.stackCount,h=n.barThickness==="flex"?r4(e,r,n,u*d):t4(e,r,n,u*d),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(fe(f,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+p;l=h.start+h.chunk*v+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=s.getPixelForValue(this.getParsed(e)[s.axis],e),c=Math.min(o,r.min*r.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,r=e.vScale,s=e.data,n=s.length;let i=0;for(;i<n;++i)this.getParsed(i)[r.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}H(fl,"id","bar"),H(fl,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),H(fl,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function c4(t,e,r){let s=1,n=1,i=0,o=0;if(e<Ve){const l=t,c=l+e,d=Math.cos(l),u=Math.sin(l),h=Math.cos(c),f=Math.sin(c),p=(x,w,C)=>Ga(x,l,c,!0)?1:Math.max(w,w*r,C,C*r),v=(x,w,C)=>Ga(x,l,c,!0)?-1:Math.min(w,w*r,C,C*r),g=p(0,d,h),j=p(rt,u,f),y=v(je,d,h),m=v(je+rt,u,f);s=(g-y)/2,n=(j-m)/2,i=-(g+y)/2,o=-(j+m)/2}return{ratioX:s,ratioY:n,offsetX:i,offsetY:o}}class ta extends fn{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const s=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=s;else{let i=c=>+s[c];if(ye(s[e])){const{key:c="value"}=this._parsing;i=d=>+wn(s[d],c)}let o,l;for(o=e,l=e+r;o<l;++o)n._parsed[o]=i(o)}}_getRotation(){return Zr(this.options.rotation-90)}_getCircumference(){return Zr(this.options.circumference)}_getRotationExtents(){let e=Ve,r=-Ve;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const n=this.chart.getDatasetMeta(s).controller,i=n._getRotation(),o=n._getCircumference();e=Math.min(e,i),r=Math.max(r,i+o)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:s}=r,n=this._cachedMeta,i=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(mN(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:v,offsetY:g}=c4(h,u,c),j=(s.width-o)/f,y=(s.height-o)/p,m=Math.max(Math.min(j,y)/2,0),x=av(this.options.radius,m),w=Math.max(x*c,0),C=(x-w)/this._getVisibleDatasetWeightTotal();this.offsetX=v*x,this.offsetY=g*x,n.total=this.calculateTotal(),this.outerRadius=x-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,r){const s=this.options,n=this._cachedMeta,i=this._getCircumference();return r&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*i/Ve)}updateElements(e,r,s,n){const i=n==="reset",o=this.chart,l=o.chartArea,d=o.options.animation,u=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=i&&d.animateScale,p=f?0:this.innerRadius,v=f?0:this.outerRadius,{sharedOptions:g,includeOptions:j}=this._getSharedOptions(r,n);let y=this._getRotation(),m;for(m=0;m<r;++m)y+=this._circumference(m,i);for(m=r;m<r+s;++m){const x=this._circumference(m,i),w=e[m],C={x:u+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+x,circumference:x,outerRadius:v,innerRadius:p};j&&(C.options=g||this.resolveDataElementOptions(m,w.active?"active":n)),y+=x,this.updateElement(w,m,C,n)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let s=0,n;for(n=0;n<r.length;n++){const i=e._parsed[n];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(n)&&!r[n].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?Ve*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,s=this.chart,n=s.data.labels||[],i=xf(r._parsed[e],s.options.locale);return{label:n[e]||"",value:i}}getMaxBorderWidth(e){let r=0;const s=this.chart;let n,i,o,l,c;if(!e){for(n=0,i=s.data.datasets.length;n<i;++n)if(s.isDatasetVisible(n)){o=s.getDatasetMeta(n),e=o.data,l=o.controller;break}}if(!e)return 0;for(n=0,i=e.length;n<i;++n)c=l.resolveDataElementOptions(n),c.borderAlign!=="inner"&&(r=Math.max(r,c.borderWidth||0,c.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let s=0,n=e.length;s<n;++s){const i=this.resolveDataElementOptions(s);r=Math.max(r,i.offset||0,i.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(r+=this._getRingWeight(s));return r}_getRingWeight(e){return Math.max(fe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}H(ta,"id","doughnut"),H(ta,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),H(ta,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),H(ta,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:s,color:n}}=e.legend.options;return r.labels.map((i,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:n,lineWidth:c.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,r,s){s.chart.toggleDataVisibility(r.index),s.chart.update()}}}});class pl extends fn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:s,data:n=[],_dataset:i}=r,o=this.chart._animationsDisabled;let{start:l,count:c}=IN(r,n,o);this._drawStart=l,this._drawCount=c,RN(r)&&(l=0,c=n.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=n;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:d},e),this.updateElements(n,l,c,e)}updateElements(e,r,s,n){const i=n==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(r,n),f=o.axis,p=l.axis,{spanGaps:v,segment:g}=this.options,j=Ya(v)?v:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||n==="none",m=r+s,x=e.length;let w=r>0&&this.getParsed(r-1);for(let C=0;C<x;++C){const _=e[C],N=y?_:{};if(C<r||C>=m){N.skip=!0;continue}const b=this.getParsed(C),k=be(b[p]),I=N[f]=o.getPixelForValue(b[f],C),T=N[p]=i||k?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,b,c):b[p],C);N.skip=isNaN(I)||isNaN(T)||k,N.stop=C>0&&Math.abs(b[f]-w[f])>j,g&&(N.parsed=b,N.raw=d.data[C]),h&&(N.options=u||this.resolveDataElementOptions(C,_.active?"active":n)),y||this.updateElement(_,C,N,n),w=b}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,s=r.options&&r.options.borderWidth||0,n=e.data||[];if(!n.length)return s;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}H(pl,"id","line"),H(pl,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),H(pl,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Js(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Sf{constructor(e){H(this,"options");this.options=e||{}}static override(e){Object.assign(Sf.prototype,e)}init(){}formats(){return Js()}parse(){return Js()}format(){return Js()}add(){return Js()}diff(){return Js()}startOf(){return Js()}endOf(){return Js()}}var Ev={_date:Sf};function d4(t,e,r,s){const{controller:n,data:i,_sorted:o}=t,l=n._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const d=l._reversePixels?PN:cn;if(s){if(n._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=d(i,e,r-h),p=d(i,e,r+h);return{lo:f.lo,hi:p.hi}}}}else{const u=d(i,e,r);if(c){const{vScale:h}=n._cachedMeta,{_parsed:f}=t,p=f.slice(0,u.lo+1).reverse().findIndex(g=>!be(g[h.axis]));u.lo-=Math.max(0,p);const v=f.slice(u.hi).findIndex(g=>!be(g[h.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:i.length-1}}function uo(t,e,r,s,n){const i=t.getSortedVisibleDatasetMetas(),o=r[e];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:h,hi:f}=d4(i[l],e,o,n);for(let p=h;p<=f;++p){const v=u[p];v.skip||s(v,d,p)}}}function u4(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(s,n){const i=e?Math.abs(s.x-n.x):0,o=r?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Nd(t,e,r,s,n){const i=[];return!n&&!t.isPointInArea(e)||uo(t,r,e,function(l,c,d){!n&&!Ja(l,t.chartArea,0)||l.inRange(e.x,e.y,s)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function h4(t,e,r,s){let n=[];function i(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=lv(o,{x:e.x,y:e.y});Ga(h,d,u)&&n.push({element:o,datasetIndex:l,index:c})}return uo(t,r,e,i),n}function f4(t,e,r,s,n,i){let o=[];const l=u4(r);let c=Number.POSITIVE_INFINITY;function d(u,h,f){const p=u.inRange(e.x,e.y,n);if(s&&!p)return;const v=u.getCenterPoint(n);if(!(!!i||t.isPointInArea(v))&&!p)return;const j=l(e,v);j<c?(o=[{element:u,datasetIndex:h,index:f}],c=j):j===c&&o.push({element:u,datasetIndex:h,index:f})}return uo(t,r,e,d),o}function Sd(t,e,r,s,n,i){return!i&&!t.isPointInArea(e)?[]:r==="r"&&!s?h4(t,e,r,n):f4(t,e,r,s,n,i)}function Qm(t,e,r,s,n){const i=[],o=r==="x"?"inXRange":"inYRange";let l=!1;return uo(t,r,e,(c,d,u)=>{c[o]&&c[o](e[r],n)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,n))}),s&&!l?[]:i}var p4={evaluateInteractionItems:uo,modes:{index(t,e,r,s){const n=Zs(e,t),i=r.axis||"x",o=r.includeInvisible||!1,l=r.intersect?Nd(t,n,i,s,o):Sd(t,n,i,!1,s,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,r,s){const n=Zs(e,t),i=r.axis||"xy",o=r.includeInvisible||!1;let l=r.intersect?Nd(t,n,i,s,o):Sd(t,n,i,!1,s,o);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(t,e,r,s){const n=Zs(e,t),i=r.axis||"xy",o=r.includeInvisible||!1;return Nd(t,n,i,s,o)},nearest(t,e,r,s){const n=Zs(e,t),i=r.axis||"xy",o=r.includeInvisible||!1;return Sd(t,n,i,r.intersect,s,o)},x(t,e,r,s){const n=Zs(e,t);return Qm(t,n,"x",r.intersect,s)},y(t,e,r,s){const n=Zs(e,t);return Qm(t,n,"y",r.intersect,s)}}};const Dv=["left","top","right","bottom"];function Bi(t,e){return t.filter(r=>r.pos===e)}function Zm(t,e){return t.filter(r=>Dv.indexOf(r.pos)===-1&&r.box.axis===e)}function Hi(t,e){return t.sort((r,s)=>{const n=e?s:r,i=e?r:s;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function m4(t){const e=[];let r,s,n,i,o,l;for(r=0,s=(t||[]).length;r<s;++r)n=t[r],{position:i,options:{stack:o,stackWeight:l=1}}=n,e.push({index:r,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&i+o,stackWeight:l});return e}function g4(t){const e={};for(const r of t){const{stack:s,pos:n,stackWeight:i}=r;if(!s||!Dv.includes(n))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function x4(t,e){const r=g4(t),{vBoxMaxWidth:s,hBoxMaxHeight:n}=e;let i,o,l;for(i=0,o=t.length;i<o;++i){l=t[i];const{fullSize:c}=l.box,d=r[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*s:c&&e.availableWidth,l.height=n):(l.width=s,l.height=u?u*n:c&&e.availableHeight)}return r}function y4(t){const e=m4(t),r=Hi(e.filter(d=>d.box.fullSize),!0),s=Hi(Bi(e,"left"),!0),n=Hi(Bi(e,"right")),i=Hi(Bi(e,"top"),!0),o=Hi(Bi(e,"bottom")),l=Zm(e,"x"),c=Zm(e,"y");return{fullSize:r,leftAndTop:s.concat(i),rightAndBottom:n.concat(c).concat(o).concat(l),chartArea:Bi(e,"chartArea"),vertical:s.concat(n).concat(c),horizontal:i.concat(o).concat(l)}}function eg(t,e,r,s){return Math.max(t[r],e[r])+Math.max(t[s],e[s])}function Pv(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function v4(t,e,r,s){const{pos:n,box:i}=r,o=t.maxPadding;if(!ye(n)){r.size&&(t[n]-=r.size);const h=s[r.stack]||{size:0,count:1};h.size=Math.max(h.size,r.horizontal?i.height:i.width),r.size=h.size/h.count,t[n]+=r.size}i.getPadding&&Pv(o,i.getPadding());const l=Math.max(0,e.outerWidth-eg(o,t,"left","right")),c=Math.max(0,e.outerHeight-eg(o,t,"top","bottom")),d=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,r.horizontal?{same:d,other:u}:{same:u,other:d}}function b4(t){const e=t.maxPadding;function r(s){const n=Math.max(e[s]-t[s],0);return t[s]+=n,n}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function w4(t,e){const r=e.maxPadding;function s(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{i[o]=Math.max(e[o],r[o])}),i}return s(t?["left","right"]:["top","bottom"])}function ra(t,e,r,s){const n=[];let i,o,l,c,d,u;for(i=0,o=t.length,d=0;i<o;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,w4(l.horizontal,e));const{same:h,other:f}=v4(e,r,l,s);d|=h&&n.length,u=u||f,c.fullSize||n.push(l)}return d&&ra(n,e,r,s)||u}function Yo(t,e,r,s,n){t.top=r,t.left=e,t.right=e+s,t.bottom=r+n,t.width=s,t.height=n}function tg(t,e,r,s){const n=r.padding;let{x:i,y:o}=e;for(const l of t){const c=l.box,d=s[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,f=d.size||c.height;qa(d.start)&&(o=d.start),c.fullSize?Yo(c,n.left,o,r.outerWidth-n.right-n.left,f):Yo(c,e.left+d.placed,o,h,f),d.start=o,d.placed+=h,o=c.bottom}else{const h=e.h*u,f=d.size||c.width;qa(d.start)&&(i=d.start),c.fullSize?Yo(c,i,n.top,f,r.outerHeight-n.bottom-n.top):Yo(c,i,e.top+d.placed,f,h),d.start=i,d.placed+=h,i=c.right}}e.x=i,e.y=o}var ir={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,s){if(!t)return;const n=dr(t.options.layout.padding),i=Math.max(e-n.width,0),o=Math.max(r-n.height,0),l=y4(t.boxes),c=l.vertical,d=l.horizontal;ke(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=c.reduce((g,j)=>j.box.options&&j.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:r,padding:n,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},n);Pv(f,dr(s));const p=Object.assign({maxPadding:f,w:i,h:o,x:n.left,y:n.top},n),v=x4(c.concat(d),h);ra(l.fullSize,p,h,v),ra(c,p,h,v),ra(d,p,h,v)&&ra(c,p,h,v),b4(p),tg(l.leftAndTop,p,h,v),p.x+=p.w,p.y+=p.h,tg(l.rightAndBottom,p,h,v),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},ke(l.chartArea,g=>{const j=g.box;Object.assign(j,t.chartArea),j.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Mv{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,s){}removeEventListener(e,r,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,s,n){return r=Math.max(0,r||e.width),s=s||e.height,{width:r,height:Math.max(0,n?Math.floor(r/n):s)}}isAttached(e){return!0}updateConfig(e){}}class k4 extends Mv{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ml="$chartjs",j4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},rg=t=>t===null||t==="";function _4(t,e){const r=t.style,s=t.getAttribute("height"),n=t.getAttribute("width");if(t[ml]={initial:{height:s,width:n,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",rg(n)){const i=Fm(t,"width");i!==void 0&&(t.width=i)}if(rg(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Fm(t,"height");i!==void 0&&(t.height=i)}return t}const Tv=_S?{passive:!0}:!1;function N4(t,e,r){t&&t.addEventListener(e,r,Tv)}function S4(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,Tv)}function C4(t,e){const r=j4[t.type]||t.type,{x:s,y:n}=Zs(t,e);return{type:r,chart:e,native:t,x:s!==void 0?s:null,y:n!==void 0?n:null}}function sc(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function E4(t,e,r){const s=t.canvas,n=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||sc(l.addedNodes,s),o=o&&!sc(l.removedNodes,s);o&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}function D4(t,e,r){const s=t.canvas,n=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||sc(l.removedNodes,s),o=o&&!sc(l.addedNodes,s);o&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}const Xa=new Map;let sg=0;function Ov(){const t=window.devicePixelRatio;t!==sg&&(sg=t,Xa.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function P4(t,e){Xa.size||window.addEventListener("resize",Ov),Xa.set(t,e)}function M4(t){Xa.delete(t),Xa.size||window.removeEventListener("resize",Ov)}function T4(t,e,r){const s=t.canvas,n=s&&Nf(s);if(!n)return;const i=hv((l,c)=>{const d=n.clientWidth;r(l,c),d<n.clientWidth&&r()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return o.observe(n),P4(t,i),o}function Cd(t,e,r){r&&r.disconnect(),e==="resize"&&M4(t)}function O4(t,e,r){const s=t.canvas,n=hv(i=>{t.ctx!==null&&r(C4(i,t))},t);return N4(s,e,n),n}class A4 extends Mv{acquireContext(e,r){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(_4(e,r),s):null}releaseContext(e){const r=e.canvas;if(!r[ml])return!1;const s=r[ml].initial;["height","width"].forEach(i=>{const o=s[i];be(o)?r.removeAttribute(i):r.setAttribute(i,o)});const n=s.style||{};return Object.keys(n).forEach(i=>{r.style[i]=n[i]}),r.width=r.width,delete r[ml],!0}addEventListener(e,r,s){this.removeEventListener(e,r);const n=e.$proxies||(e.$proxies={}),o={attach:E4,detach:D4,resize:T4}[r]||O4;n[r]=o(e,r,s)}removeEventListener(e,r){const s=e.$proxies||(e.$proxies={}),n=s[r];if(!n)return;({attach:Cd,detach:Cd,resize:Cd}[r]||S4)(e,r,n),s[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,s,n){return jS(e,r,s,n)}isAttached(e){const r=e&&Nf(e);return!!(r&&r.isConnected)}}function I4(t){return!_f()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?k4:A4}var el;let ls=(el=class{constructor(){H(this,"x");H(this,"y");H(this,"active",!1);H(this,"options");H(this,"$animations")}tooltipPosition(e){const{x:r,y:s}=this.getProps(["x","y"],e);return{x:r,y:s}}hasValue(){return Ya(this.x)&&Ya(this.y)}getProps(e,r){const s=this.$animations;if(!r||!s)return this;const n={};return e.forEach(i=>{n[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),n}},H(el,"defaults",{}),H(el,"defaultRoutes"),el);function R4(t,e){const r=t.options.ticks,s=L4(t),n=Math.min(r.maxTicksLimit||s,s),i=r.major.enabled?F4(e):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>n)return $4(e,d,i,o/n),d;const u=z4(i,e,n);if(o>0){let h,f;const p=o>1?Math.round((c-l)/(o-1)):null;for(Go(e,d,u,be(p)?0:l-p,l),h=0,f=o-1;h<f;h++)Go(e,d,u,i[h],i[h+1]);return Go(e,d,u,c,be(p)?e.length:c+p),d}return Go(e,d,u),d}function L4(t){const e=t.options.offset,r=t._tickSize(),s=t._length/r+(e?0:1),n=t._maxLength/r;return Math.floor(Math.min(s,n))}function z4(t,e,r){const s=U4(t),n=e.length/r;if(!s)return Math.max(n,1);const i=jN(s);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>n)return c}return Math.max(n,1)}function F4(t){const e=[];let r,s;for(r=0,s=t.length;r<s;r++)t[r].major&&e.push(r);return e}function $4(t,e,r,s){let n=0,i=r[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),n++,i=r[n*s])}function Go(t,e,r,s,n){const i=fe(s,0),o=Math.min(fe(n,t.length),t.length);let l=0,c,d,u;for(r=Math.ceil(r),n&&(c=n-s,r=c/Math.floor(c/r)),u=i;u<0;)l++,u=Math.round(i+l*r);for(d=Math.max(i,0);d<o;d++)d===u&&(e.push(t[d]),l++,u=Math.round(i+l*r))}function U4(t){const e=t.length;let r,s;if(e<2)return!1;for(s=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==s)return!1;return s}const B4=t=>t==="left"?"right":t==="right"?"left":t,ng=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,ig=(t,e)=>Math.min(e||t,t);function ag(t,e){const r=[],s=t.length/e,n=t.length;let i=0;for(;i<n;i+=s)r.push(t[Math.floor(i)]);return r}function H4(t,e,r){const s=t.ticks.length,n=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(n),d;if(!(r&&(s===1?d=Math.max(c-i,o-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(n-1))/2,c+=n<e?d:-d,c<i-l||c>o+l)))return c}function W4(t,e){ke(t,r=>{const s=r.gc,n=s.length/2;let i;if(n>e){for(i=0;i<n;++i)delete r.data[s[i]];s.splice(0,n)}})}function Wi(t){return t.drawTicks?t.tickLength:0}function og(t,e){if(!t.display)return 0;const r=kt(t.font,e),s=dr(t.padding);return(et(t.text)?t.text.length:1)*r.lineHeight+s.height}function V4(t,e){return Mn(t,{scale:e,type:"scale"})}function q4(t,e,r){return Mn(t,{tick:r,index:e,type:"tick"})}function Y4(t,e,r){let s=mf(t);return(r&&e!=="right"||!r&&e==="right")&&(s=B4(s)),s}function G4(t,e,r,s){const{top:n,left:i,bottom:o,right:l,chart:c}=t,{chartArea:d,scales:u}=c;let h=0,f,p,v;const g=o-n,j=l-i;if(t.isHorizontal()){if(p=yt(s,i,l),ye(r)){const y=Object.keys(r)[0],m=r[y];v=u[y].getPixelForValue(m)+g-e}else r==="center"?v=(d.bottom+d.top)/2+g-e:v=ng(t,r,e);f=l-i}else{if(ye(r)){const y=Object.keys(r)[0],m=r[y];p=u[y].getPixelForValue(m)-j+e}else r==="center"?p=(d.left+d.right)/2-j+e:p=ng(t,r,e);v=yt(s,o,n),h=r==="left"?-rt:rt}return{titleX:p,titleY:v,maxWidth:f,rotation:h}}class Mi extends ls{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:s,_suggestedMax:n}=this;return e=Cr(e,Number.POSITIVE_INFINITY),r=Cr(r,Number.NEGATIVE_INFINITY),s=Cr(s,Number.POSITIVE_INFINITY),n=Cr(n,Number.NEGATIVE_INFINITY),{min:Cr(e,s),max:Cr(r,n),minDefined:cr(e),maxDefined:cr(r)}}getMinMax(e){let{min:r,max:s,minDefined:n,maxDefined:i}=this.getUserBounds(),o;if(n&&i)return{min:r,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,e),n||(r=Math.min(r,o.min)),i||(s=Math.max(s,o.max));return r=i&&r>s?s:r,s=n&&r>s?r:s,{min:Cr(r,Cr(s,r)),max:Cr(s,Cr(r,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ae(this.options.beforeUpdate,[this])}update(e,r,s){const{beginAtZero:n,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=tS(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?ag(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=R4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,s;this.isHorizontal()?(r=this.left,s=this.right):(r=this.top,s=this.bottom,e=!e),this._startPixel=r,this._endPixel=s,this._reversePixels=e,this._length=s-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ae(this.options.afterUpdate,[this])}beforeSetDimensions(){Ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ae(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ae(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let s,n,i;for(s=0,n=e.length;s<n;s++)i=e[s],i.label=Ae(r.callback,[i.value,s,e],this)}afterTickToLabelConversion(){Ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,s=ig(this.ticks.length,e.ticks.maxTicksLimit),n=r.minRotation||0,i=r.maxRotation;let o=n,l,c,d;if(!this._isVisible()||!r.display||n>=i||s<=1||!this.isHorizontal()){this.labelRotation=n;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=wt(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/s:p/(s-1),h+6>l&&(l=p/(s-(e.offset?.5:1)),c=this.maxHeight-Wi(e.grid)-r.padding-og(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),o=CN(Math.min(Math.asin(wt((u.highest.height+6)/l,-1,1)),Math.asin(wt(c/d,-1,1))-Math.asin(wt(f/d,-1,1)))),o=Math.max(n,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ae(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:s,title:n,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=og(n,r.options.font);if(l?(e.width=this.maxWidth,e.height=Wi(i)+c):(e.height=this.maxHeight,e.width=Wi(i)+c),s.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),p=s.padding*2,v=Zr(this.labelRotation),g=Math.cos(v),j=Math.sin(v);if(l){const y=s.mirror?0:j*h.width+g*f.height;e.height=Math.min(this.maxHeight,e.height+y+p)}else{const y=s.mirror?0:g*h.width+j*f.height;e.width=Math.min(this.maxWidth,e.width+y+p)}this._calculatePadding(d,u,j,g)}}this._handleMargins(),l?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,s,n){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;c?d?(f=n*e.width,p=s*r.height):(f=s*e.height,p=n*r.width):i==="start"?p=r.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,p=r.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let u=r.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=r.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ae(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,s;for(r=0,s=e.length;r<s;r++)be(e[r].label)&&(e.splice(r,1),s--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let s=this.ticks;r<s.length&&(s=ag(s,r)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,s){const{ctx:n,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(r/ig(r,s));let d=0,u=0,h,f,p,v,g,j,y,m,x,w,C;for(h=0;h<r;h+=c){if(v=e[h].label,g=this._resolveTickFontOptions(h),n.font=j=g.string,y=i[j]=i[j]||{data:{},gc:[]},m=g.lineHeight,x=w=0,!be(v)&&!et(v))x=Am(n,y.data,y.gc,x,v),w=m;else if(et(v))for(f=0,p=v.length;f<p;++f)C=v[f],!be(C)&&!et(C)&&(x=Am(n,y.data,y.gc,x,C),w+=m);o.push(x),l.push(w),d=Math.max(x,d),u=Math.max(w,u)}W4(i,r);const _=o.indexOf(d),N=l.indexOf(u),b=k=>({width:o[k]||0,height:l[k]||0});return{first:b(0),last:b(r-1),widest:b(_),highest:b(N),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return DN(this._alignToPixels?Gs(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const s=r[e];return s.$context||(s.$context=q4(this.getContext(),e,s))}return this.$context||(this.$context=V4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=Zr(this.labelRotation),s=Math.abs(Math.cos(r)),n=Math.abs(Math.sin(r)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*s>l*n?l/s:c/n:c*n<l*s?c/s:l/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,s=this.chart,n=this.options,{grid:i,position:o,border:l}=n,c=i.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Wi(i),p=[],v=l.setContext(this.getContext()),g=v.display?v.width:0,j=g/2,y=function(J){return Gs(s,J,g)};let m,x,w,C,_,N,b,k,I,T,O,$;if(o==="top")m=y(this.bottom),N=this.bottom-f,k=m-j,T=y(e.top)+j,$=e.bottom;else if(o==="bottom")m=y(this.top),T=e.top,$=y(e.bottom)-j,N=m+j,k=this.top+f;else if(o==="left")m=y(this.right),_=this.right-f,b=m-j,I=y(e.left)+j,O=e.right;else if(o==="right")m=y(this.left),I=e.left,O=y(e.right)-j,_=m+j,b=this.left+f;else if(r==="x"){if(o==="center")m=y((e.top+e.bottom)/2+.5);else if(ye(o)){const J=Object.keys(o)[0],P=o[J];m=y(this.chart.scales[J].getPixelForValue(P))}T=e.top,$=e.bottom,N=m+j,k=N+f}else if(r==="y"){if(o==="center")m=y((e.left+e.right)/2);else if(ye(o)){const J=Object.keys(o)[0],P=o[J];m=y(this.chart.scales[J].getPixelForValue(P))}_=m-j,b=_-f,I=e.left,O=e.right}const V=fe(n.ticks.maxTicksLimit,h),R=Math.max(1,Math.ceil(h/V));for(x=0;x<h;x+=R){const J=this.getContext(x),P=i.setContext(J),L=l.setContext(J),B=P.lineWidth,G=P.color,U=L.dash||[],K=L.dashOffset,te=P.tickWidth,ne=P.tickColor,A=P.tickBorderDash||[],E=P.tickBorderDashOffset;w=H4(this,x,c),w!==void 0&&(C=Gs(s,w,B),d?_=b=I=O=C:N=k=T=$=C,p.push({tx1:_,ty1:N,tx2:b,ty2:k,x1:I,y1:T,x2:O,y2:$,width:B,color:G,borderDash:U,borderDashOffset:K,tickWidth:te,tickColor:ne,tickBorderDash:A,tickBorderDashOffset:E}))}return this._ticksLength=h,this._borderValue=m,p}_computeLabelItems(e){const r=this.axis,s=this.options,{position:n,ticks:i}=s,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=i,f=Wi(s.grid),p=f+u,v=h?-u:p,g=-Zr(this.labelRotation),j=[];let y,m,x,w,C,_,N,b,k,I,T,O,$="middle";if(n==="top")_=this.bottom-v,N=this._getXAxisLabelAlignment();else if(n==="bottom")_=this.top+v,N=this._getXAxisLabelAlignment();else if(n==="left"){const R=this._getYAxisLabelAlignment(f);N=R.textAlign,C=R.x}else if(n==="right"){const R=this._getYAxisLabelAlignment(f);N=R.textAlign,C=R.x}else if(r==="x"){if(n==="center")_=(e.top+e.bottom)/2+p;else if(ye(n)){const R=Object.keys(n)[0],J=n[R];_=this.chart.scales[R].getPixelForValue(J)+p}N=this._getXAxisLabelAlignment()}else if(r==="y"){if(n==="center")C=(e.left+e.right)/2-p;else if(ye(n)){const R=Object.keys(n)[0],J=n[R];C=this.chart.scales[R].getPixelForValue(J)}N=this._getYAxisLabelAlignment(f).textAlign}r==="y"&&(c==="start"?$="top":c==="end"&&($="bottom"));const V=this._getLabelSizes();for(y=0,m=l.length;y<m;++y){x=l[y],w=x.label;const R=i.setContext(this.getContext(y));b=this.getPixelForTick(y)+i.labelOffset,k=this._resolveTickFontOptions(y),I=k.lineHeight,T=et(w)?w.length:1;const J=T/2,P=R.color,L=R.textStrokeColor,B=R.textStrokeWidth;let G=N;o?(C=b,N==="inner"&&(y===m-1?G=this.options.reverse?"left":"right":y===0?G=this.options.reverse?"right":"left":G="center"),n==="top"?d==="near"||g!==0?O=-T*I+I/2:d==="center"?O=-V.highest.height/2-J*I+I:O=-V.highest.height+I/2:d==="near"||g!==0?O=I/2:d==="center"?O=V.highest.height/2-J*I:O=V.highest.height-T*I,h&&(O*=-1),g!==0&&!R.showLabelBackdrop&&(C+=I/2*Math.sin(g))):(_=b,O=(1-T)*I/2);let U;if(R.showLabelBackdrop){const K=dr(R.backdropPadding),te=V.heights[y],ne=V.widths[y];let A=O-K.top,E=0-K.left;switch($){case"middle":A-=te/2;break;case"bottom":A-=te;break}switch(N){case"center":E-=ne/2;break;case"right":E-=ne;break;case"inner":y===m-1?E-=ne:y>0&&(E-=ne/2);break}U={left:E,top:A,width:ne+K.width,height:te+K.height,color:R.backdropColor}}j.push({label:w,font:k,textOffset:O,options:{rotation:g,color:P,strokeColor:L,strokeWidth:B,textAlign:G,textBaseline:$,translation:[C,_],backdrop:U}})}return j}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-Zr(this.labelRotation))return e==="top"?"left":"right";let n="center";return r.align==="start"?n="left":r.align==="end"?n="right":r.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:s,mirror:n,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,c=o.widest.width;let d,u;return r==="left"?n?(u=this.right+i,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u=this.left)):r==="right"?n?(u=this.left+i,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:s,top:n,width:i,height:o}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(s,n,i,o),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const n=this.ticks.findIndex(i=>i.value===e);return n>=0?r.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const r=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(c,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(r.display)for(i=0,o=n.length;i<o;++i){const c=n[i];r.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),r.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:s,grid:n}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const l=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=Gs(e,this.left,o)-o/2,u=Gs(e,this.right,l)+l/2,h=f=c):(h=Gs(e,this.top,o)-o/2,f=Gs(e,this.bottom,l)+l/2,d=u=c),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(d,h),r.lineTo(u,f),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,n=this._computeLabelArea();n&&yf(s,n);const i=this.getLabelItems(e);for(const o of i){const l=o.options,c=o.font,d=o.label,u=o.textOffset;Ka(s,d,0,u,c,l)}n&&vf(s)}drawTitle(){const{ctx:e,options:{position:r,title:s,reverse:n}}=this;if(!s.display)return;const i=kt(s.font),o=dr(s.padding),l=s.align;let c=i.lineHeight/2;r==="bottom"||r==="center"||ye(r)?(c+=o.bottom,et(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=G4(this,c,r,l);Ka(e,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:f,textAlign:Y4(l,r,n),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,s=fe(e.grid&&e.grid.z,-1),n=fe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Mi.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let i,o;for(i=0,o=r.length;i<o;++i){const l=r[i];l[s]===this.id&&(!e||l.type===e)&&n.push(l)}return n}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return kt(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Jo{constructor(e,r,s){this.type=e,this.scope=r,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let s;X4(r)&&(s=this.register(r));const n=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in n||(n[i]=e,J4(e,o,s),this.override&&Ge.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const r=this.items,s=e.id,n=this.scope;s in r&&delete r[s],n&&s in Ge[n]&&(delete Ge[n][s],this.override&&delete kn[s])}}function J4(t,e,r){const s=Va(Object.create(null),[r?Ge.get(r):{},Ge.get(e),t.defaults]);Ge.set(e,s),t.defaultRoutes&&K4(e,t.defaultRoutes),t.descriptors&&Ge.describe(e,t.descriptors)}function K4(t,e){Object.keys(e).forEach(r=>{const s=r.split("."),n=s.pop(),i=[t].concat(s).join("."),o=e[r].split("."),l=o.pop(),c=o.join(".");Ge.route(i,n,c,l)})}function X4(t){return"id"in t&&"defaults"in t}class Q4{constructor(){this.controllers=new Jo(fn,"datasets",!0),this.elements=new Jo(ls,"elements"),this.plugins=new Jo(Object,"plugins"),this.scales=new Jo(Mi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,s){[...r].forEach(n=>{const i=s||this._getRegistryForType(n);s||i.isForType(n)||i===this.plugins&&n.id?this._exec(e,i,n):ke(n,o=>{const l=s||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,r,s){const n=ff(e);Ae(s["before"+n],[],s),r[e](s),Ae(s["after"+n],[],s)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const s=this._typedRegistries[r];if(s.isForType(e))return s}return this.plugins}_get(e,r,s){const n=r.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return n}}var Pr=new Q4;class Z4{constructor(){this._init=[]}notify(e,r,s,n){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=n?this._descriptors(e).filter(n):this._descriptors(e),o=this._notify(i,e,r,s);return r==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,r,s,n){n=n||{};for(const i of e){const o=i.plugin,l=o[s],c=[r,n,i.options];if(Ae(l,c,o)===!1&&n.cancelable)return!1}return!0}invalidate(){be(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const s=e&&e.config,n=fe(s.options&&s.options.plugins,{}),i=eC(s);return n===!1&&!r?[]:rC(e,i,n,r)}_notifyStateChanges(e){const r=this._oldCache||[],s=this._cache,n=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(n(r,s),e,"stop"),this._notify(n(s,r),e,"start")}}function eC(t){const e={},r=[],s=Object.keys(Pr.plugins.items);for(let i=0;i<s.length;i++)r.push(Pr.getPlugin(s[i]));const n=t.plugins||[];for(let i=0;i<n.length;i++){const o=n[i];r.indexOf(o)===-1&&(r.push(o),e[o.id]=!0)}return{plugins:r,localIds:e}}function tC(t,e){return!e&&t===!1?null:t===!0?{}:t}function rC(t,{plugins:e,localIds:r},s,n){const i=[],o=t.getContext();for(const l of e){const c=l.id,d=tC(s[c],n);d!==null&&i.push({plugin:l,options:sC(t.config,{plugin:l,local:r[c]},d,o)})}return i}function sC(t,{plugin:e,local:r},s,n){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return r&&e.defaults&&o.push(e.defaults),t.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ju(t,e){const r=Ge.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function nC(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function iC(t,e){return t===e?"_index_":"_value_"}function lg(t){if(t==="x"||t==="y"||t==="r")return t}function aC(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Ku(t,...e){if(lg(t))return t;for(const r of e){const s=r.axis||aC(r.position)||t.length>1&&lg(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function cg(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function oC(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(r.length)return cg(t,"x",r[0])||cg(t,"y",r[0])}return{}}function lC(t,e){const r=kn[t.type]||{scales:{}},s=e.scales||{},n=Ju(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const l=s[o];if(!ye(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Ku(o,l,oC(o,t),Ge.scales[l.type]),d=iC(c,n),u=r.scales||{};i[o]=va(Object.create(null),[{axis:c},l,u[c],u[d]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||Ju(l,e),u=(kn[l]||{}).scales||{};Object.keys(u).forEach(h=>{const f=nC(h,c),p=o[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),va(i[p],[{axis:f},s[p],u[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];va(l,[Ge.scales[l.type],Ge.scale])}),i}function Av(t){const e=t.options||(t.options={});e.plugins=fe(e.plugins,{}),e.scales=lC(t,e)}function Iv(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function cC(t){return t=t||{},t.data=Iv(t.data),Av(t),t}const dg=new Map,Rv=new Set;function Ko(t,e){let r=dg.get(t);return r||(r=e(),dg.set(t,r),Rv.add(r)),r}const Vi=(t,e,r)=>{const s=wn(e,r);s!==void 0&&t.add(s)};class dC{constructor(e){this._config=cC(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Iv(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Av(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ko(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return Ko(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return Ko(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,s=this.type;return Ko(`${s}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const s=this._scopeCache;let n=s.get(e);return(!n||r)&&(n=new Map,s.set(e,n)),n}getOptionScopes(e,r,s){const{options:n,type:i}=this,o=this._cachedScopes(e,s),l=o.get(r);if(l)return l;const c=new Set;r.forEach(u=>{e&&(c.add(e),u.forEach(h=>Vi(c,e,h))),u.forEach(h=>Vi(c,n,h)),u.forEach(h=>Vi(c,kn[i]||{},h)),u.forEach(h=>Vi(c,Ge,h)),u.forEach(h=>Vi(c,Yu,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),Rv.has(r)&&o.set(r,d),d}chartOptionScopes(){const{options:e,type:r}=this;return[e,kn[r]||{},Ge.datasets[r]||{},{type:r},Ge,Yu]}resolveNamedOptions(e,r,s,n=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=ug(this._resolverCache,e,n);let c=o;if(hC(o,r)){i.$shared=!1,s=Fs(s)?s():s;const d=this.createResolver(e,s,l);c=ji(o,s,d)}for(const d of r)i[d]=c[d];return i}createResolver(e,r,s=[""],n){const{resolver:i}=ug(this._resolverCache,e,s);return ye(r)?ji(i,r,void 0,n):i}}function ug(t,e,r){let s=t.get(e);s||(s=new Map,t.set(e,s));const n=r.join();let i=s.get(n);return i||(i={resolver:wf(e,r),subPrefixes:r.filter(l=>!l.toLowerCase().includes("hover"))},s.set(n,i)),i}const uC=t=>ye(t)&&Object.getOwnPropertyNames(t).some(e=>Fs(t[e]));function hC(t,e){const{isScriptable:r,isIndexable:s}=xv(t);for(const n of e){const i=r(n),o=s(n),l=(o||i)&&t[n];if(i&&(Fs(l)||uC(l))||o&&et(l))return!0}return!1}var fC="4.5.0";const pC=["top","bottom","left","right","chartArea"];function hg(t,e){return t==="top"||t==="bottom"||pC.indexOf(t)===-1&&e==="x"}function fg(t,e){return function(r,s){return r[t]===s[t]?r[e]-s[e]:r[t]-s[t]}}function pg(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),Ae(r&&r.onComplete,[t],e)}function mC(t){const e=t.chart,r=e.options.animation;Ae(r&&r.onProgress,[t],e)}function Lv(t){return _f()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const gl={},mg=t=>{const e=Lv(t);return Object.values(gl).filter(r=>r.canvas===e).pop()};function gC(t,e,r){const s=Object.keys(t);for(const n of s){const i=+n;if(i>=e){const o=t[n];delete t[n],(r>0||i>e)&&(t[i+r]=o)}}}function xC(t,e,r,s){return!r||t.type==="mouseout"?null:s?e:t}var fs;let Tc=(fs=class{static register(...e){Pr.add(...e),gg()}static unregister(...e){Pr.remove(...e),gg()}constructor(e,r){const s=this.config=new dC(r),n=Lv(e),i=mg(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||I4(n)),this.platform.updateConfig(s);const l=this.platform.acquireContext(n,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=pN(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Z4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ON(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],gl[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Br.listen(this,"complete",pg),Br.listen(this,"progress",mC),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:s,height:n,_aspectRatio:i}=this;return be(e)?r&&i?i:n?s/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Pr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():zm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Im(this.canvas,this.ctx),this}stop(){return Br.stop(this),this}resize(e,r){Br.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const s=this.options,n=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,e,r,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,zm(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Ae(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};ke(r,(s,n)=>{s.id=n})}buildOrUpdateScales(){const e=this.options,r=e.scales,s=this.scales,n=Object.keys(s).reduce((o,l)=>(o[l]=!1,o),{});let i=[];r&&(i=i.concat(Object.keys(r).map(o=>{const l=r[o],c=Ku(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),ke(i,o=>{const l=o.options,c=l.id,d=Ku(c,l),u=fe(l.type,o.dtype);(l.position===void 0||hg(l.position,d)!==hg(o.dposition))&&(l.position=o.dposition),n[c]=!0;let h=null;if(c in s&&s[c].type===u)h=s[c];else{const f=Pr.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(l,e)}),ke(n,(o,l)=>{o||delete s[l]}),ke(s,o=>{ir.configure(this,o,o.options),ir.addBox(this,o)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,s=e.length;if(e.sort((n,i)=>n.index-i.index),s>r){for(let n=r;n<s;++n)this._destroyDatasetMeta(n);e.splice(r,s-r)}this._sortedMetasets=e.slice(0).sort(fg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((s,n)=>{r.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=r.length;s<n;s++){const i=r[s];let o=this.getDatasetMeta(s);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=l,o.indexAxis=i.indexAxis||Ju(l,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=Pr.getController(l),{datasetElementType:d,dataElementType:u}=Ge.datasets[l];Object.assign(c,{dataElementType:Pr.getElement(u),datasetElementType:d&&Pr.getElement(d)}),o.controller=new c(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ke(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const s=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!n&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),n||ke(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(fg("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){ke(this.scales,e=>{ir.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!Nm(r,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:i}of r){const o=s==="_removeElements"?-i:i;gC(e,n,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),n=s(0);for(let i=1;i<r;i++)if(!Nm(n,s(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ir.update(this,this.width,this.height,e);const r=this.chartArea,s=r.width<=0||r.height<=0;this._layers=[],ke(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,s=this.data.datasets.length;r<s;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,s=this.data.datasets.length;r<s;++r)this._updateDataset(r,Fs(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const s=this.getDatasetMeta(e),n={meta:s,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(r),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Br.has(this)?this.attached&&!Br.running(this)&&Br.start(this):(this.draw(),pg({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,s=[];let n,i;for(n=0,i=r.length;n<i;++n){const o=r[n];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,s={meta:e,index:e.index,cancelable:!0},n=zS(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(n&&yf(r,n),e.controller.draw(),n&&vf(r),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Ja(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,s,n){const i=p4.modes[r];return typeof i=="function"?i(this,e,s,n):[]}getDatasetMeta(e){const r=this.data.datasets[e],s=this._metasets;let n=s.filter(i=>i&&i._dataset===r).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=Mn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!r.hidden}setDatasetVisibility(e,r){const s=this.getDatasetMeta(e);s.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,s){const n=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,n);qa(r)?(i.data[r].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(l=>l.datasetIndex===e?n:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),Br.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Im(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete gl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,s=(i,o)=>{r.addEventListener(this,i,o),e[i]=o},n=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};ke(this.options.events,i=>s(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,s=(c,d)=>{r.addEventListener(this,c,d),e[c]=d},n=(c,d)=>{e[c]&&(r.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{n("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),s("attach",l)},r.isAttached(this.canvas)?l():o()}unbindEvents(){ke(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},ke(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,s){const n=s?"set":"remove";let i,o,l,c;for(r==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Ql(s,r)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,r))}notifyPlugins(e,r,s){return this._plugins.notify(this,e,r,s)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,s){const n=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(r,e),l=s?e:i(e,r);o.length&&this.updateHoverStyle(o,n.mode,!1),l.length&&n.mode&&this.updateHoverStyle(l,n.mode,!0)}_eventHandler(e,r){const s={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},n=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;const i=this._handleEvent(e,r,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(i||s.changed)&&this.render(),this}_handleEvent(e,r,s){const{_active:n=[],options:i}=this,o=r,l=this._getActiveElements(e,n,s,o),c=bN(e),d=xC(e,this._lastEvent,s,c);s&&(this._lastEvent=null,Ae(i.onHover,[e,l,this],this),c&&Ae(i.onClick,[e,l,this],this));const u=!Ql(l,n);return(u||r)&&(this._active=l,this._updateHoverStyles(l,n,r)),this._lastEvent=d,u}_getActiveElements(e,r,s,n){if(e.type==="mouseout")return[];if(!s)return r;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,n)}},H(fs,"defaults",Ge),H(fs,"instances",gl),H(fs,"overrides",kn),H(fs,"registry",Pr),H(fs,"version",fC),H(fs,"getChart",mg),fs);function gg(){return ke(Tc.instances,t=>t._plugins.invalidate())}function yC(t,e,r){const{startAngle:s,x:n,y:i,outerRadius:o,innerRadius:l,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,h=Math.min(d/o,gr(s-r));if(t.beginPath(),t.arc(n,i,o-d/2,s+h/2,r-h/2),l>0){const f=Math.min(d/l,gr(s-r));t.arc(n,i,l+d/2,r-f/2,s+f/2,!0)}else{const f=Math.min(d/2,o*gr(s-r));if(u==="round")t.arc(n,i,f,r-je/2,s+je/2,!0);else if(u==="bevel"){const p=2*f*f,v=-p*Math.cos(r+je/2)+n,g=-p*Math.sin(r+je/2)+i,j=p*Math.cos(s+je/2)+n,y=p*Math.sin(s+je/2)+i;t.lineTo(v,g),t.lineTo(j,y)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function vC(t,e,r){const{startAngle:s,pixelMargin:n,x:i,y:o,outerRadius:l,innerRadius:c}=e;let d=n/l;t.beginPath(),t.arc(i,o,l,s-d,r+d),c>n?(d=n/c,t.arc(i,o,c,r+d,s-d,!0)):t.arc(i,o,n,r+rt,s-rt),t.closePath(),t.clip()}function bC(t){return bf(t,["outerStart","outerEnd","innerStart","innerEnd"])}function wC(t,e,r,s){const n=bC(t.options.borderRadius),i=(r-e)/2,o=Math.min(i,s*e/2),l=c=>{const d=(r-Math.min(i,c))*s/2;return wt(c,0,Math.min(i,d))};return{outerStart:l(n.outerStart),outerEnd:l(n.outerEnd),innerStart:wt(n.innerStart,0,o),innerEnd:wt(n.innerEnd,0,o)}}function Bn(t,e,r,s){return{x:r+t*Math.cos(e),y:s+t*Math.sin(e)}}function nc(t,e,r,s,n,i){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=e,h=Math.max(e.outerRadius+s+r-d,0),f=u>0?u+s+r+d:0;let p=0;const v=n-c;if(s){const R=u>0?u-s:0,J=h>0?h-s:0,P=(R+J)/2,L=P!==0?v*P/(P+s):v;p=(v-L)/2}const g=Math.max(.001,v*h-r/je)/h,j=(v-g)/2,y=c+j+p,m=n-j-p,{outerStart:x,outerEnd:w,innerStart:C,innerEnd:_}=wC(e,f,h,m-y),N=h-x,b=h-w,k=y+x/N,I=m-w/b,T=f+C,O=f+_,$=y+C/T,V=m-_/O;if(t.beginPath(),i){const R=(k+I)/2;if(t.arc(o,l,h,k,R),t.arc(o,l,h,R,I),w>0){const B=Bn(b,I,o,l);t.arc(B.x,B.y,w,I,m+rt)}const J=Bn(O,m,o,l);if(t.lineTo(J.x,J.y),_>0){const B=Bn(O,V,o,l);t.arc(B.x,B.y,_,m+rt,V+Math.PI)}const P=(m-_/f+(y+C/f))/2;if(t.arc(o,l,f,m-_/f,P,!0),t.arc(o,l,f,P,y+C/f,!0),C>0){const B=Bn(T,$,o,l);t.arc(B.x,B.y,C,$+Math.PI,y-rt)}const L=Bn(N,y,o,l);if(t.lineTo(L.x,L.y),x>0){const B=Bn(N,k,o,l);t.arc(B.x,B.y,x,y-rt,k)}}else{t.moveTo(o,l);const R=Math.cos(k)*h+o,J=Math.sin(k)*h+l;t.lineTo(R,J);const P=Math.cos(I)*h+o,L=Math.sin(I)*h+l;t.lineTo(P,L)}t.closePath()}function kC(t,e,r,s,n){const{fullCircles:i,startAngle:o,circumference:l}=e;let c=e.endAngle;if(i){nc(t,e,r,s,c,n);for(let d=0;d<i;++d)t.fill();isNaN(l)||(c=o+(l%Ve||Ve))}return nc(t,e,r,s,c,n),t.fill(),c}function jC(t,e,r,s,n){const{fullCircles:i,startAngle:o,circumference:l,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:f,borderRadius:p}=c,v=c.borderAlign==="inner";if(!d)return;t.setLineDash(h||[]),t.lineDashOffset=f,v?(t.lineWidth=d*2,t.lineJoin=u||"round"):(t.lineWidth=d,t.lineJoin=u||"bevel");let g=e.endAngle;if(i){nc(t,e,r,s,g,n);for(let j=0;j<i;++j)t.stroke();isNaN(l)||(g=o+(l%Ve||Ve))}v&&vC(t,e,g),c.selfJoin&&g-o>=je&&p===0&&u!=="miter"&&yC(t,e,g),i||(nc(t,e,r,s,g,n),t.stroke())}class sa extends ls{constructor(r){super();H(this,"circumference");H(this,"endAngle");H(this,"fullCircles");H(this,"innerRadius");H(this,"outerRadius");H(this,"pixelMargin");H(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,s,n){const i=this.getProps(["x","y"],n),{angle:o,distance:l}=lv(i,{x:r,y:s}),{startAngle:c,endAngle:d,innerRadius:u,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),p=(this.options.spacing+this.options.borderWidth)/2,v=fe(f,d-c),g=Ga(o,c,d)&&c!==d,j=v>=Ve||g,y=_s(l,u+p,h+p);return j&&y}getCenterPoint(r){const{x:s,y:n,startAngle:i,endAngle:o,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:d,spacing:u}=this.options,h=(i+o)/2,f=(l+c+u+d)/2;return{x:s+Math.cos(h)*f,y:n+Math.sin(h)*f}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:s,circumference:n}=this,i=(s.offset||0)/4,o=(s.spacing||0)/2,l=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>Ve?Math.floor(n/Ve):0,n===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const c=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(c)*i,Math.sin(c)*i);const d=1-Math.sin(Math.min(je,n||0)),u=i*d;r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,kC(r,this,u,o,l),jC(r,this,u,o,l),r.restore()}}H(sa,"id","arc"),H(sa,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),H(sa,"defaultRoutes",{backgroundColor:"backgroundColor"}),H(sa,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function zv(t,e,r=e){t.lineCap=fe(r.borderCapStyle,e.borderCapStyle),t.setLineDash(fe(r.borderDash,e.borderDash)),t.lineDashOffset=fe(r.borderDashOffset,e.borderDashOffset),t.lineJoin=fe(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=fe(r.borderWidth,e.borderWidth),t.strokeStyle=fe(r.borderColor,e.borderColor)}function _C(t,e,r){t.lineTo(r.x,r.y)}function NC(t){return t.stepped?qN:t.tension||t.cubicInterpolationMode==="monotone"?YN:_C}function Fv(t,e,r={}){const s=t.length,{start:n=0,end:i=s-1}=r,{start:o,end:l}=e,c=Math.max(n,o),d=Math.min(i,l),u=n<o&&i<o||n>l&&i>l;return{count:s,start:c,loop:e.loop,ilen:d<c&&!u?s+d-c:d-c}}function SC(t,e,r,s){const{points:n,options:i}=e,{count:o,start:l,loop:c,ilen:d}=Fv(n,r,s),u=NC(i);let{move:h=!0,reverse:f}=s||{},p,v,g;for(p=0;p<=d;++p)v=n[(l+(f?d-p:p))%o],!v.skip&&(h?(t.moveTo(v.x,v.y),h=!1):u(t,g,v,f,i.stepped),g=v);return c&&(v=n[(l+(f?d:0))%o],u(t,g,v,f,i.stepped)),!!c}function CC(t,e,r,s){const n=e.points,{count:i,start:o,ilen:l}=Fv(n,r,s),{move:c=!0,reverse:d}=s||{};let u=0,h=0,f,p,v,g,j,y;const m=w=>(o+(d?l-w:w))%i,x=()=>{g!==j&&(t.lineTo(u,j),t.lineTo(u,g),t.lineTo(u,y))};for(c&&(p=n[m(0)],t.moveTo(p.x,p.y)),f=0;f<=l;++f){if(p=n[m(f)],p.skip)continue;const w=p.x,C=p.y,_=w|0;_===v?(C<g?g=C:C>j&&(j=C),u=(h*u+w)/++h):(x(),t.lineTo(w,C),v=_,h=0,g=j=C),y=C}x()}function Xu(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?CC:SC}function EC(t){return t.stepped?NS:t.tension||t.cubicInterpolationMode==="monotone"?SS:en}function DC(t,e,r,s){let n=e._path;n||(n=e._path=new Path2D,e.path(n,r,s)&&n.closePath()),zv(t,e.options),t.stroke(n)}function PC(t,e,r,s){const{segments:n,options:i}=e,o=Xu(e);for(const l of n)zv(t,i,l.style),t.beginPath(),o(t,e,l,{start:r,end:r+s-1})&&t.closePath(),t.stroke()}const MC=typeof Path2D=="function";function TC(t,e,r,s){MC&&!e.options.segment?DC(t,e,r,s):PC(t,e,r,s)}class na extends ls{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const n=s.spanGaps?this._loop:this._fullLoop;xS(this._points,s,e,n,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=AS(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,s=e.length;return s&&r[e[s-1].end]}interpolate(e,r){const s=this.options,n=e[r],i=this.points,o=MS(this,{property:r,start:n,end:n});if(!o.length)return;const l=[],c=EC(s);let d,u;for(d=0,u=o.length;d<u;++d){const{start:h,end:f}=o[d],p=i[h],v=i[f];if(p===v){l.push(p);continue}const g=Math.abs((n-p[r])/(v[r]-p[r])),j=c(p,v,g,s.stepped);j[r]=e[r],l.push(j)}return l.length===1?l[0]:l}pathSegment(e,r,s){return Xu(this)(e,this,r,s)}path(e,r,s){const n=this.segments,i=Xu(this);let o=this._loop;r=r||0,s=s||this.points.length-r;for(const l of n)o&=i(e,this,l,{start:r,end:r+s-1});return!!o}draw(e,r,s,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),TC(e,this,s,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}H(na,"id","line"),H(na,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),H(na,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),H(na,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function xg(t,e,r,s){const n=t.options,{[r]:i}=t.getProps([r],s);return Math.abs(e-i)<n.radius+n.hitRadius}class xl extends ls{constructor(r){super();H(this,"parsed");H(this,"skip");H(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,s,n){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],n);return Math.pow(r-o,2)+Math.pow(s-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(r,s){return xg(this,r,"x",s)}inYRange(r,s){return xg(this,r,"y",s)}getCenterPoint(r){const{x:s,y:n}=this.getProps(["x","y"],r);return{x:s,y:n}}size(r){r=r||this.options||{};let s=r.radius||0;s=Math.max(s,s&&r.hoverRadius||0);const n=s&&r.borderWidth||0;return(s+n)*2}draw(r,s){const n=this.options;this.skip||n.radius<.1||!Ja(this,s,this.size(n)/2)||(r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.fillStyle=n.backgroundColor,Gu(r,n,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}H(xl,"id","point"),H(xl,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),H(xl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function $v(t,e){const{x:r,y:s,base:n,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let l,c,d,u,h;return t.horizontal?(h=o/2,l=Math.min(r,n),c=Math.max(r,n),d=s-h,u=s+h):(h=i/2,l=r-h,c=r+h,d=Math.min(s,n),u=Math.max(s,n)),{left:l,top:d,right:c,bottom:u}}function Ns(t,e,r,s){return t?0:wt(e,r,s)}function OC(t,e,r){const s=t.options.borderWidth,n=t.borderSkipped,i=gv(s);return{t:Ns(n.top,i.top,0,r),r:Ns(n.right,i.right,0,e),b:Ns(n.bottom,i.bottom,0,r),l:Ns(n.left,i.left,0,e)}}function AC(t,e,r){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,i=ui(n),o=Math.min(e,r),l=t.borderSkipped,c=s||ye(n);return{topLeft:Ns(!c||l.top||l.left,i.topLeft,0,o),topRight:Ns(!c||l.top||l.right,i.topRight,0,o),bottomLeft:Ns(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:Ns(!c||l.bottom||l.right,i.bottomRight,0,o)}}function IC(t){const e=$v(t),r=e.right-e.left,s=e.bottom-e.top,n=OC(t,r/2,s/2),i=AC(t,r/2,s/2);return{outer:{x:e.left,y:e.top,w:r,h:s,radius:i},inner:{x:e.left+n.l,y:e.top+n.t,w:r-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function Ed(t,e,r,s){const n=e===null,i=r===null,l=t&&!(n&&i)&&$v(t,s);return l&&(n||_s(e,l.left,l.right))&&(i||_s(r,l.top,l.bottom))}function RC(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function LC(t,e){t.rect(e.x,e.y,e.w,e.h)}function Dd(t,e,r={}){const s=t.x!==r.x?-e:0,n=t.y!==r.y?-e:0,i=(t.x+t.w!==r.x+r.w?e:0)-s,o=(t.y+t.h!==r.y+r.h?e:0)-n;return{x:t.x+s,y:t.y+n,w:t.w+i,h:t.h+o,radius:t.radius}}class yl extends ls{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:s,backgroundColor:n}}=this,{inner:i,outer:o}=IC(this),l=RC(o.radius)?tc:LC;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),l(e,Dd(o,r,i)),e.clip(),l(e,Dd(i,-r,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),l(e,Dd(i,r)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,r,s){return Ed(this,e,r,s)}inXRange(e,r){return Ed(this,e,null,r)}inYRange(e,r){return Ed(this,null,e,r)}getCenterPoint(e){const{x:r,y:s,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(r+n)/2:r,y:i?s:(s+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}H(yl,"id","bar"),H(yl,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),H(yl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const yg=(t,e)=>{let{boxHeight:r=e,boxWidth:s=e}=t;return t.usePointStyle&&(r=Math.min(r,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:r,itemHeight:Math.max(e,r)}},zC=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class vg extends ls{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,s){this.maxWidth=e,this.maxHeight=r,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=Ae(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(s=>e.filter(s,this.chart.data))),e.sort&&(r=r.sort((s,n)=>e.sort(s,n,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,n=kt(s.font),i=n.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=yg(s,i);let d,u;r.font=n.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,n,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,r,s,n){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=n+l;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((v,g)=>{const j=s+r/2+i.measureText(v.text).width;(g===0||d[d.length-1]+j+2*l>o)&&(h+=u,d[d.length-(g>0?0:1)]=0,p+=u,f++),c[g]={left:0,top:p,row:f,width:j,height:n},d[d.length-1]+=j+l}),h}_fitCols(e,r,s,n){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-e;let h=l,f=0,p=0,v=0,g=0;return this.legendItems.forEach((j,y)=>{const{itemWidth:m,itemHeight:x}=FC(s,r,i,j,n);y>0&&p+x+2*l>u&&(h+=f+l,d.push({width:f,height:p}),v+=f+l,g++,f=p=0),c[y]={left:v,top:p,col:g,width:m,height:x},f=Math.max(f,m),p+=x+l}),h+=f,d.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:s,labels:{padding:n},rtl:i}}=this,o=hi(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=yt(s,this.left+n,this.right-this.lineWidths[l]);for(const d of r)l!==d.row&&(l=d.row,c=yt(s,this.left+n,this.right-this.lineWidths[l])),d.top+=this.top+e+n,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+n}else{let l=0,c=yt(s,this.top+e+n,this.bottom-this.columnSizes[l].height);for(const d of r)d.col!==l&&(l=d.col,c=yt(s,this.top+e+n,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+n,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;yf(e,this),this._draw(),vf(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:s,ctx:n}=this,{align:i,labels:o}=e,l=Ge.color,c=hi(e.rtl,this.left,this.width),d=kt(o.font),{padding:u}=o,h=d.size,f=h/2;let p;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=d.string;const{boxWidth:v,boxHeight:g,itemHeight:j}=yg(o,h),y=function(_,N,b){if(isNaN(v)||v<=0||isNaN(g)||g<0)return;n.save();const k=fe(b.lineWidth,1);if(n.fillStyle=fe(b.fillStyle,l),n.lineCap=fe(b.lineCap,"butt"),n.lineDashOffset=fe(b.lineDashOffset,0),n.lineJoin=fe(b.lineJoin,"miter"),n.lineWidth=k,n.strokeStyle=fe(b.strokeStyle,l),n.setLineDash(fe(b.lineDash,[])),o.usePointStyle){const I={radius:g*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:k},T=c.xPlus(_,v/2),O=N+f;mv(n,I,T,O,o.pointStyleWidth&&v)}else{const I=N+Math.max((h-g)/2,0),T=c.leftForLtr(_,v),O=ui(b.borderRadius);n.beginPath(),Object.values(O).some($=>$!==0)?tc(n,{x:T,y:I,w:v,h:g,radius:O}):n.rect(T,I,v,g),n.fill(),k!==0&&n.stroke()}n.restore()},m=function(_,N,b){Ka(n,b.text,_,N+j/2,d,{strikethrough:b.hidden,textAlign:c.textAlign(b.textAlign)})},x=this.isHorizontal(),w=this._computeTitleHeight();x?p={x:yt(i,this.left+u,this.right-s[0]),y:this.top+u+w,line:0}:p={x:this.left+u,y:yt(i,this.top+w+u,this.bottom-r[0].height),line:0},kv(this.ctx,e.textDirection);const C=j+u;this.legendItems.forEach((_,N)=>{n.strokeStyle=_.fontColor,n.fillStyle=_.fontColor;const b=n.measureText(_.text).width,k=c.textAlign(_.textAlign||(_.textAlign=o.textAlign)),I=v+f+b;let T=p.x,O=p.y;c.setWidth(this.width),x?N>0&&T+I+u>this.right&&(O=p.y+=C,p.line++,T=p.x=yt(i,this.left+u,this.right-s[p.line])):N>0&&O+C>this.bottom&&(T=p.x=T+r[p.line].width+u,p.line++,O=p.y=yt(i,this.top+w+u,this.bottom-r[p.line].height));const $=c.x(T);if(y($,O,_),T=AN(k,T+v+f,x?T+I:this.right,e.rtl),m(c.x(T),O,_),x)p.x+=I+u;else if(typeof _.text!="string"){const V=d.lineHeight;p.y+=Uv(_,V)+u}else p.y+=C}),jv(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,s=kt(r.font),n=dr(r.padding);if(!r.display)return;const i=hi(e.rtl,this.left,this.width),o=this.ctx,l=r.position,c=s.size/2,d=n.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=yt(e.align,h,this.right-f);else{const v=this.columnSizes.reduce((g,j)=>Math.max(g,j.height),0);u=d+yt(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const p=yt(l,h,h+f);o.textAlign=i.textAlign(mf(l)),o.textBaseline="middle",o.strokeStyle=r.color,o.fillStyle=r.color,o.font=s.string,Ka(o,r.text,p,u,s)}_computeTitleHeight(){const e=this.options.title,r=kt(e.font),s=dr(e.padding);return e.display?r.lineHeight+s.height:0}_getLegendItemAt(e,r){let s,n,i;if(_s(e,this.left,this.right)&&_s(r,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(n=i[s],_s(e,n.left,n.left+n.width)&&_s(r,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(e){const r=this.options;if(!BC(e.type,r))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,i=zC(n,s);n&&!i&&Ae(r.onLeave,[e,n,this],this),this._hoveredItem=s,s&&!i&&Ae(r.onHover,[e,s,this],this)}else s&&Ae(r.onClick,[e,s,this],this)}}function FC(t,e,r,s,n){const i=$C(s,t,e,r),o=UC(n,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function $C(t,e,r,s){let n=t.text;return n&&typeof n!="string"&&(n=n.reduce((i,o)=>i.length>o.length?i:o)),e+r.size/2+s.measureText(n).width}function UC(t,e,r){let s=t;return typeof e.text!="string"&&(s=Uv(e,r)),s}function Uv(t,e){const r=t.text?t.text.length:0;return e*r}function BC(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var HC={id:"legend",_element:vg,start(t,e,r){const s=t.legend=new vg({ctx:t.ctx,options:r,chart:t});ir.configure(t,s,r),ir.addBox(t,s)},stop(t){ir.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const s=t.legend;ir.configure(t,s,r),s.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const s=e.datasetIndex,n=r.chart;n.isDatasetVisible(s)?(n.hide(s),e.hidden=!0):(n.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:s,textAlign:n,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(r?0:void 0),u=dr(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:n||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Bv extends ls{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const n=et(s.text)?s.text.length:1;this._padding=dr(s.padding);const i=n*kt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:s,bottom:n,right:i,options:o}=this,l=o.align;let c=0,d,u,h;return this.isHorizontal()?(u=yt(l,s,i),h=r+e,d=i-s):(o.position==="left"?(u=s+e,h=yt(l,n,r),c=je*-.5):(u=i-e,h=yt(l,r,n),c=je*.5),d=n-r),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const s=kt(r.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);Ka(e,r.text,0,0,s,{color:r.color,maxWidth:c,rotation:d,textAlign:mf(r.align),textBaseline:"middle",translation:[o,l]})}}function WC(t,e){const r=new Bv({ctx:t.ctx,options:e,chart:t});ir.configure(t,r,e),ir.addBox(t,r),t.titleBlock=r}var VC={id:"title",_element:Bv,start(t,e,r){WC(t,r)},stop(t){const e=t.titleBlock;ir.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const s=t.titleBlock;ir.configure(t,s,r),s.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ia={average(t){if(!t.length)return!1;let e,r,s=new Set,n=0,i=0;for(e=0,r=t.length;e<r;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),n+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:n/i}},nearest(t,e){if(!t.length)return!1;let r=e.x,s=e.y,n=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=t.length;i<o;++i){const c=t[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=qu(e,d);u<n&&(n=u,l=c)}}if(l){const c=l.tooltipPosition();r=c.x,s=c.y}return{x:r,y:s}}};function Er(t,e){return e&&(et(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Hr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function qC(t,e){const{element:r,datasetIndex:s,index:n}=e,i=t.getDatasetMeta(s).controller,{label:o,value:l}=i.getLabelAndValue(n);return{chart:t,label:o,parsed:i.getParsed(n),raw:t.data.datasets[s].data[n],formattedValue:l,dataset:i.getDataset(),dataIndex:n,datasetIndex:s,element:r}}function bg(t,e){const r=t.chart.ctx,{body:s,footer:n,title:i}=t,{boxWidth:o,boxHeight:l}=e,c=kt(e.bodyFont),d=kt(e.titleFont),u=kt(e.footerFont),h=i.length,f=n.length,p=s.length,v=dr(e.padding);let g=v.height,j=0,y=s.reduce((w,C)=>w+C.before.length+C.lines.length+C.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const w=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;g+=p*w+(y-p)*c.lineHeight+(y-1)*e.bodySpacing}f&&(g+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let m=0;const x=function(w){j=Math.max(j,r.measureText(w).width+m)};return r.save(),r.font=d.string,ke(t.title,x),r.font=c.string,ke(t.beforeBody.concat(t.afterBody),x),m=e.displayColors?o+2+e.boxPadding:0,ke(s,w=>{ke(w.before,x),ke(w.lines,x),ke(w.after,x)}),m=0,r.font=u.string,ke(t.footer,x),r.restore(),j+=v.width,{width:j,height:g}}function YC(t,e){const{y:r,height:s}=e;return r<s/2?"top":r>t.height-s/2?"bottom":"center"}function GC(t,e,r,s){const{x:n,width:i}=s,o=r.caretSize+r.caretPadding;if(t==="left"&&n+i+o>e.width||t==="right"&&n-i-o<0)return!0}function JC(t,e,r,s){const{x:n,width:i}=r,{width:o,chartArea:{left:l,right:c}}=t;let d="center";return s==="center"?d=n<=(l+c)/2?"left":"right":n<=i/2?d="left":n>=o-i/2&&(d="right"),GC(d,t,e,r)&&(d="center"),d}function wg(t,e,r){const s=r.yAlign||e.yAlign||YC(t,r);return{xAlign:r.xAlign||e.xAlign||JC(t,e,r,s),yAlign:s}}function KC(t,e){let{x:r,width:s}=t;return e==="right"?r-=s:e==="center"&&(r-=s/2),r}function XC(t,e,r){let{y:s,height:n}=t;return e==="top"?s+=r:e==="bottom"?s-=n+r:s-=n/2,s}function kg(t,e,r,s){const{caretSize:n,caretPadding:i,cornerRadius:o}=t,{xAlign:l,yAlign:c}=r,d=n+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=ui(o);let v=KC(e,l);const g=XC(e,c,d);return c==="center"?l==="left"?v+=d:l==="right"&&(v-=d):l==="left"?v-=Math.max(u,f)+n:l==="right"&&(v+=Math.max(h,p)+n),{x:wt(v,0,s.width-e.width),y:wt(g,0,s.height-e.height)}}function Xo(t,e,r){const s=dr(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function jg(t){return Er([],Hr(t))}function QC(t,e,r){return Mn(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function _g(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const Hv={beforeTitle:$r,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,s=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return r[e.dataIndex]}return""},afterTitle:$r,beforeBody:$r,beforeLabel:$r,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return be(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:$r,afterBody:$r,beforeFooter:$r,footer:$r,afterFooter:$r};function Tt(t,e,r,s){const n=t[e].call(r,s);return typeof n>"u"?Hv[e].call(r,s):n}class Qu extends ls{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&r.options.animation&&s.animations,i=new Nv(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=QC(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:s}=r,n=Tt(s,"beforeTitle",this,e),i=Tt(s,"title",this,e),o=Tt(s,"afterTitle",this,e);let l=[];return l=Er(l,Hr(n)),l=Er(l,Hr(i)),l=Er(l,Hr(o)),l}getBeforeBody(e,r){return jg(Tt(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:s}=r,n=[];return ke(e,i=>{const o={before:[],lines:[],after:[]},l=_g(s,i);Er(o.before,Hr(Tt(l,"beforeLabel",this,i))),Er(o.lines,Tt(l,"label",this,i)),Er(o.after,Hr(Tt(l,"afterLabel",this,i))),n.push(o)}),n}getAfterBody(e,r){return jg(Tt(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:s}=r,n=Tt(s,"beforeFooter",this,e),i=Tt(s,"footer",this,e),o=Tt(s,"afterFooter",this,e);let l=[];return l=Er(l,Hr(n)),l=Er(l,Hr(i)),l=Er(l,Hr(o)),l}_createItems(e){const r=this._active,s=this.chart.data,n=[],i=[],o=[];let l=[],c,d;for(c=0,d=r.length;c<d;++c)l.push(qC(this.chart,r[c]));return e.filter&&(l=l.filter((u,h,f)=>e.filter(u,h,f,s))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,s))),ke(l,u=>{const h=_g(e.callbacks,u);n.push(Tt(h,"labelColor",this,u)),i.push(Tt(h,"labelPointStyle",this,u)),o.push(Tt(h,"labelTextColor",this,u))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,r){const s=this.options.setContext(this.getContext()),n=this._active;let i,o=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const l=ia[s.position].call(this,n,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=bg(this,s),d=Object.assign({},l,c),u=wg(this.chart,s,d),h=kg(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,s,n){const i=this.getCaretPosition(e,s,n);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(e,r,s){const{xAlign:n,yAlign:i}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=ui(l),{x:f,y:p}=e,{width:v,height:g}=r;let j,y,m,x,w,C;return i==="center"?(w=p+g/2,n==="left"?(j=f,y=j-o,x=w+o,C=w-o):(j=f+v,y=j+o,x=w-o,C=w+o),m=j):(n==="left"?y=f+Math.max(c,u)+o:n==="right"?y=f+v-Math.max(d,h)-o:y=this.caretX,i==="top"?(x=p,w=x-o,j=y-o,m=y+o):(x=p+g,w=x+o,j=y+o,m=y-o),C=x),{x1:j,x2:y,x3:m,y1:x,y2:w,y3:C}}drawTitle(e,r,s){const n=this.title,i=n.length;let o,l,c;if(i){const d=hi(s.rtl,this.x,this.width);for(e.x=Xo(this,s.titleAlign,s),r.textAlign=d.textAlign(s.titleAlign),r.textBaseline="middle",o=kt(s.titleFont),l=s.titleSpacing,r.fillStyle=s.titleColor,r.font=o.string,c=0;c<i;++c)r.fillText(n[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===i&&(e.y+=s.titleMarginBottom-l)}}_drawColorBox(e,r,s,n,i){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=i,u=kt(i.bodyFont),h=Xo(this,"left",i),f=n.x(h),p=c<u.lineHeight?(u.lineHeight-c)/2:0,v=r.y+p;if(i.usePointStyle){const g={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},j=n.leftForLtr(f,d)+d/2,y=v+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Gu(e,g,j,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Gu(e,g,j,y)}else{e.lineWidth=ye(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=n.leftForLtr(f,d),j=n.leftForLtr(n.xPlus(f,1),d-2),y=ui(o.borderRadius);Object.values(y).some(m=>m!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,tc(e,{x:g,y:v,w:d,h:c,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),tc(e,{x:j,y:v+1,w:d-2,h:c-2,radius:y}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(g,v,d,c),e.strokeRect(g,v,d,c),e.fillStyle=o.backgroundColor,e.fillRect(j,v+1,d-2,c-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,r,s){const{body:n}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=s,h=kt(s.bodyFont);let f=h.lineHeight,p=0;const v=hi(s.rtl,this.x,this.width),g=function(b){r.fillText(b,v.x(e.x+p),e.y+f/2),e.y+=f+i},j=v.textAlign(o);let y,m,x,w,C,_,N;for(r.textAlign=o,r.textBaseline="middle",r.font=h.string,e.x=Xo(this,j,s),r.fillStyle=s.bodyColor,ke(this.beforeBody,g),p=l&&j!=="right"?o==="center"?d/2+u:d+2+u:0,w=0,_=n.length;w<_;++w){for(y=n[w],m=this.labelTextColors[w],r.fillStyle=m,ke(y.before,g),x=y.lines,l&&x.length&&(this._drawColorBox(r,e,w,v,s),f=Math.max(h.lineHeight,c)),C=0,N=x.length;C<N;++C)g(x[C]),f=h.lineHeight;ke(y.after,g)}p=0,f=h.lineHeight,ke(this.afterBody,g),e.y-=i}drawFooter(e,r,s){const n=this.footer,i=n.length;let o,l;if(i){const c=hi(s.rtl,this.x,this.width);for(e.x=Xo(this,s.footerAlign,s),e.y+=s.footerMarginTop,r.textAlign=c.textAlign(s.footerAlign),r.textBaseline="middle",o=kt(s.footerFont),r.fillStyle=s.footerColor,r.font=o.string,l=0;l<i;++l)r.fillText(n[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,r,s,n){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=e,{width:d,height:u}=s,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:v}=ui(n.cornerRadius);r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.beginPath(),r.moveTo(l+h,c),o==="top"&&this.drawCaret(e,r,s,n),r.lineTo(l+d-f,c),r.quadraticCurveTo(l+d,c,l+d,c+f),o==="center"&&i==="right"&&this.drawCaret(e,r,s,n),r.lineTo(l+d,c+u-v),r.quadraticCurveTo(l+d,c+u,l+d-v,c+u),o==="bottom"&&this.drawCaret(e,r,s,n),r.lineTo(l+p,c+u),r.quadraticCurveTo(l,c+u,l,c+u-p),o==="center"&&i==="left"&&this.drawCaret(e,r,s,n),r.lineTo(l,c+h),r.quadraticCurveTo(l,c,l+h,c),r.closePath(),r.fill(),n.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,s=this.$animations,n=s&&s.x,i=s&&s.y;if(n||i){const o=ia[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=bg(this,e),c=Object.assign({},o,this._size),d=wg(r,e,c),u=kg(e,c,d,r);(n._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(r);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=dr(r.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&l&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,n,r),kv(e,r.textDirection),i.y+=o.top,this.drawTitle(i,e,r),this.drawBody(i,e,r),this.drawFooter(i,e,r),jv(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const s=this._active,n=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!Ql(s,n),o=this._positionChanged(n,r);(i||o)&&(this._active=n,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,s=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],o=this._getActiveElements(e,i,r,s),l=this._positionChanged(o,e),c=r||!Ql(o,i)||l;return c&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),c}_getActiveElements(e,r,s,n){const i=this.options;if(e.type==="mouseout")return[];if(!n)return r.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,r){const{caretX:s,caretY:n,options:i}=this,o=ia[i.position].call(this,e,r);return o!==!1&&(s!==o.x||n!==o.y)}}H(Qu,"positioners",ia);var ZC={id:"tooltip",_element:Qu,positioners:ia,afterInit(t,e,r){r&&(t.tooltip=new Qu({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Hv},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const e3=(t,e,r,s)=>(typeof e=="string"?(r=t.push(e)-1,s.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function t3(t,e,r,s){const n=t.indexOf(e);if(n===-1)return e3(t,e,r,s);const i=t.lastIndexOf(e);return n!==i?r:n}const r3=(t,e)=>t===null?null:wt(Math.round(t),0,e);function Ng(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Zu extends Mi{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const s=this.getLabels();for(const{index:n,label:i}of r)s[n]===i&&s.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(be(e))return null;const s=this.getLabels();return r=isFinite(r)&&s[r]===e?r:t3(s,e,fe(r,e),this._addedLabels),r3(r,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),r||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const e=this.min,r=this.max,s=this.options.offset,n=[];let i=this.getLabels();i=e===0&&r===i.length-1?i:i.slice(e,r+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=r;o++)n.push({value:o});return n}getLabelForValue(e){return Ng.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}H(Zu,"id","category"),H(Zu,"defaults",{ticks:{callback:Ng}});function s3(t,e){const r=[],{bounds:n,step:i,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=t,p=i||1,v=u-1,{min:g,max:j}=e,y=!be(o),m=!be(l),x=!be(d),w=(j-g)/(h+1);let C=Cm((j-g)/v/p)*p,_,N,b,k;if(C<1e-14&&!y&&!m)return[{value:g},{value:j}];k=Math.ceil(j/C)-Math.floor(g/C),k>v&&(C=Cm(k*C/v/p)*p),be(c)||(_=Math.pow(10,c),C=Math.ceil(C*_)/_),n==="ticks"?(N=Math.floor(g/C)*C,b=Math.ceil(j/C)*C):(N=g,b=j),y&&m&&i&&NN((l-o)/i,C/1e3)?(k=Math.round(Math.min((l-o)/C,u)),C=(l-o)/k,N=o,b=l):x?(N=y?o:N,b=m?l:b,k=d-1,C=(b-N)/k):(k=(b-N)/C,ba(k,Math.round(k),C/1e3)?k=Math.round(k):k=Math.ceil(k));const I=Math.max(Em(C),Em(N));_=Math.pow(10,be(c)?I:c),N=Math.round(N*_)/_,b=Math.round(b*_)/_;let T=0;for(y&&(f&&N!==o?(r.push({value:o}),N<o&&T++,ba(Math.round((N+T*C)*_)/_,o,Sg(o,w,t))&&T++):N<o&&T++);T<k;++T){const O=Math.round((N+T*C)*_)/_;if(m&&O>l)break;r.push({value:O})}return m&&f&&b!==l?r.length&&ba(r[r.length-1].value,l,Sg(l,w,t))?r[r.length-1].value=l:r.push({value:l}):(!m||b===l)&&r.push({value:b}),r}function Sg(t,e,{horizontal:r,minRotation:s}){const n=Zr(s),i=(r?Math.sin(n):Math.cos(n))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class n3 extends Mi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return be(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:s}=this.getUserBounds();let{min:n,max:i}=this;const o=c=>n=r?n:c,l=c=>i=s?i:c;if(e){const c=Lr(n),d=Lr(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(n===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||o(n-c)}this.min=n,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:s}=e,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),r=r||11),r&&(n=Math.min(r,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,o=s3(n,i);return e.bounds==="ticks"&&SN(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let r=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const n=(s-r)/Math.max(e.length-1,1)/2;r-=n,s+=n}this._startValue=r,this._endValue=s,this._valueRange=s-r}getLabelForValue(e){return xf(e,this.chart.options.locale,this.options.ticks.format)}}class eh extends n3{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=cr(e)?e:0,this.max=cr(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,s=Zr(this.options.ticks.minRotation),n=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}H(eh,"id","linear"),H(eh,"defaults",{ticks:{callback:pv.formatters.numeric}});const Oc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},It=Object.keys(Oc);function Cg(t,e){return t-e}function Eg(t,e){if(be(e))return null;const r=t._adapter,{parser:s,round:n,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),cr(o)||(o=typeof s=="string"?r.parse(o,s):r.parse(o)),o===null?null:(n&&(o=n==="week"&&(Ya(i)||i===!0)?r.startOf(o,"isoWeek",i):r.startOf(o,n)),+o)}function Dg(t,e,r,s){const n=It.length;for(let i=It.indexOf(t);i<n-1;++i){const o=Oc[It[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((r-e)/(l*o.size))<=s)return It[i]}return It[n-1]}function i3(t,e,r,s,n){for(let i=It.length-1;i>=It.indexOf(r);i--){const o=It[i];if(Oc[o].common&&t._adapter.diff(n,s,o)>=e-1)return o}return It[r?It.indexOf(r):0]}function a3(t){for(let e=It.indexOf(t)+1,r=It.length;e<r;++e)if(Oc[It[e]].common)return It[e]}function Pg(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:s,hi:n}=pf(r,e),i=r[s]>=e?r[s]:r[n];t[i]=!0}}function o3(t,e,r,s){const n=t._adapter,i=+n.startOf(e[0].value,s),o=e[e.length-1].value;let l,c;for(l=i;l<=o;l=+n.add(l,1,s))c=r[l],c>=0&&(e[c].major=!0);return e}function Mg(t,e,r){const s=[],n={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],n[l]=o,s.push({value:l,major:!1});return i===0||!r?s:o3(t,s,n,r)}class Qa extends Mi{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const s=e.time||(e.time={}),n=this._adapter=new Ev._date(e.adapters.date);n.init(r),va(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:Eg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,s=e.time.unit||"day";let{min:n,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(n=Math.min(n,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),n=cr(n)&&!isNaN(n)?n:+r.startOf(Date.now(),s),i=cr(i)&&!isNaN(i)?i:+r.endOf(Date.now(),s)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],s=e[e.length-1]),{min:r,max:s}}buildTicks(){const e=this.options,r=e.time,s=e.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,o=this.max,l=MN(n,i,o);return this._unit=r.unit||(s.autoSkip?Dg(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):i3(this,l.length,r.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:a3(this._unit),this.initOffsets(n),e.reverse&&l.reverse(),Mg(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,s=0,n,i;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?r=1-n:r=(this.getDecimalForValue(e[1])-n)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;r=wt(r,0,o),s=wt(s,0,o),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){const e=this._adapter,r=this.min,s=this.max,n=this.options,i=n.time,o=i.unit||Dg(i.minUnit,r,s,this._getLabelCapacity(r)),l=fe(n.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=Ya(c)||c===!0,u={};let h=r,f,p;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":o),e.diff(s,r,o)>1e5*l)throw new Error(r+" and "+s+" are too far apart with stepSize of "+l+" "+o);const v=n.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<s;f=+e.add(f,l,o),p++)Pg(u,f,v);return(f===s||n.bounds==="ticks"||p===1)&&Pg(u,f,v),Object.keys(u).sort(Cg).map(g=>+g)}getLabelForValue(e){const r=this._adapter,s=this.options.time;return s.tooltipFormat?r.format(e,s.tooltipFormat):r.format(e,s.displayFormats.datetime)}format(e,r){const n=this.options.time.displayFormats,i=this._unit,o=r||n[i];return this._adapter.format(e,o)}_tickFormatFunction(e,r,s,n){const i=this.options,o=i.ticks.callback;if(o)return Ae(o,[e,r,s],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],f=s[r],p=d&&h&&f&&f.major;return this._adapter.format(e,n||(p?h:u))}generateTickLabels(e){let r,s,n;for(r=0,s=e.length;r<s;++r)n=e[r],n.label=this._tickFormatFunction(n.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+s)*r.factor)}getValueForPixel(e){const r=this._offsets,s=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,s=this.ctx.measureText(e).width,n=Zr(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(n),o=Math.sin(n),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*o,h:s*o+l*i}}_getLabelCapacity(e){const r=this.options.time,s=r.displayFormats,n=s[r.unit]||s.millisecond,i=this._tickFormatFunction(e,0,Mg(this,[e],this._majorUnit),n),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],r,s;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(r=0,s=n.length;r<s;++r)e=e.concat(n[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,s;if(e.length)return e;const n=this.getLabels();for(r=0,s=n.length;r<s;++r)e.push(Eg(this,n[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return dv(e.sort(Cg))}}H(Qa,"id","time"),H(Qa,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Qo(t,e,r){let s=0,n=t.length-1,i,o,l,c;r?(e>=t[s].pos&&e<=t[n].pos&&({lo:s,hi:n}=cn(t,"pos",e)),{pos:i,time:l}=t[s],{pos:o,time:c}=t[n]):(e>=t[s].time&&e<=t[n].time&&({lo:s,hi:n}=cn(t,"time",e)),{time:i,pos:l}=t[s],{time:o,pos:c}=t[n]);const d=o-i;return d?l+(c-l)*(e-i)/d:l}class Tg extends Qa{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=Qo(r,this.min),this._tableRange=Qo(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:s}=this,n=[],i=[];let o,l,c,d,u;for(o=0,l=e.length;o<l;++o)d=e[o],d>=r&&d<=s&&n.push(d);if(n.length<2)return[{time:r,pos:0},{time:s,pos:1}];for(o=0,l=n.length;o<l;++o)u=n[o+1],c=n[o-1],d=n[o],Math.round((u+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const e=this.min,r=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(r)||s.length===1)&&s.push(r),s.sort((n,i)=>n-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),s=this.getLabelTimestamps();return r.length&&s.length?e=this.normalize(r.concat(s)):e=r.length?r:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Qo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,s=this.getDecimalForPixel(e)/r.factor-r.end;return Qo(this._table,s*this._tableRange+this._minPos,!0)}}H(Tg,"id","timeseries"),H(Tg,"defaults",Qa.defaults);const Wv="label";function Og(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function l3(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function Vv(t,e){t.labels=e}function qv(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Wv;const s=[];t.datasets=e.map(n=>{const i=t.datasets.find(o=>o[r]===n[r]);return!i||!n.data||s.includes(i)?{...n}:(s.push(i),Object.assign(i,n),i)})}function c3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wv;const r={labels:[],datasets:[]};return Vv(r,t.labels),qv(r,t.datasets,e),r}function d3(t,e){const{height:r=150,width:s=300,redraw:n=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...f}=t,p=M.useRef(null),v=M.useRef(null),g=()=>{p.current&&(v.current=new Tc(p.current,{type:o,data:c3(l,i),options:c&&{...c},plugins:d}),Og(e,v.current))},j=()=>{Og(e,null),v.current&&(v.current.destroy(),v.current=null)};return M.useEffect(()=>{!n&&v.current&&c&&l3(v.current,c)},[n,c]),M.useEffect(()=>{!n&&v.current&&Vv(v.current.config.data,l.labels)},[n,l.labels]),M.useEffect(()=>{!n&&v.current&&l.datasets&&qv(v.current.config.data,l.datasets,i)},[n,l.datasets]),M.useEffect(()=>{v.current&&(n?(j(),setTimeout(g)):v.current.update(h))},[n,c,l.labels,l.datasets,h]),M.useEffect(()=>{v.current&&(j(),setTimeout(g))},[o]),M.useEffect(()=>(g(),()=>j()),[]),ch.createElement("canvas",{ref:p,role:"img",height:r,width:s,...f},u)}const u3=M.forwardRef(d3);function Cf(t,e){return Tc.register(e),M.forwardRef((r,s)=>ch.createElement(u3,{...r,ref:s,type:t}))}const Ag=Cf("line",pl),h3=Cf("bar",fl),f3=Cf("doughnut",ta);function oe(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Ie(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Ac(t,e){const r=oe(t);return isNaN(e)?Ie(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function Ef(t,e){const r=oe(t);if(isNaN(e))return Ie(t,NaN);if(!e)return r;const s=r.getDate(),n=Ie(t,r.getTime());n.setMonth(r.getMonth()+e+1,0);const i=n.getDate();return s>=i?n:(r.setFullYear(n.getFullYear(),n.getMonth(),s),r)}function Ic(t,e){const r=+oe(t);return Ie(t,r+e)}const Yv=6048e5,p3=864e5,ho=6e4,fo=36e5,m3=1e3;function g3(t,e){return Ic(t,e*fo)}let x3={};function Tn(){return x3}function zr(t,e){var l,c,d,u;const r=Tn(),s=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,n=oe(t),i=n.getDay(),o=(i<s?7:0)+i-s;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function Ni(t){return zr(t,{weekStartsOn:1})}function Gv(t){const e=oe(t),r=e.getFullYear(),s=Ie(t,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const n=Ni(s),i=Ie(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Ni(i);return e.getTime()>=n.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function th(t){const e=oe(t);return e.setHours(0,0,0,0),e}function ic(t){const e=oe(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Jv(t,e){const r=th(t),s=th(e),n=+r-ic(r),i=+s-ic(s);return Math.round((n-i)/p3)}function y3(t){const e=Gv(t),r=Ie(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Ni(r)}function v3(t,e){return Ic(t,e*ho)}function b3(t,e){const r=e*3;return Ef(t,r)}function w3(t,e){return Ic(t,e*1e3)}function k3(t,e){const r=e*7;return Ac(t,r)}function j3(t,e){return Ef(t,e*12)}function ja(t,e){const r=oe(t),s=oe(e),n=r.getTime()-s.getTime();return n<0?-1:n>0?1:n}function _3(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Kv(t){if(!_3(t)&&typeof t!="number")return!1;const e=oe(t);return!isNaN(Number(e))}function N3(t,e){const r=oe(t),s=oe(e),n=r.getFullYear()-s.getFullYear(),i=r.getMonth()-s.getMonth();return n*12+i}function S3(t,e){const r=oe(t),s=oe(e);return r.getFullYear()-s.getFullYear()}function Xv(t,e){const r=oe(t),s=oe(e),n=Ig(r,s),i=Math.abs(Jv(r,s));r.setDate(r.getDate()-n*i);const o=+(Ig(r,s)===-n),l=n*(i-o);return l===0?0:l}function Ig(t,e){const r=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}function po(t){return e=>{const s=(t?Math[t]:Math.trunc)(e);return s===0?0:s}}function Rc(t,e){return+oe(t)-+oe(e)}function C3(t,e,r){const s=Rc(t,e)/fo;return po(r==null?void 0:r.roundingMethod)(s)}function E3(t,e,r){const s=Rc(t,e)/ho;return po(r==null?void 0:r.roundingMethod)(s)}function Qv(t){const e=oe(t);return e.setHours(23,59,59,999),e}function Zv(t){const e=oe(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function D3(t){const e=oe(t);return+Qv(e)==+Zv(e)}function eb(t,e){const r=oe(t),s=oe(e),n=ja(r,s),i=Math.abs(N3(r,s));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-n*i);let l=ja(r,s)===-n;D3(oe(t))&&i===1&&ja(t,s)===1&&(l=!1),o=n*(i-Number(l))}return o===0?0:o}function P3(t,e,r){const s=eb(t,e)/3;return po(r==null?void 0:r.roundingMethod)(s)}function M3(t,e,r){const s=Rc(t,e)/1e3;return po(r==null?void 0:r.roundingMethod)(s)}function T3(t,e,r){const s=Xv(t,e)/7;return po(r==null?void 0:r.roundingMethod)(s)}function O3(t,e){const r=oe(t),s=oe(e),n=ja(r,s),i=Math.abs(S3(r,s));r.setFullYear(1584),s.setFullYear(1584);const o=ja(r,s)===-n,l=n*(i-+o);return l===0?0:l}function A3(t){const e=oe(t);return e.setSeconds(0,0),e}function I3(t){const e=oe(t),r=e.getMonth(),s=r-r%3;return e.setMonth(s,1),e.setHours(0,0,0,0),e}function R3(t){const e=oe(t);return e.setDate(1),e.setHours(0,0,0,0),e}function L3(t){const e=oe(t),r=e.getFullYear();return e.setFullYear(r+1,0,0),e.setHours(23,59,59,999),e}function tb(t){const e=oe(t),r=Ie(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function z3(t){const e=oe(t);return e.setMinutes(59,59,999),e}function F3(t,e){var l,c;const r=Tn(),s=r.weekStartsOn??((c=(l=r.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??0,n=oe(t),i=n.getDay(),o=(i<s?-7:0)+6-(i-s);return n.setDate(n.getDate()+o),n.setHours(23,59,59,999),n}function $3(t){const e=oe(t);return e.setSeconds(59,999),e}function U3(t){const e=oe(t),r=e.getMonth(),s=r-r%3+3;return e.setMonth(s,0),e.setHours(23,59,59,999),e}function B3(t){const e=oe(t);return e.setMilliseconds(999),e}const H3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},W3=(t,e,r)=>{let s;const n=H3[t];return typeof n=="string"?s=n:e===1?s=n.one:s=n.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Pd(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const V3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},q3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Y3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},G3={date:Pd({formats:V3,defaultWidth:"full"}),time:Pd({formats:q3,defaultWidth:"full"}),dateTime:Pd({formats:Y3,defaultWidth:"full"})},J3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},K3=(t,e,r,s)=>J3[t];function qi(t){return(e,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let n;if(s==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;n=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;n=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return n[i]}}const X3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Q3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Z3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},eE={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sE=(t,e)=>{const r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},nE={ordinalNumber:sE,era:qi({values:X3,defaultWidth:"wide"}),quarter:qi({values:Q3,defaultWidth:"wide",argumentCallback:t=>t-1}),month:qi({values:Z3,defaultWidth:"wide"}),day:qi({values:eE,defaultWidth:"wide"}),dayPeriod:qi({values:tE,defaultWidth:"wide",formattingValues:rE,defaultFormattingWidth:"wide"})};function Yi(t){return(e,r={})=>{const s=r.width,n=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],i=e.match(n);if(!i)return null;const o=i[0],l=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?aE(l,h=>h.test(o)):iE(l,h=>h.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=e.slice(o.length);return{value:d,rest:u}}}function iE(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function aE(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function oE(t){return(e,r={})=>{const s=e.match(t.matchPattern);if(!s)return null;const n=s[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(n.length);return{value:o,rest:l}}}const lE=/^(\d+)(th|st|nd|rd)?/i,cE=/\d+/i,dE={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uE={any:[/^b/i,/^(a|c)/i]},hE={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fE={any:[/1/i,/2/i,/3/i,/4/i]},pE={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mE={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gE={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xE={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yE={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vE={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bE={ordinalNumber:oE({matchPattern:lE,parsePattern:cE,valueCallback:t=>parseInt(t,10)}),era:Yi({matchPatterns:dE,defaultMatchWidth:"wide",parsePatterns:uE,defaultParseWidth:"any"}),quarter:Yi({matchPatterns:hE,defaultMatchWidth:"wide",parsePatterns:fE,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Yi({matchPatterns:pE,defaultMatchWidth:"wide",parsePatterns:mE,defaultParseWidth:"any"}),day:Yi({matchPatterns:gE,defaultMatchWidth:"wide",parsePatterns:xE,defaultParseWidth:"any"}),dayPeriod:Yi({matchPatterns:yE,defaultMatchWidth:"any",parsePatterns:vE,defaultParseWidth:"any"})},rb={code:"en-US",formatDistance:W3,formatLong:G3,formatRelative:K3,localize:nE,match:bE,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wE(t){const e=oe(t);return Jv(e,tb(e))+1}function sb(t){const e=oe(t),r=+Ni(e)-+y3(e);return Math.round(r/Yv)+1}function Df(t,e){var u,h,f,p;const r=oe(t),s=r.getFullYear(),n=Tn(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=Ie(t,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const l=zr(o,e),c=Ie(t,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const d=zr(c,e);return r.getTime()>=l.getTime()?s+1:r.getTime()>=d.getTime()?s:s-1}function kE(t,e){var l,c,d,u;const r=Tn(),s=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,n=Df(t,e),i=Ie(t,0);return i.setFullYear(n,0,s),i.setHours(0,0,0,0),zr(i,e)}function nb(t,e){const r=oe(t),s=+zr(r,e)-+kE(r,e);return Math.round(s/Yv)+1}function we(t,e){const r=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return r+s}const hs={y(t,e){const r=t.getFullYear(),s=r>0?r:1-r;return we(e==="yy"?s%100:s,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):we(r+1,2)},d(t,e){return we(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return we(t.getHours()%12||12,e.length)},H(t,e){return we(t.getHours(),e.length)},m(t,e){return we(t.getMinutes(),e.length)},s(t,e){return we(t.getSeconds(),e.length)},S(t,e){const r=e.length,s=t.getMilliseconds(),n=Math.trunc(s*Math.pow(10,r-3));return we(n,e.length)}},Hn={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Rg={G:function(t,e,r){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const s=t.getFullYear(),n=s>0?s:1-s;return r.ordinalNumber(n,{unit:"year"})}return hs.y(t,e)},Y:function(t,e,r,s){const n=Df(t,s),i=n>0?n:1-n;if(e==="YY"){const o=i%100;return we(o,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):we(i,e.length)},R:function(t,e){const r=Gv(t);return we(r,e.length)},u:function(t,e){const r=t.getFullYear();return we(r,e.length)},Q:function(t,e,r){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return we(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,r){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return we(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,r){const s=t.getMonth();switch(e){case"M":case"MM":return hs.M(t,e);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,r){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return we(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,r,s){const n=nb(t,s);return e==="wo"?r.ordinalNumber(n,{unit:"week"}):we(n,e.length)},I:function(t,e,r){const s=sb(t);return e==="Io"?r.ordinalNumber(s,{unit:"week"}):we(s,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):hs.d(t,e)},D:function(t,e,r){const s=wE(t);return e==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):we(s,e.length)},E:function(t,e,r){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,r,s){const n=t.getDay(),i=(n-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return we(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(t,e,r,s){const n=t.getDay(),i=(n-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return we(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(t,e,r){const s=t.getDay(),n=s===0?7:s;switch(e){case"i":return String(n);case"ii":return we(n,e.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,r){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,e,r){const s=t.getHours();let n;switch(s===12?n=Hn.noon:s===0?n=Hn.midnight:n=s/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,e,r){const s=t.getHours();let n;switch(s>=17?n=Hn.evening:s>=12?n=Hn.afternoon:s>=4?n=Hn.morning:n=Hn.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return hs.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):hs.H(t,e)},K:function(t,e,r){const s=t.getHours()%12;return e==="Ko"?r.ordinalNumber(s,{unit:"hour"}):we(s,e.length)},k:function(t,e,r){let s=t.getHours();return s===0&&(s=24),e==="ko"?r.ordinalNumber(s,{unit:"hour"}):we(s,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):hs.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):hs.s(t,e)},S:function(t,e){return hs.S(t,e)},X:function(t,e,r){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return zg(s);case"XXXX":case"XX":return tn(s);case"XXXXX":case"XXX":default:return tn(s,":")}},x:function(t,e,r){const s=t.getTimezoneOffset();switch(e){case"x":return zg(s);case"xxxx":case"xx":return tn(s);case"xxxxx":case"xxx":default:return tn(s,":")}},O:function(t,e,r){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Lg(s,":");case"OOOO":default:return"GMT"+tn(s,":")}},z:function(t,e,r){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Lg(s,":");case"zzzz":default:return"GMT"+tn(s,":")}},t:function(t,e,r){const s=Math.trunc(t.getTime()/1e3);return we(s,e.length)},T:function(t,e,r){const s=t.getTime();return we(s,e.length)}};function Lg(t,e=""){const r=t>0?"-":"+",s=Math.abs(t),n=Math.trunc(s/60),i=s%60;return i===0?r+String(n):r+String(n)+e+we(i,2)}function zg(t,e){return t%60===0?(t>0?"-":"+")+we(Math.abs(t)/60,2):tn(t,e)}function tn(t,e=""){const r=t>0?"-":"+",s=Math.abs(t),n=we(Math.trunc(s/60),2),i=we(s%60,2);return r+n+e+i}const Fg=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ib=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},jE=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],s=r[1],n=r[2];if(!n)return Fg(t,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Fg(s,e)).replace("{{time}}",ib(n,e))},rh={p:ib,P:jE},_E=/^D+$/,NE=/^Y+$/,SE=["D","DD","YY","YYYY"];function ab(t){return _E.test(t)}function ob(t){return NE.test(t)}function sh(t,e,r){const s=CE(t,e,r);if(console.warn(s),SE.includes(t))throw new RangeError(s)}function CE(t,e,r){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const EE=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,DE=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,PE=/^'([^]*?)'?$/,ME=/''/g,TE=/[a-zA-Z]/;function OE(t,e,r){var u,h,f,p,v,g,j,y;const s=Tn(),n=(r==null?void 0:r.locale)??s.locale??rb,i=(r==null?void 0:r.firstWeekContainsDate)??((h=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(f=s.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((g=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:g.weekStartsOn)??s.weekStartsOn??((y=(j=s.locale)==null?void 0:j.options)==null?void 0:y.weekStartsOn)??0,l=oe(t);if(!Kv(l))throw new RangeError("Invalid time value");let c=e.match(DE).map(m=>{const x=m[0];if(x==="p"||x==="P"){const w=rh[x];return w(m,n.formatLong)}return m}).join("").match(EE).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const x=m[0];if(x==="'")return{isToken:!1,value:AE(m)};if(Rg[x])return{isToken:!0,value:m};if(x.match(TE))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:m}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return c.map(m=>{if(!m.isToken)return m.value;const x=m.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&ob(x)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&ab(x))&&sh(x,e,String(t));const w=Rg[x[0]];return w(l,x,n.localize,d)}).join("")}function AE(t){const e=t.match(PE);return e?e[1].replace(ME,"'"):t}function IE(){return Object.assign({},Tn())}function RE(t){let r=oe(t).getDay();return r===0&&(r=7),r}function LE(t,e){const r=e instanceof Date?Ie(e,0):new e(0);return r.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),r.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),r}const zE=10;class lb{constructor(){H(this,"subPriority",0)}validate(e,r){return!0}}class FE extends lb{constructor(e,r,s,n,i){super(),this.value=e,this.validateValue=r,this.setValue=s,this.priority=n,i&&(this.subPriority=i)}validate(e,r){return this.validateValue(e,this.value,r)}set(e,r,s){return this.setValue(e,r,this.value,s)}}class $E extends lb{constructor(){super(...arguments);H(this,"priority",zE);H(this,"subPriority",-1)}set(r,s){return s.timestampIsSet?r:Ie(r,LE(r,Date))}}class ve{run(e,r,s,n){const i=this.parse(e,r,s,n);return i?{setter:new FE(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,r,s){return!0}}class UE extends ve{constructor(){super(...arguments);H(this,"priority",140);H(this,"incompatibleTokens",["R","u","t","T"])}parse(r,s,n){switch(s){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"})||n.era(r,{width:"narrow"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})||n.era(r,{width:"abbreviated"})||n.era(r,{width:"narrow"})}}set(r,s,n){return s.era=n,r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}}const Je={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Tr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ke(t,e){return t&&{value:e(t.value),rest:t.rest}}function $e(t,e){const r=e.match(t);return r?{value:parseInt(r[0],10),rest:e.slice(r[0].length)}:null}function Or(t,e){const r=e.match(t);if(!r)return null;if(r[0]==="Z")return{value:0,rest:e.slice(1)};const s=r[1]==="+"?1:-1,n=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:s*(n*fo+i*ho+o*m3),rest:e.slice(r[0].length)}}function cb(t){return $e(Je.anyDigitsSigned,t)}function qe(t,e){switch(t){case 1:return $e(Je.singleDigit,e);case 2:return $e(Je.twoDigits,e);case 3:return $e(Je.threeDigits,e);case 4:return $e(Je.fourDigits,e);default:return $e(new RegExp("^\\d{1,"+t+"}"),e)}}function ac(t,e){switch(t){case 1:return $e(Je.singleDigitSigned,e);case 2:return $e(Je.twoDigitsSigned,e);case 3:return $e(Je.threeDigitsSigned,e);case 4:return $e(Je.fourDigitsSigned,e);default:return $e(new RegExp("^-?\\d{1,"+t+"}"),e)}}function Pf(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function db(t,e){const r=e>0,s=r?e:1-e;let n;if(s<=50)n=t||100;else{const i=s+50,o=Math.trunc(i/100)*100,l=t>=i%100;n=t+o-(l?100:0)}return r?n:1-n}function ub(t){return t%400===0||t%4===0&&t%100!==0}class BE extends ve{constructor(){super(...arguments);H(this,"priority",130);H(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,s,n){const i=o=>({year:o,isTwoDigitYear:s==="yy"});switch(s){case"y":return Ke(qe(4,r),i);case"yo":return Ke(n.ordinalNumber(r,{unit:"year"}),i);default:return Ke(qe(s.length,r),i)}}validate(r,s){return s.isTwoDigitYear||s.year>0}set(r,s,n){const i=r.getFullYear();if(n.isTwoDigitYear){const l=db(n.year,i);return r.setFullYear(l,0,1),r.setHours(0,0,0,0),r}const o=!("era"in s)||s.era===1?n.year:1-n.year;return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}}class HE extends ve{constructor(){super(...arguments);H(this,"priority",130);H(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,s,n){const i=o=>({year:o,isTwoDigitYear:s==="YY"});switch(s){case"Y":return Ke(qe(4,r),i);case"Yo":return Ke(n.ordinalNumber(r,{unit:"year"}),i);default:return Ke(qe(s.length,r),i)}}validate(r,s){return s.isTwoDigitYear||s.year>0}set(r,s,n,i){const o=Df(r,i);if(n.isTwoDigitYear){const c=db(n.year,o);return r.setFullYear(c,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),zr(r,i)}const l=!("era"in s)||s.era===1?n.year:1-n.year;return r.setFullYear(l,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),zr(r,i)}}class WE extends ve{constructor(){super(...arguments);H(this,"priority",130);H(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,s){return ac(s==="R"?4:s.length,r)}set(r,s,n){const i=Ie(r,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Ni(i)}}class VE extends ve{constructor(){super(...arguments);H(this,"priority",130);H(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,s){return ac(s==="u"?4:s.length,r)}set(r,s,n){return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}}class qE extends ve{constructor(){super(...arguments);H(this,"priority",120);H(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,s,n){switch(s){case"Q":case"QQ":return qe(s.length,r);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"})||n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})||n.quarter(r,{width:"abbreviated",context:"formatting"})||n.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,s){return s>=1&&s<=4}set(r,s,n){return r.setMonth((n-1)*3,1),r.setHours(0,0,0,0),r}}class YE extends ve{constructor(){super(...arguments);H(this,"priority",120);H(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,s,n){switch(s){case"q":case"qq":return qe(s.length,r);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"})||n.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})||n.quarter(r,{width:"abbreviated",context:"standalone"})||n.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,s){return s>=1&&s<=4}set(r,s,n){return r.setMonth((n-1)*3,1),r.setHours(0,0,0,0),r}}class GE extends ve{constructor(){super(...arguments);H(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);H(this,"priority",110)}parse(r,s,n){const i=o=>o-1;switch(s){case"M":return Ke($e(Je.month,r),i);case"MM":return Ke(qe(2,r),i);case"Mo":return Ke(n.ordinalNumber(r,{unit:"month"}),i);case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"})||n.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})||n.month(r,{width:"abbreviated",context:"formatting"})||n.month(r,{width:"narrow",context:"formatting"})}}validate(r,s){return s>=0&&s<=11}set(r,s,n){return r.setMonth(n,1),r.setHours(0,0,0,0),r}}class JE extends ve{constructor(){super(...arguments);H(this,"priority",110);H(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,s,n){const i=o=>o-1;switch(s){case"L":return Ke($e(Je.month,r),i);case"LL":return Ke(qe(2,r),i);case"Lo":return Ke(n.ordinalNumber(r,{unit:"month"}),i);case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"})||n.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})||n.month(r,{width:"abbreviated",context:"standalone"})||n.month(r,{width:"narrow",context:"standalone"})}}validate(r,s){return s>=0&&s<=11}set(r,s,n){return r.setMonth(n,1),r.setHours(0,0,0,0),r}}function KE(t,e,r){const s=oe(t),n=nb(s,r)-e;return s.setDate(s.getDate()-n*7),s}class XE extends ve{constructor(){super(...arguments);H(this,"priority",100);H(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,s,n){switch(s){case"w":return $e(Je.week,r);case"wo":return n.ordinalNumber(r,{unit:"week"});default:return qe(s.length,r)}}validate(r,s){return s>=1&&s<=53}set(r,s,n,i){return zr(KE(r,n,i),i)}}function QE(t,e){const r=oe(t),s=sb(r)-e;return r.setDate(r.getDate()-s*7),r}class ZE extends ve{constructor(){super(...arguments);H(this,"priority",100);H(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,s,n){switch(s){case"I":return $e(Je.week,r);case"Io":return n.ordinalNumber(r,{unit:"week"});default:return qe(s.length,r)}}validate(r,s){return s>=1&&s<=53}set(r,s,n){return Ni(QE(r,n))}}const e5=[31,28,31,30,31,30,31,31,30,31,30,31],t5=[31,29,31,30,31,30,31,31,30,31,30,31];class r5 extends ve{constructor(){super(...arguments);H(this,"priority",90);H(this,"subPriority",1);H(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,s,n){switch(s){case"d":return $e(Je.date,r);case"do":return n.ordinalNumber(r,{unit:"date"});default:return qe(s.length,r)}}validate(r,s){const n=r.getFullYear(),i=ub(n),o=r.getMonth();return i?s>=1&&s<=t5[o]:s>=1&&s<=e5[o]}set(r,s,n){return r.setDate(n),r.setHours(0,0,0,0),r}}class s5 extends ve{constructor(){super(...arguments);H(this,"priority",90);H(this,"subpriority",1);H(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,s,n){switch(s){case"D":case"DD":return $e(Je.dayOfYear,r);case"Do":return n.ordinalNumber(r,{unit:"date"});default:return qe(s.length,r)}}validate(r,s){const n=r.getFullYear();return ub(n)?s>=1&&s<=366:s>=1&&s<=365}set(r,s,n){return r.setMonth(0,n),r.setHours(0,0,0,0),r}}function Mf(t,e,r){var h,f,p,v;const s=Tn(),n=(r==null?void 0:r.weekStartsOn)??((f=(h=r==null?void 0:r.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??s.weekStartsOn??((v=(p=s.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??0,i=oe(t),o=i.getDay(),c=(e%7+7)%7,d=7-n,u=e<0||e>6?e-(o+d)%7:(c+d)%7-(o+d)%7;return Ac(i,u)}class n5 extends ve{constructor(){super(...arguments);H(this,"priority",90);H(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,s,n){switch(s){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"})||n.day(r,{width:"short",context:"formatting"})||n.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"})||n.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})||n.day(r,{width:"abbreviated",context:"formatting"})||n.day(r,{width:"short",context:"formatting"})||n.day(r,{width:"narrow",context:"formatting"})}}validate(r,s){return s>=0&&s<=6}set(r,s,n,i){return r=Mf(r,n,i),r.setHours(0,0,0,0),r}}class i5 extends ve{constructor(){super(...arguments);H(this,"priority",90);H(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,s,n,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(s){case"e":case"ee":return Ke(qe(s.length,r),o);case"eo":return Ke(n.ordinalNumber(r,{unit:"day"}),o);case"eee":return n.day(r,{width:"abbreviated",context:"formatting"})||n.day(r,{width:"short",context:"formatting"})||n.day(r,{width:"narrow",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"})||n.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})||n.day(r,{width:"abbreviated",context:"formatting"})||n.day(r,{width:"short",context:"formatting"})||n.day(r,{width:"narrow",context:"formatting"})}}validate(r,s){return s>=0&&s<=6}set(r,s,n,i){return r=Mf(r,n,i),r.setHours(0,0,0,0),r}}class a5 extends ve{constructor(){super(...arguments);H(this,"priority",90);H(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,s,n,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(s){case"c":case"cc":return Ke(qe(s.length,r),o);case"co":return Ke(n.ordinalNumber(r,{unit:"day"}),o);case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"})||n.day(r,{width:"short",context:"standalone"})||n.day(r,{width:"narrow",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"})||n.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})||n.day(r,{width:"abbreviated",context:"standalone"})||n.day(r,{width:"short",context:"standalone"})||n.day(r,{width:"narrow",context:"standalone"})}}validate(r,s){return s>=0&&s<=6}set(r,s,n,i){return r=Mf(r,n,i),r.setHours(0,0,0,0),r}}function o5(t,e){const r=oe(t),s=RE(r),n=e-s;return Ac(r,n)}class l5 extends ve{constructor(){super(...arguments);H(this,"priority",90);H(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,s,n){const i=o=>o===0?7:o;switch(s){case"i":case"ii":return qe(s.length,r);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return Ke(n.day(r,{width:"abbreviated",context:"formatting"})||n.day(r,{width:"short",context:"formatting"})||n.day(r,{width:"narrow",context:"formatting"}),i);case"iiiii":return Ke(n.day(r,{width:"narrow",context:"formatting"}),i);case"iiiiii":return Ke(n.day(r,{width:"short",context:"formatting"})||n.day(r,{width:"narrow",context:"formatting"}),i);case"iiii":default:return Ke(n.day(r,{width:"wide",context:"formatting"})||n.day(r,{width:"abbreviated",context:"formatting"})||n.day(r,{width:"short",context:"formatting"})||n.day(r,{width:"narrow",context:"formatting"}),i)}}validate(r,s){return s>=1&&s<=7}set(r,s,n){return r=o5(r,n),r.setHours(0,0,0,0),r}}class c5 extends ve{constructor(){super(...arguments);H(this,"priority",80);H(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,s,n){switch(s){case"a":case"aa":case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"})||n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})||n.dayPeriod(r,{width:"abbreviated",context:"formatting"})||n.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,s,n){return r.setHours(Pf(n),0,0,0),r}}class d5 extends ve{constructor(){super(...arguments);H(this,"priority",80);H(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,s,n){switch(s){case"b":case"bb":case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"})||n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})||n.dayPeriod(r,{width:"abbreviated",context:"formatting"})||n.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,s,n){return r.setHours(Pf(n),0,0,0),r}}class u5 extends ve{constructor(){super(...arguments);H(this,"priority",80);H(this,"incompatibleTokens",["a","b","t","T"])}parse(r,s,n){switch(s){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"})||n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})||n.dayPeriod(r,{width:"abbreviated",context:"formatting"})||n.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,s,n){return r.setHours(Pf(n),0,0,0),r}}class h5 extends ve{constructor(){super(...arguments);H(this,"priority",70);H(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,s,n){switch(s){case"h":return $e(Je.hour12h,r);case"ho":return n.ordinalNumber(r,{unit:"hour"});default:return qe(s.length,r)}}validate(r,s){return s>=1&&s<=12}set(r,s,n){const i=r.getHours()>=12;return i&&n<12?r.setHours(n+12,0,0,0):!i&&n===12?r.setHours(0,0,0,0):r.setHours(n,0,0,0),r}}class f5 extends ve{constructor(){super(...arguments);H(this,"priority",70);H(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,s,n){switch(s){case"H":return $e(Je.hour23h,r);case"Ho":return n.ordinalNumber(r,{unit:"hour"});default:return qe(s.length,r)}}validate(r,s){return s>=0&&s<=23}set(r,s,n){return r.setHours(n,0,0,0),r}}class p5 extends ve{constructor(){super(...arguments);H(this,"priority",70);H(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,s,n){switch(s){case"K":return $e(Je.hour11h,r);case"Ko":return n.ordinalNumber(r,{unit:"hour"});default:return qe(s.length,r)}}validate(r,s){return s>=0&&s<=11}set(r,s,n){return r.getHours()>=12&&n<12?r.setHours(n+12,0,0,0):r.setHours(n,0,0,0),r}}class m5 extends ve{constructor(){super(...arguments);H(this,"priority",70);H(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,s,n){switch(s){case"k":return $e(Je.hour24h,r);case"ko":return n.ordinalNumber(r,{unit:"hour"});default:return qe(s.length,r)}}validate(r,s){return s>=1&&s<=24}set(r,s,n){const i=n<=24?n%24:n;return r.setHours(i,0,0,0),r}}class g5 extends ve{constructor(){super(...arguments);H(this,"priority",60);H(this,"incompatibleTokens",["t","T"])}parse(r,s,n){switch(s){case"m":return $e(Je.minute,r);case"mo":return n.ordinalNumber(r,{unit:"minute"});default:return qe(s.length,r)}}validate(r,s){return s>=0&&s<=59}set(r,s,n){return r.setMinutes(n,0,0),r}}class x5 extends ve{constructor(){super(...arguments);H(this,"priority",50);H(this,"incompatibleTokens",["t","T"])}parse(r,s,n){switch(s){case"s":return $e(Je.second,r);case"so":return n.ordinalNumber(r,{unit:"second"});default:return qe(s.length,r)}}validate(r,s){return s>=0&&s<=59}set(r,s,n){return r.setSeconds(n,0),r}}class y5 extends ve{constructor(){super(...arguments);H(this,"priority",30);H(this,"incompatibleTokens",["t","T"])}parse(r,s){const n=i=>Math.trunc(i*Math.pow(10,-s.length+3));return Ke(qe(s.length,r),n)}set(r,s,n){return r.setMilliseconds(n),r}}class v5 extends ve{constructor(){super(...arguments);H(this,"priority",10);H(this,"incompatibleTokens",["t","T","x"])}parse(r,s){switch(s){case"X":return Or(Tr.basicOptionalMinutes,r);case"XX":return Or(Tr.basic,r);case"XXXX":return Or(Tr.basicOptionalSeconds,r);case"XXXXX":return Or(Tr.extendedOptionalSeconds,r);case"XXX":default:return Or(Tr.extended,r)}}set(r,s,n){return s.timestampIsSet?r:Ie(r,r.getTime()-ic(r)-n)}}class b5 extends ve{constructor(){super(...arguments);H(this,"priority",10);H(this,"incompatibleTokens",["t","T","X"])}parse(r,s){switch(s){case"x":return Or(Tr.basicOptionalMinutes,r);case"xx":return Or(Tr.basic,r);case"xxxx":return Or(Tr.basicOptionalSeconds,r);case"xxxxx":return Or(Tr.extendedOptionalSeconds,r);case"xxx":default:return Or(Tr.extended,r)}}set(r,s,n){return s.timestampIsSet?r:Ie(r,r.getTime()-ic(r)-n)}}class w5 extends ve{constructor(){super(...arguments);H(this,"priority",40);H(this,"incompatibleTokens","*")}parse(r){return cb(r)}set(r,s,n){return[Ie(r,n*1e3),{timestampIsSet:!0}]}}class k5 extends ve{constructor(){super(...arguments);H(this,"priority",20);H(this,"incompatibleTokens","*")}parse(r){return cb(r)}set(r,s,n){return[Ie(r,n),{timestampIsSet:!0}]}}const j5={G:new UE,y:new BE,Y:new HE,R:new WE,u:new VE,Q:new qE,q:new YE,M:new GE,L:new JE,w:new XE,I:new ZE,d:new r5,D:new s5,E:new n5,e:new i5,c:new a5,i:new l5,a:new c5,b:new d5,B:new u5,h:new h5,H:new f5,K:new p5,k:new m5,m:new g5,s:new x5,S:new y5,X:new v5,x:new b5,t:new w5,T:new k5},_5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,N5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,S5=/^'([^]*?)'?$/,C5=/''/g,E5=/\S/,D5=/[a-zA-Z]/;function P5(t,e,r,s){var g,j,y,m,x,w,C,_;const n=IE(),i=(s==null?void 0:s.locale)??n.locale??rb,o=(s==null?void 0:s.firstWeekContainsDate)??((j=(g=s==null?void 0:s.locale)==null?void 0:g.options)==null?void 0:j.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(y=n.locale)==null?void 0:y.options)==null?void 0:m.firstWeekContainsDate)??1,l=(s==null?void 0:s.weekStartsOn)??((w=(x=s==null?void 0:s.locale)==null?void 0:x.options)==null?void 0:w.weekStartsOn)??n.weekStartsOn??((_=(C=n.locale)==null?void 0:C.options)==null?void 0:_.weekStartsOn)??0;if(e==="")return t===""?oe(r):Ie(r,NaN);const c={firstWeekContainsDate:o,weekStartsOn:l,locale:i},d=[new $E],u=e.match(N5).map(N=>{const b=N[0];if(b in rh){const k=rh[b];return k(N,i.formatLong)}return N}).join("").match(_5),h=[];for(let N of u){!(s!=null&&s.useAdditionalWeekYearTokens)&&ob(N)&&sh(N,e,t),!(s!=null&&s.useAdditionalDayOfYearTokens)&&ab(N)&&sh(N,e,t);const b=N[0],k=j5[b];if(k){const{incompatibleTokens:I}=k;if(Array.isArray(I)){const O=h.find($=>I.includes($.token)||$.token===b);if(O)throw new RangeError(`The format string mustn't contain \`${O.fullToken}\` and \`${N}\` at the same time`)}else if(k.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${N}\` and any other token at the same time`);h.push({token:b,fullToken:N});const T=k.run(t,N,i.match,c);if(!T)return Ie(r,NaN);d.push(T.setter),t=T.rest}else{if(b.match(D5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");if(N==="''"?N="'":b==="'"&&(N=M5(N)),t.indexOf(N)===0)t=t.slice(N.length);else return Ie(r,NaN)}}if(t.length>0&&E5.test(t))return Ie(r,NaN);const f=d.map(N=>N.priority).sort((N,b)=>b-N).filter((N,b,k)=>k.indexOf(N)===b).map(N=>d.filter(b=>b.priority===N).sort((b,k)=>k.subPriority-b.subPriority)).map(N=>N[0]);let p=oe(r);if(isNaN(p.getTime()))return Ie(r,NaN);const v={};for(const N of f){if(!N.validate(p,c))return Ie(r,NaN);const b=N.set(p,v,c);Array.isArray(b)?(p=b[0],Object.assign(v,b[1])):p=b}return Ie(r,p)}function M5(t){return t.match(S5)[1].replace(C5,"'")}function T5(t){const e=oe(t);return e.setMinutes(0,0,0),e}function O5(t){const e=oe(t);return e.setMilliseconds(0),e}function A5(t,e){const r=(e==null?void 0:e.additionalDigits)??2,s=z5(t);let n;if(s.date){const c=F5(s.date,r);n=$5(c.restDateString,c.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);const i=n.getTime();let o=0,l;if(s.time&&(o=U5(s.time),isNaN(o)))return new Date(NaN);if(s.timezone){if(l=B5(s.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+o),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(i+o+l)}const Zo={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},I5=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,R5=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,L5=/^([+-])(\d{2})(?::?(\d{2}))?$/;function z5(t){const e={},r=t.split(Zo.dateTimeDelimiter);let s;if(r.length>2)return e;if(/:/.test(r[0])?s=r[0]:(e.date=r[0],s=r[1],Zo.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Zo.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const n=Zo.timezone.exec(s);n?(e.time=s.replace(n[1],""),e.timezone=n[1]):e.time=s}return e}function F5(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(r);if(!s)return{year:NaN,restDateString:""};const n=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?n:i*100,restDateString:t.slice((s[1]||s[2]).length)}}function $5(t,e){if(e===null)return new Date(NaN);const r=t.match(I5);if(!r)return new Date(NaN);const s=!!r[4],n=Gi(r[1]),i=Gi(r[2])-1,o=Gi(r[3]),l=Gi(r[4]),c=Gi(r[5])-1;if(s)return Y5(e,l,c)?H5(e,l,c):new Date(NaN);{const d=new Date(0);return!V5(e,i,o)||!q5(e,n)?new Date(NaN):(d.setUTCFullYear(e,i,Math.max(n,o)),d)}}function Gi(t){return t?parseInt(t):1}function U5(t){const e=t.match(R5);if(!e)return NaN;const r=Md(e[1]),s=Md(e[2]),n=Md(e[3]);return G5(r,s,n)?r*fo+s*ho+n*1e3:NaN}function Md(t){return t&&parseFloat(t.replace(",","."))||0}function B5(t){if(t==="Z")return 0;const e=t.match(L5);if(!e)return 0;const r=e[1]==="+"?-1:1,s=parseInt(e[2]),n=e[3]&&parseInt(e[3])||0;return J5(s,n)?r*(s*fo+n*ho):NaN}function H5(t,e,r){const s=new Date(0);s.setUTCFullYear(t,0,4);const n=s.getUTCDay()||7,i=(e-1)*7+r+1-n;return s.setUTCDate(s.getUTCDate()+i),s}const W5=[31,null,31,30,31,30,31,31,30,31,30,31];function hb(t){return t%400===0||t%4===0&&t%100!==0}function V5(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(W5[e]||(hb(t)?29:28))}function q5(t,e){return e>=1&&e<=(hb(t)?366:365)}function Y5(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function G5(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function J5(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const K5={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};Ev._date.override({_id:"date-fns",formats:function(){return K5},parse:function(t,e){if(t===null||typeof t>"u")return null;const r=typeof t;return r==="number"||t instanceof Date?t=oe(t):r==="string"&&(typeof e=="string"?t=P5(t,e,new Date,this.options):t=A5(t,this.options)),Kv(t)?t.getTime():null},format:function(t,e){return OE(t,e,this.options)},add:function(t,e,r){switch(r){case"millisecond":return Ic(t,e);case"second":return w3(t,e);case"minute":return v3(t,e);case"hour":return g3(t,e);case"day":return Ac(t,e);case"week":return k3(t,e);case"month":return Ef(t,e);case"quarter":return b3(t,e);case"year":return j3(t,e);default:return t}},diff:function(t,e,r){switch(r){case"millisecond":return Rc(t,e);case"second":return M3(t,e);case"minute":return E3(t,e);case"hour":return C3(t,e);case"day":return Xv(t,e);case"week":return T3(t,e);case"month":return eb(t,e);case"quarter":return P3(t,e);case"year":return O3(t,e);default:return 0}},startOf:function(t,e,r){switch(e){case"second":return O5(t);case"minute":return A3(t);case"hour":return T5(t);case"day":return th(t);case"week":return zr(t);case"isoWeek":return zr(t,{weekStartsOn:+r});case"month":return R3(t);case"quarter":return I3(t);case"year":return tb(t);default:return t}},endOf:function(t,e){switch(e){case"second":return B3(t);case"minute":return $3(t);case"hour":return z3(t);case"day":return Qv(t);case"week":return F3(t);case"month":return Zv(t);case"quarter":return U3(t);case"year":return L3(t);default:return t}}});M.createContext(void 0);const fb=()=>{var r,s,n,i,o,l;const t=pt();return{user:{id:((r=t.user)==null?void 0:r.id)||"1",name:((s=t.user)==null?void 0:s.name)||"Guest User",email:((n=t.user)==null?void 0:n.email)||"guest@example.com",grade:((i=t.user)==null?void 0:i.grade)||"Guest",joinDate:((o=t.user)==null?void 0:o.join_date)||new Date().toISOString(),lastActive:((l=t.user)==null?void 0:l.last_active)||new Date().toISOString()},setUser:()=>{},hasAccess:t.hasAccess}};Tc.register(Zu,eh,xl,na,yl,VC,ZC,HC,sa,Qa);const X5=()=>{const{hasAccess:t}=fb(),{getSystemMetrics:e,getDownloadLogs:r,getActivityLogs:s,getUsers:n,loading:i}=Xt(),[o,l]=M.useState("7d"),[c,d]=M.useState(null),[u,h]=M.useState(null),[f,p]=M.useState(null),[v,g]=M.useState(null),[j,y]=M.useState([]),[m,x]=M.useState({totalDownloads:0,activeUsers:0,popularFile:"",avgDownloadsPerDay:0,networkUsage:"2.4 GB",bandwidth:"45.2 MB/s"}),[w,C]=M.useState({hourlyUsage:[],hourlyBandwidth:[],totalUsage:0,peakBandwidth:0,lastUpdated:new Date});M.useEffect(()=>{k(),_()},[o]);const _=()=>{try{const R=localStorage.getItem("prodomo_network_metrics");if(R)C(JSON.parse(R));else{const J=Array.from({length:24},(U,K)=>{const te=K;let ne=20;return te>=9&&te<=17?ne=60+Math.floor(Math.random()*40):te>=6&&te<9||te>17&&te<=22?ne=30+Math.floor(Math.random()*30):ne=10+Math.floor(Math.random()*20),ne}),P=J.map(U=>Math.max(5,Math.floor(U/3)+Math.floor(Math.random()*15))),L=J.reduce((U,K)=>U+K,0),B=Math.max(...P),G={hourlyUsage:J,hourlyBandwidth:P,totalUsage:L,peakBandwidth:B,lastUpdated:new Date};C(G),localStorage.setItem("prodomo_network_metrics",JSON.stringify(G))}}catch(R){console.error("Failed to initialize network metrics:",R)}},N=()=>{try{const R=new Date,J=R.getHours();if(R.getTime()-new Date(w.lastUpdated).getTime()<5*60*1e3)return;const L=[...w.hourlyUsage],B=[...w.hourlyBandwidth];let G=0;J>=9&&J<=17?G=2+Math.floor(Math.random()*8):J>=6&&J<9||J>17&&J<=22?G=1+Math.floor(Math.random()*4):G=Math.floor(Math.random()*2),L[J]+=G;const U=Math.max(0,Math.floor(G/2)+Math.floor(Math.random()*3));B[J]=Math.max(B[J],B[J]+U);const K=L.reduce((A,E)=>A+E,0),te=Math.max(...B),ne={hourlyUsage:L,hourlyBandwidth:B,totalUsage:K,peakBandwidth:te,lastUpdated:R};C(ne),localStorage.setItem("prodomo_network_metrics",JSON.stringify(ne)),b(L,B),x(A=>({...A,networkUsage:`${(K/1024).toFixed(1)} GB`,bandwidth:`${te.toFixed(1)} MB/s`}))}catch(R){console.error("Failed to update network metrics:",R)}},b=(R,J)=>{const P={labels:Array.from({length:24},(L,B)=>`${B}:00`),datasets:[{label:"Network Usage (MB)",data:R,borderColor:"rgb(139, 92, 246)",backgroundColor:"rgba(139, 92, 246, 0.1)",tension:.4,fill:!0},{label:"Bandwidth (MB/s)",data:J,borderColor:"rgb(245, 158, 11)",backgroundColor:"rgba(245, 158, 11, 0.1)",tension:.4,fill:!0}]};g(P)},k=async()=>{const R=o==="7d"?7:o==="30d"?30:90,[J,P,L,B]=await Promise.all([e(void 0,R),r(1e3),s(1e3),n()]),G=P.reduce((q,ee)=>{const ce=new Date(ee.created_at).toDateString();return q[ce]=(q[ce]||0)+1,q},{}),U={labels:Object.keys(G).slice(-R),datasets:[{label:"Downloads",data:Object.values(G).slice(-R),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},K=L.reduce((q,ee)=>{const ce=new Date(ee.created_at).getHours();return q[ce]=(q[ce]||0)+1,q},{}),te={labels:Array.from({length:24},(q,ee)=>`${ee}:00`),datasets:[{label:"User Activity",data:Array.from({length:24},(q,ee)=>K[ee]||0),backgroundColor:"rgba(16, 185, 129, 0.8)",borderColor:"rgb(16, 185, 129)",borderWidth:1}]},ne=P.reduce((q,ee)=>{var Te;const ce=((Te=ee.file_name.split(".").pop())==null?void 0:Te.toLowerCase())||"unknown";return q[ce]=(q[ce]||0)+1,q},{}),A={labels:Object.keys(ne),datasets:[{data:Object.values(ne),backgroundColor:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#F97316"],borderWidth:0}]};N();const E=L.slice(0,10).map(q=>{const ee=B.find(ce=>ce.id===q.user_id);return{...q,user_grade:ee==null?void 0:ee.grade}}),D=P.length,F=new Set(P.map(q=>q.user_id)).size,z=P.reduce((q,ee)=>(q[ee.file_name]=(q[ee.file_name]||0)+1,q),{}),S=Object.keys(z).reduce((q,ee)=>z[q]>z[ee]?q:ee,""),W=Math.round(D/R);d(U),h(te),p(A),y(E),x({totalDownloads:D,activeUsers:F,popularFile:S,avgDownloadsPerDay:W,networkUsage:`${(w.totalUsage/1024).toFixed(1)} GB`,bandwidth:`${w.peakBandwidth.toFixed(1)} MB/s`})},I={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(156, 163, 175, 0.1)"}},x:{grid:{color:"rgba(156, 163, 175, 0.1)"}}}},T={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}},O=R=>R.type==="download"?a.jsx(ht,{size:16,className:"text-blue-500"}):R.action&&R.action.includes("login")||R.action&&R.action.includes("auth")?a.jsx(at,{size:16,className:"text-emerald-500"}):R.action&&R.action.includes("profile")||R.action&&R.action.includes("user")?a.jsx(wr,{size:16,className:"text-purple-500"}):a.jsx(at,{size:16,className:"text-gray-500"}),$=R=>{switch(R){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},V=R=>{const J=new Date(R),L=Math.floor((new Date().getTime()-J.getTime())/1e3);return L<60?`${L}s ago`:L<3600?`${Math.floor(L/60)}m ago`:L<86400?`${Math.floor(L/3600)}h ago`:`${Math.floor(L/86400)}d ago`};return t("Admin")?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Analytics Dashboard"}),a.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Monitor downloads, user activity, network usage, and system performance."})]}),a.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[a.jsxs("select",{value:o,onChange:R=>l(R.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"7d",children:"Last 7 days"}),a.jsx("option",{value:"30d",children:"Last 30 days"}),a.jsx("option",{value:"90d",children:"Last 90 days"})]}),a.jsxs("button",{onClick:k,disabled:i,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(no,{size:18,className:i?"animate-spin":""}),a.jsx("span",{children:"Refresh"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-6",children:[{title:"Total Downloads",value:m.totalDownloads.toLocaleString(),icon:ht,color:"bg-blue-500",change:"+12%",changeType:"positive"},{title:"Active Users",value:m.activeUsers.toLocaleString(),icon:wr,color:"bg-emerald-500",change:"+8%",changeType:"positive"},{title:"Network Usage",value:m.networkUsage,icon:Pu,color:"bg-purple-500",change:"+15%",changeType:"positive"},{title:"Bandwidth",value:m.bandwidth,icon:Qr,color:"bg-amber-500",change:"+5%",changeType:"positive"},{title:"Avg Downloads/Day",value:m.avgDownloadsPerDay.toLocaleString(),icon:Wl,color:"bg-indigo-500",change:"+22%",changeType:"positive"},{title:"Server Uptime",value:"99.9%",icon:bn,color:"bg-emerald-600",change:"+0.1%",changeType:"positive"}].map((R,J)=>{const P=R.icon;return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:R.title}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:R.value}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsx(Wl,{size:14,className:`${R.changeType==="positive"?"text-emerald-500":"text-red-500"} mr-1`}),a.jsx("span",{className:`text-sm font-medium ${R.changeType==="positive"?"text-emerald-600":"text-red-600"}`,children:R.change}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:R.title==="Total Files"?"":"vs last month"})]})]}),a.jsx("div",{className:`p-3 rounded-lg ${R.color} bg-opacity-10`,children:a.jsx(P,{className:`w-6 h-6 ${R.color.replace("bg-","text-")}`})})]})},J)})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Network Usage"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Pu,{className:"w-5 h-5 text-purple-500"}),a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",new Date(w.lastUpdated).toLocaleTimeString()]})]})]}),a.jsx("div",{className:"h-64",children:v&&a.jsx(Ag,{data:v,options:I})}),a.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[a.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Total Usage"}),a.jsxs("span",{className:"text-sm font-medium text-purple-800 dark:text-purple-200",children:[(w.totalUsage/1024).toFixed(1)," GB"]})]})}),a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Peak Bandwidth"}),a.jsxs("span",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:[w.peakBandwidth.toFixed(1)," MB/s"]})]})})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Downloads Over Time"}),a.jsx(ht,{className:"w-5 h-5 text-blue-500"})]}),a.jsx("div",{className:"h-64",children:c&&a.jsx(Ag,{data:c,options:I})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Activity by Hour"}),a.jsx(at,{className:"w-5 h-5 text-emerald-500"})]}),a.jsx("div",{className:"h-64",children:u&&a.jsx(h3,{data:u,options:I})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"File Types"}),a.jsx(ty,{className:"w-5 h-5 text-amber-500"})]}),a.jsx("div",{className:"h-64",children:f&&a.jsx(f3,{data:f,options:T})})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent User Activity"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Latest user actions and system events with user details"})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[j.map((R,J)=>a.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold text-sm",children:R.user_name.charAt(0)})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:R.user_name}),R.user_grade&&a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${$(R.user_grade)}`,children:R.user_grade})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[O(R),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:V(R.created_at)})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:R.action}),R.details&&a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:R.details})]})]},J)),j.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(at,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No recent activity"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"User activity will appear here as it happens."})]})]})})]})]}):a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(at,{className:"mx-auto h-12 w-12 text-amber-500"}),a.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access analytics."})]})})},Q5=({onViewProfile:t})=>{const{user:e,hasAccess:r}=pt(),{getUsers:s,updateUserGrade:n,blockUser:i,unblockUser:o,createUser:l,deleteUser:c,getUserPassword:d,loading:u,error:h,setError:f}=Xt(),{logUserCreation:p,logUserGradeUpdate:v,logUserBlock:g,logUserUnblock:j,logUserDelete:y}=Dn(),[m,x]=M.useState([]),[w,C]=M.useState(""),[_,N]=M.useState("all"),[b,k]=M.useState(null),[I,T]=M.useState(null),[O,$]=M.useState(null),[V,R]=M.useState(!1),[J,P]=M.useState(""),[L,B]=M.useState("30m"),[G,U]=M.useState(new Set),[K,te]=M.useState({name:"",email:"",password:"",grade:"V4"});M.useEffect(()=>{ne()},[]);const ne=async()=>{console.log("UserManagement: Loading users...");const le=(await s()).filter(De=>!De.is_guest);x(le),console.log("UserManagement: Loaded",le.length,"users")},A=async(Y,le)=>{console.log("UserManagement: Updating user grade:",Y,"to",le);const De=m.find(re=>re.id===Y);if(!De)return;const jr=De.grade;await n(Y,le)&&(await ne(),k(null),P(""),Z.gradeUpdated(De.name,le),await v(De.name,jr,le),console.log("UserManagement: Grade updated successfully"))},E=async(Y,le)=>{console.log("UserManagement: Blocking user:",Y,"for",le);const De=m.find(On=>On.id===Y);if(!De)return;await i(Y,le)&&(await ne(),T(null),Z.userBlocked(De.name),await g(De.name,le),console.log("UserManagement: User blocked successfully"))},D=async Y=>{console.log("UserManagement: Unblocking user:",Y);const le=m.find(jr=>jr.id===Y);if(!le)return;await o(Y)&&(await ne(),Z.userUnblocked(le.name),await j(le.name),console.log("UserManagement: User unblocked successfully"))},F=async Y=>{console.log("UserManagement: Deleting user:",Y);const le=m.find(jr=>jr.id===Y);if(!le)return;await c(Y)&&(await ne(),$(null),Z.warning(`User ${le.name} has been deleted`),await y(le.name),console.log("UserManagement: User deleted successfully"))},z=async()=>{console.log("UserManagement: Creating new user:",K.email);try{const Y=K.password||Math.random().toString(36).slice(-8)+Math.random().toString(36).slice(-8).toUpperCase()+"123!";await l({...K,password:Y})&&(await ne(),Z.success(`User ${K.name} created successfully`),await p(K.name,K.grade),R(!1),te({name:"",email:"",password:"",grade:"V4"}),console.log("UserManagement: User created successfully"))}catch(Y){console.error("UserManagement: Error creating user:",Y)}},S=Y=>{t&&t(Y)},W=Y=>{const le=new Set(G);le.has(Y)?le.delete(Y):le.add(Y),U(le)},q=async Y=>{const le=d(Y);if(le)try{await navigator.clipboard.writeText(le),Z.success("Password copied to clipboard")}catch(De){console.error("Failed to copy password:",De),Z.error("Failed to copy password")}},ee=m.filter(Y=>{const le=Y.name.toLowerCase().includes(w.toLowerCase())||Y.email.toLowerCase().includes(w.toLowerCase()),De=_==="all"||Y.grade===_;return le&&De&&!Y.is_guest}),ce=Y=>{switch(Y){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},Te=Y=>{switch(Y){case"Admin":return"Full system access";case"Support":return"Bug management access";case"V5":return"Advanced features";case"V4":return"Standard access";default:return"Basic access"}},lt=Y=>{switch(Y){case"Admin":return a.jsx(Ce,{size:16,className:"text-red-500"});case"Support":return a.jsx(As,{size:16,className:"text-amber-500"});case"V5":return a.jsx(Ce,{size:16,className:"text-purple-500"});case"V4":return a.jsx(Ce,{size:16,className:"text-blue-500"});default:return a.jsx(Ce,{size:16,className:"text-gray-500"})}},Dt=Y=>{switch(Y){case"30m":return"30 minutes";case"1d":return"1 day";case"7d":return"7 days";case"30d":return"30 days";default:return Y}},Pt=Y=>!Y.is_blocked||!Y.blocked_until?!1:new Date(Y.blocked_until)>new Date;return r("Admin")?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"User Management"}),a.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Manage user accounts, permissions, and access levels."})]}),a.jsxs("button",{onClick:()=>R(!0),className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(Rr,{size:18}),a.jsx("span",{children:"Create User"})]})]}),h&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Lt,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:h})]}),a.jsx("button",{onClick:()=>f(null),className:"text-red-400 hover:text-red-600 dark:hover:text-red-300",children:a.jsx(_e,{size:16})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(Sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search users...",value:w,onChange:Y=>C(Y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Nn,{className:"text-gray-400 w-5 h-5"}),a.jsxs("select",{value:_,onChange:Y=>N(Y.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Grades"}),a.jsx("option",{value:"V4",children:"V4"}),a.jsx("option",{value:"V5",children:"V5"}),a.jsx("option",{value:"Support",children:"Support"}),a.jsx("option",{value:"Admin",children:"Admin"})]})]})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Password"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Grade"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Downloads"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Last Active"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:ee.map(Y=>{const le=d(Y.id),De=G.has(Y.id);return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold",children:Y.name.charAt(0)})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.jsxs("button",{onClick:()=>S(Y.id),className:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:[Y.name,Y.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400",children:"(You)"})]})}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[a.jsx(ci,{size:12,className:"mr-1"}),Y.email]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg px-3 py-2",children:[a.jsx(r1,{size:14,className:"text-gray-400"}),a.jsx("span",{className:"text-sm font-mono text-gray-900 dark:text-white",children:le?De?le:"":"No password"})]}),le&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>W(Y.id),className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:De?"Hide password":"Show password",children:De?a.jsx(jc,{size:14}):a.jsx(Gt,{size:14})}),a.jsx("button",{onClick:()=>q(Y.id),className:"p-1 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Copy password",children:a.jsx(Jk,{size:14})})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:`flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full ${ce(Y.grade)}`,children:[lt(Y.grade),a.jsx("span",{children:Y.grade})]}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:Te(Y.grade)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Pt(Y)?a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(ln,{size:14,className:"text-red-500"}),a.jsx("span",{className:"text-sm text-red-600 dark:text-red-400",children:"Blocked"})]}):a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(dt,{size:14,className:"text-emerald-500"}),a.jsx("span",{className:"text-sm text-emerald-600 dark:text-emerald-400",children:"Active"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-900 dark:text-white",children:[a.jsx(at,{size:14,className:"mr-1 text-gray-400"}),Y.total_downloads||0]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(is,{size:14,className:"mr-1"}),new Date(Y.last_active).toLocaleDateString()]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>S(Y.id),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"View Profile",children:a.jsx(Gt,{size:16})}),Y.id!==(e==null?void 0:e.id)&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{k(Y),P(Y.grade)},className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"Edit Grade",children:a.jsx(nr,{size:16})}),Pt(Y)?a.jsx("button",{onClick:()=>D(Y.id),className:"p-2 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Unblock User",children:a.jsx(c1,{size:16})}):a.jsx("button",{onClick:()=>T(Y),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",title:"Block User",children:a.jsx(ln,{size:16})}),a.jsx("button",{onClick:()=>$(Y),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",title:"Delete User",children:a.jsx(Ut,{size:16})})]})]})})]},Y.id)})})]})}),ee.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(wr,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No users found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria."})]})]}),V&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>R(!1)}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Create New User"}),a.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(_e,{size:24})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),a.jsx("input",{type:"text",value:K.name,onChange:Y=>te({...K,name:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter full name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",value:K.email,onChange:Y=>te({...K,email:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password (optional)"}),a.jsx("input",{type:"password",value:K.password,onChange:Y=>te({...K,password:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Leave empty to auto-generate"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"If left empty, a secure password will be generated automatically"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Access Grade"}),a.jsxs("select",{value:K.grade,onChange:Y=>te({...K,grade:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"V4",children:"V4 - Standard access"}),a.jsx("option",{value:"V5",children:"V5 - Advanced features"}),a.jsx("option",{value:"Support",children:"Support - Bug management access"})]})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(dt,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"User Account Created"}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"The user account will be created with the specified credentials. The user can log in immediately with their email and password."})]})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:z,disabled:u||!K.name||!K.email,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[a.jsx(d1,{size:18}),a.jsx("span",{children:u?"Creating...":"Create User"})]})]})]})]})}),b&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>k(null)}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Edit User Grade"}),a.jsx("button",{onClick:()=>k(null),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(_e,{size:24})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold",children:b.name.charAt(0)})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:b.name}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:b.email})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Current Grade: ",a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ce(b.grade)}`,children:b.grade})]}),a.jsxs("select",{value:J,onChange:Y=>P(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"V4",children:"V4 - Standard access"}),a.jsx("option",{value:"V5",children:"V5 - Advanced features"}),a.jsx("option",{value:"Support",children:"Support - Bug management access"}),a.jsx("option",{value:"Admin",children:"Admin - Full system access"})]})]}),a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Lt,{className:"text-amber-600 dark:text-amber-400 w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Grade Change Warning"}),a.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:"Changing a user's grade will immediately affect their access permissions and available features."})]})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>k(null),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:()=>A(b.id,J),disabled:u||J===b.grade,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[a.jsx(dt,{size:18}),a.jsx("span",{children:u?"Updating...":"Update Grade"})]})]})]})]})}),I&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>T(null)}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Block User"}),a.jsx("button",{onClick:()=>T(null),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(_e,{size:24})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold",children:I.name.charAt(0)})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:I.name}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:I.email})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Block Duration"}),a.jsxs("select",{value:L,onChange:Y=>B(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"30m",children:"30 minutes"}),a.jsx("option",{value:"1d",children:"1 day"}),a.jsx("option",{value:"7d",children:"7 days"}),a.jsx("option",{value:"30d",children:"30 days"})]})]}),a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(ln,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Block User Warning"}),a.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:["This user will be blocked for ",Dt(L)," and won't be able to access the system until the block expires."]})]})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:()=>E(I.id,L),disabled:u,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[a.jsx(ln,{size:18}),a.jsx("span",{children:u?"Blocking...":"Block User"})]})]})]})]})}),O&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>$(null)}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Delete User"}),a.jsx("button",{onClick:()=>$(null),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(_e,{size:24})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold",children:O.name.charAt(0)})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:O.name}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:O.email})]})]}),a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Lt,{className:"text-red-600 dark:text-red-400 w-6 h-6 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Warning: This action cannot be undone"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"Deleting this user will permanently remove their account and all associated data including:"}),a.jsxs("ul",{className:"mt-2 text-sm text-red-700 dark:text-red-300 space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"User profile information"}),a.jsx("li",{children:"Download history"}),a.jsx("li",{children:"Activity logs"}),a.jsx("li",{children:"Bug reports"}),a.jsx("li",{children:"Authored content"})]})]})]})}),a.jsxs("div",{className:"pt-3",children:[a.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Please type ",a.jsx("span",{className:"font-medium",children:O.name})," to confirm deletion:"]}),a.jsx("input",{type:"text",className:"mt-2 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:`Type "${O.name}" to confirm`,id:"delete-confirmation"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>$(null),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:()=>{const Y=document.getElementById("delete-confirmation");Y&&Y.value===O.name?F(O.id):Z.error("Name confirmation does not match")},disabled:u,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[a.jsx(Ut,{size:18}),a.jsx("span",{children:u?"Deleting...":"Delete User"})]})]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-4",children:[{label:"Total Users",value:m.length,color:"bg-blue-500"},{label:"Admin Users",value:m.filter(Y=>Y.grade==="Admin").length,color:"bg-red-500"},{label:"Support Users",value:m.filter(Y=>Y.grade==="Support").length,color:"bg-amber-500"},{label:"V5 Users",value:m.filter(Y=>Y.grade==="V5").length,color:"bg-purple-500"},{label:"Blocked Users",value:m.filter(Y=>Pt(Y)).length,color:"bg-gray-500"}].map((Y,le)=>a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:Y.label}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Y.value})]}),a.jsx("div",{className:`p-2 rounded-lg ${Y.color} bg-opacity-10`,children:a.jsx(wr,{className:`w-5 h-5 ${Y.color.replace("bg-","text-")}`})})]})},le))})]}):a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Lt,{className:"mx-auto h-12 w-12 text-amber-500"}),a.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access user management."})]})})},Z5=()=>{const{hasAccess:t}=fb(),{getActivityLogs:e,getDownloadLogs:r,loading:s}=Xt(),[n,i]=M.useState([]),[o,l]=M.useState([]),[c,d]=M.useState(""),[u,h]=M.useState("all"),[f,p]=M.useState("7d");M.useEffect(()=>{v()},[f]);const v=async()=>{const m=f==="7d"?100:f==="30d"?500:1e3,[x,w]=await Promise.all([e(m),r(m)]);i(x),l(w)},g=m=>m.includes("download")?a.jsx(ht,{size:16,className:"text-blue-500"}):m.includes("login")||m.includes("auth")?a.jsx(Ce,{size:16,className:"text-emerald-500"}):m.includes("profile")||m.includes("user")?a.jsx(as,{size:16,className:"text-purple-500"}):m.includes("patch")||m.includes("note")?a.jsx(br,{size:16,className:"text-amber-500"}):a.jsx(at,{size:16,className:"text-gray-500"}),j=m=>{const x=new Date(m),C=Math.floor((new Date().getTime()-x.getTime())/1e3);return C<60?`${C}s ago`:C<3600?`${Math.floor(C/60)}m ago`:C<86400?`${Math.floor(C/3600)}h ago`:`${Math.floor(C/86400)}d ago`},y=()=>{let m=[];return(u==="all"||u==="activity")&&(m=[...m,...n.map(x=>({...x,type:"activity"}))]),(u==="all"||u==="downloads")&&(m=[...m,...o.map(x=>({...x,type:"download",action:`Downloaded ${x.file_name} v${x.file_version}`,details:`File: ${x.file_name}`}))]),m.sort((x,w)=>new Date(w.created_at).getTime()-new Date(x.created_at).getTime()),c&&(m=m.filter(x=>x.user_name.toLowerCase().includes(c.toLowerCase())||x.action.toLowerCase().includes(c.toLowerCase())||x.details&&x.details.toLowerCase().includes(c.toLowerCase()))),m};return t("Admin")?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Activity Logs"}),a.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Monitor user activities, downloads, and system events."})]}),a.jsxs("button",{onClick:v,disabled:s,className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(no,{size:18,className:s?"animate-spin":""}),a.jsx("span",{children:"Refresh"})]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(Sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search logs...",value:c,onChange:m=>d(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Nn,{className:"text-gray-400 w-5 h-5"}),a.jsxs("select",{value:u,onChange:m=>h(m.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Logs"}),a.jsx("option",{value:"activity",children:"Activity Only"}),a.jsx("option",{value:"downloads",children:"Downloads Only"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(is,{className:"text-gray-400 w-5 h-5"}),a.jsxs("select",{value:f,onChange:m=>p(m.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"7d",children:"Last 7 days"}),a.jsx("option",{value:"30d",children:"Last 30 days"}),a.jsx("option",{value:"90d",children:"Last 90 days"})]})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Activities"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.length})]}),a.jsx(at,{className:"w-8 h-8 text-blue-500"})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Downloads"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.length})]}),a.jsx(ht,{className:"w-8 h-8 text-emerald-500"})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Unique Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:new Set([...n.map(m=>m.user_id),...o.map(m=>m.user_id)]).size})]}),a.jsx(as,{className:"w-8 h-8 text-purple-500"})]})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Showing ",y().length," log entries"]})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:a.jsxs("div",{className:"p-6 space-y-4",children:[y().map((m,x)=>a.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:g(m.action)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m.user_name}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${m.type==="download"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400"}`,children:m.type}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:j(m.created_at)})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:m.action}),m.details&&a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:m.details}),a.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500 dark:text-gray-500",children:[a.jsxs("span",{children:["IP: ",m.ip_address||"Unknown"]}),a.jsx("span",{children:new Date(m.created_at).toLocaleString()})]})]})]},`${m.type}-${m.id}-${x}`)),y().length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Gt,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No logs found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria or date range."})]})]})})]})]}):a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Lt,{className:"mx-auto h-12 w-12 text-amber-500"}),a.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access activity logs."})]})})},eD=()=>{var F,z;const{user:t,hasAccess:e}=pt(),{createBugReport:r,getBugReports:s,updateBugReport:n,loading:i}=Xt(),{logSystemAction:o,logBugReportSubmit:l}=Dn(),[c,d]=M.useState({title:"",description:"",severity:"medium",category:"general",steps:[""],expected_behavior:"",actual_behavior:"",environment:{os:"FreeBSD",version:"V4"}}),[u,h]=M.useState([]),[f,p]=M.useState(!1),[v,g]=M.useState(!1),[j,y]=M.useState([]),[m,x]=M.useState(null),[w,C]=M.useState(!1),[_,N]=M.useState(""),[b,k]=M.useState(""),[I,T]=M.useState("all"),O=[{value:"low",label:"Low",color:"text-green-600 bg-green-100 dark:bg-green-900/20 dark:text-green-400",description:"Minor issue, workaround available"},{value:"medium",label:"Medium",color:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-400",description:"Moderate impact on functionality"},{value:"high",label:"High",color:"text-orange-600 bg-orange-100 dark:bg-orange-900/20 dark:text-orange-400",description:"Significant impact, needs attention"},{value:"critical",label:"Critical",color:"text-red-600 bg-red-100 dark:bg-red-900/20 dark:text-red-400",description:"System breaking, immediate fix required"}],$=[{value:"general",label:"General",icon:Gr},{value:"ui",label:"User Interface",icon:bn},{value:"performance",label:"Performance",icon:bn},{value:"security",label:"Security",icon:Lt},{value:"feature",label:"Feature Request",icon:dt}];M.useEffect(()=>{V()},[t]);const V=async()=>{if(t)try{const W=(await s()).filter(q=>q.reporter_id===t.id);y(W)}catch(S){console.error("Failed to load bug reports:",S),Z.error("Failed to load your bug reports")}},R=async S=>{if(S.preventDefault(),!!t)try{p(!0);const W={...c,reporter_id:t.id,reporter_name:t.name,steps:c.steps.filter(ee=>ee.trim()!==""),attachments:u.map(ee=>ee.name),status:"open",environment:{browser:"",os:c.environment.os,version:c.environment.version},comments:[]};await r(W)&&(Z.success("Bug report submitted successfully"),await l(c.title),await o(`Submitted bug report: ${c.title}`),d({title:"",description:"",severity:"medium",category:"general",steps:[""],expected_behavior:"",actual_behavior:"",environment:{os:"FreeBSD",version:"V4"}}),h([]),g(!1),await V())}catch(W){console.error("Failed to submit bug report:",W),Z.error("Failed to submit bug report")}finally{p(!1)}},J=async()=>{if(!(!m||!t||!_.trim()))try{const S={id:`comment_${Date.now()}`,author:t.name,author_grade:t.grade,content:_,created_at:new Date().toISOString()},W=[...m.comments||[],S];if(await n(m.id,{comments:W})){Z.success("Comment added successfully"),N(""),await V();const ce=(await s()).find(Te=>Te.id===m.id);ce&&x(ce)}}catch(S){console.error("Failed to add comment:",S),Z.error("Failed to add comment")}},P=()=>{d({...c,steps:[...c.steps,""]})},L=(S,W)=>{const q=[...c.steps];q[S]=W,d({...c,steps:q})},B=S=>{const W=c.steps.filter((q,ee)=>ee!==S);d({...c,steps:W})},G=S=>{const W=Array.from(S.target.files||[]);h([...u,...W])},U=S=>{h(u.filter((W,q)=>q!==S))},K=S=>{x(S),C(!0)},te=S=>{switch(S){case"low":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400";case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},ne=S=>{switch(S){case"open":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"in-progress":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"resolved":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400";case"closed":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},A=S=>{switch(S){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},E=S=>{const W=new Date(S),ee=Math.floor((new Date().getTime()-W.getTime())/1e3);return ee<60?`${ee}s ago`:ee<3600?`${Math.floor(ee/60)}m ago`:ee<86400?`${Math.floor(ee/3600)}h ago`:`${Math.floor(ee/86400)}d ago`},D=j.filter(S=>{const W=S.title.toLowerCase().includes(b.toLowerCase())||S.description.toLowerCase().includes(b.toLowerCase()),q=I==="all"||S.status===I;return W&&q});return e("V4")?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Bug Reports"}),a.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"View your submitted bug reports and submit new ones."})]}),a.jsx("div",{className:"mt-4 sm:mt-0",children:a.jsx("button",{onClick:()=>{g(!v),w&&C(!1)},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:v?a.jsxs(a.Fragment,{children:[a.jsx(_e,{size:18}),a.jsx("span",{children:"Cancel"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Rr,{size:18}),a.jsx("span",{children:"Submit New Bug"})]})})})]}),!v&&!w&&a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(Sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search bug reports...",value:b,onChange:S=>k(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Nn,{className:"text-gray-400 w-5 h-5"}),a.jsxs("select",{value:I,onChange:S=>T(S.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"open",children:"Open"}),a.jsx("option",{value:"in-progress",children:"In Progress"}),a.jsx("option",{value:"resolved",children:"Resolved"}),a.jsx("option",{value:"closed",children:"Closed"})]})]}),a.jsxs("button",{onClick:V,disabled:i,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(no,{size:18,className:i?"animate-spin":""}),a.jsx("span",{children:"Refresh"})]})]})]})}),v&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bug Report Details"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Please provide as much detail as possible to help us reproduce and fix the issue."})]}),a.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bug Title *"}),a.jsx("input",{type:"text",value:c.title,onChange:S=>d({...c,title:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Brief description of the bug",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Severity *"}),a.jsx("div",{className:"space-y-2",children:O.map(S=>a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"severity",value:S.value,checked:c.severity===S.value,onChange:W=>d({...c,severity:W.target.value}),className:"text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${S.color}`,children:S.label}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:S.description})]},S.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category *"}),a.jsx("div",{className:"space-y-2",children:$.map(S=>{const W=S.icon;return a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"category",value:S.value,checked:c.category===S.value,onChange:q=>d({...c,category:q.target.value}),className:"text-blue-600 focus:ring-blue-500"}),a.jsx(W,{size:16,className:"text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:S.label})]},S.value)})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description *"}),a.jsx("textarea",{value:c.description,onChange:S=>d({...c,description:S.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Detailed description of the bug...",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Steps to Reproduce"}),a.jsxs("div",{className:"space-y-2",children:[c.steps.map((S,W)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 w-8",children:[W+1,"."]}),a.jsx("input",{type:"text",value:S,onChange:q=>L(W,q.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe this step..."}),c.steps.length>1&&a.jsx("button",{type:"button",onClick:()=>B(W),className:"p-2 text-red-500 hover:text-red-700 dark:hover:text-red-400",children:a.jsx(_e,{size:16})})]},W)),a.jsx("button",{type:"button",onClick:P,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200",children:a.jsx("span",{children:"Add Step"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Expected Behavior"}),a.jsx("textarea",{value:c.expected_behavior,onChange:S=>d({...c,expected_behavior:S.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"What should happen?"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Actual Behavior"}),a.jsx("textarea",{value:c.actual_behavior,onChange:S=>d({...c,actual_behavior:S.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"What actually happens?"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Environment Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Operating System"}),a.jsx("select",{value:c.environment.os,onChange:S=>d({...c,environment:{...c.environment,os:S.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:a.jsx("option",{value:"FreeBSD",children:"FreeBSD"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Version"}),a.jsxs("select",{value:c.environment.version,onChange:S=>d({...c,environment:{...c.environment,version:S.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"V4",children:"V4"}),a.jsx("option",{value:"V5",children:"V5"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Attachments (Screenshots, logs, etc.)"}),a.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx(tf,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("label",{className:"cursor-pointer",children:[a.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900 dark:text-white",children:"Upload files"}),a.jsx("input",{type:"file",multiple:!0,accept:"image/*,.txt,.log,.pdf",onChange:G,className:"hidden"})]}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"PNG, JPG, TXT, LOG, PDF up to 10MB each"})]})]})}),u.length>0&&a.jsx("div",{className:"mt-4 space-y-2",children:u.map((S,W)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(br,{size:16,className:"text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:S.name}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",(S.size/1024).toFixed(1)," KB)"]})]}),a.jsx("button",{type:"button",onClick:()=>U(W),className:"text-red-500 hover:text-red-700 dark:hover:text-red-400",children:a.jsx(_e,{size:16})})]},W))})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>{d({title:"",description:"",severity:"medium",category:"general",steps:[""],expected_behavior:"",actual_behavior:"",environment:{os:"FreeBSD",version:"V4"}}),h([])},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Clear Form"}),a.jsxs("button",{type:"submit",disabled:f||!c.title||!c.description,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(Eu,{size:18}),a.jsx("span",{children:f?"Submitting...":"Submit Bug Report"})]})]})]})]}),w&&m&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>C(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:a.jsx(_e,{size:20})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Bug Report Details"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${te(m.severity)}`,children:m.severity}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ne(m.status)}`,children:m.status})]})]})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:m.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:m.description})]}),m.steps&&m.steps.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-2",children:"Steps to Reproduce"}),a.jsx("ol",{className:"list-decimal list-inside space-y-1",children:m.steps.map((S,W)=>a.jsx("li",{className:"text-gray-600 dark:text-gray-400",children:S},W))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.expected_behavior&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-2",children:"Expected Behavior"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:m.expected_behavior})]}),m.actual_behavior&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-2",children:"Actual Behavior"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:m.actual_behavior})]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-2",children:"Environment"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"OS:"}),a.jsx("p",{className:"text-gray-900 dark:text-white",children:((F=m.environment)==null?void 0:F.os)||"Not specified"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Version:"}),a.jsx("p",{className:"text-gray-900 dark:text-white",children:((z=m.environment)==null?void 0:z.version)||"Not specified"})]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[a.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(di,{size:18,className:"mr-2"}),"Comments"]}),a.jsx("div",{className:"space-y-4 mb-6",children:m.comments&&m.comments.length>0?m.comments.map((S,W)=>a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold text-xs",children:S.author.charAt(0)})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:S.author}),S.author_grade&&a.jsxs("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full flex items-center ${A(S.author_grade)}`,children:[a.jsx(Ce,{size:10,className:"mr-1"}),S.author_grade]})]})]}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:E(S.created_at)})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:S.content})]},W)):a.jsxs("div",{className:"text-center py-4",children:[a.jsx(di,{className:"mx-auto h-8 w-8 text-gray-400"}),a.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"No comments yet"})]})}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Add a Comment"}),a.jsx("textarea",{value:_,onChange:S=>N(S.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Type your comment here..."}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:J,disabled:!_.trim()||i,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(Eu,{size:16}),a.jsx("span",{children:i?"Sending...":"Send Comment"})]})})]})]})]})})]}),!v&&!w&&a.jsx("div",{className:"space-y-4",children:D.length>0?D.map(S=>a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>K(S),children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:S.title}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${te(S.severity)}`,children:S.severity}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ne(S.status)}`,children:S.status.replace("-"," ")})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(Wt,{size:14}),a.jsx("span",{children:E(S.created_at)})]})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 line-clamp-2 mb-3",children:S.description}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(di,{size:14}),a.jsxs("span",{children:[S.comments?S.comments.length:0," comments"]})]}),a.jsxs("button",{onClick:W=>{W.stopPropagation(),K(S)},className:"flex items-center space-x-1 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm",children:[a.jsx(Gt,{size:14}),a.jsx("span",{children:"View Details"})]})]})]})},S.id)):a.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx(Gr,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"No bug reports found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:b||I!=="all"?"Try adjusting your search criteria.":"You haven't submitted any bug reports yet."}),a.jsxs("button",{onClick:()=>g(!0),className:"mt-4 flex items-center space-x-2 mx-auto px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(Rr,{size:18}),a.jsx("span",{children:"Submit New Bug"})]})]})}),v&&a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(dt,{className:"text-blue-600 dark:text-blue-400 w-6 h-6 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Tips for Better Bug Reports"}),a.jsxs("ul",{className:"space-y-1 text-sm text-blue-800 dark:text-blue-200",children:[a.jsx("li",{children:" Be specific and descriptive in your title"}),a.jsx("li",{children:" Include step-by-step instructions to reproduce the issue"}),a.jsx("li",{children:" Attach screenshots or screen recordings when possible"}),a.jsx("li",{children:" Mention what you expected to happen vs. what actually happened"}),a.jsx("li",{children:" Specify which Prodomo version you're using (V4 or V5)"})]})]})]})})]}):a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Lt,{className:"mx-auto h-12 w-12 text-amber-500"}),a.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need V4+ access to report bugs."})]})})},tD=()=>{var G;const{user:t,hasAccess:e}=pt(),{getBugReports:r,updateBugReport:s,deleteBugReport:n,loading:i}=Xt(),{logSystemAction:o}=Dn();By();const[l,c]=M.useState([]),[d,u]=M.useState(""),[h,f]=M.useState("all"),[p,v]=M.useState("all"),[g,j]=M.useState(null),[y,m]=M.useState(!1),[x,w]=M.useState("");M.useEffect(()=>{C()},[]);const C=async()=>{const U=await r();c(U)},_=async(U,K)=>{const te=l.find(E=>E.id===U);if(!te)return;const ne=te.status;if(await s(U,{status:K})&&(await C(),Z.success(`Bug "${te.title}" marked as ${K}`),await o(`[ADMIN] Updated bug status: ${te.title} -> ${K}`,`Bug ID: ${U}`),(K==="in-progress"||K==="resolved")&&te.reporter_id!==(t==null?void 0:t.id))){console.log("Sending notification to reporter:",te.reporter_id,"for bug:",te.title),te.id,te.title,te.reporter_id,new Date().toISOString();const E=JSON.parse(localStorage.getItem(`prodomo_notifications_${te.reporter_id}`)||"[]");let D="",F="info";switch(K){case"in-progress":D=`Your bug report "${te.title}" is now being worked on by our team.`,F="info";break;case"resolved":D=`Great news! Your bug report "${te.title}" has been resolved.`,F="success";break;case"closed":D=`Your bug report "${te.title}" has been closed.`,F="info";break;default:D=`Your bug report "${te.title}" status changed from ${ne} to ${K}.`,F="info"}const z={id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:"Bug Report Update",message:D,type:F,read:!1,created_at:new Date().toISOString(),related_id:te.id,action_url:"/bug-report"},S=[z,...E].slice(0,50);localStorage.setItem(`prodomo_notifications_${te.reporter_id}`,JSON.stringify(S)),console.log("Notification stored for user:",te.reporter_id,z)}},N=async()=>{if(!(!g||!t||!x.trim()))try{const U={id:`comment_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,author:t.name,author_grade:t.grade,content:x.trim(),created_at:new Date().toISOString()},K=[...g.comments||[],U];if(await s(g.id,{comments:K})){await C(),w("");const A=(await r()).find(E=>E.id===g.id);if(A&&j(A),Z.success("Comment added successfully"),await o("Added comment to bug report",`Bug ID: ${g.id}`),(e("Admin")||t.grade==="Support")&&g.reporter_id!==t.id){const E=JSON.parse(localStorage.getItem(`prodomo_notifications_${g.reporter_id}`)||"[]"),F=[{id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:"New Comment on Your Bug Report",message:`${t.name} commented on your bug report "${g.title}"`,type:"info",read:!1,created_at:new Date().toISOString(),related_id:g.id,action_url:"/bug-report"},...E].slice(0,50);localStorage.setItem(`prodomo_notifications_${g.reporter_id}`,JSON.stringify(F))}}}catch(U){console.error("Failed to add comment:",U),Z.error("Failed to add comment")}},b=async U=>{l.find(te=>te.id===U)&&O(U)},k=async U=>{const K=l.find(ne=>ne.id===U);if(!K)return;await n(U)?(await o(`[ADMIN] Deleted bug report: ${K.title}`,`Bug ID: ${U}`),await C(),Z.warning(`Bug report for "${K.title}" deleted`)):Z.error("Failed to delete bug report"),O(null)},I=()=>{O(null)},[T,O]=M.useState(null),$=U=>{switch(U){case"low":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400";case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},V=U=>{switch(U){case"open":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"in-progress":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"resolved":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400";case"closed":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},R=U=>{switch(U){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Support":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400";case"V5":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"V4":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},J=U=>{switch(U){case"open":return a.jsx(Gr,{size:16});case"in-progress":return a.jsx(Wt,{size:16});case"resolved":return a.jsx(dt,{size:16});case"closed":return a.jsx(_e,{size:16});default:return a.jsx(Gr,{size:16})}},P=l.filter(U=>{const K=U.title.toLowerCase().includes(d.toLowerCase())||U.description.toLowerCase().includes(d.toLowerCase())||U.reporter_name.toLowerCase().includes(d.toLowerCase()),te=h==="all"||U.status===h,ne=p==="all"||U.severity===p;return K&&te&&ne}),L={open:l.filter(U=>U.status==="open").length,"in-progress":l.filter(U=>U.status==="in-progress").length,resolved:l.filter(U=>U.status==="resolved").length,closed:l.filter(U=>U.status==="closed").length},B=U=>new Date(U).toLocaleString();return!e("Admin")&&(t==null?void 0:t.grade)!=="Support"?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Xr,{className:"mx-auto h-12 w-12 text-amber-500"}),a.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin or Support privileges to manage bug reports."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Bug Management"}),a.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Review, manage, and resolve bug reports from users."})]}),a.jsxs("button",{onClick:C,disabled:i,className:"mt-4 sm:mt-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(no,{size:18,className:i?"animate-spin":""}),a.jsx("span",{children:"Refresh"})]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-6",children:[{label:"Open",value:L.open,color:"bg-blue-500",icon:Gr},{label:"In Progress",value:L["in-progress"],color:"bg-purple-500",icon:Wt},{label:"Resolved",value:L.resolved,color:"bg-emerald-500",icon:dt},{label:"Closed",value:L.closed,color:"bg-gray-500",icon:_e}].map((U,K)=>{const te=U.icon;return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:U.label}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:U.value})]}),a.jsx("div",{className:`p-3 rounded-lg ${U.color} bg-opacity-10`,children:a.jsx(te,{className:`w-6 h-6 ${U.color.replace("bg-","text-")}`})})]})},K)})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(Sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search bug reports...",value:d,onChange:U=>u(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Nn,{className:"text-gray-400 w-5 h-5"}),a.jsxs("select",{value:h,onChange:U=>f(U.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"open",children:"Open"}),a.jsx("option",{value:"in-progress",children:"In Progress"}),a.jsx("option",{value:"resolved",children:"Resolved"}),a.jsx("option",{value:"closed",children:"Closed"})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("select",{value:p,onChange:U=>v(U.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Severity"}),a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"critical",children:"Critical"})]})})]})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Bug Report"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Severity"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Reporter"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Comments"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:P.map(U=>{var K;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:U.title}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[U.description.substring(0,100),"..."]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[a.jsx(oy,{size:12,className:"text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:U.category})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${$(U.severity)}`,children:U.severity})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("span",{className:`flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full ${V(U.status)}`,children:[J(U.status),a.jsx("span",{className:"capitalize",children:U.status.replace("-"," ")})]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(as,{size:14,className:"text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:U.reporter_name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(is,{size:14,className:"text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(U.created_at).toLocaleDateString()})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(di,{size:14,className:"text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:((K=U.comments)==null?void 0:K.length)||0})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>{j(U),m(!0)},className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"View Details",children:a.jsx(Gt,{size:16})}),U.status!=="in-progress"&&a.jsx("button",{onClick:()=>_(U.id,"in-progress"),className:"p-2 text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors duration-200",title:"Mark as In Progress",children:a.jsx(Wt,{size:16})}),U.status!=="resolved"&&a.jsx("button",{onClick:()=>_(U.id,"resolved"),className:"p-2 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Mark as Resolved",children:a.jsx(dt,{size:16})}),e("Admin")&&a.jsx("button",{onClick:()=>b(U.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",title:"Delete",children:a.jsx(Ut,{size:16})})]})})]},U.id)})})]})}),P.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Gr,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No bug reports found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria."})]})]}),y&&g&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>m(!1)}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Gr,{className:"w-6 h-6 text-red-500"}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:g.title}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${$(g.severity)}`,children:g.severity}),a.jsxs("span",{className:`flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full ${V(g.status)}`,children:[J(g.status),a.jsx("span",{className:"capitalize",children:g.status.replace("-"," ")})]})]}),a.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(_e,{size:24})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Description"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:g.description})]}),g.steps.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Steps to Reproduce"}),a.jsx("ol",{className:"list-decimal list-inside space-y-2",children:g.steps.map((U,K)=>a.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:U},K))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.expected_behavior&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Expected Behavior"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:g.expected_behavior})]}),g.actual_behavior&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Actual Behavior"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:g.actual_behavior})]})]}),a.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(di,{className:"mr-2",size:18}),"Comments (",((G=g.comments)==null?void 0:G.length)||0,")"]}),a.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto mb-4",children:g.comments&&g.comments.length>0?g.comments.map((U,K)=>a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold text-xs",children:U.author.charAt(0)})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:U.author}),U.author_grade&&a.jsxs("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full flex items-center ${R(U.author_grade)}`,children:[a.jsx(Ce,{size:10,className:"mr-1"}),U.author_grade]})]})]}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:B(U.created_at)})]}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:U.content})]},K)):a.jsxs("div",{className:"text-center py-6",children:[a.jsx(di,{className:"mx-auto h-10 w-10 text-gray-400"}),a.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"No comments yet. Add a comment to communicate with the reporter."})]})}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Add a Comment"}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("textarea",{value:x,onChange:U=>w(U.target.value),rows:3,className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Add your comment here..."}),a.jsxs("button",{onClick:N,disabled:!x.trim()||i,className:"flex-shrink-0 flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors duration-200",children:[a.jsx(Eu,{size:16}),a.jsx("span",{children:"Send"})]})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Bug Information"}),a.jsxs("div",{className:"space-y-3 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Category:"}),a.jsx("span",{className:"text-gray-900 dark:text-white capitalize",children:g.category})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Reporter:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:g.reporter_name})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Created:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(g.created_at).toLocaleDateString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Updated:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(g.updated_at).toLocaleDateString()})]})]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Environment"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"OS:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:g.environment.os||"Not specified"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Version:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:g.environment.version||"Not specified"})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Actions"}),a.jsxs("div",{className:"space-y-2",children:[g.status!=="in-progress"&&a.jsxs("button",{onClick:()=>{_(g.id,"in-progress"),m(!1)},className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors duration-200",children:[a.jsx(Wt,{size:16}),a.jsx("span",{children:"Mark In Progress"})]}),g.status!=="resolved"&&a.jsxs("button",{onClick:()=>{_(g.id,"resolved"),m(!1)},className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors duration-200",children:[a.jsx(dt,{size:16}),a.jsx("span",{children:"Mark Resolved"})]}),g.status!=="closed"&&a.jsxs("button",{onClick:()=>{_(g.id,"closed"),m(!1)},className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors duration-200",children:[a.jsx(_e,{size:16}),a.jsx("span",{children:"Close Bug"})]})]})]})]})]})]})]})}),T&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:I}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(Ut,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete Bug Report"}),a.jsx("div",{className:"mt-2",children:a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this bug report? This action cannot be undone."})})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{type:"button",onClick:()=>k(T),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),a.jsx("button",{type:"button",onClick:I,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]})},rD=()=>{const{hasAccess:t}=pt(),[e,r]=M.useState(null),[s,n]=M.useState(null),[i,o]=M.useState(null),[l,c]=M.useState(!1),[d,u]=M.useState(!1),[h,f]=M.useState(Vt()),[p,v]=M.useState(null),[g,j]=M.useState(!1);M.useEffect(()=>{y(),m()},[h]);const y=()=>{u(!0);try{const T=y1();r(T)}catch(T){console.error("Failed to load IP statistics:",T),Z.error("Failed to load IP protection statistics")}finally{u(!1)}},m=()=>{try{const T=er.getSecurityStats();v(T),j(er.getRateLimitStatus("login"))}catch(T){console.error("Failed to load security stats:",T)}},x=T=>{confirm(`Are you sure you want to unblock IP ${T}?`)&&(v1(T)?(er.unblockIP(T),Z.ipUnblocked(T),y(),m(),s===T&&c(!1)):Z.error("Failed to unblock IP"))},w=T=>{const O=b1(T);o(O),n(T),c(!0)},C=()=>{confirm("This will remove old IP records and sessions. Continue?")&&(py(),y(),Z.success("Old records cleaned up successfully"))},_=()=>{const T=!h;g1(T),f(T),T?Z.success("IP Protection has been enabled","Protection Active"):Z.warning("IP Protection has been disabled","Protection Inactive"),y()},N=()=>{const T=!g;er.toggleRateLimit("login",T),j(T),T?Z.success("Login rate limiting has been enabled","Protection Active"):Z.warning("Login rate limiting has been disabled","Protection Inactive"),m()},b=T=>{const O=new Date(T),V=Math.floor((new Date().getTime()-O.getTime())/1e3);return V<60?`${V}s ago`:V<3600?`${Math.floor(V/60)}m ago`:V<86400?`${Math.floor(V/3600)}h ago`:`${Math.floor(V/86400)}d ago`},k=T=>{const O=new Date(T),$=new Date,V=O.getTime()-$.getTime();if(V<=0)return"Expired";const R=Math.floor(V/(1e3*60*60)),J=Math.floor(V%(1e3*60*60)/(1e3*60));return R>24?`${Math.floor(R/24)}d ${R%24}h`:`${R}h ${J}m`},I=T=>T.blockedUntil?new Date(T.blockedUntil)>new Date:!1;return t("Admin")?e?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"IP Protection Dashboard"}),a.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Monitor and manage IP-based protection for guest users."})]}),a.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[a.jsxs("button",{onClick:C,className:"flex items-center space-x-2 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(at,{size:18}),a.jsx("span",{children:"Cleanup Old Records"})]}),a.jsxs("button",{onClick:y,disabled:d,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(no,{size:18,className:d?"animate-spin":""}),a.jsx("span",{children:"Refresh"})]})]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`p-3 rounded-lg ${h?"bg-emerald-100 dark:bg-emerald-900/20":"bg-red-100 dark:bg-red-900/20"}`,children:a.jsx(Ce,{className:`w-6 h-6 ${h?"text-emerald-500":"text-red-500"}`})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"IP Protection System"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:h?"Protection is active - Guest IPs will be blocked for 3 days after session expiry":"Protection is disabled - Guest IPs will not be blocked after session expiry"})]})]}),a.jsx("button",{onClick:_,className:`mt-4 sm:mt-0 flex items-center space-x-2 px-6 py-3 ${h?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700"} text-white rounded-lg font-medium transition-colors duration-200`,children:h?a.jsxs(a.Fragment,{children:[a.jsx(Du,{size:20}),a.jsx("span",{children:"Protection Enabled"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Hl,{size:20}),a.jsx("span",{children:"Protection Disabled"})]})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`p-3 rounded-lg ${g?"bg-emerald-100 dark:bg-emerald-900/20":"bg-red-100 dark:bg-red-900/20"}`,children:a.jsx(Ua,{className:`w-6 h-6 ${g?"text-emerald-500":"text-red-500"}`})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Login Rate Limiting"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:g?"Rate limiting is active - Too many login attempts will be temporarily blocked":"Rate limiting is disabled - No cooldown for failed login attempts"})]})]}),a.jsx("button",{onClick:N,className:`mt-4 sm:mt-0 flex items-center space-x-2 px-6 py-3 ${g?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700"} text-white rounded-lg font-medium transition-colors duration-200`,children:g?a.jsxs(a.Fragment,{children:[a.jsx(Du,{size:20}),a.jsx("span",{children:"Rate Limiting Enabled"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Hl,{size:20}),a.jsx("span",{children:"Rate Limiting Disabled"})]})})]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-6",children:[{title:"Tracked IPs",value:e.totalTrackedIPs,icon:Qr,color:"bg-blue-500",description:"Total IPs in system"},{title:"Blocked IPs",value:e.blockedIPs,icon:ln,color:"bg-red-500",description:"Currently blocked"},{title:"Sessions Today",value:e.guestSessionsToday,icon:wr,color:"bg-emerald-500",description:"Guest sessions today"},{title:"Unique IPs Today",value:e.uniqueIPsToday,icon:Wl,color:"bg-purple-500",description:"Different IPs today"}].map((T,O)=>{const $=T.icon;return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:T.title}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:T.value}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:T.description})]}),a.jsx("div",{className:`p-3 rounded-lg ${T.color} bg-opacity-10`,children:a.jsx($,{className:`w-6 h-6 ${T.color.replace("bg-","text-")}`})})]})},O)})}),p&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(ef,{className:"w-5 h-5 text-blue-500"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Security Settings"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Rate Limiting Configuration"}),a.jsx("div",{className:"space-y-3",children:Object.entries(p.rateLimitConfigs||{}).map(([T,O])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:T}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[O.maxRequests," requests / ",Math.round(O.windowMs/1e3),"s"]})]}),a.jsx("button",{onClick:()=>{er.toggleRateLimit(T,!O.enabled),m(),T==="login"&&j(!O.enabled)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${O.enabled?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${O.enabled?"translate-x-6":"translate-x-1"}`})})]},T))})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Security Statistics"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Events"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p.totalEvents})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Blocked Requests"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p.blockedRequests})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Critical Events"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p.criticalEvents})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Recent Events (1h)"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p.recentEvents})]})]})]})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Ce,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Security Configuration"}),a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["You can enable or disable various security features above. Login rate limiting is currently",a.jsx("span",{className:`font-medium ${g?" text-emerald-600 dark:text-emerald-400":" text-red-600 dark:text-red-400"}`,children:g?" enabled":" disabled"}),"."]})]})]})})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"IP Records"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Recent IP addresses and their protection status"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"IP Address"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Attempts"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Last Session"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Block Expires"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.records.map(T=>{const O=I(T);return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Qr,{size:16,className:"text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:T.ip})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex items-center space-x-2",children:O?a.jsxs(a.Fragment,{children:[a.jsx(ln,{size:16,className:"text-red-500"}),a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400 rounded-full",children:"Blocked"})]}):a.jsxs(a.Fragment,{children:[a.jsx(dt,{size:16,className:"text-emerald-500"}),a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400 rounded-full",children:"Active"})]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(at,{size:16,className:"text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:T.attemptCount})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Wt,{size:16,className:"text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:b(T.lastGuestSession)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T.blockedUntil?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(is,{size:16,className:"text-amber-500"}),a.jsx("span",{className:"text-sm text-amber-600 dark:text-amber-400",children:k(T.blockedUntil)})]}):a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>w(T.ip),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",title:"View Details",children:a.jsx(Gt,{size:16})}),O&&a.jsx("button",{onClick:()=>x(T.ip),className:"p-2 text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors duration-200",title:"Unblock IP",children:a.jsx(Hp,{size:16})})]})})]},T.ip)})})]})}),e.records.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ce,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No IP records"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"IP records will appear here as guest sessions are created."})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Guest Sessions"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Latest guest sessions and their details"})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[e.recentSessions.map((T,O)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`p-2 rounded-lg ${T.expired?"bg-red-100 dark:bg-red-900/20":"bg-emerald-100 dark:bg-emerald-900/20"}`,children:T.expired?a.jsx(_e,{className:"w-5 h-5 text-red-500"}):a.jsx(dt,{className:"w-5 h-5 text-emerald-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:T.ip}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Started: ",b(T.startTime),T.endTime&&`  Ended: ${b(T.endTime)}`]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T.expired?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400"}`,children:T.expired?"Expired":"Active"}),a.jsx("button",{onClick:()=>w(T.ip),className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:a.jsx(Gt,{size:14})})]})]},T.id)),e.recentSessions.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(wr,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No recent sessions"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Guest sessions will appear here as they are created."})]})]})})]}),l&&i&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>c(!1)}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ce,{className:"w-6 h-6 text-blue-500"}),a.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["IP Details: ",i.ip]})]}),a.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(_e,{size:24})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Status"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current Status"}),a.jsx("div",{className:"flex items-center space-x-2 mt-1",children:I(i)?a.jsxs(a.Fragment,{children:[a.jsx(ln,{size:16,className:"text-red-500"}),a.jsx("span",{className:"text-red-600 dark:text-red-400 font-medium",children:"Blocked"})]}):a.jsxs(a.Fragment,{children:[a.jsx(dt,{size:16,className:"text-emerald-500"}),a.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:"Active"})]})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Block Expires"}),a.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:i.blockedUntil?k(i.blockedUntil):"Not blocked"})]})]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Activity"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Attempts"}),a.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:i.attemptCount})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last Session"}),a.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:b(i.lastGuestSession)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"First Attempt"}),a.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:b(i.firstAttempt)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Location"}),a.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:i.location||"Unknown"})]})]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Technical Details"}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"User Agent"}),a.jsx("p",{className:"text-xs text-gray-900 dark:text-white font-mono mt-1 break-all",children:i.userAgent||"Not available"})]})})]}),I(i)&&a.jsx("div",{className:"flex justify-end space-x-3",children:a.jsxs("button",{onClick:()=>{x(i.ip),c(!1)},className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors duration-200",children:[a.jsx(Hp,{size:16}),a.jsx("span",{children:"Unblock IP"})]})})]})]})]})})]}):a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Xr,{className:"mx-auto h-12 w-12 text-amber-500"}),a.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:"Access Restricted"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You need Admin privileges to access IP protection dashboard."})]})})},sD=({isOpen:t,onClose:e})=>{const{signIn:r,signInAsGuest:s,loading:n,error:i}=pt(),[o,l]=M.useState("signin"),[c,d]=M.useState({email:"",password:"",adminToken:""}),[u,h]=M.useState(null),[f,p]=M.useState(""),[v,g]=M.useState(!1),[j,y]=M.useState(Vt()),[m,x]=M.useState(null),[w,C]=M.useState(null);M.useEffect(()=>{t&&(N(),_())},[t]),M.useEffect(()=>{y(Vt())},[t,o]),M.useEffect(()=>{i&&C(i)},[i]);const _=()=>{const O=localStorage.getItem("login_cooldown");if(O)try{const{until:$}=JSON.parse(O),V=Date.now();if($>V){x(Math.ceil(($-V)/1e3));const R=setInterval(()=>{x(J=>J===null||J<=1?(clearInterval(R),localStorage.removeItem("login_cooldown"),null):J-1)},1e3);return()=>clearInterval(R)}else localStorage.removeItem("login_cooldown")}catch($){console.error("Failed to parse login cooldown:",$),localStorage.removeItem("login_cooldown")}},N=async()=>{g(!0);try{const O=await rf();p(O);const $=ql(O);h($)}catch(O){console.error("Failed to check IP status:",O)}finally{g(!1)}};if(!t)return null;const b=async O=>{O.preventDefault(),C(null);try{if(m!==null){T();return}if(o==="guest"){const $=ql(f);if($.blocked){h($);return}await s()}else await r(c.email,c.password,c.adminToken);e()}catch($){if(C($.message||"Authentication failed"),console.error("Auth error:",$),$.message&&$.message.includes("Rate limit exceeded")){const V=$.message.match(/(\d+) seconds/);if(V&&V[1]){const R=parseInt(V[1],10),J=Math.min(30,R),P=Date.now()+J*1e3;localStorage.setItem("login_cooldown",JSON.stringify({until:P})),x(J)}}}},k=c.email.includes("admin")||c.adminToken,I=async(O,$,V)=>{try{if(C(null),m!==null){T();return}await r(O,$,V),e()}catch(R){if(C(R instanceof Error?R.message:"Quick login failed"),console.error("Quick login error:",R),R instanceof Error&&R.message.includes("Rate limit exceeded")){const J=R.message.match(/(\d+) seconds/);if(J&&J[1]){const P=parseInt(J[1],10),L=Math.min(30,P),B=Date.now()+L*1e3;localStorage.setItem("login_cooldown",JSON.stringify({until:B})),x(L)}}}},T=()=>{C(`Too many login attempts. Please try again in ${m} seconds.`)};return a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:e}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:o==="guest"?"Guest Access":"Sign In"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(_e,{size:24})})]}),w&&a.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Lt,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",id:"login-error",children:w})]})}),m!==null&&a.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Wt,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["Too many login attempts. Please try again in ",m," seconds."]})]})}),a.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>l("signin"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors duration-200 ${o==="signin"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Sign In"}),a.jsx("button",{onClick:()=>l("guest"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors duration-200 ${o==="guest"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Guest (5 min)"})]}),o==="guest"?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Wt,{className:"text-blue-600 dark:text-blue-400 w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"5-Minute Guest Access"}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Get temporary access to download test clients and view patch notes. Your session will expire after 5 minutes."})]})]})}),a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Ce,{className:"text-amber-600 dark:text-amber-400 w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h4",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:["IP Protection ",j?"Active":"Inactive"]}),j?a.jsx(Du,{className:"w-5 h-5 text-emerald-500"}):a.jsx(Hl,{className:"w-5 h-5 text-red-500"})]}),a.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:j?"To prevent abuse, your IP address will be blocked for 3 days after your guest session expires.":"IP protection is currently disabled. Your IP will not be blocked after session expiry."}),f&&a.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[a.jsx(Qr,{size:14,className:"text-amber-600 dark:text-amber-400"}),a.jsxs("span",{className:"text-xs font-mono text-amber-800 dark:text-amber-200",children:["Your IP: ",f]})]})]})]})}),(u==null?void 0:u.blocked)&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Lt,{className:"text-red-600 dark:text-red-400 w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Access Restricted"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:u.reason}),u.unblockTime&&a.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2",children:["Block expires: ",new Date(u.unblockTime).toLocaleString()]})]})]})}),a.jsxs("button",{onClick:b,disabled:n||v||(u==null?void 0:u.blocked)||!1||m!==null,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(Wt,{size:18}),a.jsx("span",{children:n?"Creating Guest Session...":v?"Checking IP Status...":u!=null&&u.blocked?"IP Blocked":m!==null?`Try again in ${m}s`:"Start Guest Session"})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Quick Login (Demo):"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("button",{onClick:()=>I("admin@prodomo.local","admin123","T0KEN"),disabled:n||m!==null,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-red-100 hover:bg-red-200 dark:bg-red-900/20 dark:hover:bg-red-900/30 text-red-800 dark:text-red-200 rounded-lg text-sm font-medium transition-colors duration-200 disabled:opacity-50",children:[a.jsx(Ce,{size:16}),a.jsx("span",{children:n?"Signing in...":m!==null?`Cooldown: ${m}s`:"Admin Login"})]}),a.jsxs("button",{onClick:()=>I("support@prodomo.local","support123"),disabled:n||m!==null,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-amber-100 hover:bg-amber-200 dark:bg-amber-900/20 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-200 rounded-lg text-sm font-medium transition-colors duration-200 disabled:opacity-50",children:[a.jsx(As,{size:16}),a.jsx("span",{children:n?"Signing in...":m!==null?`Cooldown: ${m}s`:"Support Login"})]}),a.jsxs("button",{onClick:()=>I("v4@prodomo.local","v4pass"),disabled:n||m!==null,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-lg text-sm font-medium transition-colors duration-200 disabled:opacity-50",children:[a.jsx(ci,{size:16}),a.jsx("span",{children:n?"Signing in...":m!==null?`Cooldown: ${m}s`:"V4 User Login"})]}),a.jsxs("button",{onClick:()=>I("v5@prodomo.local","v5pass"),disabled:n||m!==null,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-purple-100 hover:bg-purple-200 dark:bg-purple-900/20 dark:hover:bg-purple-900/30 text-purple-800 dark:text-purple-200 rounded-lg text-sm font-medium transition-colors duration-200 disabled:opacity-50",children:[a.jsx(ci,{size:16}),a.jsx("span",{children:n?"Signing in...":m!==null?`Cooldown: ${m}s`:"V5 User Login"})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Or sign in manually"})})]}),a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"email",value:c.email,onChange:O=>d({...c,email:O.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ua,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"password",value:c.password,onChange:O=>d({...c,password:O.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password",required:!0})]})]}),k&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Token"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"password",value:c.adminToken,onChange:O=>d({...c,adminToken:O.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter admin token (T0KEN)",required:!0})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Admin accounts require a special token for security"})]}),a.jsx("button",{type:"submit",disabled:n||m!==null,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200",children:a.jsx("span",{children:n?"Signing in...":m!==null?`Try again in ${m}s`:"Sign In"})}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Only admins can create new accounts. Contact an administrator for access."})})]})]})]})]})})},nD=()=>{const{user:t,timeRemaining:e,signOut:r}=pt(),s=Vt();if(!(t!=null&&t.is_guest)||e===null)return null;const n=Math.floor(e/6e4),i=Math.floor(e%6e4/1e3),o=e<6e4;return a.jsx("div",{className:`fixed top-4 right-4 z-40 px-4 py-3 rounded-lg shadow-lg border ${o?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200"}`,children:a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[o?a.jsx(Xr,{className:"w-4 h-4"}):a.jsx(Wt,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm font-medium",children:["Guest Session: ",n,":",i.toString().padStart(2,"0")]}),a.jsx("button",{onClick:r,className:"text-xs underline hover:no-underline",children:"End Session"})]}),a.jsx("div",{className:"flex items-center space-x-2 text-xs",children:s?a.jsxs(a.Fragment,{children:[a.jsx(Ce,{className:"w-3 h-3"}),a.jsx("span",{className:"text-amber-700 dark:text-amber-300",children:"IP will be blocked for 3 days after session expires"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Hl,{className:"w-3 h-3"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"IP protection is disabled"})]})})]})})},iD=()=>{const{isAuthenticated:t,user:e}=pt(),{initializeCleanData:r}=Xt(),[s,n]=M.useState("dashboard"),[i,o]=M.useState(!1),[l,c]=M.useState(void 0),[d,u]=M.useState(!1);M.useEffect(()=>{d||(localStorage.getItem("prodomo_users")||(console.log("Initializing clean data..."),r()),u(!0))},[d,r]),M.useEffect(()=>{const v=g=>{g.detail&&g.detail.userId&&c(g.detail.userId)};return document.addEventListener("viewProfile",v),()=>{document.removeEventListener("viewProfile",v)}},[]);const h=v=>{c(v),n("profile")},f=()=>{c(void 0),n("dashboard")},p=()=>{switch(s){case"dashboard":return a.jsx(lm,{activeSection:s,setActiveSection:n});case"downloads":return a.jsx(Bj,{});case"documentation":return a.jsx(Hj,{});case"file-manager":return a.jsx(V_,{});case"patch-notes":return a.jsx(Wj,{});case"analytics":return a.jsx(X5,{});case"user-management":return a.jsx(Q5,{onViewProfile:h});case"activity-logs":return a.jsx(Z5,{});case"bug-report":return a.jsx(eD,{});case"bug-management":return a.jsx(tD,{});case"ip-protection":return a.jsx(rD,{});case"profile":return a.jsx(Vj,{userId:l,onBack:l?f:void 0});case"settings":return a.jsx(qj,{});default:return a.jsx(lm,{activeSection:s,setActiveSection:n})}};return t?a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[a.jsxs("div",{className:"flex",children:[a.jsx(Uj,{activeSection:s,setActiveSection:n}),a.jsx("main",{className:"flex-1 lg:ml-64",children:a.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:p()})})]}),a.jsx(nD,{})]}):a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"max-w-md w-full mx-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-8 text-center",children:[a.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full w-16 h-16 mx-auto mb-6 flex items-center justify-center",children:a.jsx(Cu,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome to Prodomo"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Access server downloads, patch notes, and more. Sign in to continue or try our 5-minute guest access."}),a.jsxs("button",{onClick:()=>o(!0),className:"w-full flex items-center justify-center space-x-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:[a.jsx(Cu,{size:20}),a.jsx("span",{children:"Get Started"})]}),a.jsxs("div",{className:"mt-6 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[a.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200 font-medium",children:[" IP Protection ",Vt()?"Active":"Inactive"]}),a.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-300 mt-1",children:["Guest accounts expire after 5 minutes. ",Vt()?"Your IP will be blocked for 3 days after session expiry to prevent abuse.":"IP protection is currently disabled."]})]})]})})}),a.jsx(sD,{isOpen:i,onClose:()=>o(!1)})]})};function aD(){return a.jsx(p1,{children:a.jsx(Fj,{children:a.jsx(iD,{})})})}const $g=localStorage.getItem("prodomo_theme");$g!==null?JSON.parse($g)?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.documentElement.classList.add("dark");setTimeout(()=>{document.documentElement.classList.add("theme-transition")},100);Zx(document.getElementById("root")).render(a.jsx(M.StrictMode,{children:a.jsx(aD,{})}));
